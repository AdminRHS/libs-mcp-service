#!/usr/bin/env node
var lu=Object.create;var Pa=Object.defineProperty;var du=Object.getOwnPropertyDescriptor;var fu=Object.getOwnPropertyNames;var pu=Object.getPrototypeOf,hu=Object.prototype.hasOwnProperty;var B=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),mu=(a,e)=>{for(var r in e)Pa(a,r,{get:e[r],enumerable:!0})},vu=(a,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of fu(e))!hu.call(a,t)&&t!==r&&Pa(a,t,{get:()=>e[t],enumerable:!(s=du(e,t))||s.enumerable});return a};var gu=(a,e,r)=>(r=a!=null?lu(pu(a)):{},vu(e||!a||!a.__esModule?Pa(r,"default",{value:a,enumerable:!0}):r,a));var En=B((Kr,bn)=>{(function(a,e){typeof Kr=="object"&&typeof bn<"u"?e(Kr):typeof define=="function"&&define.amd?define(["exports"],e):e(a.URI=a.URI||{})})(Kr,function(a){"use strict";function e(){for(var h=arguments.length,f=Array(h),v=0;v<h;v++)f[v]=arguments[v];if(f.length>1){f[0]=f[0].slice(0,-1);for(var E=f.length-1,x=1;x<E;++x)f[x]=f[x].slice(1,-1);return f[E]=f[E].slice(1),f.join("")}else return f[0]}function r(h){return"(?:"+h+")"}function s(h){return h===void 0?"undefined":h===null?"null":Object.prototype.toString.call(h).split(" ").pop().split("]").shift().toLowerCase()}function t(h){return h.toUpperCase()}function n(h){return h!=null?h instanceof Array?h:typeof h.length!="number"||h.split||h.setInterval||h.call?[h]:Array.prototype.slice.call(h):[]}function o(h,f){var v=h;if(f)for(var E in f)v[E]=f[E];return v}function i(h){var f="[A-Za-z]",v="[\\x0D]",E="[0-9]",x="[\\x22]",N=e(E,"[A-Fa-f]"),K="[\\x0A]",re="[\\x20]",ie=r(r("%[EFef]"+N+"%"+N+N+"%"+N+N)+"|"+r("%[89A-Fa-f]"+N+"%"+N+N)+"|"+r("%"+N+N)),be="[\\:\\/\\?\\#\\[\\]\\@]",te="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",pe=e(be,te),Ee=h?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",le=h?"[\\uE000-\\uF8FF]":"[]",se=e(f,E,"[\\-\\.\\_\\~]",Ee),he=r(f+e(f,E,"[\\+\\-\\.]")+"*"),ce=r(r(ie+"|"+e(se,te,"[\\:]"))+"*"),Ot=r(r("25[0-5]")+"|"+r("2[0-4]"+E)+"|"+r("1"+E+E)+"|"+r("[1-9]"+E)+"|"+E),Ue=r(r("25[0-5]")+"|"+r("2[0-4]"+E)+"|"+r("1"+E+E)+"|"+r("0?[1-9]"+E)+"|0?0?"+E),ze=r(Ue+"\\."+Ue+"\\."+Ue+"\\."+Ue),ue=r(N+"{1,4}"),Le=r(r(ue+"\\:"+ue)+"|"+ze),Qe=r(r(ue+"\\:")+"{6}"+Le),rt=r("\\:\\:"+r(ue+"\\:")+"{5}"+Le),Dt=r(r(ue)+"?\\:\\:"+r(ue+"\\:")+"{4}"+Le),lt=r(r(r(ue+"\\:")+"{0,1}"+ue)+"?\\:\\:"+r(ue+"\\:")+"{3}"+Le),mr=r(r(r(ue+"\\:")+"{0,2}"+ue)+"?\\:\\:"+r(ue+"\\:")+"{2}"+Le),jr=r(r(r(ue+"\\:")+"{0,3}"+ue)+"?\\:\\:"+ue+"\\:"+Le),Ar=r(r(r(ue+"\\:")+"{0,4}"+ue)+"?\\:\\:"+Le),Wt=r(r(r(ue+"\\:")+"{0,5}"+ue)+"?\\:\\:"+ue),Yt=r(r(r(ue+"\\:")+"{0,6}"+ue)+"?\\:\\:"),dt=r([Qe,rt,Dt,lt,mr,jr,Ar,Wt,Yt].join("|")),Xt=r(r(se+"|"+ie)+"+"),xa=r(dt+"\\%25"+Xt),$t=r(dt+r("\\%25|\\%(?!"+N+"{2})")+Xt),au=r("[vV]"+N+"+\\."+e(se,te,"[\\:]")+"+"),su=r("\\["+r($t+"|"+dt+"|"+au)+"\\]"),Fs=r(r(ie+"|"+e(se,te))+"*"),vr=r(su+"|"+ze+"(?!"+Fs+")|"+Fs),gr=r(E+"*"),Us=r(r(ce+"@")+"?"+vr+r("\\:"+gr)+"?"),yr=r(ie+"|"+e(se,te,"[\\:\\@]")),nu=r(yr+"*"),Ls=r(yr+"+"),iu=r(r(ie+"|"+e(se,te,"[\\@]"))+"+"),ft=r(r("\\/"+nu)+"*"),er=r("\\/"+r(Ls+ft)+"?"),Sa=r(iu+ft),Cr=r(Ls+ft),tr="(?!"+yr+")",dp=r(ft+"|"+er+"|"+Sa+"|"+Cr+"|"+tr),rr=r(r(yr+"|"+e("[\\/\\?]",le))+"*"),_r=r(r(yr+"|[\\/\\?]")+"*"),Ms=r(r("\\/\\/"+Us+ft)+"|"+er+"|"+Cr+"|"+tr),ou=r(he+"\\:"+Ms+r("\\?"+rr)+"?"+r("\\#"+_r)+"?"),cu=r(r("\\/\\/"+Us+ft)+"|"+er+"|"+Sa+"|"+tr),uu=r(cu+r("\\?"+rr)+"?"+r("\\#"+_r)+"?"),fp=r(ou+"|"+uu),pp=r(he+"\\:"+Ms+r("\\?"+rr)+"?"),hp="^("+he+")\\:"+r(r("\\/\\/("+r("("+ce+")@")+"?("+vr+")"+r("\\:("+gr+")")+"?)")+"?("+ft+"|"+er+"|"+Cr+"|"+tr+")")+r("\\?("+rr+")")+"?"+r("\\#("+_r+")")+"?$",mp="^(){0}"+r(r("\\/\\/("+r("("+ce+")@")+"?("+vr+")"+r("\\:("+gr+")")+"?)")+"?("+ft+"|"+er+"|"+Sa+"|"+tr+")")+r("\\?("+rr+")")+"?"+r("\\#("+_r+")")+"?$",vp="^("+he+")\\:"+r(r("\\/\\/("+r("("+ce+")@")+"?("+vr+")"+r("\\:("+gr+")")+"?)")+"?("+ft+"|"+er+"|"+Cr+"|"+tr+")")+r("\\?("+rr+")")+"?$",gp="^"+r("\\#("+_r+")")+"?$",yp="^"+r("("+ce+")@")+"?("+vr+")"+r("\\:("+gr+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",f,E,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",se,te),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",se,te),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",se,te),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",se,te),"g"),NOT_QUERY:new RegExp(e("[^\\%]",se,te,"[\\:\\@\\/\\?]",le),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",se,te,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",se,te),"g"),UNRESERVED:new RegExp(se,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",se,pe),"g"),PCT_ENCODED:new RegExp(ie,"g"),IPV4ADDRESS:new RegExp("^("+ze+")$"),IPV6ADDRESS:new RegExp("^\\[?("+dt+")"+r(r("\\%25|\\%(?!"+N+"{2})")+"("+Xt+")")+"?\\]?$")}}var l=i(!1),u=i(!0),p=function(){function h(f,v){var E=[],x=!0,N=!1,K=void 0;try{for(var re=f[Symbol.iterator](),ie;!(x=(ie=re.next()).done)&&(E.push(ie.value),!(v&&E.length===v));x=!0);}catch(be){N=!0,K=be}finally{try{!x&&re.return&&re.return()}finally{if(N)throw K}}return E}return function(f,v){if(Array.isArray(f))return f;if(Symbol.iterator in Object(f))return h(f,v);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=function(h){if(Array.isArray(h)){for(var f=0,v=Array(h.length);f<h.length;f++)v[f]=h[f];return v}else return Array.from(h)},_=2147483647,d=36,y=1,b=26,g=38,S=700,I=72,P=128,R="-",O=/^xn--/,D=/[^\0-\x7E]/,Q=/[\x2E\u3002\uFF0E\uFF61]/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},$=d-y,M=Math.floor,U=String.fromCharCode;function q(h){throw new RangeError(L[h])}function T(h,f){for(var v=[],E=h.length;E--;)v[E]=f(h[E]);return v}function j(h,f){var v=h.split("@"),E="";v.length>1&&(E=v[0]+"@",h=v[1]),h=h.replace(Q,".");var x=h.split("."),N=T(x,f).join(".");return E+N}function F(h){for(var f=[],v=0,E=h.length;v<E;){var x=h.charCodeAt(v++);if(x>=55296&&x<=56319&&v<E){var N=h.charCodeAt(v++);(N&64512)==56320?f.push(((x&1023)<<10)+(N&1023)+65536):(f.push(x),v--)}else f.push(x)}return f}var oe=function(f){return String.fromCodePoint.apply(String,m(f))},Y=function(f){return f-48<10?f-22:f-65<26?f-65:f-97<26?f-97:d},ee=function(f,v){return f+22+75*(f<26)-((v!=0)<<5)},W=function(f,v,E){var x=0;for(f=E?M(f/S):f>>1,f+=M(f/v);f>$*b>>1;x+=d)f=M(f/$);return M(x+($+1)*f/(f+g))},V=function(f){var v=[],E=f.length,x=0,N=P,K=I,re=f.lastIndexOf(R);re<0&&(re=0);for(var ie=0;ie<re;++ie)f.charCodeAt(ie)>=128&&q("not-basic"),v.push(f.charCodeAt(ie));for(var be=re>0?re+1:0;be<E;){for(var te=x,pe=1,Ee=d;;Ee+=d){be>=E&&q("invalid-input");var le=Y(f.charCodeAt(be++));(le>=d||le>M((_-x)/pe))&&q("overflow"),x+=le*pe;var se=Ee<=K?y:Ee>=K+b?b:Ee-K;if(le<se)break;var he=d-se;pe>M(_/he)&&q("overflow"),pe*=he}var ce=v.length+1;K=W(x-te,ce,te==0),M(x/ce)>_-N&&q("overflow"),N+=M(x/ce),x%=ce,v.splice(x++,0,N)}return String.fromCodePoint.apply(String,v)},me=function(f){var v=[];f=F(f);var E=f.length,x=P,N=0,K=I,re=!0,ie=!1,be=void 0;try{for(var te=f[Symbol.iterator](),pe;!(re=(pe=te.next()).done);re=!0){var Ee=pe.value;Ee<128&&v.push(U(Ee))}}catch($t){ie=!0,be=$t}finally{try{!re&&te.return&&te.return()}finally{if(ie)throw be}}var le=v.length,se=le;for(le&&v.push(R);se<E;){var he=_,ce=!0,Ot=!1,Ue=void 0;try{for(var ze=f[Symbol.iterator](),ue;!(ce=(ue=ze.next()).done);ce=!0){var Le=ue.value;Le>=x&&Le<he&&(he=Le)}}catch($t){Ot=!0,Ue=$t}finally{try{!ce&&ze.return&&ze.return()}finally{if(Ot)throw Ue}}var Qe=se+1;he-x>M((_-N)/Qe)&&q("overflow"),N+=(he-x)*Qe,x=he;var rt=!0,Dt=!1,lt=void 0;try{for(var mr=f[Symbol.iterator](),jr;!(rt=(jr=mr.next()).done);rt=!0){var Ar=jr.value;if(Ar<x&&++N>_&&q("overflow"),Ar==x){for(var Wt=N,Yt=d;;Yt+=d){var dt=Yt<=K?y:Yt>=K+b?b:Yt-K;if(Wt<dt)break;var Xt=Wt-dt,xa=d-dt;v.push(U(ee(dt+Xt%xa,0))),Wt=M(Xt/xa)}v.push(U(ee(Wt,0))),K=W(N,Qe,se==le),N=0,++se}}}catch($t){Dt=!0,lt=$t}finally{try{!rt&&mr.return&&mr.return()}finally{if(Dt)throw lt}}++N,++x}return v.join("")},Ie=function(f){return j(f,function(v){return O.test(v)?V(v.slice(4).toLowerCase()):v})},$e=function(f){return j(f,function(v){return D.test(v)?"xn--"+me(v):v})},ae={version:"2.1.0",ucs2:{decode:F,encode:oe},decode:V,encode:me,toASCII:$e,toUnicode:Ie},ye={};function we(h){var f=h.charCodeAt(0),v=void 0;return f<16?v="%0"+f.toString(16).toUpperCase():f<128?v="%"+f.toString(16).toUpperCase():f<2048?v="%"+(f>>6|192).toString(16).toUpperCase()+"%"+(f&63|128).toString(16).toUpperCase():v="%"+(f>>12|224).toString(16).toUpperCase()+"%"+(f>>6&63|128).toString(16).toUpperCase()+"%"+(f&63|128).toString(16).toUpperCase(),v}function je(h){for(var f="",v=0,E=h.length;v<E;){var x=parseInt(h.substr(v+1,2),16);if(x<128)f+=String.fromCharCode(x),v+=3;else if(x>=194&&x<224){if(E-v>=6){var N=parseInt(h.substr(v+4,2),16);f+=String.fromCharCode((x&31)<<6|N&63)}else f+=h.substr(v,6);v+=6}else if(x>=224){if(E-v>=9){var K=parseInt(h.substr(v+4,2),16),re=parseInt(h.substr(v+7,2),16);f+=String.fromCharCode((x&15)<<12|(K&63)<<6|re&63)}else f+=h.substr(v,9);v+=9}else f+=h.substr(v,3),v+=3}return f}function gt(h,f){function v(E){var x=je(E);return x.match(f.UNRESERVED)?x:E}return h.scheme&&(h.scheme=String(h.scheme).replace(f.PCT_ENCODED,v).toLowerCase().replace(f.NOT_SCHEME,"")),h.userinfo!==void 0&&(h.userinfo=String(h.userinfo).replace(f.PCT_ENCODED,v).replace(f.NOT_USERINFO,we).replace(f.PCT_ENCODED,t)),h.host!==void 0&&(h.host=String(h.host).replace(f.PCT_ENCODED,v).toLowerCase().replace(f.NOT_HOST,we).replace(f.PCT_ENCODED,t)),h.path!==void 0&&(h.path=String(h.path).replace(f.PCT_ENCODED,v).replace(h.scheme?f.NOT_PATH:f.NOT_PATH_NOSCHEME,we).replace(f.PCT_ENCODED,t)),h.query!==void 0&&(h.query=String(h.query).replace(f.PCT_ENCODED,v).replace(f.NOT_QUERY,we).replace(f.PCT_ENCODED,t)),h.fragment!==void 0&&(h.fragment=String(h.fragment).replace(f.PCT_ENCODED,v).replace(f.NOT_FRAGMENT,we).replace(f.PCT_ENCODED,t)),h}function ct(h){return h.replace(/^0*(.*)/,"$1")||"0"}function _e(h,f){var v=h.match(f.IPV4ADDRESS)||[],E=p(v,2),x=E[1];return x?x.split(".").map(ct).join("."):h}function ve(h,f){var v=h.match(f.IPV6ADDRESS)||[],E=p(v,3),x=E[1],N=E[2];if(x){for(var K=x.toLowerCase().split("::").reverse(),re=p(K,2),ie=re[0],be=re[1],te=be?be.split(":").map(ct):[],pe=ie.split(":").map(ct),Ee=f.IPV4ADDRESS.test(pe[pe.length-1]),le=Ee?7:8,se=pe.length-le,he=Array(le),ce=0;ce<le;++ce)he[ce]=te[ce]||pe[se+ce]||"";Ee&&(he[le-1]=_e(he[le-1],f));var Ot=he.reduce(function(Qe,rt,Dt){if(!rt||rt==="0"){var lt=Qe[Qe.length-1];lt&&lt.index+lt.length===Dt?lt.length++:Qe.push({index:Dt,length:1})}return Qe},[]),Ue=Ot.sort(function(Qe,rt){return rt.length-Qe.length})[0],ze=void 0;if(Ue&&Ue.length>1){var ue=he.slice(0,Ue.index),Le=he.slice(Ue.index+Ue.length);ze=ue.join(":")+"::"+Le.join(":")}else ze=he.join(":");return N&&(ze+="%"+N),ze}else return h}var Rt=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Oe="".match(/(){0}/)[1]===void 0;function ne(h){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v={},E=f.iri!==!1?u:l;f.reference==="suffix"&&(h=(f.scheme?f.scheme+":":"")+"//"+h);var x=h.match(Rt);if(x){Oe?(v.scheme=x[1],v.userinfo=x[3],v.host=x[4],v.port=parseInt(x[5],10),v.path=x[6]||"",v.query=x[7],v.fragment=x[8],isNaN(v.port)&&(v.port=x[5])):(v.scheme=x[1]||void 0,v.userinfo=h.indexOf("@")!==-1?x[3]:void 0,v.host=h.indexOf("//")!==-1?x[4]:void 0,v.port=parseInt(x[5],10),v.path=x[6]||"",v.query=h.indexOf("?")!==-1?x[7]:void 0,v.fragment=h.indexOf("#")!==-1?x[8]:void 0,isNaN(v.port)&&(v.port=h.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?x[4]:void 0)),v.host&&(v.host=ve(_e(v.host,E),E)),v.scheme===void 0&&v.userinfo===void 0&&v.host===void 0&&v.port===void 0&&!v.path&&v.query===void 0?v.reference="same-document":v.scheme===void 0?v.reference="relative":v.fragment===void 0?v.reference="absolute":v.reference="uri",f.reference&&f.reference!=="suffix"&&f.reference!==v.reference&&(v.error=v.error||"URI is not a "+f.reference+" reference.");var N=ye[(f.scheme||v.scheme||"").toLowerCase()];if(!f.unicodeSupport&&(!N||!N.unicodeSupport)){if(v.host&&(f.domainHost||N&&N.domainHost))try{v.host=ae.toASCII(v.host.replace(E.PCT_ENCODED,je).toLowerCase())}catch(K){v.error=v.error||"Host's domain name can not be converted to ASCII via punycode: "+K}gt(v,l)}else gt(v,E);N&&N.parse&&N.parse(v,f)}else v.error=v.error||"URI can not be parsed.";return v}function yt(h,f){var v=f.iri!==!1?u:l,E=[];return h.userinfo!==void 0&&(E.push(h.userinfo),E.push("@")),h.host!==void 0&&E.push(ve(_e(String(h.host),v),v).replace(v.IPV6ADDRESS,function(x,N,K){return"["+N+(K?"%25"+K:"")+"]"})),(typeof h.port=="number"||typeof h.port=="string")&&(E.push(":"),E.push(String(h.port))),E.length?E.join(""):void 0}var ut=/^\.\.?\//,Tt=/^\/\.(\/|$)/,It=/^\/\.\.(\/|$)/,Re=/^\/?(?:.|\n)*?(?=\/|$)/;function Me(h){for(var f=[];h.length;)if(h.match(ut))h=h.replace(ut,"");else if(h.match(Tt))h=h.replace(Tt,"/");else if(h.match(It))h=h.replace(It,"/"),f.pop();else if(h==="."||h==="..")h="";else{var v=h.match(Re);if(v){var E=v[0];h=h.slice(E.length),f.push(E)}else throw new Error("Unexpected dot segment condition")}return f.join("")}function Ce(h){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=f.iri?u:l,E=[],x=ye[(f.scheme||h.scheme||"").toLowerCase()];if(x&&x.serialize&&x.serialize(h,f),h.host&&!v.IPV6ADDRESS.test(h.host)){if(f.domainHost||x&&x.domainHost)try{h.host=f.iri?ae.toUnicode(h.host):ae.toASCII(h.host.replace(v.PCT_ENCODED,je).toLowerCase())}catch(re){h.error=h.error||"Host's domain name can not be converted to "+(f.iri?"Unicode":"ASCII")+" via punycode: "+re}}gt(h,v),f.reference!=="suffix"&&h.scheme&&(E.push(h.scheme),E.push(":"));var N=yt(h,f);if(N!==void 0&&(f.reference!=="suffix"&&E.push("//"),E.push(N),h.path&&h.path.charAt(0)!=="/"&&E.push("/")),h.path!==void 0){var K=h.path;!f.absolutePath&&(!x||!x.absolutePath)&&(K=Me(K)),N===void 0&&(K=K.replace(/^\/\//,"/%2F")),E.push(K)}return h.query!==void 0&&(E.push("?"),E.push(h.query)),h.fragment!==void 0&&(E.push("#"),E.push(h.fragment)),E.join("")}function Ae(h,f){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},E=arguments[3],x={};return E||(h=ne(Ce(h,v),v),f=ne(Ce(f,v),v)),v=v||{},!v.tolerant&&f.scheme?(x.scheme=f.scheme,x.userinfo=f.userinfo,x.host=f.host,x.port=f.port,x.path=Me(f.path||""),x.query=f.query):(f.userinfo!==void 0||f.host!==void 0||f.port!==void 0?(x.userinfo=f.userinfo,x.host=f.host,x.port=f.port,x.path=Me(f.path||""),x.query=f.query):(f.path?(f.path.charAt(0)==="/"?x.path=Me(f.path):((h.userinfo!==void 0||h.host!==void 0||h.port!==void 0)&&!h.path?x.path="/"+f.path:h.path?x.path=h.path.slice(0,h.path.lastIndexOf("/")+1)+f.path:x.path=f.path,x.path=Me(x.path)),x.query=f.query):(x.path=h.path,f.query!==void 0?x.query=f.query:x.query=h.query),x.userinfo=h.userinfo,x.host=h.host,x.port=h.port),x.scheme=h.scheme),x.fragment=f.fragment,x}function et(h,f,v){var E=o({scheme:"null"},v);return Ce(Ae(ne(h,E),ne(f,E),E,!0),E)}function Fe(h,f){return typeof h=="string"?h=Ce(ne(h,f),f):s(h)==="object"&&(h=ne(Ce(h,f),f)),h}function $r(h,f,v){return typeof h=="string"?h=Ce(ne(h,v),v):s(h)==="object"&&(h=Ce(h,v)),typeof f=="string"?f=Ce(ne(f,v),v):s(f)==="object"&&(f=Ce(f,v)),h===f}function ba(h,f){return h&&h.toString().replace(!f||!f.iri?l.ESCAPE:u.ESCAPE,we)}function Ge(h,f){return h&&h.toString().replace(!f||!f.iri?l.PCT_ENCODED:u.PCT_ENCODED,je)}var pr={scheme:"http",domainHost:!0,parse:function(f,v){return f.host||(f.error=f.error||"HTTP URIs must have a host."),f},serialize:function(f,v){var E=String(f.scheme).toLowerCase()==="https";return(f.port===(E?443:80)||f.port==="")&&(f.port=void 0),f.path||(f.path="/"),f}},Ds={scheme:"https",domainHost:pr.domainHost,parse:pr.parse,serialize:pr.serialize};function $s(h){return typeof h.secure=="boolean"?h.secure:String(h.scheme).toLowerCase()==="wss"}var hr={scheme:"ws",domainHost:!0,parse:function(f,v){var E=f;return E.secure=$s(E),E.resourceName=(E.path||"/")+(E.query?"?"+E.query:""),E.path=void 0,E.query=void 0,E},serialize:function(f,v){if((f.port===($s(f)?443:80)||f.port==="")&&(f.port=void 0),typeof f.secure=="boolean"&&(f.scheme=f.secure?"wss":"ws",f.secure=void 0),f.resourceName){var E=f.resourceName.split("?"),x=p(E,2),N=x[0],K=x[1];f.path=N&&N!=="/"?N:void 0,f.query=K,f.resourceName=void 0}return f.fragment=void 0,f}},js={scheme:"wss",domainHost:hr.domainHost,parse:hr.parse,serialize:hr.serialize},Hc={},Jc=!0,As="[A-Za-z0-9\\-\\.\\_\\~"+(Jc?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",tt="[0-9A-Fa-f]",Bc=r(r("%[EFef]"+tt+"%"+tt+tt+"%"+tt+tt)+"|"+r("%[89A-Fa-f]"+tt+"%"+tt+tt)+"|"+r("%"+tt+tt)),Zc="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Kc="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Gc=e(Kc,'[\\"\\\\]'),Wc="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Yc=new RegExp(As,"g"),Gt=new RegExp(Bc,"g"),Xc=new RegExp(e("[^]",Zc,"[\\.]",'[\\"]',Gc),"g"),Cs=new RegExp(e("[^]",As,Wc),"g"),eu=Cs;function Ea(h){var f=je(h);return f.match(Yc)?f:h}var ks={scheme:"mailto",parse:function(f,v){var E=f,x=E.to=E.path?E.path.split(","):[];if(E.path=void 0,E.query){for(var N=!1,K={},re=E.query.split("&"),ie=0,be=re.length;ie<be;++ie){var te=re[ie].split("=");switch(te[0]){case"to":for(var pe=te[1].split(","),Ee=0,le=pe.length;Ee<le;++Ee)x.push(pe[Ee]);break;case"subject":E.subject=Ge(te[1],v);break;case"body":E.body=Ge(te[1],v);break;default:N=!0,K[Ge(te[0],v)]=Ge(te[1],v);break}}N&&(E.headers=K)}E.query=void 0;for(var se=0,he=x.length;se<he;++se){var ce=x[se].split("@");if(ce[0]=Ge(ce[0]),v.unicodeSupport)ce[1]=Ge(ce[1],v).toLowerCase();else try{ce[1]=ae.toASCII(Ge(ce[1],v).toLowerCase())}catch(Ot){E.error=E.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ot}x[se]=ce.join("@")}return E},serialize:function(f,v){var E=f,x=n(f.to);if(x){for(var N=0,K=x.length;N<K;++N){var re=String(x[N]),ie=re.lastIndexOf("@"),be=re.slice(0,ie).replace(Gt,Ea).replace(Gt,t).replace(Xc,we),te=re.slice(ie+1);try{te=v.iri?ae.toUnicode(te):ae.toASCII(Ge(te,v).toLowerCase())}catch(se){E.error=E.error||"Email address's domain name can not be converted to "+(v.iri?"Unicode":"ASCII")+" via punycode: "+se}x[N]=be+"@"+te}E.path=x.join(",")}var pe=f.headers=f.headers||{};f.subject&&(pe.subject=f.subject),f.body&&(pe.body=f.body);var Ee=[];for(var le in pe)pe[le]!==Hc[le]&&Ee.push(le.replace(Gt,Ea).replace(Gt,t).replace(Cs,we)+"="+pe[le].replace(Gt,Ea).replace(Gt,t).replace(eu,we));return Ee.length&&(E.query=Ee.join("&")),E}},tu=/^([^\:]+)\:(.*)/,Ns={scheme:"urn",parse:function(f,v){var E=f.path&&f.path.match(tu),x=f;if(E){var N=v.scheme||x.scheme||"urn",K=E[1].toLowerCase(),re=E[2],ie=N+":"+(v.nid||K),be=ye[ie];x.nid=K,x.nss=re,x.path=void 0,be&&(x=be.parse(x,v))}else x.error=x.error||"URN can not be parsed.";return x},serialize:function(f,v){var E=v.scheme||f.scheme||"urn",x=f.nid,N=E+":"+(v.nid||x),K=ye[N];K&&(f=K.serialize(f,v));var re=f,ie=f.nss;return re.path=(x||v.nid)+":"+ie,re}},ru=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,qs={scheme:"urn:uuid",parse:function(f,v){var E=f;return E.uuid=E.nss,E.nss=void 0,!v.tolerant&&(!E.uuid||!E.uuid.match(ru))&&(E.error=E.error||"UUID is not valid."),E},serialize:function(f,v){var E=f;return E.nss=(f.uuid||"").toLowerCase(),E}};ye[pr.scheme]=pr,ye[Ds.scheme]=Ds,ye[hr.scheme]=hr,ye[js.scheme]=js,ye[ks.scheme]=ks,ye[Ns.scheme]=Ns,ye[qs.scheme]=qs,a.SCHEMES=ye,a.pctEncChar=we,a.pctDecChars=je,a.parse=ne,a.removeDotSegments=Me,a.serialize=Ce,a.resolveComponents=Ae,a.resolve=et,a.normalize=Fe,a.equal=$r,a.escapeComponent=ba,a.unescapeComponent=Ge,Object.defineProperty(a,"__esModule",{value:!0})})});var Gr=B((ah,xn)=>{"use strict";xn.exports=function a(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var s,t,n;if(Array.isArray(e)){if(s=e.length,s!=r.length)return!1;for(t=s;t--!==0;)if(!a(e[t],r[t]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(n=Object.keys(e),s=n.length,s!==Object.keys(r).length)return!1;for(t=s;t--!==0;)if(!Object.prototype.hasOwnProperty.call(r,n[t]))return!1;for(t=s;t--!==0;){var o=n[t];if(!a(e[o],r[o]))return!1}return!0}return e!==e&&r!==r}});var Pn=B((sh,Sn)=>{"use strict";Sn.exports=function(e){for(var r=0,s=e.length,t=0,n;t<s;)r++,n=e.charCodeAt(t++),n>=55296&&n<=56319&&t<s&&(n=e.charCodeAt(t),(n&64512)==56320&&t++);return r}});var Zt=B((nh,Tn)=>{"use strict";Tn.exports={copy:Pd,checkDataType:Ma,checkDataTypes:wd,coerceToTypes:Rd,toHash:Qa,getProperty:Va,escapeQuotes:Ha,equal:Gr(),ucs2length:Pn(),varOccurences:Od,varReplace:Dd,schemaHasRules:$d,schemaHasRulesExcept:jd,schemaUnknownRules:Ad,toQuotedString:za,getPathExpr:Cd,getPath:kd,getData:Fd,unescapeFragment:Ud,unescapeJsonPointer:Ba,escapeFragment:Ld,escapeJsonPointer:Ja};function Pd(a,e){e=e||{};for(var r in a)e[r]=a[r];return e}function Ma(a,e,r,s){var t=s?" !== ":" === ",n=s?" || ":" && ",o=s?"!":"",i=s?"":"!";switch(a){case"null":return e+t+"null";case"array":return o+"Array.isArray("+e+")";case"object":return"("+o+e+n+"typeof "+e+t+'"object"'+n+i+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+t+'"number"'+n+i+"("+e+" % 1)"+n+e+t+e+(r?n+o+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+t+'"'+a+'"'+(r?n+o+"isFinite("+e+")":"")+")";default:return"typeof "+e+t+'"'+a+'"'}}function wd(a,e,r){switch(a.length){case 1:return Ma(a[0],e,r,!0);default:var s="",t=Qa(a);t.array&&t.object&&(s=t.null?"(":"(!"+e+" || ",s+="typeof "+e+' !== "object")',delete t.null,delete t.array,delete t.object),t.number&&delete t.integer;for(var n in t)s+=(s?" && ":"")+Ma(n,e,r,!0);return s}}var wn=Qa(["string","number","integer","boolean","null"]);function Rd(a,e){if(Array.isArray(e)){for(var r=[],s=0;s<e.length;s++){var t=e[s];(wn[t]||a==="array"&&t==="array")&&(r[r.length]=t)}if(r.length)return r}else{if(wn[e])return[e];if(a==="array"&&e==="array")return["array"]}}function Qa(a){for(var e={},r=0;r<a.length;r++)e[a[r]]=!0;return e}var Td=/^[a-z$_][a-z$_0-9]*$/i,Id=/'|\\/g;function Va(a){return typeof a=="number"?"["+a+"]":Td.test(a)?"."+a:"['"+Ha(a)+"']"}function Ha(a){return a.replace(Id,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function Od(a,e){e+="[^0-9]";var r=a.match(new RegExp(e,"g"));return r?r.length:0}function Dd(a,e,r){return e+="([^0-9])",r=r.replace(/\$/g,"$$$$"),a.replace(new RegExp(e,"g"),r+"$1")}function $d(a,e){if(typeof a=="boolean")return!a;for(var r in a)if(e[r])return!0}function jd(a,e,r){if(typeof a=="boolean")return!a&&r!="not";for(var s in a)if(s!=r&&e[s])return!0}function Ad(a,e){if(typeof a!="boolean"){for(var r in a)if(!e[r])return r}}function za(a){return"'"+Ha(a)+"'"}function Cd(a,e,r,s){var t=r?"'/' + "+e+(s?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):s?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return Rn(a,t)}function kd(a,e,r){var s=za(r?"/"+Ja(e):Va(e));return Rn(a,s)}var Nd=/^\/(?:[^~]|~0|~1)*$/,qd=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Fd(a,e,r){var s,t,n,o;if(a==="")return"rootData";if(a[0]=="/"){if(!Nd.test(a))throw new Error("Invalid JSON-pointer: "+a);t=a,n="rootData"}else{if(o=a.match(qd),!o)throw new Error("Invalid JSON-pointer: "+a);if(s=+o[1],t=o[2],t=="#"){if(s>=e)throw new Error("Cannot access property/index "+s+" levels up, current level is "+e);return r[e-s]}if(s>e)throw new Error("Cannot access data "+s+" levels up, current level is "+e);if(n="data"+(e-s||""),!t)return n}for(var i=n,l=t.split("/"),u=0;u<l.length;u++){var p=l[u];p&&(n+=Va(Ba(p)),i+=" && "+n)}return i}function Rn(a,e){return a=='""'?e:(a+" + "+e).replace(/([^\\])' \+ '/g,"$1")}function Ud(a){return Ba(decodeURIComponent(a))}function Ld(a){return encodeURIComponent(Ja(a))}function Ja(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}function Ba(a){return a.replace(/~1/g,"/").replace(/~0/g,"~")}});var Za=B((ih,In)=>{"use strict";var Md=Zt();In.exports=zd;function zd(a){Md.copy(a,this)}});var Dn=B((oh,On)=>{"use strict";var St=On.exports=function(a,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var s=typeof r=="function"?r:r.pre||function(){},t=r.post||function(){};Wr(e,s,t,a,"",a)};St.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};St.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};St.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};St.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Wr(a,e,r,s,t,n,o,i,l,u){if(s&&typeof s=="object"&&!Array.isArray(s)){e(s,t,n,o,i,l,u);for(var p in s){var m=s[p];if(Array.isArray(m)){if(p in St.arrayKeywords)for(var _=0;_<m.length;_++)Wr(a,e,r,m[_],t+"/"+p+"/"+_,n,t,p,s,_)}else if(p in St.propsKeywords){if(m&&typeof m=="object")for(var d in m)Wr(a,e,r,m[d],t+"/"+p+"/"+Qd(d),n,t,p,s,d)}else(p in St.keywords||a.allKeys&&!(p in St.skipKeywords))&&Wr(a,e,r,m,t+"/"+p,n,t,p,s)}r(s,t,n,o,i,l,u)}}function Qd(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}});var aa=B((ch,Cn)=>{"use strict";var wr=En(),$n=Gr(),ta=Zt(),Yr=Za(),Vd=Dn();Cn.exports=wt;wt.normalizeId=Pt;wt.fullPath=Xr;wt.url=ea;wt.ids=Kd;wt.inlineRef=Ka;wt.schema=ra;function wt(a,e,r){var s=this._refs[r];if(typeof s=="string")if(this._refs[s])s=this._refs[s];else return wt.call(this,a,e,s);if(s=s||this._schemas[r],s instanceof Yr)return Ka(s.schema,this._opts.inlineRefs)?s.schema:s.validate||this._compile(s);var t=ra.call(this,e,r),n,o,i;return t&&(n=t.schema,e=t.root,i=t.baseId),n instanceof Yr?o=n.validate||a.call(this,n.schema,e,void 0,i):n!==void 0&&(o=Ka(n,this._opts.inlineRefs)?n:a.call(this,n,e,void 0,i)),o}function ra(a,e){var r=wr.parse(e),s=An(r),t=Xr(this._getId(a.schema));if(Object.keys(a.schema).length===0||s!==t){var n=Pt(s),o=this._refs[n];if(typeof o=="string")return Hd.call(this,a,o,r);if(o instanceof Yr)o.validate||this._compile(o),a=o;else if(o=this._schemas[n],o instanceof Yr){if(o.validate||this._compile(o),n==Pt(e))return{schema:o,root:a,baseId:t};a=o}else return;if(!a.schema)return;t=Xr(this._getId(a.schema))}return jn.call(this,r,t,a.schema,a)}function Hd(a,e,r){var s=ra.call(this,a,e);if(s){var t=s.schema,n=s.baseId;a=s.root;var o=this._getId(t);return o&&(n=ea(n,o)),jn.call(this,r,n,t,a)}}var Jd=ta.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function jn(a,e,r,s){if(a.fragment=a.fragment||"",a.fragment.slice(0,1)=="/"){for(var t=a.fragment.split("/"),n=1;n<t.length;n++){var o=t[n];if(o){if(o=ta.unescapeFragment(o),r=r[o],r===void 0)break;var i;if(!Jd[o]&&(i=this._getId(r),i&&(e=ea(e,i)),r.$ref)){var l=ea(e,r.$ref),u=ra.call(this,s,l);u&&(r=u.schema,s=u.root,e=u.baseId)}}}if(r!==void 0&&r!==s.schema)return{schema:r,root:s,baseId:e}}}var Bd=ta.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function Ka(a,e){if(e===!1)return!1;if(e===void 0||e===!0)return Ga(a);if(e)return Wa(a)<=e}function Ga(a){var e;if(Array.isArray(a)){for(var r=0;r<a.length;r++)if(e=a[r],typeof e=="object"&&!Ga(e))return!1}else for(var s in a)if(s=="$ref"||(e=a[s],typeof e=="object"&&!Ga(e)))return!1;return!0}function Wa(a){var e=0,r;if(Array.isArray(a)){for(var s=0;s<a.length;s++)if(r=a[s],typeof r=="object"&&(e+=Wa(r)),e==1/0)return 1/0}else for(var t in a){if(t=="$ref")return 1/0;if(Bd[t])e++;else if(r=a[t],typeof r=="object"&&(e+=Wa(r)+1),e==1/0)return 1/0}return e}function Xr(a,e){e!==!1&&(a=Pt(a));var r=wr.parse(a);return An(r)}function An(a){return wr.serialize(a).split("#")[0]+"#"}var Zd=/#\/?$/;function Pt(a){return a?a.replace(Zd,""):""}function ea(a,e){return e=Pt(e),wr.resolve(a,e)}function Kd(a){var e=Pt(this._getId(a)),r={"":e},s={"":Xr(e,!1)},t={},n=this;return Vd(a,{allKeys:!0},function(o,i,l,u,p,m,_){if(i!==""){var d=n._getId(o),y=r[u],b=s[u]+"/"+p;if(_!==void 0&&(b+="/"+(typeof _=="number"?_:ta.escapeFragment(_))),typeof d=="string"){d=y=Pt(y?wr.resolve(y,d):d);var g=n._refs[d];if(typeof g=="string"&&(g=n._refs[g]),g&&g.schema){if(!$n(o,g.schema))throw new Error('id "'+d+'" resolves to more than one schema')}else if(d!=Pt(b))if(d[0]=="#"){if(t[d]&&!$n(o,t[d]))throw new Error('id "'+d+'" resolves to more than one schema');t[d]=o}else n._refs[d]=b}r[i]=y,s[i]=b}}),t}});var sa=B((uh,Nn)=>{"use strict";var Ya=aa();Nn.exports={Validation:kn(Gd),MissingRef:kn(Xa)};function Gd(a){this.message="validation failed",this.errors=a,this.ajv=this.validation=!0}Xa.message=function(a,e){return"can't resolve reference "+e+" from id "+a};function Xa(a,e,r){this.message=r||Xa.message(a,e),this.missingRef=Ya.url(a,e),this.missingSchema=Ya.normalizeId(Ya.fullPath(this.missingRef))}function kn(a){return a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a}});var es=B((lh,qn)=>{"use strict";qn.exports=function(a,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=typeof e.cycles=="boolean"?e.cycles:!1,s=e.cmp&&function(n){return function(o){return function(i,l){var u={key:i,value:o[i]},p={key:l,value:o[l]};return n(u,p)}}}(e.cmp),t=[];return function n(o){if(o&&o.toJSON&&typeof o.toJSON=="function"&&(o=o.toJSON()),o!==void 0){if(typeof o=="number")return isFinite(o)?""+o:"null";if(typeof o!="object")return JSON.stringify(o);var i,l;if(Array.isArray(o)){for(l="[",i=0;i<o.length;i++)i&&(l+=","),l+=n(o[i])||"null";return l+"]"}if(o===null)return"null";if(t.indexOf(o)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=t.push(o)-1,p=Object.keys(o).sort(s&&s(o));for(l="",i=0;i<p.length;i++){var m=p[i],_=n(o[m]);_&&(l&&(l+=","),l+=JSON.stringify(m)+":"+_)}return t.splice(u,1),"{"+l+"}"}}(a)}});var ts=B((dh,Fn)=>{"use strict";Fn.exports=function(e,r,s){var t="",n=e.schema.$async===!0,o=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),i=e.self._getId(e.schema);if(e.opts.strictKeywords){var l=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(l){var u="unknown keyword: "+l;if(e.opts.strictKeywords==="log")e.logger.warn(u);else throw new Error(u)}}if(e.isTop&&(t+=" var validate = ",n&&(e.async=!0,t+="async "),t+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",i&&(e.opts.sourceCode||e.opts.processCode)&&(t+=" "+("/*# sourceURL="+i+" */")+" ")),typeof e.schema=="boolean"||!(o||e.schema.$ref)){var r="false schema",p=e.level,m=e.dataLevel,_=e.schema[r],d=e.schemaPath+e.util.getProperty(r),y=e.errSchemaPath+"/"+r,O=!e.opts.allErrors,L,b="data"+(m||""),R="valid"+p;if(e.schema===!1){e.isTop?O=!0:t+=" var "+R+" = false; ";var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(L||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'boolean schema is false' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+b+" "),t+=" } "):t+=" {} ";var S=t;t=g.pop(),!e.compositeRule&&O?e.async?t+=" throw new ValidationError(["+S+"]); ":t+=" validate.errors = ["+S+"]; return false; ":t+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?n?t+=" return data; ":t+=" validate.errors = null; return true; ":t+=" var "+R+" = true; ";return e.isTop&&(t+=" }; return validate; "),t}if(e.isTop){var I=e.isTop,p=e.level=0,m=e.dataLevel=0,b="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var P="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(P);else throw new Error(P)}t+=" var vErrors = null; ",t+=" var errors = 0;     ",t+=" if (rootData === undefined) rootData = data; "}else{var p=e.level,m=e.dataLevel,b="data"+(m||"");if(i&&(e.baseId=e.resolve.url(e.baseId,i)),n&&!e.async)throw new Error("async schema in sync schema");t+=" var errs_"+p+" = errors;"}var R="valid"+p,O=!e.opts.allErrors,D="",Q="",L,$=e.schema.type,M=Array.isArray($);if($&&e.opts.nullable&&e.schema.nullable===!0&&(M?$.indexOf("null")==-1&&($=$.concat("null")):$!="null"&&($=[$,"null"],M=!0)),M&&$.length==1&&($=$[0],M=!1),e.schema.$ref&&o){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(o=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(t+=" "+e.RULES.all.$comment.code(e,"$comment")),$){if(e.opts.coerceTypes)var U=e.util.coerceToTypes(e.opts.coerceTypes,$);var q=e.RULES.types[$];if(U||M||q===!0||q&&!Re(q)){var d=e.schemaPath+".type",y=e.errSchemaPath+"/type",d=e.schemaPath+".type",y=e.errSchemaPath+"/type",T=M?"checkDataTypes":"checkDataType";if(t+=" if ("+e.util[T]($,b,e.opts.strictNumbers,!0)+") { ",U){var j="dataType"+p,F="coerced"+p;t+=" var "+j+" = typeof "+b+"; var "+F+" = undefined; ",e.opts.coerceTypes=="array"&&(t+=" if ("+j+" == 'object' && Array.isArray("+b+") && "+b+".length == 1) { "+b+" = "+b+"[0]; "+j+" = typeof "+b+"; if ("+e.util.checkDataType(e.schema.type,b,e.opts.strictNumbers)+") "+F+" = "+b+"; } "),t+=" if ("+F+" !== undefined) ; ";var oe=U;if(oe)for(var Y,ee=-1,W=oe.length-1;ee<W;)Y=oe[ee+=1],Y=="string"?t+=" else if ("+j+" == 'number' || "+j+" == 'boolean') "+F+" = '' + "+b+"; else if ("+b+" === null) "+F+" = ''; ":Y=="number"||Y=="integer"?(t+=" else if ("+j+" == 'boolean' || "+b+" === null || ("+j+" == 'string' && "+b+" && "+b+" == +"+b+" ",Y=="integer"&&(t+=" && !("+b+" % 1)"),t+=")) "+F+" = +"+b+"; "):Y=="boolean"?t+=" else if ("+b+" === 'false' || "+b+" === 0 || "+b+" === null) "+F+" = false; else if ("+b+" === 'true' || "+b+" === 1) "+F+" = true; ":Y=="null"?t+=" else if ("+b+" === '' || "+b+" === 0 || "+b+" === false) "+F+" = null; ":e.opts.coerceTypes=="array"&&Y=="array"&&(t+=" else if ("+j+" == 'string' || "+j+" == 'number' || "+j+" == 'boolean' || "+b+" == null) "+F+" = ["+b+"]; ");t+=" else {   ";var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(L||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",M?t+=""+$.join(","):t+=""+$,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",M?t+=""+$.join(","):t+=""+$,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+b+" "),t+=" } "):t+=" {} ";var S=t;t=g.pop(),!e.compositeRule&&O?e.async?t+=" throw new ValidationError(["+S+"]); ":t+=" validate.errors = ["+S+"]; return false; ":t+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } if ("+F+" !== undefined) {  ";var V=m?"data"+(m-1||""):"parentData",me=m?e.dataPathArr[m]:"parentDataProperty";t+=" "+b+" = "+F+"; ",m||(t+="if ("+V+" !== undefined)"),t+=" "+V+"["+me+"] = "+F+"; } "}else{var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(L||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",M?t+=""+$.join(","):t+=""+$,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",M?t+=""+$.join(","):t+=""+$,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+b+" "),t+=" } "):t+=" {} ";var S=t;t=g.pop(),!e.compositeRule&&O?e.async?t+=" throw new ValidationError(["+S+"]); ":t+=" validate.errors = ["+S+"]; return false; ":t+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}t+=" } "}}if(e.schema.$ref&&!o)t+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",O&&(t+=" } if (errors === ",I?t+="0":t+="errs_"+p,t+=") { ",Q+="}");else{var Ie=e.RULES;if(Ie){for(var q,$e=-1,ae=Ie.length-1;$e<ae;)if(q=Ie[$e+=1],Re(q)){if(q.type&&(t+=" if ("+e.util.checkDataType(q.type,b,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(q.type=="object"&&e.schema.properties){var _=e.schema.properties,ye=Object.keys(_),we=ye;if(we)for(var je,gt=-1,ct=we.length-1;gt<ct;){je=we[gt+=1];var _e=_[je];if(_e.default!==void 0){var ve=b+e.util.getProperty(je);if(e.compositeRule){if(e.opts.strictDefaults){var P="default is ignored for: "+ve;if(e.opts.strictDefaults==="log")e.logger.warn(P);else throw new Error(P)}}else t+=" if ("+ve+" === undefined ",e.opts.useDefaults=="empty"&&(t+=" || "+ve+" === null || "+ve+" === '' "),t+=" ) "+ve+" = ",e.opts.useDefaults=="shared"?t+=" "+e.useDefault(_e.default)+" ":t+=" "+JSON.stringify(_e.default)+" ",t+="; "}}}else if(q.type=="array"&&Array.isArray(e.schema.items)){var Rt=e.schema.items;if(Rt){for(var _e,ee=-1,Oe=Rt.length-1;ee<Oe;)if(_e=Rt[ee+=1],_e.default!==void 0){var ve=b+"["+ee+"]";if(e.compositeRule){if(e.opts.strictDefaults){var P="default is ignored for: "+ve;if(e.opts.strictDefaults==="log")e.logger.warn(P);else throw new Error(P)}}else t+=" if ("+ve+" === undefined ",e.opts.useDefaults=="empty"&&(t+=" || "+ve+" === null || "+ve+" === '' "),t+=" ) "+ve+" = ",e.opts.useDefaults=="shared"?t+=" "+e.useDefault(_e.default)+" ":t+=" "+JSON.stringify(_e.default)+" ",t+="; "}}}}var ne=q.rules;if(ne){for(var yt,ut=-1,Tt=ne.length-1;ut<Tt;)if(yt=ne[ut+=1],Me(yt)){var It=yt.code(e,yt.keyword,q.type);It&&(t+=" "+It+" ",O&&(D+="}"))}}if(O&&(t+=" "+D+" ",D=""),q.type&&(t+=" } ",$&&$===q.type&&!U)){t+=" else { ";var d=e.schemaPath+".type",y=e.errSchemaPath+"/type",g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(L||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",M?t+=""+$.join(","):t+=""+$,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",M?t+=""+$.join(","):t+=""+$,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+b+" "),t+=" } "):t+=" {} ";var S=t;t=g.pop(),!e.compositeRule&&O?e.async?t+=" throw new ValidationError(["+S+"]); ":t+=" validate.errors = ["+S+"]; return false; ":t+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } "}O&&(t+=" if (errors === ",I?t+="0":t+="errs_"+p,t+=") { ",Q+="}")}}}O&&(t+=" "+Q+" "),I?(n?(t+=" if (errors === 0) return data;           ",t+=" else throw new ValidationError(vErrors); "):(t+=" validate.errors = vErrors; ",t+=" return errors === 0;       "),t+=" }; return validate;"):t+=" var "+R+" = errors === errs_"+p+";";function Re(Ae){for(var et=Ae.rules,Fe=0;Fe<et.length;Fe++)if(Me(et[Fe]))return!0}function Me(Ae){return e.schema[Ae.keyword]!==void 0||Ae.implements&&Ce(Ae)}function Ce(Ae){for(var et=Ae.implements,Fe=0;Fe<et.length;Fe++)if(e.schema[et[Fe]]!==void 0)return!0}return t}});var Qn=B((fh,zn)=>{"use strict";var na=aa(),oa=Zt(),Ln=sa(),Wd=es(),Un=ts(),Yd=oa.ucs2length,Xd=Gr(),ef=Ln.Validation;zn.exports=rs;function rs(a,e,r,s){var t=this,n=this._opts,o=[void 0],i={},l=[],u={},p=[],m={},_=[];e=e||{schema:a,refVal:o,refs:i};var d=tf.call(this,a,e,s),y=this._compilations[d.index];if(d.compiling)return y.callValidate=P;var b=this._formats,g=this.RULES;try{var S=R(a,e,r,s);y.validate=S;var I=y.callValidate;return I&&(I.schema=S.schema,I.errors=null,I.refs=S.refs,I.refVal=S.refVal,I.root=S.root,I.$async=S.$async,n.sourceCode&&(I.source=S.source)),S}finally{rf.call(this,a,e,s)}function P(){var T=y.validate,j=T.apply(this,arguments);return P.errors=T.errors,j}function R(T,j,F,oe){var Y=!j||j&&j.schema==T;if(j.schema!=e.schema)return rs.call(t,T,j,F,oe);var ee=T.$async===!0,W=Un({isTop:!0,schema:T,isRoot:Y,baseId:oe,root:j,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:Ln.MissingRef,RULES:g,validate:Un,util:oa,resolve:na,resolveRef:O,usePattern:M,useDefault:U,useCustomRule:q,opts:n,formats:b,logger:t.logger,self:t});W=ia(o,nf)+ia(l,af)+ia(p,sf)+ia(_,of)+W,n.processCode&&(W=n.processCode(W,T));var V;try{var me=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",W);V=me(t,g,b,e,o,p,_,Xd,Yd,ef),o[0]=V}catch(Ie){throw t.logger.error("Error compiling schema, function code:",W),Ie}return V.schema=T,V.errors=null,V.refs=i,V.refVal=o,V.root=Y?V:j,ee&&(V.$async=!0),n.sourceCode===!0&&(V.source={code:W,patterns:l,defaults:p}),V}function O(T,j,F){j=na.url(T,j);var oe=i[j],Y,ee;if(oe!==void 0)return Y=o[oe],ee="refVal["+oe+"]",$(Y,ee);if(!F&&e.refs){var W=e.refs[j];if(W!==void 0)return Y=e.refVal[W],ee=D(j,Y),$(Y,ee)}ee=D(j);var V=na.call(t,R,e,j);if(V===void 0){var me=r&&r[j];me&&(V=na.inlineRef(me,n.inlineRefs)?me:rs.call(t,me,e,r,T))}if(V===void 0)Q(j);else return L(j,V),$(V,ee)}function D(T,j){var F=o.length;return o[F]=j,i[T]=F,"refVal"+F}function Q(T){delete i[T]}function L(T,j){var F=i[T];o[F]=j}function $(T,j){return typeof T=="object"||typeof T=="boolean"?{code:j,schema:T,inline:!0}:{code:j,$async:T&&!!T.$async}}function M(T){var j=u[T];return j===void 0&&(j=u[T]=l.length,l[j]=T),"pattern"+j}function U(T){switch(typeof T){case"boolean":case"number":return""+T;case"string":return oa.toQuotedString(T);case"object":if(T===null)return"null";var j=Wd(T),F=m[j];return F===void 0&&(F=m[j]=p.length,p[F]=T),"default"+F}}function q(T,j,F,oe){if(t._opts.validateSchema!==!1){var Y=T.definition.dependencies;if(Y&&!Y.every(function(we){return Object.prototype.hasOwnProperty.call(F,we)}))throw new Error("parent schema must have all required keywords: "+Y.join(","));var ee=T.definition.validateSchema;if(ee){var W=ee(j);if(!W){var V="keyword schema is invalid: "+t.errorsText(ee.errors);if(t._opts.validateSchema=="log")t.logger.error(V);else throw new Error(V)}}}var me=T.definition.compile,Ie=T.definition.inline,$e=T.definition.macro,ae;if(me)ae=me.call(t,j,F,oe);else if($e)ae=$e.call(t,j,F,oe),n.validateSchema!==!1&&t.validateSchema(ae,!0);else if(Ie)ae=Ie.call(t,oe,T.keyword,j,F);else if(ae=T.definition.validate,!ae)return;if(ae===void 0)throw new Error('custom keyword "'+T.keyword+'"failed to compile');var ye=_.length;return _[ye]=ae,{code:"customRule"+ye,validate:ae}}}function tf(a,e,r){var s=Mn.call(this,a,e,r);return s>=0?{index:s,compiling:!0}:(s=this._compilations.length,this._compilations[s]={schema:a,root:e,baseId:r},{index:s,compiling:!1})}function rf(a,e,r){var s=Mn.call(this,a,e,r);s>=0&&this._compilations.splice(s,1)}function Mn(a,e,r){for(var s=0;s<this._compilations.length;s++){var t=this._compilations[s];if(t.schema==a&&t.root==e&&t.baseId==r)return s}return-1}function af(a,e){return"var pattern"+a+" = new RegExp("+oa.toQuotedString(e[a])+");"}function sf(a){return"var default"+a+" = defaults["+a+"];"}function nf(a,e){return e[a]===void 0?"":"var refVal"+a+" = refVal["+a+"];"}function of(a){return"var customRule"+a+" = customRules["+a+"];"}function ia(a,e){if(!a.length)return"";for(var r="",s=0;s<a.length;s++)r+=e(s,a);return r}});var Hn=B((ph,Vn)=>{"use strict";var ca=Vn.exports=function(){this._cache={}};ca.prototype.put=function(e,r){this._cache[e]=r};ca.prototype.get=function(e){return this._cache[e]};ca.prototype.del=function(e){delete this._cache[e]};ca.prototype.clear=function(){this._cache={}}});var ai=B((hh,ri)=>{"use strict";var cf=Zt(),uf=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,lf=[0,31,28,31,30,31,30,31,31,30,31,30,31],df=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,Jn=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ff=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,pf=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Bn=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Zn=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,Kn=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,Gn=/^(?:\/(?:[^~/]|~0|~1)*)*$/,Wn=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,Yn=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;ri.exports=ua;function ua(a){return a=a=="full"?"full":"fast",cf.copy(ua[a])}ua.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":Bn,url:Zn,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:Jn,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:ti,uuid:Kn,"json-pointer":Gn,"json-pointer-uri-fragment":Wn,"relative-json-pointer":Yn};ua.full={date:Xn,time:ei,"date-time":vf,uri:yf,"uri-reference":pf,"uri-template":Bn,url:Zn,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:Jn,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:ti,uuid:Kn,"json-pointer":Gn,"json-pointer-uri-fragment":Wn,"relative-json-pointer":Yn};function hf(a){return a%4===0&&(a%100!==0||a%400===0)}function Xn(a){var e=a.match(uf);if(!e)return!1;var r=+e[1],s=+e[2],t=+e[3];return s>=1&&s<=12&&t>=1&&t<=(s==2&&hf(r)?29:lf[s])}function ei(a,e){var r=a.match(df);if(!r)return!1;var s=r[1],t=r[2],n=r[3],o=r[5];return(s<=23&&t<=59&&n<=59||s==23&&t==59&&n==60)&&(!e||o)}var mf=/t|\s/i;function vf(a){var e=a.split(mf);return e.length==2&&Xn(e[0])&&ei(e[1],!0)}var gf=/\/|:/;function yf(a){return gf.test(a)&&ff.test(a)}var _f=/[^\\]\\Z/;function ti(a){if(_f.test(a))return!1;try{return new RegExp(a),!0}catch{return!1}}});var ni=B((mh,si)=>{"use strict";si.exports=function(e,r,s){var t=" ",n=e.level,o=e.dataLevel,i=e.schema[r],l=e.errSchemaPath+"/"+r,u=!e.opts.allErrors,p="data"+(o||""),m="valid"+n,_,d;if(i=="#"||i=="#/")e.isRoot?(_=e.async,d="validate"):(_=e.root.schema.$async===!0,d="root.refVal[0]");else{var y=e.resolveRef(e.baseId,i,e.isRoot);if(y===void 0){var b=e.MissingRefError.message(e.baseId,i);if(e.opts.missingRefs=="fail"){e.logger.error(b);var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { ref: '"+e.util.escapeQuotes(i)+"' } ",e.opts.messages!==!1&&(t+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(i)+"' "),e.opts.verbose&&(t+=" , schema: "+e.util.toQuotedString(i)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),t+=" } "):t+=" {} ";var S=t;t=g.pop(),!e.compositeRule&&u?e.async?t+=" throw new ValidationError(["+S+"]); ":t+=" validate.errors = ["+S+"]; return false; ":t+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(t+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(b),u&&(t+=" if (true) { ");else throw new e.MissingRefError(e.baseId,i,b)}else if(y.inline){var I=e.util.copy(e);I.level++;var P="valid"+I.level;I.schema=y.schema,I.schemaPath="",I.errSchemaPath=i;var R=e.validate(I).replace(/validate\.schema/g,y.code);t+=" "+R+" ",u&&(t+=" if ("+P+") { ")}else _=y.$async===!0||e.async&&y.$async!==!1,d=y.code}if(d){var g=g||[];g.push(t),t="",e.opts.passContext?t+=" "+d+".call(this, ":t+=" "+d+"( ",t+=" "+p+", (dataPath || '')",e.errorPath!='""'&&(t+=" + "+e.errorPath);var O=o?"data"+(o-1||""):"parentData",D=o?e.dataPathArr[o]:"parentDataProperty";t+=" , "+O+" , "+D+", rootData)  ";var Q=t;if(t=g.pop(),_){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(t+=" var "+m+"; "),t+=" try { await "+Q+"; ",u&&(t+=" "+m+" = true; "),t+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(t+=" "+m+" = false; "),t+=" } ",u&&(t+=" if ("+m+") { ")}else t+=" if (!"+Q+") { if (vErrors === null) vErrors = "+d+".errors; else vErrors = vErrors.concat("+d+".errors); errors = vErrors.length; } ",u&&(t+=" else { ")}return t}});var oi=B((vh,ii)=>{"use strict";ii.exports=function(e,r,s){var t=" ",n=e.schema[r],o=e.schemaPath+e.util.getProperty(r),i=e.errSchemaPath+"/"+r,l=!e.opts.allErrors,u=e.util.copy(e),p="";u.level++;var m="valid"+u.level,_=u.baseId,d=!0,y=n;if(y)for(var b,g=-1,S=y.length-1;g<S;)b=y[g+=1],(e.opts.strictKeywords?typeof b=="object"&&Object.keys(b).length>0||b===!1:e.util.schemaHasRules(b,e.RULES.all))&&(d=!1,u.schema=b,u.schemaPath=o+"["+g+"]",u.errSchemaPath=i+"/"+g,t+="  "+e.validate(u)+" ",u.baseId=_,l&&(t+=" if ("+m+") { ",p+="}"));return l&&(d?t+=" if (true) { ":t+=" "+p.slice(0,-1)+" "),t}});var ui=B((gh,ci)=>{"use strict";ci.exports=function(e,r,s){var t=" ",n=e.level,o=e.dataLevel,i=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(o||""),_="valid"+n,d="errs__"+n,y=e.util.copy(e),b="";y.level++;var g="valid"+y.level,S=i.every(function(L){return e.opts.strictKeywords?typeof L=="object"&&Object.keys(L).length>0||L===!1:e.util.schemaHasRules(L,e.RULES.all)});if(S){var I=y.baseId;t+=" var "+d+" = errors; var "+_+" = false;  ";var P=e.compositeRule;e.compositeRule=y.compositeRule=!0;var R=i;if(R)for(var O,D=-1,Q=R.length-1;D<Q;)O=R[D+=1],y.schema=O,y.schemaPath=l+"["+D+"]",y.errSchemaPath=u+"/"+D,t+="  "+e.validate(y)+" ",y.baseId=I,t+=" "+_+" = "+_+" || "+g+"; if (!"+_+") { ",b+="}";e.compositeRule=y.compositeRule=P,t+=" "+b+" if (!"+_+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&p&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(t+=" } ")}else p&&(t+=" if (true) { ");return t}});var di=B((yh,li)=>{"use strict";li.exports=function(e,r,s){var t=" ",n=e.schema[r],o=e.errSchemaPath+"/"+r,i=!e.opts.allErrors,l=e.util.toQuotedString(n);return e.opts.$comment===!0?t+=" console.log("+l+");":typeof e.opts.$comment=="function"&&(t+=" self._opts.$comment("+l+", "+e.util.toQuotedString(o)+", validate.root.schema);"),t}});var pi=B((_h,fi)=>{"use strict";fi.exports=function(e,r,s){var t=" ",n=e.level,o=e.dataLevel,i=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(o||""),_="valid"+n,d=e.opts.$data&&i&&i.$data,y;d?(t+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",y="schema"+n):y=i,d||(t+=" var schema"+n+" = validate.schema"+l+";"),t+="var "+_+" = equal("+m+", schema"+n+"); if (!"+_+") {   ";var b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValue: schema"+n+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be equal to constant' "),e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var g=t;return t=b.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+g+"]); ":t+=" validate.errors = ["+g+"]; return false; ":t+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" }",p&&(t+=" else { "),t}});var mi=B((bh,hi)=>{"use strict";hi.exports=function(e,r,s){var t=" ",n=e.level,o=e.dataLevel,i=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(o||""),_="valid"+n,d="errs__"+n,y=e.util.copy(e),b="";y.level++;var g="valid"+y.level,S="i"+n,I=y.dataLevel=e.dataLevel+1,P="data"+I,R=e.baseId,O=e.opts.strictKeywords?typeof i=="object"&&Object.keys(i).length>0||i===!1:e.util.schemaHasRules(i,e.RULES.all);if(t+="var "+d+" = errors;var "+_+";",O){var D=e.compositeRule;e.compositeRule=y.compositeRule=!0,y.schema=i,y.schemaPath=l,y.errSchemaPath=u,t+=" var "+g+" = false; for (var "+S+" = 0; "+S+" < "+m+".length; "+S+"++) { ",y.errorPath=e.util.getPathExpr(e.errorPath,S,e.opts.jsonPointers,!0);var Q=m+"["+S+"]";y.dataPathArr[I]=S;var L=e.validate(y);y.baseId=R,e.util.varOccurences(L,P)<2?t+=" "+e.util.varReplace(L,P,Q)+" ":t+=" var "+P+" = "+Q+"; "+L+" ",t+=" if ("+g+") break; }  ",e.compositeRule=y.compositeRule=D,t+=" "+b+" if (!"+g+") {"}else t+=" if ("+m+".length == 0) {";var $=$||[];$.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should contain a valid item' "),e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var M=t;return t=$.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+M+"]); ":t+=" validate.errors = ["+M+"]; return false; ":t+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { ",O&&(t+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } "),e.opts.allErrors&&(t+=" } "),t}});var gi=B((Eh,vi)=>{"use strict";vi.exports=function(e,r,s){var t=" ",n=e.level,o=e.dataLevel,i=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(o||""),_="errs__"+n,d=e.util.copy(e),y="";d.level++;var b="valid"+d.level,g={},S={},I=e.opts.ownProperties;for(D in i)if(D!="__proto__"){var P=i[D],R=Array.isArray(P)?S:g;R[D]=P}t+="var "+_+" = errors;";var O=e.errorPath;t+="var missing"+n+";";for(var D in S)if(R=S[D],R.length){if(t+=" if ( "+m+e.util.getProperty(D)+" !== undefined ",I&&(t+=" && Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(D)+"') "),p){t+=" && ( ";var Q=R;if(Q)for(var L,$=-1,M=Q.length-1;$<M;){L=Q[$+=1],$&&(t+=" || ");var U=e.util.getProperty(L),q=m+U;t+=" ( ( "+q+" === undefined ",I&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(L)+"') "),t+=") && (missing"+n+" = "+e.util.toQuotedString(e.opts.jsonPointers?L:U)+") ) "}t+=")) {  ";var T="missing"+n,j="' + "+T+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(O,T,!0):O+" + "+T);var F=F||[];F.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(D)+"', missingProperty: '"+j+"', depsCount: "+R.length+", deps: '"+e.util.escapeQuotes(R.length==1?R[0]:R.join(", "))+"' } ",e.opts.messages!==!1&&(t+=" , message: 'should have ",R.length==1?t+="property "+e.util.escapeQuotes(R[0]):t+="properties "+e.util.escapeQuotes(R.join(", ")),t+=" when property "+e.util.escapeQuotes(D)+" is present' "),e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var oe=t;t=F.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+oe+"]); ":t+=" validate.errors = ["+oe+"]; return false; ":t+=" var err = "+oe+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{t+=" ) { ";var Y=R;if(Y)for(var L,ee=-1,W=Y.length-1;ee<W;){L=Y[ee+=1];var U=e.util.getProperty(L),j=e.util.escapeQuotes(L),q=m+U;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(O,L,e.opts.jsonPointers)),t+=" if ( "+q+" === undefined ",I&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(L)+"') "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(D)+"', missingProperty: '"+j+"', depsCount: "+R.length+", deps: '"+e.util.escapeQuotes(R.length==1?R[0]:R.join(", "))+"' } ",e.opts.messages!==!1&&(t+=" , message: 'should have ",R.length==1?t+="property "+e.util.escapeQuotes(R[0]):t+="properties "+e.util.escapeQuotes(R.join(", ")),t+=" when property "+e.util.escapeQuotes(D)+" is present' "),e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}t+=" }   ",p&&(y+="}",t+=" else { ")}e.errorPath=O;var V=d.baseId;for(var D in g){var P=g[D];(e.opts.strictKeywords?typeof P=="object"&&Object.keys(P).length>0||P===!1:e.util.schemaHasRules(P,e.RULES.all))&&(t+=" "+b+" = true; if ( "+m+e.util.getProperty(D)+" !== undefined ",I&&(t+=" && Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(D)+"') "),t+=") { ",d.schema=P,d.schemaPath=l+e.util.getProperty(D),d.errSchemaPath=u+"/"+e.util.escapeFragment(D),t+="  "+e.validate(d)+" ",d.baseId=V,t+=" }  ",p&&(t+=" if ("+b+") { ",y+="}"))}return p&&(t+="   "+y+" if ("+_+" == errors) {"),t}});var _i=B((xh,yi)=>{"use strict";yi.exports=function(e,r,s){var t=" ",n=e.level,o=e.dataLevel,i=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(o||""),_="valid"+n,d=e.opts.$data&&i&&i.$data,y;d?(t+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",y="schema"+n):y=i;var b="i"+n,g="schema"+n;d||(t+=" var "+g+" = validate.schema"+l+";"),t+="var "+_+";",d&&(t+=" if (schema"+n+" === undefined) "+_+" = true; else if (!Array.isArray(schema"+n+")) "+_+" = false; else {"),t+=""+_+" = false;for (var "+b+"=0; "+b+"<"+g+".length; "+b+"++) if (equal("+m+", "+g+"["+b+"])) { "+_+" = true; break; }",d&&(t+="  }  "),t+=" if (!"+_+") {   ";var S=S||[];S.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValues: schema"+n+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var I=t;return t=S.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+I+"]); ":t+=" validate.errors = ["+I+"]; return false; ":t+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" }",p&&(t+=" else { "),t}});var Ei=B((Sh,bi)=>{"use strict";bi.exports=function(e,r,s){var t=" ",n=e.level,o=e.dataLevel,i=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(o||"");if(e.opts.format===!1)return p&&(t+=" if (true) { "),t;var _=e.opts.$data&&i&&i.$data,d;_?(t+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",d="schema"+n):d=i;var y=e.opts.unknownFormats,b=Array.isArray(y);if(_){var g="format"+n,S="isObject"+n,I="formatType"+n;t+=" var "+g+" = formats["+d+"]; var "+S+" = typeof "+g+" == 'object' && !("+g+" instanceof RegExp) && "+g+".validate; var "+I+" = "+S+" && "+g+".type || 'string'; if ("+S+") { ",e.async&&(t+=" var async"+n+" = "+g+".async; "),t+=" "+g+" = "+g+".validate; } if (  ",_&&(t+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),t+=" (",y!="ignore"&&(t+=" ("+d+" && !"+g+" ",b&&(t+=" && self._opts.unknownFormats.indexOf("+d+") == -1 "),t+=") || "),t+=" ("+g+" && "+I+" == '"+s+"' && !(typeof "+g+" == 'function' ? ",e.async?t+=" (async"+n+" ? await "+g+"("+m+") : "+g+"("+m+")) ":t+=" "+g+"("+m+") ",t+=" : "+g+".test("+m+"))))) {"}else{var g=e.formats[i];if(!g){if(y=="ignore")return e.logger.warn('unknown format "'+i+'" ignored in schema at path "'+e.errSchemaPath+'"'),p&&(t+=" if (true) { "),t;if(b&&y.indexOf(i)>=0)return p&&(t+=" if (true) { "),t;throw new Error('unknown format "'+i+'" is used in schema at path "'+e.errSchemaPath+'"')}var S=typeof g=="object"&&!(g instanceof RegExp)&&g.validate,I=S&&g.type||"string";if(S){var P=g.async===!0;g=g.validate}if(I!=s)return p&&(t+=" if (true) { "),t;if(P){if(!e.async)throw new Error("async format in sync schema");var R="formats"+e.util.getProperty(i)+".validate";t+=" if (!(await "+R+"("+m+"))) { "}else{t+=" if (! ";var R="formats"+e.util.getProperty(i);S&&(R+=".validate"),typeof g=="function"?t+=" "+R+"("+m+") ":t+=" "+R+".test("+m+") ",t+=") { "}}var O=O||[];O.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { format:  ",_?t+=""+d:t+=""+e.util.toQuotedString(i),t+="  } ",e.opts.messages!==!1&&(t+=` , message: 'should match format "`,_?t+="' + "+d+" + '":t+=""+e.util.escapeQuotes(i),t+=`"' `),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+l:t+=""+e.util.toQuotedString(i),t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var D=t;return t=O.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+D+"]); ":t+=" validate.errors = ["+D+"]; return false; ":t+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",p&&(t+=" else { "),t}});var Si=B((Ph,xi)=>{"use strict";xi.exports=function(e,r,s){var t=" ",n=e.level,o=e.dataLevel,i=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(o||""),_="valid"+n,d="errs__"+n,y=e.util.copy(e);y.level++;var b="valid"+y.level,g=e.schema.then,S=e.schema.else,I=g!==void 0&&(e.opts.strictKeywords?typeof g=="object"&&Object.keys(g).length>0||g===!1:e.util.schemaHasRules(g,e.RULES.all)),P=S!==void 0&&(e.opts.strictKeywords?typeof S=="object"&&Object.keys(S).length>0||S===!1:e.util.schemaHasRules(S,e.RULES.all)),R=y.baseId;if(I||P){var O;y.createErrors=!1,y.schema=i,y.schemaPath=l,y.errSchemaPath=u,t+=" var "+d+" = errors; var "+_+" = true;  ";var D=e.compositeRule;e.compositeRule=y.compositeRule=!0,t+="  "+e.validate(y)+" ",y.baseId=R,y.createErrors=!0,t+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }  ",e.compositeRule=y.compositeRule=D,I?(t+=" if ("+b+") {  ",y.schema=e.schema.then,y.schemaPath=e.schemaPath+".then",y.errSchemaPath=e.errSchemaPath+"/then",t+="  "+e.validate(y)+" ",y.baseId=R,t+=" "+_+" = "+b+"; ",I&&P?(O="ifClause"+n,t+=" var "+O+" = 'then'; "):O="'then'",t+=" } ",P&&(t+=" else { ")):t+=" if (!"+b+") { ",P&&(y.schema=e.schema.else,y.schemaPath=e.schemaPath+".else",y.errSchemaPath=e.errSchemaPath+"/else",t+="  "+e.validate(y)+" ",y.baseId=R,t+=" "+_+" = "+b+"; ",I&&P?(O="ifClause"+n,t+=" var "+O+" = 'else'; "):O="'else'",t+=" } "),t+=" if (!"+_+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { failingKeyword: "+O+" } ",e.opts.messages!==!1&&(t+=` , message: 'should match "' + `+O+` + '" schema' `),e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&p&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+=" }   ",p&&(t+=" else { ")}else p&&(t+=" if (true) { ");return t}});var wi=B((wh,Pi)=>{"use strict";Pi.exports=function(e,r,s){var t=" ",n=e.level,o=e.dataLevel,i=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(o||""),_="valid"+n,d="errs__"+n,y=e.util.copy(e),b="";y.level++;var g="valid"+y.level,S="i"+n,I=y.dataLevel=e.dataLevel+1,P="data"+I,R=e.baseId;if(t+="var "+d+" = errors;var "+_+";",Array.isArray(i)){var O=e.schema.additionalItems;if(O===!1){t+=" "+_+" = "+m+".length <= "+i.length+"; ";var D=u;u=e.errSchemaPath+"/additionalItems",t+="  if (!"+_+") {   ";var Q=Q||[];Q.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+i.length+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have more than "+i.length+" items' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var L=t;t=Q.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+L+"]); ":t+=" validate.errors = ["+L+"]; return false; ":t+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",u=D,p&&(b+="}",t+=" else { ")}var $=i;if($){for(var M,U=-1,q=$.length-1;U<q;)if(M=$[U+=1],e.opts.strictKeywords?typeof M=="object"&&Object.keys(M).length>0||M===!1:e.util.schemaHasRules(M,e.RULES.all)){t+=" "+g+" = true; if ("+m+".length > "+U+") { ";var T=m+"["+U+"]";y.schema=M,y.schemaPath=l+"["+U+"]",y.errSchemaPath=u+"/"+U,y.errorPath=e.util.getPathExpr(e.errorPath,U,e.opts.jsonPointers,!0),y.dataPathArr[I]=U;var j=e.validate(y);y.baseId=R,e.util.varOccurences(j,P)<2?t+=" "+e.util.varReplace(j,P,T)+" ":t+=" var "+P+" = "+T+"; "+j+" ",t+=" }  ",p&&(t+=" if ("+g+") { ",b+="}")}}if(typeof O=="object"&&(e.opts.strictKeywords?typeof O=="object"&&Object.keys(O).length>0||O===!1:e.util.schemaHasRules(O,e.RULES.all))){y.schema=O,y.schemaPath=e.schemaPath+".additionalItems",y.errSchemaPath=e.errSchemaPath+"/additionalItems",t+=" "+g+" = true; if ("+m+".length > "+i.length+") {  for (var "+S+" = "+i.length+"; "+S+" < "+m+".length; "+S+"++) { ",y.errorPath=e.util.getPathExpr(e.errorPath,S,e.opts.jsonPointers,!0);var T=m+"["+S+"]";y.dataPathArr[I]=S;var j=e.validate(y);y.baseId=R,e.util.varOccurences(j,P)<2?t+=" "+e.util.varReplace(j,P,T)+" ":t+=" var "+P+" = "+T+"; "+j+" ",p&&(t+=" if (!"+g+") break; "),t+=" } }  ",p&&(t+=" if ("+g+") { ",b+="}")}}else if(e.opts.strictKeywords?typeof i=="object"&&Object.keys(i).length>0||i===!1:e.util.schemaHasRules(i,e.RULES.all)){y.schema=i,y.schemaPath=l,y.errSchemaPath=u,t+="  for (var "+S+" = 0; "+S+" < "+m+".length; "+S+"++) { ",y.errorPath=e.util.getPathExpr(e.errorPath,S,e.opts.jsonPointers,!0);var T=m+"["+S+"]";y.dataPathArr[I]=S;var j=e.validate(y);y.baseId=R,e.util.varOccurences(j,P)<2?t+=" "+e.util.varReplace(j,P,T)+" ":t+=" var "+P+" = "+T+"; "+j+" ",p&&(t+=" if (!"+g+") break; "),t+=" }"}return p&&(t+=" "+b+" if ("+d+" == errors) {"),t}});var as=B((Rh,Ri)=>{"use strict";Ri.exports=function(e,r,s){var t=" ",n=e.level,o=e.dataLevel,i=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,R,m="data"+(o||""),_=e.opts.$data&&i&&i.$data,d;_?(t+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",d="schema"+n):d=i;var y=r=="maximum",b=y?"exclusiveMaximum":"exclusiveMinimum",g=e.schema[b],S=e.opts.$data&&g&&g.$data,I=y?"<":">",P=y?">":"<",R=void 0;if(!(_||typeof i=="number"||i===void 0))throw new Error(r+" must be number");if(!(S||g===void 0||typeof g=="number"||typeof g=="boolean"))throw new Error(b+" must be number or boolean");if(S){var O=e.util.getData(g.$data,o,e.dataPathArr),D="exclusive"+n,Q="exclType"+n,L="exclIsNumber"+n,$="op"+n,M="' + "+$+" + '";t+=" var schemaExcl"+n+" = "+O+"; ",O="schemaExcl"+n,t+=" var "+D+"; var "+Q+" = typeof "+O+"; if ("+Q+" != 'boolean' && "+Q+" != 'undefined' && "+Q+" != 'number') { ";var R=b,U=U||[];U.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(R||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: '"+b+" should be boolean' "),e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var q=t;t=U.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+q+"]); ":t+=" validate.errors = ["+q+"]; return false; ":t+=" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else if ( ",_&&(t+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),t+=" "+Q+" == 'number' ? ( ("+D+" = "+d+" === undefined || "+O+" "+I+"= "+d+") ? "+m+" "+P+"= "+O+" : "+m+" "+P+" "+d+" ) : ( ("+D+" = "+O+" === true) ? "+m+" "+P+"= "+d+" : "+m+" "+P+" "+d+" ) || "+m+" !== "+m+") { var op"+n+" = "+D+" ? '"+I+"' : '"+I+"='; ",i===void 0&&(R=b,u=e.errSchemaPath+"/"+b,d=O,_=S)}else{var L=typeof g=="number",M=I;if(L&&_){var $="'"+M+"'";t+=" if ( ",_&&(t+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),t+=" ( "+d+" === undefined || "+g+" "+I+"= "+d+" ? "+m+" "+P+"= "+g+" : "+m+" "+P+" "+d+" ) || "+m+" !== "+m+") { "}else{L&&i===void 0?(D=!0,R=b,u=e.errSchemaPath+"/"+b,d=g,P+="="):(L&&(d=Math[y?"min":"max"](g,i)),g===(L?d:!0)?(D=!0,R=b,u=e.errSchemaPath+"/"+b,P+="="):(D=!1,M+="="));var $="'"+M+"'";t+=" if ( ",_&&(t+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),t+=" "+m+" "+P+" "+d+" || "+m+" !== "+m+") { "}}R=R||r;var U=U||[];U.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(R||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { comparison: "+$+", limit: "+d+", exclusive: "+D+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be "+M+" ",_?t+="' + "+d:t+=""+d+"'"),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+l:t+=""+i,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var q=t;return t=U.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+q+"]); ":t+=" validate.errors = ["+q+"]; return false; ":t+=" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",p&&(t+=" else { "),t}});var ss=B((Th,Ti)=>{"use strict";Ti.exports=function(e,r,s){var t=" ",n=e.level,o=e.dataLevel,i=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,b,m="data"+(o||""),_=e.opts.$data&&i&&i.$data,d;if(_?(t+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",d="schema"+n):d=i,!(_||typeof i=="number"))throw new Error(r+" must be number");var y=r=="maxItems"?">":"<";t+="if ( ",_&&(t+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),t+=" "+m+".length "+y+" "+d+") { ";var b=r,g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(b||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+d+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have ",r=="maxItems"?t+="more":t+="fewer",t+=" than ",_?t+="' + "+d+" + '":t+=""+i,t+=" items' "),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+l:t+=""+i,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var S=t;return t=g.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+S+"]); ":t+=" validate.errors = ["+S+"]; return false; ":t+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",p&&(t+=" else { "),t}});var ns=B((Ih,Ii)=>{"use strict";Ii.exports=function(e,r,s){var t=" ",n=e.level,o=e.dataLevel,i=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,b,m="data"+(o||""),_=e.opts.$data&&i&&i.$data,d;if(_?(t+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",d="schema"+n):d=i,!(_||typeof i=="number"))throw new Error(r+" must be number");var y=r=="maxLength"?">":"<";t+="if ( ",_&&(t+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),e.opts.unicode===!1?t+=" "+m+".length ":t+=" ucs2length("+m+") ",t+=" "+y+" "+d+") { ";var b=r,g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(b||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+d+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be ",r=="maxLength"?t+="longer":t+="shorter",t+=" than ",_?t+="' + "+d+" + '":t+=""+i,t+=" characters' "),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+l:t+=""+i,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var S=t;return t=g.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+S+"]); ":t+=" validate.errors = ["+S+"]; return false; ":t+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",p&&(t+=" else { "),t}});var is=B((Oh,Oi)=>{"use strict";Oi.exports=function(e,r,s){var t=" ",n=e.level,o=e.dataLevel,i=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,b,m="data"+(o||""),_=e.opts.$data&&i&&i.$data,d;if(_?(t+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",d="schema"+n):d=i,!(_||typeof i=="number"))throw new Error(r+" must be number");var y=r=="maxProperties"?">":"<";t+="if ( ",_&&(t+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),t+=" Object.keys("+m+").length "+y+" "+d+") { ";var b=r,g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(b||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+d+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have ",r=="maxProperties"?t+="more":t+="fewer",t+=" than ",_?t+="' + "+d+" + '":t+=""+i,t+=" properties' "),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+l:t+=""+i,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var S=t;return t=g.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+S+"]); ":t+=" validate.errors = ["+S+"]; return false; ":t+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",p&&(t+=" else { "),t}});var $i=B((Dh,Di)=>{"use strict";Di.exports=function(e,r,s){var t=" ",n=e.level,o=e.dataLevel,i=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(o||""),_=e.opts.$data&&i&&i.$data,d;if(_?(t+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",d="schema"+n):d=i,!(_||typeof i=="number"))throw new Error(r+" must be number");t+="var division"+n+";if (",_&&(t+=" "+d+" !== undefined && ( typeof "+d+" != 'number' || "),t+=" (division"+n+" = "+m+" / "+d+", ",e.opts.multipleOfPrecision?t+=" Math.abs(Math.round(division"+n+") - division"+n+") > 1e-"+e.opts.multipleOfPrecision+" ":t+=" division"+n+" !== parseInt(division"+n+") ",t+=" ) ",_&&(t+="  )  "),t+=" ) {   ";var y=y||[];y.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { multipleOf: "+d+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be multiple of ",_?t+="' + "+d:t+=""+d+"'"),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+l:t+=""+i,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var b=t;return t=y.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+b+"]); ":t+=" validate.errors = ["+b+"]; return false; ":t+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",p&&(t+=" else { "),t}});var Ai=B(($h,ji)=>{"use strict";ji.exports=function(e,r,s){var t=" ",n=e.level,o=e.dataLevel,i=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(o||""),_="errs__"+n,d=e.util.copy(e);d.level++;var y="valid"+d.level;if(e.opts.strictKeywords?typeof i=="object"&&Object.keys(i).length>0||i===!1:e.util.schemaHasRules(i,e.RULES.all)){d.schema=i,d.schemaPath=l,d.errSchemaPath=u,t+=" var "+_+" = errors;  ";var b=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.createErrors=!1;var g;d.opts.allErrors&&(g=d.opts.allErrors,d.opts.allErrors=!1),t+=" "+e.validate(d)+" ",d.createErrors=!0,g&&(d.opts.allErrors=g),e.compositeRule=d.compositeRule=b,t+=" if ("+y+") {   ";var S=S||[];S.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be valid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var I=t;t=S.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+I+"]); ":t+=" validate.errors = ["+I+"]; return false; ":t+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else {  errors = "+_+"; if (vErrors !== null) { if ("+_+") vErrors.length = "+_+"; else vErrors = null; } ",e.opts.allErrors&&(t+=" } ")}else t+="  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be valid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",p&&(t+=" if (false) { ");return t}});var ki=B((jh,Ci)=>{"use strict";Ci.exports=function(e,r,s){var t=" ",n=e.level,o=e.dataLevel,i=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(o||""),_="valid"+n,d="errs__"+n,y=e.util.copy(e),b="";y.level++;var g="valid"+y.level,S=y.baseId,I="prevValid"+n,P="passingSchemas"+n;t+="var "+d+" = errors , "+I+" = false , "+_+" = false , "+P+" = null; ";var R=e.compositeRule;e.compositeRule=y.compositeRule=!0;var O=i;if(O)for(var D,Q=-1,L=O.length-1;Q<L;)D=O[Q+=1],(e.opts.strictKeywords?typeof D=="object"&&Object.keys(D).length>0||D===!1:e.util.schemaHasRules(D,e.RULES.all))?(y.schema=D,y.schemaPath=l+"["+Q+"]",y.errSchemaPath=u+"/"+Q,t+="  "+e.validate(y)+" ",y.baseId=S):t+=" var "+g+" = true; ",Q&&(t+=" if ("+g+" && "+I+") { "+_+" = false; "+P+" = ["+P+", "+Q+"]; } else { ",b+="}"),t+=" if ("+g+") { "+_+" = "+I+" = true; "+P+" = "+Q+"; }";return e.compositeRule=y.compositeRule=R,t+=""+b+"if (!"+_+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { passingSchemas: "+P+" } ",e.opts.messages!==!1&&(t+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&p&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+="} else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }",e.opts.allErrors&&(t+=" } "),t}});var qi=B((Ah,Ni)=>{"use strict";Ni.exports=function(e,r,s){var t=" ",n=e.level,o=e.dataLevel,i=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(o||""),_=e.opts.$data&&i&&i.$data,d;_?(t+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",d="schema"+n):d=i;var y=_?"(new RegExp("+d+"))":e.usePattern(i);t+="if ( ",_&&(t+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),t+=" !"+y+".test("+m+") ) {   ";var b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { pattern:  ",_?t+=""+d:t+=""+e.util.toQuotedString(i),t+="  } ",e.opts.messages!==!1&&(t+=` , message: 'should match pattern "`,_?t+="' + "+d+" + '":t+=""+e.util.escapeQuotes(i),t+=`"' `),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+l:t+=""+e.util.toQuotedString(i),t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var g=t;return t=b.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+g+"]); ":t+=" validate.errors = ["+g+"]; return false; ":t+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",p&&(t+=" else { "),t}});var Ui=B((Ch,Fi)=>{"use strict";Fi.exports=function(e,r,s){var t=" ",n=e.level,o=e.dataLevel,i=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(o||""),_="errs__"+n,d=e.util.copy(e),y="";d.level++;var b="valid"+d.level,g="key"+n,S="idx"+n,I=d.dataLevel=e.dataLevel+1,P="data"+I,R="dataProperties"+n,O=Object.keys(i||{}).filter(ee),D=e.schema.patternProperties||{},Q=Object.keys(D).filter(ee),L=e.schema.additionalProperties,$=O.length||Q.length,M=L===!1,U=typeof L=="object"&&Object.keys(L).length,q=e.opts.removeAdditional,T=M||U||q,j=e.opts.ownProperties,F=e.baseId,oe=e.schema.required;if(oe&&!(e.opts.$data&&oe.$data)&&oe.length<e.opts.loopRequired)var Y=e.util.toHash(oe);function ee(Ge){return Ge!=="__proto__"}if(t+="var "+_+" = errors;var "+b+" = true;",j&&(t+=" var "+R+" = undefined;"),T){if(j?t+=" "+R+" = "+R+" || Object.keys("+m+"); for (var "+S+"=0; "+S+"<"+R+".length; "+S+"++) { var "+g+" = "+R+"["+S+"]; ":t+=" for (var "+g+" in "+m+") { ",$){if(t+=" var isAdditional"+n+" = !(false ",O.length)if(O.length>8)t+=" || validate.schema"+l+".hasOwnProperty("+g+") ";else{var W=O;if(W)for(var V,me=-1,Ie=W.length-1;me<Ie;)V=W[me+=1],t+=" || "+g+" == "+e.util.toQuotedString(V)+" "}if(Q.length){var $e=Q;if($e)for(var ae,ye=-1,we=$e.length-1;ye<we;)ae=$e[ye+=1],t+=" || "+e.usePattern(ae)+".test("+g+") "}t+=" ); if (isAdditional"+n+") { "}if(q=="all")t+=" delete "+m+"["+g+"]; ";else{var je=e.errorPath,gt="' + "+g+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers)),M)if(q)t+=" delete "+m+"["+g+"]; ";else{t+=" "+b+" = false; ";var ct=u;u=e.errSchemaPath+"/additionalProperties";var _e=_e||[];_e.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { additionalProperty: '"+gt+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is an invalid additional property":t+="should NOT have additional properties",t+="' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var ve=t;t=_e.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+ve+"]); ":t+=" validate.errors = ["+ve+"]; return false; ":t+=" var err = "+ve+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=ct,p&&(t+=" break; ")}else if(U)if(q=="failing"){t+=" var "+_+" = errors;  ";var Rt=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.schema=L,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var Oe=m+"["+g+"]";d.dataPathArr[I]=g;var ne=e.validate(d);d.baseId=F,e.util.varOccurences(ne,P)<2?t+=" "+e.util.varReplace(ne,P,Oe)+" ":t+=" var "+P+" = "+Oe+"; "+ne+" ",t+=" if (!"+b+") { errors = "+_+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+m+"["+g+"]; }  ",e.compositeRule=d.compositeRule=Rt}else{d.schema=L,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var Oe=m+"["+g+"]";d.dataPathArr[I]=g;var ne=e.validate(d);d.baseId=F,e.util.varOccurences(ne,P)<2?t+=" "+e.util.varReplace(ne,P,Oe)+" ":t+=" var "+P+" = "+Oe+"; "+ne+" ",p&&(t+=" if (!"+b+") break; ")}e.errorPath=je}$&&(t+=" } "),t+=" }  ",p&&(t+=" if ("+b+") { ",y+="}")}var yt=e.opts.useDefaults&&!e.compositeRule;if(O.length){var ut=O;if(ut)for(var V,Tt=-1,It=ut.length-1;Tt<It;){V=ut[Tt+=1];var Re=i[V];if(e.opts.strictKeywords?typeof Re=="object"&&Object.keys(Re).length>0||Re===!1:e.util.schemaHasRules(Re,e.RULES.all)){var Me=e.util.getProperty(V),Oe=m+Me,Ce=yt&&Re.default!==void 0;d.schema=Re,d.schemaPath=l+Me,d.errSchemaPath=u+"/"+e.util.escapeFragment(V),d.errorPath=e.util.getPath(e.errorPath,V,e.opts.jsonPointers),d.dataPathArr[I]=e.util.toQuotedString(V);var ne=e.validate(d);if(d.baseId=F,e.util.varOccurences(ne,P)<2){ne=e.util.varReplace(ne,P,Oe);var Ae=Oe}else{var Ae=P;t+=" var "+P+" = "+Oe+"; "}if(Ce)t+=" "+ne+" ";else{if(Y&&Y[V]){t+=" if ( "+Ae+" === undefined ",j&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(V)+"') "),t+=") { "+b+" = false; ";var je=e.errorPath,ct=u,et=e.util.escapeQuotes(V);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(je,V,e.opts.jsonPointers)),u=e.errSchemaPath+"/required";var _e=_e||[];_e.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+et+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+et+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var ve=t;t=_e.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+ve+"]); ":t+=" validate.errors = ["+ve+"]; return false; ":t+=" var err = "+ve+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=ct,e.errorPath=je,t+=" } else { "}else p?(t+=" if ( "+Ae+" === undefined ",j&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(V)+"') "),t+=") { "+b+" = true; } else { "):(t+=" if ("+Ae+" !== undefined ",j&&(t+=" &&   Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(V)+"') "),t+=" ) { ");t+=" "+ne+" } "}}p&&(t+=" if ("+b+") { ",y+="}")}}if(Q.length){var Fe=Q;if(Fe)for(var ae,$r=-1,ba=Fe.length-1;$r<ba;){ae=Fe[$r+=1];var Re=D[ae];if(e.opts.strictKeywords?typeof Re=="object"&&Object.keys(Re).length>0||Re===!1:e.util.schemaHasRules(Re,e.RULES.all)){d.schema=Re,d.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ae),d.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ae),j?t+=" "+R+" = "+R+" || Object.keys("+m+"); for (var "+S+"=0; "+S+"<"+R+".length; "+S+"++) { var "+g+" = "+R+"["+S+"]; ":t+=" for (var "+g+" in "+m+") { ",t+=" if ("+e.usePattern(ae)+".test("+g+")) { ",d.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var Oe=m+"["+g+"]";d.dataPathArr[I]=g;var ne=e.validate(d);d.baseId=F,e.util.varOccurences(ne,P)<2?t+=" "+e.util.varReplace(ne,P,Oe)+" ":t+=" var "+P+" = "+Oe+"; "+ne+" ",p&&(t+=" if (!"+b+") break; "),t+=" } ",p&&(t+=" else "+b+" = true; "),t+=" }  ",p&&(t+=" if ("+b+") { ",y+="}")}}}return p&&(t+=" "+y+" if ("+_+" == errors) {"),t}});var Mi=B((kh,Li)=>{"use strict";Li.exports=function(e,r,s){var t=" ",n=e.level,o=e.dataLevel,i=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(o||""),_="errs__"+n,d=e.util.copy(e),y="";d.level++;var b="valid"+d.level;if(t+="var "+_+" = errors;",e.opts.strictKeywords?typeof i=="object"&&Object.keys(i).length>0||i===!1:e.util.schemaHasRules(i,e.RULES.all)){d.schema=i,d.schemaPath=l,d.errSchemaPath=u;var g="key"+n,S="idx"+n,I="i"+n,P="' + "+g+" + '",R=d.dataLevel=e.dataLevel+1,O="data"+R,D="dataProperties"+n,Q=e.opts.ownProperties,L=e.baseId;Q&&(t+=" var "+D+" = undefined; "),Q?t+=" "+D+" = "+D+" || Object.keys("+m+"); for (var "+S+"=0; "+S+"<"+D+".length; "+S+"++) { var "+g+" = "+D+"["+S+"]; ":t+=" for (var "+g+" in "+m+") { ",t+=" var startErrs"+n+" = errors; ";var $=g,M=e.compositeRule;e.compositeRule=d.compositeRule=!0;var U=e.validate(d);d.baseId=L,e.util.varOccurences(U,O)<2?t+=" "+e.util.varReplace(U,O,$)+" ":t+=" var "+O+" = "+$+"; "+U+" ",e.compositeRule=d.compositeRule=M,t+=" if (!"+b+") { for (var "+I+"=startErrs"+n+"; "+I+"<errors; "+I+"++) { vErrors["+I+"].propertyName = "+g+"; }   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { propertyName: '"+P+"' } ",e.opts.messages!==!1&&(t+=" , message: 'property name \\'"+P+"\\' is invalid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&p&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),p&&(t+=" break; "),t+=" } }"}return p&&(t+=" "+y+" if ("+_+" == errors) {"),t}});var Qi=B((Nh,zi)=>{"use strict";zi.exports=function(e,r,s){var t=" ",n=e.level,o=e.dataLevel,i=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(o||""),_="valid"+n,d=e.opts.$data&&i&&i.$data,y;d?(t+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",y="schema"+n):y=i;var b="schema"+n;if(!d)if(i.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var g=[],S=i;if(S)for(var I,P=-1,R=S.length-1;P<R;){I=S[P+=1];var O=e.schema.properties[I];O&&(e.opts.strictKeywords?typeof O=="object"&&Object.keys(O).length>0||O===!1:e.util.schemaHasRules(O,e.RULES.all))||(g[g.length]=I)}}else var g=i;if(d||g.length){var D=e.errorPath,Q=d||g.length>=e.opts.loopRequired,L=e.opts.ownProperties;if(p)if(t+=" var missing"+n+"; ",Q){d||(t+=" var "+b+" = validate.schema"+l+"; ");var $="i"+n,M="schema"+n+"["+$+"]",U="' + "+M+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(D,M,e.opts.jsonPointers)),t+=" var "+_+" = true; ",d&&(t+=" if (schema"+n+" === undefined) "+_+" = true; else if (!Array.isArray(schema"+n+")) "+_+" = false; else {"),t+=" for (var "+$+" = 0; "+$+" < "+b+".length; "+$+"++) { "+_+" = "+m+"["+b+"["+$+"]] !== undefined ",L&&(t+=" &&   Object.prototype.hasOwnProperty.call("+m+", "+b+"["+$+"]) "),t+="; if (!"+_+") break; } ",d&&(t+="  }  "),t+="  if (!"+_+") {   ";var q=q||[];q.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+U+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+U+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var T=t;t=q.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+T+"]); ":t+=" validate.errors = ["+T+"]; return false; ":t+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { "}else{t+=" if ( ";var j=g;if(j)for(var F,$=-1,oe=j.length-1;$<oe;){F=j[$+=1],$&&(t+=" || ");var Y=e.util.getProperty(F),ee=m+Y;t+=" ( ( "+ee+" === undefined ",L&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(F)+"') "),t+=") && (missing"+n+" = "+e.util.toQuotedString(e.opts.jsonPointers?F:Y)+") ) "}t+=") {  ";var M="missing"+n,U="' + "+M+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(D,M,!0):D+" + "+M);var q=q||[];q.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+U+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+U+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var T=t;t=q.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+T+"]); ":t+=" validate.errors = ["+T+"]; return false; ":t+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { "}else if(Q){d||(t+=" var "+b+" = validate.schema"+l+"; ");var $="i"+n,M="schema"+n+"["+$+"]",U="' + "+M+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(D,M,e.opts.jsonPointers)),d&&(t+=" if ("+b+" && !Array.isArray("+b+")) {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+U+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+U+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+b+" !== undefined) { "),t+=" for (var "+$+" = 0; "+$+" < "+b+".length; "+$+"++) { if ("+m+"["+b+"["+$+"]] === undefined ",L&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", "+b+"["+$+"]) "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+U+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+U+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",d&&(t+="  }  ")}else{var W=g;if(W)for(var F,V=-1,me=W.length-1;V<me;){F=W[V+=1];var Y=e.util.getProperty(F),U=e.util.escapeQuotes(F),ee=m+Y;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(D,F,e.opts.jsonPointers)),t+=" if ( "+ee+" === undefined ",L&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(F)+"') "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+U+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+U+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=D}else p&&(t+=" if (true) {");return t}});var Hi=B((qh,Vi)=>{"use strict";Vi.exports=function(e,r,s){var t=" ",n=e.level,o=e.dataLevel,i=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(o||""),_="valid"+n,d=e.opts.$data&&i&&i.$data,y;if(d?(t+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",y="schema"+n):y=i,(i||d)&&e.opts.uniqueItems!==!1){d&&(t+=" var "+_+"; if ("+y+" === false || "+y+" === undefined) "+_+" = true; else if (typeof "+y+" != 'boolean') "+_+" = false; else { "),t+=" var i = "+m+".length , "+_+" = true , j; if (i > 1) { ";var b=e.schema.items&&e.schema.items.type,g=Array.isArray(b);if(!b||b=="object"||b=="array"||g&&(b.indexOf("object")>=0||b.indexOf("array")>=0))t+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+m+"[i], "+m+"[j])) { "+_+" = false; break outer; } } } ";else{t+=" var itemIndices = {}, item; for (;i--;) { var item = "+m+"[i]; ";var S="checkDataType"+(g?"s":"");t+=" if ("+e.util[S](b,"item",e.opts.strictNumbers,!0)+") continue; ",g&&(t+=` if (typeof item == 'string') item = '"' + item; `),t+=" if (typeof itemIndices[item] == 'number') { "+_+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}t+=" } ",d&&(t+="  }  "),t+=" if (!"+_+") {   ";var I=I||[];I.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(t+=" , schema:  ",d?t+="validate.schema"+l:t+=""+i,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var P=t;t=I.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",p&&(t+=" else { ")}else p&&(t+=" if (true) { ");return t}});var Bi=B((Fh,Ji)=>{"use strict";Ji.exports={$ref:ni(),allOf:oi(),anyOf:ui(),$comment:di(),const:pi(),contains:mi(),dependencies:gi(),enum:_i(),format:Ei(),if:Si(),items:wi(),maximum:as(),minimum:as(),maxItems:ss(),minItems:ss(),maxLength:ns(),minLength:ns(),maxProperties:is(),minProperties:is(),multipleOf:$i(),not:Ai(),oneOf:ki(),pattern:qi(),properties:Ui(),propertyNames:Mi(),required:Qi(),uniqueItems:Hi(),validate:ts()}});var Gi=B((Uh,Ki)=>{"use strict";var Zi=Bi(),os=Zt().toHash;Ki.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],r=["type","$comment"],s=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],t=["number","integer","string","array","object","boolean","null"];return e.all=os(r),e.types=os(t),e.forEach(function(n){n.rules=n.rules.map(function(o){var i;if(typeof o=="object"){var l=Object.keys(o)[0];i=o[l],o=l,i.forEach(function(p){r.push(p),e.all[p]=!0})}r.push(o);var u=e.all[o]={keyword:o,code:Zi[o],implements:i};return u}),e.all.$comment={keyword:"$comment",code:Zi.$comment},n.type&&(e.types[n.type]=n)}),e.keywords=os(r.concat(s)),e.custom={},e}});var Xi=B((Lh,Yi)=>{"use strict";var Wi=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];Yi.exports=function(a,e){for(var r=0;r<e.length;r++){a=JSON.parse(JSON.stringify(a));var s=e[r].split("/"),t=a,n;for(n=1;n<s.length;n++)t=t[s[n]];for(n=0;n<Wi.length;n++){var o=Wi[n],i=t[o];i&&(t[o]={anyOf:[i,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return a}});var ro=B((Mh,to)=>{"use strict";var bf=sa().MissingRef;to.exports=eo;function eo(a,e,r){var s=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(r=e,e=void 0);var t=n(a).then(function(){var i=s._addSchema(a,void 0,e);return i.validate||o(i)});return r&&t.then(function(i){r(null,i)},r),t;function n(i){var l=i.$schema;return l&&!s.getSchema(l)?eo.call(s,{$ref:l},!0):Promise.resolve()}function o(i){try{return s._compile(i)}catch(u){if(u instanceof bf)return l(u);throw u}function l(u){var p=u.missingSchema;if(d(p))throw new Error("Schema "+p+" is loaded but "+u.missingRef+" cannot be resolved");var m=s._loadingSchemas[p];return m||(m=s._loadingSchemas[p]=s._opts.loadSchema(p),m.then(_,_)),m.then(function(y){if(!d(p))return n(y).then(function(){d(p)||s.addSchema(y,p,void 0,e)})}).then(function(){return o(i)});function _(){delete s._loadingSchemas[p]}function d(y){return s._refs[y]||s._schemas[y]}}}}});var so=B((zh,ao)=>{"use strict";ao.exports=function(e,r,s){var t=" ",n=e.level,o=e.dataLevel,i=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m,_="data"+(o||""),d="valid"+n,y="errs__"+n,b=e.opts.$data&&i&&i.$data,g;b?(t+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",g="schema"+n):g=i;var S=this,I="definition"+n,P=S.definition,R="",O,D,Q,L,$;if(b&&P.$data){$="keywordValidate"+n;var M=P.validateSchema;t+=" var "+I+" = RULES.custom['"+r+"'].definition; var "+$+" = "+I+".validate;"}else{if(L=e.useCustomRule(S,i,e.schema,e),!L)return;g="validate.schema"+l,$=L.code,O=P.compile,D=P.inline,Q=P.macro}var U=$+".errors",q="i"+n,T="ruleErr"+n,j=P.async;if(j&&!e.async)throw new Error("async keyword in sync schema");if(D||Q||(t+=""+U+" = null;"),t+="var "+y+" = errors;var "+d+";",b&&P.$data&&(R+="}",t+=" if ("+g+" === undefined) { "+d+" = true; } else { ",M&&(R+="}",t+=" "+d+" = "+I+".validateSchema("+g+"); if ("+d+") { ")),D)P.statements?t+=" "+L.validate+" ":t+=" "+d+" = "+L.validate+"; ";else if(Q){var F=e.util.copy(e),R="";F.level++;var oe="valid"+F.level;F.schema=L.validate,F.schemaPath="";var Y=e.compositeRule;e.compositeRule=F.compositeRule=!0;var ee=e.validate(F).replace(/validate\.schema/g,$);e.compositeRule=F.compositeRule=Y,t+=" "+ee}else{var W=W||[];W.push(t),t="",t+="  "+$+".call( ",e.opts.passContext?t+="this":t+="self",O||P.schema===!1?t+=" , "+_+" ":t+=" , "+g+" , "+_+" , validate.schema"+e.schemaPath+" ",t+=" , (dataPath || '')",e.errorPath!='""'&&(t+=" + "+e.errorPath);var V=o?"data"+(o-1||""):"parentData",me=o?e.dataPathArr[o]:"parentDataProperty";t+=" , "+V+" , "+me+" , rootData )  ";var Ie=t;t=W.pop(),P.errors===!1?(t+=" "+d+" = ",j&&(t+="await "),t+=""+Ie+"; "):j?(U="customErrors"+n,t+=" var "+U+" = null; try { "+d+" = await "+Ie+"; } catch (e) { "+d+" = false; if (e instanceof ValidationError) "+U+" = e.errors; else throw e; } "):t+=" "+U+" = null; "+d+" = "+Ie+"; "}if(P.modifying&&(t+=" if ("+V+") "+_+" = "+V+"["+me+"];"),t+=""+R,P.valid)p&&(t+=" if (true) { ");else{t+=" if ( ",P.valid===void 0?(t+=" !",Q?t+=""+oe:t+=""+d):t+=" "+!P.valid+" ",t+=") { ",m=S.keyword;var W=W||[];W.push(t),t="";var W=W||[];W.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(m||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+S.keyword+"' } ",e.opts.messages!==!1&&(t+=` , message: 'should pass "`+S.keyword+`" keyword validation' `),e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var $e=t;t=W.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+$e+"]); ":t+=" validate.errors = ["+$e+"]; return false; ":t+=" var err = "+$e+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var ae=t;t=W.pop(),D?P.errors?P.errors!="full"&&(t+="  for (var "+q+"="+y+"; "+q+"<errors; "+q+"++) { var "+T+" = vErrors["+q+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+T+".schemaPath === undefined) { "+T+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(t+=" "+T+".schema = "+g+"; "+T+".data = "+_+"; "),t+=" } "):P.errors===!1?t+=" "+ae+" ":(t+=" if ("+y+" == errors) { "+ae+" } else {  for (var "+q+"="+y+"; "+q+"<errors; "+q+"++) { var "+T+" = vErrors["+q+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+T+".schemaPath === undefined) { "+T+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(t+=" "+T+".schema = "+g+"; "+T+".data = "+_+"; "),t+=" } } "):Q?(t+="   var err =   ",e.createErrors!==!1?(t+=" { keyword: '"+(m||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+S.keyword+"' } ",e.opts.messages!==!1&&(t+=` , message: 'should pass "`+S.keyword+`" keyword validation' `),e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&p&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; ")):P.errors===!1?t+=" "+ae+" ":(t+=" if (Array.isArray("+U+")) { if (vErrors === null) vErrors = "+U+"; else vErrors = vErrors.concat("+U+"); errors = vErrors.length;  for (var "+q+"="+y+"; "+q+"<errors; "+q+"++) { var "+T+" = vErrors["+q+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+e.errorPath+";  "+T+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(t+=" "+T+".schema = "+g+"; "+T+".data = "+_+"; "),t+=" } } else { "+ae+" } "),t+=" } ",p&&(t+=" else { ")}return t}});var cs=B((Qh,Ef)=>{Ef.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var oo=B((Vh,io)=>{"use strict";var no=cs();io.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:no.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:no.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}});var uo=B((Hh,co)=>{"use strict";var xf=/^[a-z_$][a-z0-9_$-]*$/i,Sf=so(),Pf=oo();co.exports={add:wf,get:Rf,remove:Tf,validate:us};function wf(a,e){var r=this.RULES;if(r.keywords[a])throw new Error("Keyword "+a+" is already defined");if(!xf.test(a))throw new Error("Keyword "+a+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var s=e.type;if(Array.isArray(s))for(var t=0;t<s.length;t++)o(a,s[t],e);else o(a,s,e);var n=e.metaSchema;n&&(e.$data&&this._opts.$data&&(n={anyOf:[n,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(n,!0))}r.keywords[a]=r.all[a]=!0;function o(i,l,u){for(var p,m=0;m<r.length;m++){var _=r[m];if(_.type==l){p=_;break}}p||(p={type:l,rules:[]},r.push(p));var d={keyword:i,definition:u,custom:!0,code:Sf,implements:u.implements};p.rules.push(d),r.custom[i]=d}return this}function Rf(a){var e=this.RULES.custom[a];return e?e.definition:this.RULES.keywords[a]||!1}function Tf(a){var e=this.RULES;delete e.keywords[a],delete e.all[a],delete e.custom[a];for(var r=0;r<e.length;r++)for(var s=e[r].rules,t=0;t<s.length;t++)if(s[t].keyword==a){s.splice(t,1);break}return this}function us(a,e){us.errors=null;var r=this._validateKeyword=this._validateKeyword||this.compile(Pf,!0);if(r(a))return!0;if(us.errors=r.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(r.errors));return!1}});var lo=B((Jh,If)=>{If.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Eo=B((Bh,bo)=>{"use strict";var po=Qn(),Kt=aa(),Of=Hn(),ho=Za(),Df=es(),$f=ai(),jf=Gi(),mo=Xi(),vo=Zt();bo.exports=ge;ge.prototype.validate=Cf;ge.prototype.compile=kf;ge.prototype.addSchema=Nf;ge.prototype.addMetaSchema=qf;ge.prototype.validateSchema=Ff;ge.prototype.getSchema=Lf;ge.prototype.removeSchema=zf;ge.prototype.addFormat=Gf;ge.prototype.errorsText=Kf;ge.prototype._addSchema=Qf;ge.prototype._compile=Vf;ge.prototype.compileAsync=ro();var fa=uo();ge.prototype.addKeyword=fa.add;ge.prototype.getKeyword=fa.get;ge.prototype.removeKeyword=fa.remove;ge.prototype.validateKeyword=fa.validate;var go=sa();ge.ValidationError=go.Validation;ge.MissingRefError=go.MissingRef;ge.$dataMetaSchema=mo;var da="http://json-schema.org/draft-07/schema",fo=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],Af=["/properties"];function ge(a){if(!(this instanceof ge))return new ge(a);a=this._opts=vo.copy(a)||{},rp(this),this._schemas={},this._refs={},this._fragments={},this._formats=$f(a.format),this._cache=a.cache||new Of,this._loadingSchemas={},this._compilations=[],this.RULES=jf(),this._getId=Hf(a),a.loopRequired=a.loopRequired||1/0,a.errorDataPath=="property"&&(a._errorDataPathProperty=!0),a.serialize===void 0&&(a.serialize=Df),this._metaOpts=tp(this),a.formats&&Xf(this),a.keywords&&ep(this),Wf(this),typeof a.meta=="object"&&this.addMetaSchema(a.meta),a.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),Yf(this)}function Cf(a,e){var r;if(typeof a=="string"){if(r=this.getSchema(a),!r)throw new Error('no schema with key or ref "'+a+'"')}else{var s=this._addSchema(a);r=s.validate||this._compile(s)}var t=r(e);return r.$async!==!0&&(this.errors=r.errors),t}function kf(a,e){var r=this._addSchema(a,void 0,e);return r.validate||this._compile(r)}function Nf(a,e,r,s){if(Array.isArray(a)){for(var t=0;t<a.length;t++)this.addSchema(a[t],void 0,r,s);return this}var n=this._getId(a);if(n!==void 0&&typeof n!="string")throw new Error("schema id must be string");return e=Kt.normalizeId(e||n),_o(this,e),this._schemas[e]=this._addSchema(a,r,s,!0),this}function qf(a,e,r){return this.addSchema(a,e,r,!0),this}function Ff(a,e){var r=a.$schema;if(r!==void 0&&typeof r!="string")throw new Error("$schema must be a string");if(r=r||this._opts.defaultMeta||Uf(this),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var s=this.validate(r,a);if(!s&&e){var t="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(t);else throw new Error(t)}return s}function Uf(a){var e=a._opts.meta;return a._opts.defaultMeta=typeof e=="object"?a._getId(e)||e:a.getSchema(da)?da:void 0,a._opts.defaultMeta}function Lf(a){var e=yo(this,a);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return Mf(this,a)}}function Mf(a,e){var r=Kt.schema.call(a,{schema:{}},e);if(r){var s=r.schema,t=r.root,n=r.baseId,o=po.call(a,s,t,void 0,n);return a._fragments[e]=new ho({ref:e,fragment:!0,schema:s,root:t,baseId:n,validate:o}),o}}function yo(a,e){return e=Kt.normalizeId(e),a._schemas[e]||a._refs[e]||a._fragments[e]}function zf(a){if(a instanceof RegExp)return la(this,this._schemas,a),la(this,this._refs,a),this;switch(typeof a){case"undefined":return la(this,this._schemas),la(this,this._refs),this._cache.clear(),this;case"string":var e=yo(this,a);return e&&this._cache.del(e.cacheKey),delete this._schemas[a],delete this._refs[a],this;case"object":var r=this._opts.serialize,s=r?r(a):a;this._cache.del(s);var t=this._getId(a);t&&(t=Kt.normalizeId(t),delete this._schemas[t],delete this._refs[t])}return this}function la(a,e,r){for(var s in e){var t=e[s];!t.meta&&(!r||r.test(s))&&(a._cache.del(t.cacheKey),delete e[s])}}function Qf(a,e,r,s){if(typeof a!="object"&&typeof a!="boolean")throw new Error("schema should be object or boolean");var t=this._opts.serialize,n=t?t(a):a,o=this._cache.get(n);if(o)return o;s=s||this._opts.addUsedSchema!==!1;var i=Kt.normalizeId(this._getId(a));i&&s&&_o(this,i);var l=this._opts.validateSchema!==!1&&!e,u;l&&!(u=i&&i==Kt.normalizeId(a.$schema))&&this.validateSchema(a,!0);var p=Kt.ids.call(this,a),m=new ho({id:i,schema:a,localRefs:p,cacheKey:n,meta:r});return i[0]!="#"&&s&&(this._refs[i]=m),this._cache.put(n,m),l&&u&&this.validateSchema(a,!0),m}function Vf(a,e){if(a.compiling)return a.validate=t,t.schema=a.schema,t.errors=null,t.root=e||t,a.schema.$async===!0&&(t.$async=!0),t;a.compiling=!0;var r;a.meta&&(r=this._opts,this._opts=this._metaOpts);var s;try{s=po.call(this,a.schema,e,a.localRefs)}catch(n){throw delete a.validate,n}finally{a.compiling=!1,a.meta&&(this._opts=r)}return a.validate=s,a.refs=s.refs,a.refVal=s.refVal,a.root=s.root,s;function t(){var n=a.validate,o=n.apply(this,arguments);return t.errors=n.errors,o}}function Hf(a){switch(a.schemaId){case"auto":return Zf;case"id":return Jf;default:return Bf}}function Jf(a){return a.$id&&this.logger.warn("schema $id ignored",a.$id),a.id}function Bf(a){return a.id&&this.logger.warn("schema id ignored",a.id),a.$id}function Zf(a){if(a.$id&&a.id&&a.$id!=a.id)throw new Error("schema $id is different from id");return a.$id||a.id}function Kf(a,e){if(a=a||this.errors,!a)return"No errors";e=e||{};for(var r=e.separator===void 0?", ":e.separator,s=e.dataVar===void 0?"data":e.dataVar,t="",n=0;n<a.length;n++){var o=a[n];o&&(t+=s+o.dataPath+" "+o.message+r)}return t.slice(0,-r.length)}function Gf(a,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[a]=e,this}function Wf(a){var e;if(a._opts.$data&&(e=lo(),a.addMetaSchema(e,e.$id,!0)),a._opts.meta!==!1){var r=cs();a._opts.$data&&(r=mo(r,Af)),a.addMetaSchema(r,da,!0),a._refs["http://json-schema.org/schema"]=da}}function Yf(a){var e=a._opts.schemas;if(e)if(Array.isArray(e))a.addSchema(e);else for(var r in e)a.addSchema(e[r],r)}function Xf(a){for(var e in a._opts.formats){var r=a._opts.formats[e];a.addFormat(e,r)}}function ep(a){for(var e in a._opts.keywords){var r=a._opts.keywords[e];a.addKeyword(e,r)}}function _o(a,e){if(a._schemas[e]||a._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function tp(a){for(var e=vo.copy(a._opts),r=0;r<fo.length;r++)delete e[fo[r]];return e}function rp(a){var e=a._opts.logger;if(e===!1)a.logger={log:ls,warn:ls,error:ls};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");a.logger=e}}function ls(){}});var c={};mu(c,{BRAND:()=>Qu,DIRTY:()=>jt,EMPTY_PATH:()=>Eu,INVALID:()=>H,NEVER:()=>Tl,OK:()=>De,ParseStatus:()=>Te,Schema:()=>G,ZodAny:()=>Et,ZodArray:()=>vt,ZodBigInt:()=>Ct,ZodBoolean:()=>kt,ZodBranded:()=>Er,ZodCatch:()=>Jt,ZodDate:()=>Nt,ZodDefault:()=>Ht,ZodDiscriminatedUnion:()=>qr,ZodEffects:()=>Je,ZodEnum:()=>Qt,ZodError:()=>ke,ZodFirstPartyTypeKind:()=>J,ZodFunction:()=>Ur,ZodIntersection:()=>Lt,ZodIssueCode:()=>w,ZodLazy:()=>Mt,ZodLiteral:()=>zt,ZodMap:()=>cr,ZodNaN:()=>lr,ZodNativeEnum:()=>Vt,ZodNever:()=>We,ZodNull:()=>Ft,ZodNullable:()=>nt,ZodNumber:()=>At,ZodObject:()=>Ne,ZodOptional:()=>Ve,ZodParsedType:()=>k,ZodPipeline:()=>xr,ZodPromise:()=>xt,ZodReadonly:()=>Bt,ZodRecord:()=>Fr,ZodSchema:()=>G,ZodSet:()=>ur,ZodString:()=>bt,ZodSymbol:()=>ir,ZodTransformer:()=>Je,ZodTuple:()=>st,ZodType:()=>G,ZodUndefined:()=>qt,ZodUnion:()=>Ut,ZodUnknown:()=>mt,ZodVoid:()=>or,addIssueToContext:()=>C,any:()=>Yu,array:()=>rl,bigint:()=>Bu,boolean:()=>Ys,coerce:()=>Rl,custom:()=>Ks,date:()=>Zu,datetimeRegex:()=>Bs,defaultErrorMap:()=>pt,discriminatedUnion:()=>il,effect:()=>yl,enum:()=>ml,function:()=>fl,getErrorMap:()=>ar,getParsedType:()=>at,instanceof:()=>Hu,intersection:()=>ol,isAborted:()=>kr,isAsync:()=>sr,isDirty:()=>Nr,isValid:()=>_t,late:()=>Vu,lazy:()=>pl,literal:()=>hl,makeIssue:()=>br,map:()=>ll,nan:()=>Ju,nativeEnum:()=>vl,never:()=>el,null:()=>Wu,nullable:()=>bl,number:()=>Ws,object:()=>al,objectUtil:()=>wa,oboolean:()=>wl,onumber:()=>Pl,optional:()=>_l,ostring:()=>Sl,pipeline:()=>xl,preprocess:()=>El,promise:()=>gl,quotelessJson:()=>yu,record:()=>ul,set:()=>dl,setErrorMap:()=>bu,strictObject:()=>sl,string:()=>Gs,symbol:()=>Ku,transformer:()=>yl,tuple:()=>cl,undefined:()=>Gu,union:()=>nl,unknown:()=>Xu,util:()=>X,void:()=>tl});var X;(function(a){a.assertEqual=t=>{};function e(t){}a.assertIs=e;function r(t){throw new Error}a.assertNever=r,a.arrayToEnum=t=>{let n={};for(let o of t)n[o]=o;return n},a.getValidEnumValues=t=>{let n=a.objectKeys(t).filter(i=>typeof t[t[i]]!="number"),o={};for(let i of n)o[i]=t[i];return a.objectValues(o)},a.objectValues=t=>a.objectKeys(t).map(function(n){return t[n]}),a.objectKeys=typeof Object.keys=="function"?t=>Object.keys(t):t=>{let n=[];for(let o in t)Object.prototype.hasOwnProperty.call(t,o)&&n.push(o);return n},a.find=(t,n)=>{for(let o of t)if(n(o))return o},a.isInteger=typeof Number.isInteger=="function"?t=>Number.isInteger(t):t=>typeof t=="number"&&Number.isFinite(t)&&Math.floor(t)===t;function s(t,n=" | "){return t.map(o=>typeof o=="string"?`'${o}'`:o).join(n)}a.joinValues=s,a.jsonStringifyReplacer=(t,n)=>typeof n=="bigint"?n.toString():n})(X||(X={}));var wa;(function(a){a.mergeShapes=(e,r)=>({...e,...r})})(wa||(wa={}));var k=X.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),at=a=>{switch(typeof a){case"undefined":return k.undefined;case"string":return k.string;case"number":return Number.isNaN(a)?k.nan:k.number;case"boolean":return k.boolean;case"function":return k.function;case"bigint":return k.bigint;case"symbol":return k.symbol;case"object":return Array.isArray(a)?k.array:a===null?k.null:a.then&&typeof a.then=="function"&&a.catch&&typeof a.catch=="function"?k.promise:typeof Map<"u"&&a instanceof Map?k.map:typeof Set<"u"&&a instanceof Set?k.set:typeof Date<"u"&&a instanceof Date?k.date:k.object;default:return k.unknown}};var w=X.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),yu=a=>JSON.stringify(a,null,2).replace(/"([^"]+)":/g,"$1:"),ke=class a extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(n){return n.message},s={_errors:[]},t=n=>{for(let o of n.issues)if(o.code==="invalid_union")o.unionErrors.map(t);else if(o.code==="invalid_return_type")t(o.returnTypeError);else if(o.code==="invalid_arguments")t(o.argumentsError);else if(o.path.length===0)s._errors.push(r(o));else{let i=s,l=0;for(;l<o.path.length;){let u=o.path[l];l===o.path.length-1?(i[u]=i[u]||{_errors:[]},i[u]._errors.push(r(o))):i[u]=i[u]||{_errors:[]},i=i[u],l++}}};return t(this),s}static assert(e){if(!(e instanceof a))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,X.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},s=[];for(let t of this.issues)if(t.path.length>0){let n=t.path[0];r[n]=r[n]||[],r[n].push(e(t))}else s.push(e(t));return{formErrors:s,fieldErrors:r}}get formErrors(){return this.flatten()}};ke.create=a=>new ke(a);var _u=(a,e)=>{let r;switch(a.code){case w.invalid_type:a.received===k.undefined?r="Required":r=`Expected ${a.expected}, received ${a.received}`;break;case w.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(a.expected,X.jsonStringifyReplacer)}`;break;case w.unrecognized_keys:r=`Unrecognized key(s) in object: ${X.joinValues(a.keys,", ")}`;break;case w.invalid_union:r="Invalid input";break;case w.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${X.joinValues(a.options)}`;break;case w.invalid_enum_value:r=`Invalid enum value. Expected ${X.joinValues(a.options)}, received '${a.received}'`;break;case w.invalid_arguments:r="Invalid function arguments";break;case w.invalid_return_type:r="Invalid function return type";break;case w.invalid_date:r="Invalid date";break;case w.invalid_string:typeof a.validation=="object"?"includes"in a.validation?(r=`Invalid input: must include "${a.validation.includes}"`,typeof a.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${a.validation.position}`)):"startsWith"in a.validation?r=`Invalid input: must start with "${a.validation.startsWith}"`:"endsWith"in a.validation?r=`Invalid input: must end with "${a.validation.endsWith}"`:X.assertNever(a.validation):a.validation!=="regex"?r=`Invalid ${a.validation}`:r="Invalid";break;case w.too_small:a.type==="array"?r=`Array must contain ${a.exact?"exactly":a.inclusive?"at least":"more than"} ${a.minimum} element(s)`:a.type==="string"?r=`String must contain ${a.exact?"exactly":a.inclusive?"at least":"over"} ${a.minimum} character(s)`:a.type==="number"?r=`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:a.type==="bigint"?r=`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:a.type==="date"?r=`Date must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(a.minimum))}`:r="Invalid input";break;case w.too_big:a.type==="array"?r=`Array must contain ${a.exact?"exactly":a.inclusive?"at most":"less than"} ${a.maximum} element(s)`:a.type==="string"?r=`String must contain ${a.exact?"exactly":a.inclusive?"at most":"under"} ${a.maximum} character(s)`:a.type==="number"?r=`Number must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="bigint"?r=`BigInt must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="date"?r=`Date must be ${a.exact?"exactly":a.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(a.maximum))}`:r="Invalid input";break;case w.custom:r="Invalid input";break;case w.invalid_intersection_types:r="Intersection results could not be merged";break;case w.not_multiple_of:r=`Number must be a multiple of ${a.multipleOf}`;break;case w.not_finite:r="Number must be finite";break;default:r=e.defaultError,X.assertNever(a)}return{message:r}},pt=_u;var zs=pt;function bu(a){zs=a}function ar(){return zs}var br=a=>{let{data:e,path:r,errorMaps:s,issueData:t}=a,n=[...r,...t.path||[]],o={...t,path:n};if(t.message!==void 0)return{...t,path:n,message:t.message};let i="",l=s.filter(u=>!!u).slice().reverse();for(let u of l)i=u(o,{data:e,defaultError:i}).message;return{...t,path:n,message:i}},Eu=[];function C(a,e){let r=ar(),s=br({issueData:e,data:a.data,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,r,r===pt?void 0:pt].filter(t=>!!t)});a.common.issues.push(s)}var Te=class a{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let s=[];for(let t of r){if(t.status==="aborted")return H;t.status==="dirty"&&e.dirty(),s.push(t.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,r){let s=[];for(let t of r){let n=await t.key,o=await t.value;s.push({key:n,value:o})}return a.mergeObjectSync(e,s)}static mergeObjectSync(e,r){let s={};for(let t of r){let{key:n,value:o}=t;if(n.status==="aborted"||o.status==="aborted")return H;n.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),n.value!=="__proto__"&&(typeof o.value<"u"||t.alwaysSet)&&(s[n.value]=o.value)}return{status:e.value,value:s}}},H=Object.freeze({status:"aborted"}),jt=a=>({status:"dirty",value:a}),De=a=>({status:"valid",value:a}),kr=a=>a.status==="aborted",Nr=a=>a.status==="dirty",_t=a=>a.status==="valid",sr=a=>typeof Promise<"u"&&a instanceof Promise;var z;(function(a){a.errToObj=e=>typeof e=="string"?{message:e}:e||{},a.toString=e=>typeof e=="string"?e:e?.message})(z||(z={}));var He=class{constructor(e,r,s,t){this._cachedPath=[],this.parent=e,this.data=r,this._path=s,this._key=t}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Qs=(a,e)=>{if(_t(e))return{success:!0,data:e.value};if(!a.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new ke(a.common.issues);return this._error=r,this._error}}};function Z(a){if(!a)return{};let{errorMap:e,invalid_type_error:r,required_error:s,description:t}=a;if(e&&(r||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:t}:{errorMap:(o,i)=>{let{message:l}=a;return o.code==="invalid_enum_value"?{message:l??i.defaultError}:typeof i.data>"u"?{message:l??s??i.defaultError}:o.code!=="invalid_type"?{message:i.defaultError}:{message:l??r??i.defaultError}},description:t}}var G=class{get description(){return this._def.description}_getType(e){return at(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:at(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Te,ctx:{common:e.parent.common,data:e.data,parsedType:at(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(sr(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let s=this.safeParse(e,r);if(s.success)return s.data;throw s.error}safeParse(e,r){let s={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:at(e)},t=this._parseSync({data:e,path:s.path,parent:s});return Qs(s,t)}"~validate"(e){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:at(e)};if(!this["~standard"].async)try{let s=this._parseSync({data:e,path:[],parent:r});return _t(s)?{value:s.value}:{issues:r.common.issues}}catch(s){s?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(s=>_t(s)?{value:s.value}:{issues:r.common.issues})}async parseAsync(e,r){let s=await this.safeParseAsync(e,r);if(s.success)return s.data;throw s.error}async safeParseAsync(e,r){let s={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:at(e)},t=this._parse({data:e,path:s.path,parent:s}),n=await(sr(t)?t:Promise.resolve(t));return Qs(s,n)}refine(e,r){let s=t=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(t):r;return this._refinement((t,n)=>{let o=e(t),i=()=>n.addIssue({code:w.custom,...s(t)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(i(),!1)):o?!0:(i(),!1)})}refinement(e,r){return this._refinement((s,t)=>e(s)?!0:(t.addIssue(typeof r=="function"?r(s,t):r),!1))}_refinement(e){return new Je({schema:this,typeName:J.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Ve.create(this,this._def)}nullable(){return nt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return vt.create(this)}promise(){return xt.create(this,this._def)}or(e){return Ut.create([this,e],this._def)}and(e){return Lt.create(this,e,this._def)}transform(e){return new Je({...Z(this._def),schema:this,typeName:J.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Ht({...Z(this._def),innerType:this,defaultValue:r,typeName:J.ZodDefault})}brand(){return new Er({typeName:J.ZodBranded,type:this,...Z(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Jt({...Z(this._def),innerType:this,catchValue:r,typeName:J.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return xr.create(this,e)}readonly(){return Bt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},xu=/^c[^\s-]{8,}$/i,Su=/^[0-9a-z]+$/,Pu=/^[0-9A-HJKMNP-TV-Z]{26}$/i,wu=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Ru=/^[a-z0-9_-]{21}$/i,Tu=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Iu=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Ou=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Du="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Ra,$u=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ju=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Au=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Cu=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ku=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Nu=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Hs="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",qu=new RegExp(`^${Hs}$`);function Js(a){let e="[0-5]\\d";a.precision?e=`${e}\\.\\d{${a.precision}}`:a.precision==null&&(e=`${e}(\\.\\d+)?`);let r=a.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function Fu(a){return new RegExp(`^${Js(a)}$`)}function Bs(a){let e=`${Hs}T${Js(a)}`,r=[];return r.push(a.local?"Z?":"Z"),a.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function Uu(a,e){return!!((e==="v4"||!e)&&$u.test(a)||(e==="v6"||!e)&&Au.test(a))}function Lu(a,e){if(!Tu.test(a))return!1;try{let[r]=a.split(".");if(!r)return!1;let s=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),t=JSON.parse(atob(s));return!(typeof t!="object"||t===null||"typ"in t&&t?.typ!=="JWT"||!t.alg||e&&t.alg!==e)}catch{return!1}}function Mu(a,e){return!!((e==="v4"||!e)&&ju.test(a)||(e==="v6"||!e)&&Cu.test(a))}var bt=class a extends G{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==k.string){let n=this._getOrReturnCtx(e);return C(n,{code:w.invalid_type,expected:k.string,received:n.parsedType}),H}let s=new Te,t;for(let n of this._def.checks)if(n.kind==="min")e.data.length<n.value&&(t=this._getOrReturnCtx(e,t),C(t,{code:w.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),s.dirty());else if(n.kind==="max")e.data.length>n.value&&(t=this._getOrReturnCtx(e,t),C(t,{code:w.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),s.dirty());else if(n.kind==="length"){let o=e.data.length>n.value,i=e.data.length<n.value;(o||i)&&(t=this._getOrReturnCtx(e,t),o?C(t,{code:w.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):i&&C(t,{code:w.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),s.dirty())}else if(n.kind==="email")Ou.test(e.data)||(t=this._getOrReturnCtx(e,t),C(t,{validation:"email",code:w.invalid_string,message:n.message}),s.dirty());else if(n.kind==="emoji")Ra||(Ra=new RegExp(Du,"u")),Ra.test(e.data)||(t=this._getOrReturnCtx(e,t),C(t,{validation:"emoji",code:w.invalid_string,message:n.message}),s.dirty());else if(n.kind==="uuid")wu.test(e.data)||(t=this._getOrReturnCtx(e,t),C(t,{validation:"uuid",code:w.invalid_string,message:n.message}),s.dirty());else if(n.kind==="nanoid")Ru.test(e.data)||(t=this._getOrReturnCtx(e,t),C(t,{validation:"nanoid",code:w.invalid_string,message:n.message}),s.dirty());else if(n.kind==="cuid")xu.test(e.data)||(t=this._getOrReturnCtx(e,t),C(t,{validation:"cuid",code:w.invalid_string,message:n.message}),s.dirty());else if(n.kind==="cuid2")Su.test(e.data)||(t=this._getOrReturnCtx(e,t),C(t,{validation:"cuid2",code:w.invalid_string,message:n.message}),s.dirty());else if(n.kind==="ulid")Pu.test(e.data)||(t=this._getOrReturnCtx(e,t),C(t,{validation:"ulid",code:w.invalid_string,message:n.message}),s.dirty());else if(n.kind==="url")try{new URL(e.data)}catch{t=this._getOrReturnCtx(e,t),C(t,{validation:"url",code:w.invalid_string,message:n.message}),s.dirty()}else n.kind==="regex"?(n.regex.lastIndex=0,n.regex.test(e.data)||(t=this._getOrReturnCtx(e,t),C(t,{validation:"regex",code:w.invalid_string,message:n.message}),s.dirty())):n.kind==="trim"?e.data=e.data.trim():n.kind==="includes"?e.data.includes(n.value,n.position)||(t=this._getOrReturnCtx(e,t),C(t,{code:w.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),s.dirty()):n.kind==="toLowerCase"?e.data=e.data.toLowerCase():n.kind==="toUpperCase"?e.data=e.data.toUpperCase():n.kind==="startsWith"?e.data.startsWith(n.value)||(t=this._getOrReturnCtx(e,t),C(t,{code:w.invalid_string,validation:{startsWith:n.value},message:n.message}),s.dirty()):n.kind==="endsWith"?e.data.endsWith(n.value)||(t=this._getOrReturnCtx(e,t),C(t,{code:w.invalid_string,validation:{endsWith:n.value},message:n.message}),s.dirty()):n.kind==="datetime"?Bs(n).test(e.data)||(t=this._getOrReturnCtx(e,t),C(t,{code:w.invalid_string,validation:"datetime",message:n.message}),s.dirty()):n.kind==="date"?qu.test(e.data)||(t=this._getOrReturnCtx(e,t),C(t,{code:w.invalid_string,validation:"date",message:n.message}),s.dirty()):n.kind==="time"?Fu(n).test(e.data)||(t=this._getOrReturnCtx(e,t),C(t,{code:w.invalid_string,validation:"time",message:n.message}),s.dirty()):n.kind==="duration"?Iu.test(e.data)||(t=this._getOrReturnCtx(e,t),C(t,{validation:"duration",code:w.invalid_string,message:n.message}),s.dirty()):n.kind==="ip"?Uu(e.data,n.version)||(t=this._getOrReturnCtx(e,t),C(t,{validation:"ip",code:w.invalid_string,message:n.message}),s.dirty()):n.kind==="jwt"?Lu(e.data,n.alg)||(t=this._getOrReturnCtx(e,t),C(t,{validation:"jwt",code:w.invalid_string,message:n.message}),s.dirty()):n.kind==="cidr"?Mu(e.data,n.version)||(t=this._getOrReturnCtx(e,t),C(t,{validation:"cidr",code:w.invalid_string,message:n.message}),s.dirty()):n.kind==="base64"?ku.test(e.data)||(t=this._getOrReturnCtx(e,t),C(t,{validation:"base64",code:w.invalid_string,message:n.message}),s.dirty()):n.kind==="base64url"?Nu.test(e.data)||(t=this._getOrReturnCtx(e,t),C(t,{validation:"base64url",code:w.invalid_string,message:n.message}),s.dirty()):X.assertNever(n);return{status:s.value,value:e.data}}_regex(e,r,s){return this.refinement(t=>e.test(t),{validation:r,code:w.invalid_string,...z.errToObj(s)})}_addCheck(e){return new a({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...z.errToObj(e)})}url(e){return this._addCheck({kind:"url",...z.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...z.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...z.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...z.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...z.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...z.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...z.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...z.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...z.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...z.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...z.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...z.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...z.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...z.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...z.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...z.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...z.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...z.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...z.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...z.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...z.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...z.errToObj(r)})}nonempty(e){return this.min(1,z.errToObj(e))}trim(){return new a({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new a({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new a({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};bt.create=a=>new bt({checks:[],typeName:J.ZodString,coerce:a?.coerce??!1,...Z(a)});function zu(a,e){let r=(a.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,t=r>s?r:s,n=Number.parseInt(a.toFixed(t).replace(".","")),o=Number.parseInt(e.toFixed(t).replace(".",""));return n%o/10**t}var At=class a extends G{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==k.number){let n=this._getOrReturnCtx(e);return C(n,{code:w.invalid_type,expected:k.number,received:n.parsedType}),H}let s,t=new Te;for(let n of this._def.checks)n.kind==="int"?X.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),C(s,{code:w.invalid_type,expected:"integer",received:"float",message:n.message}),t.dirty()):n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(s=this._getOrReturnCtx(e,s),C(s,{code:w.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),t.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(s=this._getOrReturnCtx(e,s),C(s,{code:w.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),t.dirty()):n.kind==="multipleOf"?zu(e.data,n.value)!==0&&(s=this._getOrReturnCtx(e,s),C(s,{code:w.not_multiple_of,multipleOf:n.value,message:n.message}),t.dirty()):n.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),C(s,{code:w.not_finite,message:n.message}),t.dirty()):X.assertNever(n);return{status:t.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,z.toString(r))}gt(e,r){return this.setLimit("min",e,!1,z.toString(r))}lte(e,r){return this.setLimit("max",e,!0,z.toString(r))}lt(e,r){return this.setLimit("max",e,!1,z.toString(r))}setLimit(e,r,s,t){return new a({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:s,message:z.toString(t)}]})}_addCheck(e){return new a({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:z.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:z.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:z.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:z.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:z.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:z.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:z.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:z.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:z.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&X.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(r===null||s.value>r)&&(r=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(r)&&Number.isFinite(e)}};At.create=a=>new At({checks:[],typeName:J.ZodNumber,coerce:a?.coerce||!1,...Z(a)});var Ct=class a extends G{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==k.bigint)return this._getInvalidInput(e);let s,t=new Te;for(let n of this._def.checks)n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(s=this._getOrReturnCtx(e,s),C(s,{code:w.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),t.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(s=this._getOrReturnCtx(e,s),C(s,{code:w.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),t.dirty()):n.kind==="multipleOf"?e.data%n.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),C(s,{code:w.not_multiple_of,multipleOf:n.value,message:n.message}),t.dirty()):X.assertNever(n);return{status:t.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return C(r,{code:w.invalid_type,expected:k.bigint,received:r.parsedType}),H}gte(e,r){return this.setLimit("min",e,!0,z.toString(r))}gt(e,r){return this.setLimit("min",e,!1,z.toString(r))}lte(e,r){return this.setLimit("max",e,!0,z.toString(r))}lt(e,r){return this.setLimit("max",e,!1,z.toString(r))}setLimit(e,r,s,t){return new a({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:s,message:z.toString(t)}]})}_addCheck(e){return new a({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:z.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:z.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:z.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:z.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:z.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Ct.create=a=>new Ct({checks:[],typeName:J.ZodBigInt,coerce:a?.coerce??!1,...Z(a)});var kt=class extends G{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==k.boolean){let s=this._getOrReturnCtx(e);return C(s,{code:w.invalid_type,expected:k.boolean,received:s.parsedType}),H}return De(e.data)}};kt.create=a=>new kt({typeName:J.ZodBoolean,coerce:a?.coerce||!1,...Z(a)});var Nt=class a extends G{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==k.date){let n=this._getOrReturnCtx(e);return C(n,{code:w.invalid_type,expected:k.date,received:n.parsedType}),H}if(Number.isNaN(e.data.getTime())){let n=this._getOrReturnCtx(e);return C(n,{code:w.invalid_date}),H}let s=new Te,t;for(let n of this._def.checks)n.kind==="min"?e.data.getTime()<n.value&&(t=this._getOrReturnCtx(e,t),C(t,{code:w.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),s.dirty()):n.kind==="max"?e.data.getTime()>n.value&&(t=this._getOrReturnCtx(e,t),C(t,{code:w.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),s.dirty()):X.assertNever(n);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new a({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:z.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:z.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Nt.create=a=>new Nt({checks:[],coerce:a?.coerce||!1,typeName:J.ZodDate,...Z(a)});var ir=class extends G{_parse(e){if(this._getType(e)!==k.symbol){let s=this._getOrReturnCtx(e);return C(s,{code:w.invalid_type,expected:k.symbol,received:s.parsedType}),H}return De(e.data)}};ir.create=a=>new ir({typeName:J.ZodSymbol,...Z(a)});var qt=class extends G{_parse(e){if(this._getType(e)!==k.undefined){let s=this._getOrReturnCtx(e);return C(s,{code:w.invalid_type,expected:k.undefined,received:s.parsedType}),H}return De(e.data)}};qt.create=a=>new qt({typeName:J.ZodUndefined,...Z(a)});var Ft=class extends G{_parse(e){if(this._getType(e)!==k.null){let s=this._getOrReturnCtx(e);return C(s,{code:w.invalid_type,expected:k.null,received:s.parsedType}),H}return De(e.data)}};Ft.create=a=>new Ft({typeName:J.ZodNull,...Z(a)});var Et=class extends G{constructor(){super(...arguments),this._any=!0}_parse(e){return De(e.data)}};Et.create=a=>new Et({typeName:J.ZodAny,...Z(a)});var mt=class extends G{constructor(){super(...arguments),this._unknown=!0}_parse(e){return De(e.data)}};mt.create=a=>new mt({typeName:J.ZodUnknown,...Z(a)});var We=class extends G{_parse(e){let r=this._getOrReturnCtx(e);return C(r,{code:w.invalid_type,expected:k.never,received:r.parsedType}),H}};We.create=a=>new We({typeName:J.ZodNever,...Z(a)});var or=class extends G{_parse(e){if(this._getType(e)!==k.undefined){let s=this._getOrReturnCtx(e);return C(s,{code:w.invalid_type,expected:k.void,received:s.parsedType}),H}return De(e.data)}};or.create=a=>new or({typeName:J.ZodVoid,...Z(a)});var vt=class a extends G{_parse(e){let{ctx:r,status:s}=this._processInputParams(e),t=this._def;if(r.parsedType!==k.array)return C(r,{code:w.invalid_type,expected:k.array,received:r.parsedType}),H;if(t.exactLength!==null){let o=r.data.length>t.exactLength.value,i=r.data.length<t.exactLength.value;(o||i)&&(C(r,{code:o?w.too_big:w.too_small,minimum:i?t.exactLength.value:void 0,maximum:o?t.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:t.exactLength.message}),s.dirty())}if(t.minLength!==null&&r.data.length<t.minLength.value&&(C(r,{code:w.too_small,minimum:t.minLength.value,type:"array",inclusive:!0,exact:!1,message:t.minLength.message}),s.dirty()),t.maxLength!==null&&r.data.length>t.maxLength.value&&(C(r,{code:w.too_big,maximum:t.maxLength.value,type:"array",inclusive:!0,exact:!1,message:t.maxLength.message}),s.dirty()),r.common.async)return Promise.all([...r.data].map((o,i)=>t.type._parseAsync(new He(r,o,r.path,i)))).then(o=>Te.mergeArray(s,o));let n=[...r.data].map((o,i)=>t.type._parseSync(new He(r,o,r.path,i)));return Te.mergeArray(s,n)}get element(){return this._def.type}min(e,r){return new a({...this._def,minLength:{value:e,message:z.toString(r)}})}max(e,r){return new a({...this._def,maxLength:{value:e,message:z.toString(r)}})}length(e,r){return new a({...this._def,exactLength:{value:e,message:z.toString(r)}})}nonempty(e){return this.min(1,e)}};vt.create=(a,e)=>new vt({type:a,minLength:null,maxLength:null,exactLength:null,typeName:J.ZodArray,...Z(e)});function nr(a){if(a instanceof Ne){let e={};for(let r in a.shape){let s=a.shape[r];e[r]=Ve.create(nr(s))}return new Ne({...a._def,shape:()=>e})}else return a instanceof vt?new vt({...a._def,type:nr(a.element)}):a instanceof Ve?Ve.create(nr(a.unwrap())):a instanceof nt?nt.create(nr(a.unwrap())):a instanceof st?st.create(a.items.map(e=>nr(e))):a}var Ne=class a extends G{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=X.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==k.object){let u=this._getOrReturnCtx(e);return C(u,{code:w.invalid_type,expected:k.object,received:u.parsedType}),H}let{status:s,ctx:t}=this._processInputParams(e),{shape:n,keys:o}=this._getCached(),i=[];if(!(this._def.catchall instanceof We&&this._def.unknownKeys==="strip"))for(let u in t.data)o.includes(u)||i.push(u);let l=[];for(let u of o){let p=n[u],m=t.data[u];l.push({key:{status:"valid",value:u},value:p._parse(new He(t,m,t.path,u)),alwaysSet:u in t.data})}if(this._def.catchall instanceof We){let u=this._def.unknownKeys;if(u==="passthrough")for(let p of i)l.push({key:{status:"valid",value:p},value:{status:"valid",value:t.data[p]}});else if(u==="strict")i.length>0&&(C(t,{code:w.unrecognized_keys,keys:i}),s.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let p of i){let m=t.data[p];l.push({key:{status:"valid",value:p},value:u._parse(new He(t,m,t.path,p)),alwaysSet:p in t.data})}}return t.common.async?Promise.resolve().then(async()=>{let u=[];for(let p of l){let m=await p.key,_=await p.value;u.push({key:m,value:_,alwaysSet:p.alwaysSet})}return u}).then(u=>Te.mergeObjectSync(s,u)):Te.mergeObjectSync(s,l)}get shape(){return this._def.shape()}strict(e){return z.errToObj,new a({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,s)=>{let t=this._def.errorMap?.(r,s).message??s.defaultError;return r.code==="unrecognized_keys"?{message:z.errToObj(e).message??t}:{message:t}}}:{}})}strip(){return new a({...this._def,unknownKeys:"strip"})}passthrough(){return new a({...this._def,unknownKeys:"passthrough"})}extend(e){return new a({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new a({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:J.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new a({...this._def,catchall:e})}pick(e){let r={};for(let s of X.objectKeys(e))e[s]&&this.shape[s]&&(r[s]=this.shape[s]);return new a({...this._def,shape:()=>r})}omit(e){let r={};for(let s of X.objectKeys(this.shape))e[s]||(r[s]=this.shape[s]);return new a({...this._def,shape:()=>r})}deepPartial(){return nr(this)}partial(e){let r={};for(let s of X.objectKeys(this.shape)){let t=this.shape[s];e&&!e[s]?r[s]=t:r[s]=t.optional()}return new a({...this._def,shape:()=>r})}required(e){let r={};for(let s of X.objectKeys(this.shape))if(e&&!e[s])r[s]=this.shape[s];else{let n=this.shape[s];for(;n instanceof Ve;)n=n._def.innerType;r[s]=n}return new a({...this._def,shape:()=>r})}keyof(){return Zs(X.objectKeys(this.shape))}};Ne.create=(a,e)=>new Ne({shape:()=>a,unknownKeys:"strip",catchall:We.create(),typeName:J.ZodObject,...Z(e)});Ne.strictCreate=(a,e)=>new Ne({shape:()=>a,unknownKeys:"strict",catchall:We.create(),typeName:J.ZodObject,...Z(e)});Ne.lazycreate=(a,e)=>new Ne({shape:a,unknownKeys:"strip",catchall:We.create(),typeName:J.ZodObject,...Z(e)});var Ut=class extends G{_parse(e){let{ctx:r}=this._processInputParams(e),s=this._def.options;function t(n){for(let i of n)if(i.result.status==="valid")return i.result;for(let i of n)if(i.result.status==="dirty")return r.common.issues.push(...i.ctx.common.issues),i.result;let o=n.map(i=>new ke(i.ctx.common.issues));return C(r,{code:w.invalid_union,unionErrors:o}),H}if(r.common.async)return Promise.all(s.map(async n=>{let o={...r,common:{...r.common,issues:[]},parent:null};return{result:await n._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(t);{let n,o=[];for(let l of s){let u={...r,common:{...r.common,issues:[]},parent:null},p=l._parseSync({data:r.data,path:r.path,parent:u});if(p.status==="valid")return p;p.status==="dirty"&&!n&&(n={result:p,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(n)return r.common.issues.push(...n.ctx.common.issues),n.result;let i=o.map(l=>new ke(l));return C(r,{code:w.invalid_union,unionErrors:i}),H}}get options(){return this._def.options}};Ut.create=(a,e)=>new Ut({options:a,typeName:J.ZodUnion,...Z(e)});var ht=a=>a instanceof Mt?ht(a.schema):a instanceof Je?ht(a.innerType()):a instanceof zt?[a.value]:a instanceof Qt?a.options:a instanceof Vt?X.objectValues(a.enum):a instanceof Ht?ht(a._def.innerType):a instanceof qt?[void 0]:a instanceof Ft?[null]:a instanceof Ve?[void 0,...ht(a.unwrap())]:a instanceof nt?[null,...ht(a.unwrap())]:a instanceof Er||a instanceof Bt?ht(a.unwrap()):a instanceof Jt?ht(a._def.innerType):[],qr=class a extends G{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==k.object)return C(r,{code:w.invalid_type,expected:k.object,received:r.parsedType}),H;let s=this.discriminator,t=r.data[s],n=this.optionsMap.get(t);return n?r.common.async?n._parseAsync({data:r.data,path:r.path,parent:r}):n._parseSync({data:r.data,path:r.path,parent:r}):(C(r,{code:w.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),H)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,s){let t=new Map;for(let n of r){let o=ht(n.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let i of o){if(t.has(i))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);t.set(i,n)}}return new a({typeName:J.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:t,...Z(s)})}};function Ta(a,e){let r=at(a),s=at(e);if(a===e)return{valid:!0,data:a};if(r===k.object&&s===k.object){let t=X.objectKeys(e),n=X.objectKeys(a).filter(i=>t.indexOf(i)!==-1),o={...a,...e};for(let i of n){let l=Ta(a[i],e[i]);if(!l.valid)return{valid:!1};o[i]=l.data}return{valid:!0,data:o}}else if(r===k.array&&s===k.array){if(a.length!==e.length)return{valid:!1};let t=[];for(let n=0;n<a.length;n++){let o=a[n],i=e[n],l=Ta(o,i);if(!l.valid)return{valid:!1};t.push(l.data)}return{valid:!0,data:t}}else return r===k.date&&s===k.date&&+a==+e?{valid:!0,data:a}:{valid:!1}}var Lt=class extends G{_parse(e){let{status:r,ctx:s}=this._processInputParams(e),t=(n,o)=>{if(kr(n)||kr(o))return H;let i=Ta(n.value,o.value);return i.valid?((Nr(n)||Nr(o))&&r.dirty(),{status:r.value,value:i.data}):(C(s,{code:w.invalid_intersection_types}),H)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([n,o])=>t(n,o)):t(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}};Lt.create=(a,e,r)=>new Lt({left:a,right:e,typeName:J.ZodIntersection,...Z(r)});var st=class a extends G{_parse(e){let{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==k.array)return C(s,{code:w.invalid_type,expected:k.array,received:s.parsedType}),H;if(s.data.length<this._def.items.length)return C(s,{code:w.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),H;!this._def.rest&&s.data.length>this._def.items.length&&(C(s,{code:w.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let n=[...s.data].map((o,i)=>{let l=this._def.items[i]||this._def.rest;return l?l._parse(new He(s,o,s.path,i)):null}).filter(o=>!!o);return s.common.async?Promise.all(n).then(o=>Te.mergeArray(r,o)):Te.mergeArray(r,n)}get items(){return this._def.items}rest(e){return new a({...this._def,rest:e})}};st.create=(a,e)=>{if(!Array.isArray(a))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new st({items:a,typeName:J.ZodTuple,rest:null,...Z(e)})};var Fr=class a extends G{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==k.object)return C(s,{code:w.invalid_type,expected:k.object,received:s.parsedType}),H;let t=[],n=this._def.keyType,o=this._def.valueType;for(let i in s.data)t.push({key:n._parse(new He(s,i,s.path,i)),value:o._parse(new He(s,s.data[i],s.path,i)),alwaysSet:i in s.data});return s.common.async?Te.mergeObjectAsync(r,t):Te.mergeObjectSync(r,t)}get element(){return this._def.valueType}static create(e,r,s){return r instanceof G?new a({keyType:e,valueType:r,typeName:J.ZodRecord,...Z(s)}):new a({keyType:bt.create(),valueType:e,typeName:J.ZodRecord,...Z(r)})}},cr=class extends G{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==k.map)return C(s,{code:w.invalid_type,expected:k.map,received:s.parsedType}),H;let t=this._def.keyType,n=this._def.valueType,o=[...s.data.entries()].map(([i,l],u)=>({key:t._parse(new He(s,i,s.path,[u,"key"])),value:n._parse(new He(s,l,s.path,[u,"value"]))}));if(s.common.async){let i=new Map;return Promise.resolve().then(async()=>{for(let l of o){let u=await l.key,p=await l.value;if(u.status==="aborted"||p.status==="aborted")return H;(u.status==="dirty"||p.status==="dirty")&&r.dirty(),i.set(u.value,p.value)}return{status:r.value,value:i}})}else{let i=new Map;for(let l of o){let u=l.key,p=l.value;if(u.status==="aborted"||p.status==="aborted")return H;(u.status==="dirty"||p.status==="dirty")&&r.dirty(),i.set(u.value,p.value)}return{status:r.value,value:i}}}};cr.create=(a,e,r)=>new cr({valueType:e,keyType:a,typeName:J.ZodMap,...Z(r)});var ur=class a extends G{_parse(e){let{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==k.set)return C(s,{code:w.invalid_type,expected:k.set,received:s.parsedType}),H;let t=this._def;t.minSize!==null&&s.data.size<t.minSize.value&&(C(s,{code:w.too_small,minimum:t.minSize.value,type:"set",inclusive:!0,exact:!1,message:t.minSize.message}),r.dirty()),t.maxSize!==null&&s.data.size>t.maxSize.value&&(C(s,{code:w.too_big,maximum:t.maxSize.value,type:"set",inclusive:!0,exact:!1,message:t.maxSize.message}),r.dirty());let n=this._def.valueType;function o(l){let u=new Set;for(let p of l){if(p.status==="aborted")return H;p.status==="dirty"&&r.dirty(),u.add(p.value)}return{status:r.value,value:u}}let i=[...s.data.values()].map((l,u)=>n._parse(new He(s,l,s.path,u)));return s.common.async?Promise.all(i).then(l=>o(l)):o(i)}min(e,r){return new a({...this._def,minSize:{value:e,message:z.toString(r)}})}max(e,r){return new a({...this._def,maxSize:{value:e,message:z.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};ur.create=(a,e)=>new ur({valueType:a,minSize:null,maxSize:null,typeName:J.ZodSet,...Z(e)});var Ur=class a extends G{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==k.function)return C(r,{code:w.invalid_type,expected:k.function,received:r.parsedType}),H;function s(i,l){return br({data:i,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,ar(),pt].filter(u=>!!u),issueData:{code:w.invalid_arguments,argumentsError:l}})}function t(i,l){return br({data:i,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,ar(),pt].filter(u=>!!u),issueData:{code:w.invalid_return_type,returnTypeError:l}})}let n={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof xt){let i=this;return De(async function(...l){let u=new ke([]),p=await i._def.args.parseAsync(l,n).catch(d=>{throw u.addIssue(s(l,d)),u}),m=await Reflect.apply(o,this,p);return await i._def.returns._def.type.parseAsync(m,n).catch(d=>{throw u.addIssue(t(m,d)),u})})}else{let i=this;return De(function(...l){let u=i._def.args.safeParse(l,n);if(!u.success)throw new ke([s(l,u.error)]);let p=Reflect.apply(o,this,u.data),m=i._def.returns.safeParse(p,n);if(!m.success)throw new ke([t(p,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new a({...this._def,args:st.create(e).rest(mt.create())})}returns(e){return new a({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,s){return new a({args:e||st.create([]).rest(mt.create()),returns:r||mt.create(),typeName:J.ZodFunction,...Z(s)})}},Mt=class extends G{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Mt.create=(a,e)=>new Mt({getter:a,typeName:J.ZodLazy,...Z(e)});var zt=class extends G{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return C(r,{received:r.data,code:w.invalid_literal,expected:this._def.value}),H}return{status:"valid",value:e.data}}get value(){return this._def.value}};zt.create=(a,e)=>new zt({value:a,typeName:J.ZodLiteral,...Z(e)});function Zs(a,e){return new Qt({values:a,typeName:J.ZodEnum,...Z(e)})}var Qt=class a extends G{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),s=this._def.values;return C(r,{expected:X.joinValues(s),received:r.parsedType,code:w.invalid_type}),H}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let r=this._getOrReturnCtx(e),s=this._def.values;return C(r,{received:r.data,code:w.invalid_enum_value,options:s}),H}return De(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return a.create(e,{...this._def,...r})}exclude(e,r=this._def){return a.create(this.options.filter(s=>!e.includes(s)),{...this._def,...r})}};Qt.create=Zs;var Vt=class extends G{_parse(e){let r=X.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==k.string&&s.parsedType!==k.number){let t=X.objectValues(r);return C(s,{expected:X.joinValues(t),received:s.parsedType,code:w.invalid_type}),H}if(this._cache||(this._cache=new Set(X.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let t=X.objectValues(r);return C(s,{received:s.data,code:w.invalid_enum_value,options:t}),H}return De(e.data)}get enum(){return this._def.values}};Vt.create=(a,e)=>new Vt({values:a,typeName:J.ZodNativeEnum,...Z(e)});var xt=class extends G{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==k.promise&&r.common.async===!1)return C(r,{code:w.invalid_type,expected:k.promise,received:r.parsedType}),H;let s=r.parsedType===k.promise?r.data:Promise.resolve(r.data);return De(s.then(t=>this._def.type.parseAsync(t,{path:r.path,errorMap:r.common.contextualErrorMap})))}};xt.create=(a,e)=>new xt({type:a,typeName:J.ZodPromise,...Z(e)});var Je=class extends G{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===J.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:s}=this._processInputParams(e),t=this._def.effect||null,n={addIssue:o=>{C(s,o),o.fatal?r.abort():r.dirty()},get path(){return s.path}};if(n.addIssue=n.addIssue.bind(n),t.type==="preprocess"){let o=t.transform(s.data,n);if(s.common.async)return Promise.resolve(o).then(async i=>{if(r.value==="aborted")return H;let l=await this._def.schema._parseAsync({data:i,path:s.path,parent:s});return l.status==="aborted"?H:l.status==="dirty"?jt(l.value):r.value==="dirty"?jt(l.value):l});{if(r.value==="aborted")return H;let i=this._def.schema._parseSync({data:o,path:s.path,parent:s});return i.status==="aborted"?H:i.status==="dirty"?jt(i.value):r.value==="dirty"?jt(i.value):i}}if(t.type==="refinement"){let o=i=>{let l=t.refinement(i,n);if(s.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return i};if(s.common.async===!1){let i=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?H:(i.status==="dirty"&&r.dirty(),o(i.value),{status:r.value,value:i.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(i=>i.status==="aborted"?H:(i.status==="dirty"&&r.dirty(),o(i.value).then(()=>({status:r.value,value:i.value}))))}if(t.type==="transform")if(s.common.async===!1){let o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!_t(o))return H;let i=t.transform(o.value,n);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:i}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>_t(o)?Promise.resolve(t.transform(o.value,n)).then(i=>({status:r.value,value:i})):H);X.assertNever(t)}};Je.create=(a,e,r)=>new Je({schema:a,typeName:J.ZodEffects,effect:e,...Z(r)});Je.createWithPreprocess=(a,e,r)=>new Je({schema:e,effect:{type:"preprocess",transform:a},typeName:J.ZodEffects,...Z(r)});var Ve=class extends G{_parse(e){return this._getType(e)===k.undefined?De(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Ve.create=(a,e)=>new Ve({innerType:a,typeName:J.ZodOptional,...Z(e)});var nt=class extends G{_parse(e){return this._getType(e)===k.null?De(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};nt.create=(a,e)=>new nt({innerType:a,typeName:J.ZodNullable,...Z(e)});var Ht=class extends G{_parse(e){let{ctx:r}=this._processInputParams(e),s=r.data;return r.parsedType===k.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Ht.create=(a,e)=>new Ht({innerType:a,typeName:J.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Z(e)});var Jt=class extends G{_parse(e){let{ctx:r}=this._processInputParams(e),s={...r,common:{...r.common,issues:[]}},t=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return sr(t)?t.then(n=>({status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new ke(s.common.issues)},input:s.data})})):{status:"valid",value:t.status==="valid"?t.value:this._def.catchValue({get error(){return new ke(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}};Jt.create=(a,e)=>new Jt({innerType:a,typeName:J.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Z(e)});var lr=class extends G{_parse(e){if(this._getType(e)!==k.nan){let s=this._getOrReturnCtx(e);return C(s,{code:w.invalid_type,expected:k.nan,received:s.parsedType}),H}return{status:"valid",value:e.data}}};lr.create=a=>new lr({typeName:J.ZodNaN,...Z(a)});var Qu=Symbol("zod_brand"),Er=class extends G{_parse(e){let{ctx:r}=this._processInputParams(e),s=r.data;return this._def.type._parse({data:s,path:r.path,parent:r})}unwrap(){return this._def.type}},xr=class a extends G{_parse(e){let{status:r,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{let n=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?H:n.status==="dirty"?(r.dirty(),jt(n.value)):this._def.out._parseAsync({data:n.value,path:s.path,parent:s})})();{let t=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return t.status==="aborted"?H:t.status==="dirty"?(r.dirty(),{status:"dirty",value:t.value}):this._def.out._parseSync({data:t.value,path:s.path,parent:s})}}static create(e,r){return new a({in:e,out:r,typeName:J.ZodPipeline})}},Bt=class extends G{_parse(e){let r=this._def.innerType._parse(e),s=t=>(_t(t)&&(t.value=Object.freeze(t.value)),t);return sr(r)?r.then(t=>s(t)):s(r)}unwrap(){return this._def.innerType}};Bt.create=(a,e)=>new Bt({innerType:a,typeName:J.ZodReadonly,...Z(e)});function Vs(a,e){let r=typeof a=="function"?a(e):typeof a=="string"?{message:a}:a;return typeof r=="string"?{message:r}:r}function Ks(a,e={},r){return a?Et.create().superRefine((s,t)=>{let n=a(s);if(n instanceof Promise)return n.then(o=>{if(!o){let i=Vs(e,s),l=i.fatal??r??!0;t.addIssue({code:"custom",...i,fatal:l})}});if(!n){let o=Vs(e,s),i=o.fatal??r??!0;t.addIssue({code:"custom",...o,fatal:i})}}):Et.create()}var Vu={object:Ne.lazycreate},J;(function(a){a.ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly"})(J||(J={}));var Hu=(a,e={message:`Input not instance of ${a.name}`})=>Ks(r=>r instanceof a,e),Gs=bt.create,Ws=At.create,Ju=lr.create,Bu=Ct.create,Ys=kt.create,Zu=Nt.create,Ku=ir.create,Gu=qt.create,Wu=Ft.create,Yu=Et.create,Xu=mt.create,el=We.create,tl=or.create,rl=vt.create,al=Ne.create,sl=Ne.strictCreate,nl=Ut.create,il=qr.create,ol=Lt.create,cl=st.create,ul=Fr.create,ll=cr.create,dl=ur.create,fl=Ur.create,pl=Mt.create,hl=zt.create,ml=Qt.create,vl=Vt.create,gl=xt.create,yl=Je.create,_l=Ve.create,bl=nt.create,El=Je.createWithPreprocess,xl=xr.create,Sl=()=>Gs().optional(),Pl=()=>Ws().optional(),wl=()=>Ys().optional(),Rl={string:a=>bt.create({...a,coerce:!0}),number:a=>At.create({...a,coerce:!0}),boolean:a=>kt.create({...a,coerce:!0}),bigint:a=>Ct.create({...a,coerce:!0}),date:a=>Nt.create({...a,coerce:!0})};var Tl=H;var Ia="2025-06-18";var Xs=[Ia,"2025-03-26","2024-11-05","2024-10-07"],Lr="2.0",en=c.union([c.string(),c.number().int()]),tn=c.string(),Il=c.object({progressToken:c.optional(en)}).passthrough(),Be=c.object({_meta:c.optional(Il)}).passthrough(),qe=c.object({method:c.string(),params:c.optional(Be)}),Sr=c.object({_meta:c.optional(c.object({}).passthrough())}).passthrough(),it=c.object({method:c.string(),params:c.optional(Sr)}),Ze=c.object({_meta:c.optional(c.object({}).passthrough())}).passthrough(),Mr=c.union([c.string(),c.number().int()]),rn=c.object({jsonrpc:c.literal(Lr),id:Mr}).merge(qe).strict(),an=a=>rn.safeParse(a).success,sn=c.object({jsonrpc:c.literal(Lr)}).merge(it).strict(),nn=a=>sn.safeParse(a).success,on=c.object({jsonrpc:c.literal(Lr),id:Mr,result:Ze}).strict(),Oa=a=>on.safeParse(a).success,Ye;(function(a){a[a.ConnectionClosed=-32e3]="ConnectionClosed",a[a.RequestTimeout=-32001]="RequestTimeout",a[a.ParseError=-32700]="ParseError",a[a.InvalidRequest=-32600]="InvalidRequest",a[a.MethodNotFound=-32601]="MethodNotFound",a[a.InvalidParams=-32602]="InvalidParams",a[a.InternalError=-32603]="InternalError"})(Ye||(Ye={}));var cn=c.object({jsonrpc:c.literal(Lr),id:Mr,error:c.object({code:c.number().int(),message:c.string(),data:c.optional(c.unknown())})}).strict(),un=a=>cn.safeParse(a).success,ln=c.union([rn,sn,on,cn]),zr=Ze.strict(),Qr=it.extend({method:c.literal("notifications/cancelled"),params:Sr.extend({requestId:Mr,reason:c.string().optional()})}),Pr=c.object({name:c.string(),title:c.optional(c.string())}).passthrough(),dn=Pr.extend({version:c.string()}),Ol=c.object({experimental:c.optional(c.object({}).passthrough()),sampling:c.optional(c.object({}).passthrough()),elicitation:c.optional(c.object({}).passthrough()),roots:c.optional(c.object({listChanged:c.optional(c.boolean())}).passthrough())}).passthrough(),Da=qe.extend({method:c.literal("initialize"),params:Be.extend({protocolVersion:c.string(),capabilities:Ol,clientInfo:dn})});var Dl=c.object({experimental:c.optional(c.object({}).passthrough()),logging:c.optional(c.object({}).passthrough()),completions:c.optional(c.object({}).passthrough()),prompts:c.optional(c.object({listChanged:c.optional(c.boolean())}).passthrough()),resources:c.optional(c.object({subscribe:c.optional(c.boolean()),listChanged:c.optional(c.boolean())}).passthrough()),tools:c.optional(c.object({listChanged:c.optional(c.boolean())}).passthrough())}).passthrough(),$l=Ze.extend({protocolVersion:c.string(),capabilities:Dl,serverInfo:dn,instructions:c.optional(c.string())}),$a=it.extend({method:c.literal("notifications/initialized")});var Vr=qe.extend({method:c.literal("ping")}),jl=c.object({progress:c.number(),total:c.optional(c.number()),message:c.optional(c.string())}).passthrough(),Hr=it.extend({method:c.literal("notifications/progress"),params:Sr.merge(jl).extend({progressToken:en})}),Jr=qe.extend({params:Be.extend({cursor:c.optional(tn)}).optional()}),Br=Ze.extend({nextCursor:c.optional(tn)}),fn=c.object({uri:c.string(),mimeType:c.optional(c.string()),_meta:c.optional(c.object({}).passthrough())}).passthrough(),pn=fn.extend({text:c.string()}),ja=c.string().refine(a=>{try{return atob(a),!0}catch{return!1}},{message:"Invalid Base64 string"}),hn=fn.extend({blob:ja}),mn=Pr.extend({uri:c.string(),description:c.optional(c.string()),mimeType:c.optional(c.string()),_meta:c.optional(c.object({}).passthrough())}),Al=Pr.extend({uriTemplate:c.string(),description:c.optional(c.string()),mimeType:c.optional(c.string()),_meta:c.optional(c.object({}).passthrough())}),Cl=Jr.extend({method:c.literal("resources/list")}),kl=Br.extend({resources:c.array(mn)}),Nl=Jr.extend({method:c.literal("resources/templates/list")}),ql=Br.extend({resourceTemplates:c.array(Al)}),Fl=qe.extend({method:c.literal("resources/read"),params:Be.extend({uri:c.string()})}),Ul=Ze.extend({contents:c.array(c.union([pn,hn]))}),Ll=it.extend({method:c.literal("notifications/resources/list_changed")}),Ml=qe.extend({method:c.literal("resources/subscribe"),params:Be.extend({uri:c.string()})}),zl=qe.extend({method:c.literal("resources/unsubscribe"),params:Be.extend({uri:c.string()})}),Ql=it.extend({method:c.literal("notifications/resources/updated"),params:Sr.extend({uri:c.string()})}),Vl=c.object({name:c.string(),description:c.optional(c.string()),required:c.optional(c.boolean())}).passthrough(),Hl=Pr.extend({description:c.optional(c.string()),arguments:c.optional(c.array(Vl)),_meta:c.optional(c.object({}).passthrough())}),Jl=Jr.extend({method:c.literal("prompts/list")}),Bl=Br.extend({prompts:c.array(Hl)}),Zl=qe.extend({method:c.literal("prompts/get"),params:Be.extend({name:c.string(),arguments:c.optional(c.record(c.string()))})}),Aa=c.object({type:c.literal("text"),text:c.string(),_meta:c.optional(c.object({}).passthrough())}).passthrough(),Ca=c.object({type:c.literal("image"),data:ja,mimeType:c.string(),_meta:c.optional(c.object({}).passthrough())}).passthrough(),ka=c.object({type:c.literal("audio"),data:ja,mimeType:c.string(),_meta:c.optional(c.object({}).passthrough())}).passthrough(),Kl=c.object({type:c.literal("resource"),resource:c.union([pn,hn]),_meta:c.optional(c.object({}).passthrough())}).passthrough(),Gl=mn.extend({type:c.literal("resource_link")}),vn=c.union([Aa,Ca,ka,Gl,Kl]),Wl=c.object({role:c.enum(["user","assistant"]),content:vn}).passthrough(),Yl=Ze.extend({description:c.optional(c.string()),messages:c.array(Wl)}),Xl=it.extend({method:c.literal("notifications/prompts/list_changed")}),ed=c.object({title:c.optional(c.string()),readOnlyHint:c.optional(c.boolean()),destructiveHint:c.optional(c.boolean()),idempotentHint:c.optional(c.boolean()),openWorldHint:c.optional(c.boolean())}).passthrough(),td=Pr.extend({description:c.optional(c.string()),inputSchema:c.object({type:c.literal("object"),properties:c.optional(c.object({}).passthrough()),required:c.optional(c.array(c.string()))}).passthrough(),outputSchema:c.optional(c.object({type:c.literal("object"),properties:c.optional(c.object({}).passthrough()),required:c.optional(c.array(c.string()))}).passthrough()),annotations:c.optional(ed),_meta:c.optional(c.object({}).passthrough())}),Na=Jr.extend({method:c.literal("tools/list")}),rd=Br.extend({tools:c.array(td)}),gn=Ze.extend({content:c.array(vn).default([]),structuredContent:c.object({}).passthrough().optional(),isError:c.optional(c.boolean())}),Bp=gn.or(Ze.extend({toolResult:c.unknown()})),qa=qe.extend({method:c.literal("tools/call"),params:Be.extend({name:c.string(),arguments:c.optional(c.record(c.unknown()))})}),ad=it.extend({method:c.literal("notifications/tools/list_changed")}),yn=c.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),sd=qe.extend({method:c.literal("logging/setLevel"),params:Be.extend({level:yn})}),nd=it.extend({method:c.literal("notifications/message"),params:Sr.extend({level:yn,logger:c.optional(c.string()),data:c.unknown()})}),id=c.object({name:c.string().optional()}).passthrough(),od=c.object({hints:c.optional(c.array(id)),costPriority:c.optional(c.number().min(0).max(1)),speedPriority:c.optional(c.number().min(0).max(1)),intelligencePriority:c.optional(c.number().min(0).max(1))}).passthrough(),cd=c.object({role:c.enum(["user","assistant"]),content:c.union([Aa,Ca,ka])}).passthrough(),ud=qe.extend({method:c.literal("sampling/createMessage"),params:Be.extend({messages:c.array(cd),systemPrompt:c.optional(c.string()),includeContext:c.optional(c.enum(["none","thisServer","allServers"])),temperature:c.optional(c.number()),maxTokens:c.number().int(),stopSequences:c.optional(c.array(c.string())),metadata:c.optional(c.object({}).passthrough()),modelPreferences:c.optional(od)})}),Fa=Ze.extend({model:c.string(),stopReason:c.optional(c.enum(["endTurn","stopSequence","maxTokens"]).or(c.string())),role:c.enum(["user","assistant"]),content:c.discriminatedUnion("type",[Aa,Ca,ka])}),ld=c.object({type:c.literal("boolean"),title:c.optional(c.string()),description:c.optional(c.string()),default:c.optional(c.boolean())}).passthrough(),dd=c.object({type:c.literal("string"),title:c.optional(c.string()),description:c.optional(c.string()),minLength:c.optional(c.number()),maxLength:c.optional(c.number()),format:c.optional(c.enum(["email","uri","date","date-time"]))}).passthrough(),fd=c.object({type:c.enum(["number","integer"]),title:c.optional(c.string()),description:c.optional(c.string()),minimum:c.optional(c.number()),maximum:c.optional(c.number())}).passthrough(),pd=c.object({type:c.literal("string"),title:c.optional(c.string()),description:c.optional(c.string()),enum:c.array(c.string()),enumNames:c.optional(c.array(c.string()))}).passthrough(),hd=c.union([ld,dd,fd,pd]),md=qe.extend({method:c.literal("elicitation/create"),params:Be.extend({message:c.string(),requestedSchema:c.object({type:c.literal("object"),properties:c.record(c.string(),hd),required:c.optional(c.array(c.string()))}).passthrough()})}),Ua=Ze.extend({action:c.enum(["accept","decline","cancel"]),content:c.optional(c.record(c.string(),c.unknown()))}),vd=c.object({type:c.literal("ref/resource"),uri:c.string()}).passthrough();var gd=c.object({type:c.literal("ref/prompt"),name:c.string()}).passthrough(),yd=qe.extend({method:c.literal("completion/complete"),params:Be.extend({ref:c.union([gd,vd]),argument:c.object({name:c.string(),value:c.string()}).passthrough(),context:c.optional(c.object({arguments:c.optional(c.record(c.string(),c.string()))}))})}),_d=Ze.extend({completion:c.object({values:c.array(c.string()).max(100),total:c.optional(c.number().int()),hasMore:c.optional(c.boolean())}).passthrough()}),bd=c.object({uri:c.string().startsWith("file://"),name:c.optional(c.string()),_meta:c.optional(c.object({}).passthrough())}).passthrough(),Ed=qe.extend({method:c.literal("roots/list")}),La=Ze.extend({roots:c.array(bd)}),xd=it.extend({method:c.literal("notifications/roots/list_changed")}),Zp=c.union([Vr,Da,yd,sd,Zl,Jl,Cl,Nl,Fl,Ml,zl,qa,Na]),Kp=c.union([Qr,Hr,$a,xd]),Gp=c.union([zr,Fa,Ua,La]),Wp=c.union([Vr,ud,md,Ed]),Yp=c.union([Qr,Hr,nd,Ql,Ll,ad,Xl]),Xp=c.union([zr,$l,_d,Yl,Bl,kl,ql,Ul,gn,rd]),Xe=class extends Error{constructor(e,r,s){super(`MCP error ${e}: ${r}`),this.code=e,this.data=s,this.name="McpError"}};var Sd=6e4,Zr=class{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(Qr,r=>{let s=this._requestHandlerAbortControllers.get(r.params.requestId);s?.abort(r.params.reason)}),this.setNotificationHandler(Hr,r=>{this._onprogress(r)}),this.setRequestHandler(Vr,r=>({}))}_setupTimeout(e,r,s,t,n=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(t,r),startTime:Date.now(),timeout:r,maxTotalTimeout:s,resetTimeoutOnProgress:n,onTimeout:t})}_resetTimeout(e){let r=this._timeoutInfo.get(e);if(!r)return!1;let s=Date.now()-r.startTime;if(r.maxTotalTimeout&&s>=r.maxTotalTimeout)throw this._timeoutInfo.delete(e),new Xe(Ye.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:r.maxTotalTimeout,totalElapsed:s});return clearTimeout(r.timeoutId),r.timeoutId=setTimeout(r.onTimeout,r.timeout),!0}_cleanupTimeout(e){let r=this._timeoutInfo.get(e);r&&(clearTimeout(r.timeoutId),this._timeoutInfo.delete(e))}async connect(e){var r,s,t;this._transport=e;let n=(r=this.transport)===null||r===void 0?void 0:r.onclose;this._transport.onclose=()=>{n?.(),this._onclose()};let o=(s=this.transport)===null||s===void 0?void 0:s.onerror;this._transport.onerror=l=>{o?.(l),this._onerror(l)};let i=(t=this._transport)===null||t===void 0?void 0:t.onmessage;this._transport.onmessage=(l,u)=>{i?.(l,u),Oa(l)||un(l)?this._onresponse(l):an(l)?this._onrequest(l,u):nn(l)?this._onnotification(l):this._onerror(new Error(`Unknown message type: ${JSON.stringify(l)}`))},await this._transport.start()}_onclose(){var e;let r=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let s=new Xe(Ye.ConnectionClosed,"Connection closed");for(let t of r.values())t(s)}_onerror(e){var r;(r=this.onerror)===null||r===void 0||r.call(this,e)}_onnotification(e){var r;let s=(r=this._notificationHandlers.get(e.method))!==null&&r!==void 0?r:this.fallbackNotificationHandler;s!==void 0&&Promise.resolve().then(()=>s(e)).catch(t=>this._onerror(new Error(`Uncaught error in notification handler: ${t}`)))}_onrequest(e,r){var s,t;let n=(s=this._requestHandlers.get(e.method))!==null&&s!==void 0?s:this.fallbackRequestHandler,o=this._transport;if(n===void 0){o?.send({jsonrpc:"2.0",id:e.id,error:{code:Ye.MethodNotFound,message:"Method not found"}}).catch(u=>this._onerror(new Error(`Failed to send an error response: ${u}`)));return}let i=new AbortController;this._requestHandlerAbortControllers.set(e.id,i);let l={signal:i.signal,sessionId:o?.sessionId,_meta:(t=e.params)===null||t===void 0?void 0:t._meta,sendNotification:u=>this.notification(u,{relatedRequestId:e.id}),sendRequest:(u,p,m)=>this.request(u,p,{...m,relatedRequestId:e.id}),authInfo:r?.authInfo,requestId:e.id,requestInfo:r?.requestInfo};Promise.resolve().then(()=>n(e,l)).then(u=>{if(!i.signal.aborted)return o?.send({result:u,jsonrpc:"2.0",id:e.id})},u=>{var p;if(!i.signal.aborted)return o?.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(u.code)?u.code:Ye.InternalError,message:(p=u.message)!==null&&p!==void 0?p:"Internal error"}})}).catch(u=>this._onerror(new Error(`Failed to send response: ${u}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:r,...s}=e.params,t=Number(r),n=this._progressHandlers.get(t);if(!n){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let o=this._responseHandlers.get(t),i=this._timeoutInfo.get(t);if(i&&o&&i.resetTimeoutOnProgress)try{this._resetTimeout(t)}catch(l){o(l);return}n(s)}_onresponse(e){let r=Number(e.id),s=this._responseHandlers.get(r);if(s===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(r),this._progressHandlers.delete(r),this._cleanupTimeout(r),Oa(e))s(e);else{let t=new Xe(e.error.code,e.error.message,e.error.data);s(t)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,r,s){let{relatedRequestId:t,resumptionToken:n,onresumptiontoken:o}=s??{};return new Promise((i,l)=>{var u,p,m,_,d,y;if(!this._transport){l(new Error("Not connected"));return}((u=this._options)===null||u===void 0?void 0:u.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(p=s?.signal)===null||p===void 0||p.throwIfAborted();let b=this._requestMessageId++,g={...e,jsonrpc:"2.0",id:b};s?.onprogress&&(this._progressHandlers.set(b,s.onprogress),g.params={...e.params,_meta:{...((m=e.params)===null||m===void 0?void 0:m._meta)||{},progressToken:b}});let S=R=>{var O;this._responseHandlers.delete(b),this._progressHandlers.delete(b),this._cleanupTimeout(b),(O=this._transport)===null||O===void 0||O.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:b,reason:String(R)}},{relatedRequestId:t,resumptionToken:n,onresumptiontoken:o}).catch(D=>this._onerror(new Error(`Failed to send cancellation: ${D}`))),l(R)};this._responseHandlers.set(b,R=>{var O;if(!(!((O=s?.signal)===null||O===void 0)&&O.aborted)){if(R instanceof Error)return l(R);try{let D=r.parse(R.result);i(D)}catch(D){l(D)}}}),(_=s?.signal)===null||_===void 0||_.addEventListener("abort",()=>{var R;S((R=s?.signal)===null||R===void 0?void 0:R.reason)});let I=(d=s?.timeout)!==null&&d!==void 0?d:Sd,P=()=>S(new Xe(Ye.RequestTimeout,"Request timed out",{timeout:I}));this._setupTimeout(b,I,s?.maxTotalTimeout,P,(y=s?.resetTimeoutOnProgress)!==null&&y!==void 0?y:!1),this._transport.send(g,{relatedRequestId:t,resumptionToken:n,onresumptiontoken:o}).catch(R=>{this._cleanupTimeout(b),l(R)})})}async notification(e,r){var s,t;if(!this._transport)throw new Error("Not connected");if(this.assertNotificationCapability(e.method),((t=(s=this._options)===null||s===void 0?void 0:s.debouncedNotificationMethods)!==null&&t!==void 0?t:[]).includes(e.method)&&!e.params&&!r?.relatedRequestId){if(this._pendingDebouncedNotifications.has(e.method))return;this._pendingDebouncedNotifications.add(e.method),Promise.resolve().then(()=>{var l;if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let u={...e,jsonrpc:"2.0"};(l=this._transport)===null||l===void 0||l.send(u,r).catch(p=>this._onerror(p))});return}let i={...e,jsonrpc:"2.0"};await this._transport.send(i,r)}setRequestHandler(e,r){let s=e.shape.method.value;this.assertRequestHandlerCapability(s),this._requestHandlers.set(s,(t,n)=>Promise.resolve(r(e.parse(t),n)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,r){this._notificationHandlers.set(e.shape.method.value,s=>Promise.resolve(r(e.parse(s))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function _n(a,e){return Object.entries(e).reduce((r,[s,t])=>(t&&typeof t=="object"?r[s]=r[s]?{...r[s],...t}:t:r[s]=t,r),{...a})}var xo=gu(Eo(),1),pa=class extends Zr{constructor(e,r){var s;super(r),this._serverInfo=e,this._capabilities=(s=r?.capabilities)!==null&&s!==void 0?s:{},this._instructions=r?.instructions,this.setRequestHandler(Da,t=>this._oninitialize(t)),this.setNotificationHandler($a,()=>{var t;return(t=this.oninitialized)===null||t===void 0?void 0:t.call(this)})}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=_n(this._capabilities,e)}assertCapabilityForMethod(e){var r,s,t;switch(e){case"sampling/createMessage":if(!(!((r=this._clientCapabilities)===null||r===void 0)&&r.sampling))throw new Error(`Client does not support sampling (required for ${e})`);break;case"elicitation/create":if(!(!((s=this._clientCapabilities)===null||s===void 0)&&s.elicitation))throw new Error(`Client does not support elicitation (required for ${e})`);break;case"roots/list":if(!(!((t=this._clientCapabilities)===null||t===void 0)&&t.roots))throw new Error(`Client does not support listing roots (required for ${e})`);break;case"ping":break}}assertNotificationCapability(e){switch(e){case"notifications/message":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw new Error(`Server does not support notifying about resources (required for ${e})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw new Error(`Server does not support notifying of tool list changes (required for ${e})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw new Error(`Server does not support notifying of prompt list changes (required for ${e})`);break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Server does not support sampling (required for ${e})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw new Error(`Server does not support resources (required for ${e})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw new Error(`Server does not support tools (required for ${e})`);break;case"ping":case"initialize":break}}async _oninitialize(e){let r=e.params.protocolVersion;return this._clientCapabilities=e.params.capabilities,this._clientVersion=e.params.clientInfo,{protocolVersion:Xs.includes(r)?r:Ia,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},zr)}async createMessage(e,r){return this.request({method:"sampling/createMessage",params:e},Fa,r)}async elicitInput(e,r){let s=await this.request({method:"elicitation/create",params:e},Ua,r);if(s.action==="accept"&&s.content)try{let t=new xo.default,n=t.compile(e.requestedSchema);if(!n(s.content))throw new Xe(Ye.InvalidParams,`Elicitation response content does not match requested schema: ${t.errorsText(n.errors)}`)}catch(t){throw t instanceof Xe?t:new Xe(Ye.InternalError,`Error validating elicitation response: ${t}`)}return s}async listRoots(e,r){return this.request({method:"roots/list",params:e},La,r)}async sendLoggingMessage(e){return this.notification({method:"notifications/message",params:e})}async sendResourceUpdated(e){return this.notification({method:"notifications/resources/updated",params:e})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}};import Po from"node:process";var ha=class{append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let r=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),ap(r)}clear(){this._buffer=void 0}};function ap(a){return ln.parse(JSON.parse(a))}function So(a){return JSON.stringify(a)+`
`}var ma=class{constructor(e=Po.stdin,r=Po.stdout){this._stdin=e,this._stdout=r,this._readBuffer=new ha,this._started=!1,this._ondata=s=>{this._readBuffer.append(s),this.processReadBuffer()},this._onerror=s=>{var t;(t=this.onerror)===null||t===void 0||t.call(this,s)}}async start(){if(this._started)throw new Error("StdioServerTransport already started! If using Server class, note that connect() calls start() automatically.");this._started=!0,this._stdin.on("data",this._ondata),this._stdin.on("error",this._onerror)}processReadBuffer(){for(var e,r;;)try{let s=this._readBuffer.readMessage();if(s===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,s)}catch(s){(r=this.onerror)===null||r===void 0||r.call(this,s)}}async close(){var e;this._stdin.off("data",this._ondata),this._stdin.off("error",this._onerror),this._stdin.listenerCount("data")===0&&this._stdin.pause(),this._readBuffer.clear(),(e=this.onclose)===null||e===void 0||e.call(this)}send(e){return new Promise(r=>{let s=So(e);this._stdout.write(s)?r():this._stdout.once("drain",r)})}};var Rr=process.env.API_TOKEN,dr=process.env.API_BASE_URL;Rr||process.exit(1);dr||process.exit(1);var va={ai_generated:{type:"boolean",description:"Whether the term content was AI-generated (defaults to false on create in API)"},ai_model:{type:"string",description:"AI model identifier (e.g., gpt-4o-mini, gpt-4o). Required if ai_generated=true"},ai_prompt_version:{type:"string",description:"Prompt version used for generation (e.g., v1.0, v2.0)"},ai_generation_date:{type:"string",description:"Generation timestamp (ISO 8601)",format:"date-time"},ai_tokens_used:{type:"integer",description:"Total tokens consumed during generation",minimum:0},ai_quality_score:{type:"number",description:"Quality score between 0.00 and 9.99",minimum:0,maximum:9.99},ai_validation_status:{type:"string",description:"Validation status (defaults to pending on create in API)",enum:["pending","approved","rejected","needs_review"]},ai_source_data:{type:"object",description:'Original source data (JSON), e.g. {"origin":"import","entity_type":"city"}'},ai_metadata:{type:"object",description:'Additional metadata (JSON), e.g. {"purpose":"generate_name"}'},ai_confidence_score:{type:"number",description:"Confidence score between 0.00 and 9.99",minimum:0,maximum:9.99},ai_human_reviewed:{type:"boolean",description:"Whether the term was human reviewed"},ai_human_reviewer:{type:"string",description:"Human reviewer user ID (e.g., test-user)"},ai_review_date:{type:"string",description:"Human review timestamp (ISO 8601)",format:"date-time"},ai_version:{type:"integer",description:"AI content version (auto-increments on update)"},ai_batch_id:{type:"string",description:"Batch identifier for AI generation (e.g., batch-001)"},ai_edit_history:{type:"object",description:"AI edit history (JSON)"},ai_original_data:{type:"object",description:"Original data snapshot (JSON)"},ai_manual_overrides:{type:"object",description:"Manual overrides (JSON)"},ai_market_validated:{type:"boolean",description:"Market validation flag"},ai_validation_errors:{type:"object",description:"Validation errors (JSON)"}},ga=[{if:{properties:{aiMetadata:{properties:{ai_generated:{const:!0}}}}},then:{properties:{aiMetadata:{required:["ai_generated","ai_model"]}}}}],wo=["ai_generated","ai_model","ai_generation_date"],sp={value:{type:"string"},description:{type:"string",description:"Term description (optional)"},language_id:{type:"number",description:"Language ID - REQUIRED. Use get_languages to find language ID. English is recommended as primary language"},term_type_id:{type:"number",description:'Term type ID - REQUIRED. Use get_term_types to find term type ID. "main" is recommended as primary term type'},status_id:{type:"number",description:"Status ID - optional. Use get_statuses to find status ID"},aiMetadata:{type:"object",properties:{...va},required:[...wo]}},np={value:{type:"string"},description:{type:"string",description:"Term description (optional)"},language_id:{type:"number",description:"Language ID - REQUIRED"},term_type_id:{type:"number",description:"Term type ID - REQUIRED"},status_id:{type:"number",description:"Status ID (optional)"},aiMetadata:{type:"object",properties:{...va},required:[...wo]}};function de(a={}){return{type:"object",description:a.description||"Main term (REQUIRED)",properties:{...sp,value:{type:"string",description:a.valueDescription||"Term value - REQUIRED"}},allOf:ga,required:["value","language_id","term_type_id","aiMetadata"]}}function fe({withId:a=!1,overrides:e={}}={}){let r={...np};return r.value={type:"string",description:e.valueDescription||"Term value - REQUIRED"},a&&(r.id={type:"number",description:e.idDescription||"Existing term ID (include to update a specific term)"}),{type:"object",properties:r,allOf:ga,required:["value","language_id","term_type_id","aiMetadata"]}}var xe={departments:{type:"object",properties:{mainTerm:de({description:"Main term for the department (REQUIRED)",valueDescription:"Term value (department name) - REQUIRED"}),terms:{type:"array",items:fe({withId:!1})},color:{type:"string"}},required:["mainTerm"]},professions:{type:"object",properties:{mainTerm:de({description:"Main term for the profession (REQUIRED)",valueDescription:"Term value (profession name) - REQUIRED"}),terms:{type:"array",items:fe({withId:!1})},department_id:{type:"number"},tool_ids:{type:"array",items:{type:"number"}}},required:["mainTerm"]},languages:{type:"object",properties:{mainTerm:de({description:"Main term for the language (REQUIRED)",valueDescription:"Term value (language name) - REQUIRED"}),terms:{type:"array",items:fe({withId:!1})},iso2:{type:"string"},iso3:{type:"string"}},required:["mainTerm","iso2","iso3"]},industries:{type:"object",properties:{mainTerm:de({description:"Main term for the industry (REQUIRED)",valueDescription:"Term value (industry name) - REQUIRED"}),terms:{type:"array",items:fe({withId:!1})},subIndustryIds:{type:"array",items:{type:"number"}}},required:["mainTerm"]},"sub-industries":{type:"object",properties:{industry_id:{type:"number"},mainTerm:de({description:"Main term for the sub-industry (REQUIRED)",valueDescription:"Term value (sub-industry name) - REQUIRED"}),terms:{type:"array",items:fe({withId:!1})}},required:["mainTerm"]},"tool-types":{type:"object",properties:{name:{type:"string"}},required:["name"]},countries:{type:"object",properties:{mainTerm:de({description:"Main term for the country (REQUIRED)",valueDescription:"Term value (country name) - REQUIRED"}),terms:{type:"array",items:fe({withId:!1})},iso2:{type:"string"},iso3:{type:"string"},latitude:{type:"string"},longitude:{type:"string"},cityIds:{type:"array",items:{type:"number"}}},required:["mainTerm","iso2","iso3"]},cities:{type:"object",properties:{mainTerm:de({description:"Main term for the city (REQUIRED)",valueDescription:"Term value (city name) - REQUIRED"}),terms:{type:"array",items:fe({withId:!1})},country_id:{type:"number"},latitude:{type:"string"},longitude:{type:"string"}},required:["mainTerm"]},actions:{type:"object",properties:{mainTerm:de({description:"Main term for the action (REQUIRED)",valueDescription:"Term value (action name) - REQUIRED"}),terms:{type:"array",items:fe({withId:!1})}},required:["mainTerm"]},objects:{type:"object",properties:{mainTerm:de({description:"Main term for the object (REQUIRED)",valueDescription:"Term value (object name) - REQUIRED"}),terms:{type:"array",items:fe({withId:!1})},format_ids:{type:"array",items:{type:"number"}}},required:["mainTerm"]},responsibilities:{type:"object",properties:{action_id:{type:"number"},object_id:{type:"number"},mainTerm:de({description:"Main term for the responsibility (REQUIRED)",valueDescription:"Term value (responsibility name) - REQUIRED"}),terms:{type:"array",items:fe({withId:!1})}},required:["action_id","object_id","mainTerm"]},formats:{type:"object",properties:{name:{type:"string"}},required:["name"]},statuses:{type:"object",properties:{name:{type:"string"},color:{type:"string"}},required:["name"]},tools:{type:"object",properties:{name:{type:"string"},link:{type:"string"},description:{type:"string"},toolTypeIds:{type:"array",items:{type:"number"}}},required:["name"]},shifts:{type:"object",properties:{name:{type:"string",description:"Shift name - REQUIRED"},start_time:{type:"string",description:"Start time in HH:MM:SS format - REQUIRED"},end_time:{type:"string",description:"End time in HH:MM:SS format - REQUIRED"}},required:["name","start_time","end_time"]},currencies:{type:"object",properties:{name:{type:"string",description:"Currency name - REQUIRED"},iso3:{type:"string",description:"ISO 3-letter currency code - REQUIRED"},symbol:{type:"string",description:"Currency symbol - REQUIRED"}},required:["name","iso3","symbol"]},rates:{type:"object",properties:{name:{type:"string",description:"Rate name - REQUIRED"},value:{type:"number",description:"Rate value (decimal) - REQUIRED"},hours:{type:"number",description:"Number of hours - REQUIRED"}},required:["name","value","hours"]},levels:{type:"object",properties:{mainTerm:de({description:"Main term for the level (REQUIRED)",valueDescription:"Term value (level name) - REQUIRED"}),terms:{type:"array",items:fe({withId:!1})},short_name:{type:"string",description:"Short name identifier - REQUIRED"}},required:["mainTerm","short_name"]},positions:{type:"object",properties:{mainTerm:de({description:"Main term for the position (REQUIRED)",valueDescription:"Term value (position name) - REQUIRED"}),terms:{type:"array",items:fe({withId:!1})}},required:["mainTerm"]}},Se={departments:{type:"object",properties:{mainTerm:de({description:"Main term for the department (REQUIRED)",valueDescription:"Term value (department name) - REQUIRED"}),terms:{type:"array",items:fe({withId:!0})},color:{type:"string"}},required:["mainTerm","terms"]},professions:{type:"object",properties:{mainTerm:de({description:"Main term for the profession (REQUIRED)",valueDescription:"Term value (profession name) - REQUIRED"}),terms:{type:"array",items:fe({withId:!0})},department_id:{type:"number"},tool_ids:{type:"array",items:{type:"number"}}},required:["mainTerm","terms"]},languages:{type:"object",properties:{mainTerm:de({description:"Main term for the language (REQUIRED)",valueDescription:"Term value (language name) - REQUIRED"}),terms:{type:"array",items:fe({withId:!0})},iso2:{type:"string"},iso3:{type:"string"}},required:["mainTerm","terms","iso2","iso3"]},industries:{type:"object",properties:{mainTerm:de({description:"Main term for the industry (REQUIRED)",valueDescription:"Term value (industry name) - REQUIRED"}),terms:{type:"array",items:fe({withId:!0})},subIndustryIds:{type:"array",items:{type:"number"}}},required:["mainTerm","terms"]},"sub-industries":{type:"object",properties:{industry_id:{type:"number"},mainTerm:de({description:"Main term for the sub-industry (REQUIRED)",valueDescription:"Term value (sub-industry name) - REQUIRED"}),terms:{type:"array",items:fe({withId:!0})}},required:["mainTerm","terms"]},"tool-types":{type:"object",properties:{name:{type:"string"}},required:["name"]},countries:{type:"object",properties:{mainTerm:de({description:"Main term for the country (REQUIRED)",valueDescription:"Term value (country name) - REQUIRED"}),terms:{type:"array",items:fe({withId:!0})},iso2:{type:"string"},iso3:{type:"string"},latitude:{type:"string"},longitude:{type:"string"},cityIds:{type:"array",items:{type:"number"}}},required:["mainTerm","terms","iso2","iso3"]},cities:{type:"object",properties:{mainTerm:de({description:"Main term for the city (REQUIRED)",valueDescription:"Term value (city name) - REQUIRED"}),terms:{type:"array",items:fe({withId:!0})},country_id:{type:"number"},latitude:{type:"string"},longitude:{type:"string"}},required:["mainTerm","terms"]},actions:{type:"object",properties:{mainTerm:de({description:"Main term for the action (REQUIRED)",valueDescription:"Term value (action name) - REQUIRED"}),terms:{type:"array",items:fe({withId:!0})}},required:["mainTerm","terms"]},objects:{type:"object",properties:{mainTerm:de({description:"Main term for the object (REQUIRED)",valueDescription:"Term value (object name) - REQUIRED"}),terms:{type:"array",items:fe({withId:!0})},format_ids:{type:"array",items:{type:"number"}}},required:["mainTerm","terms"]},responsibilities:{type:"object",properties:{action_id:{type:"number"},object_id:{type:"number"},mainTerm:de({description:"Main term for the responsibility (REQUIRED)",valueDescription:"Term value (responsibility name) - REQUIRED"}),terms:{type:"array",items:fe({withId:!0})}},required:["action_id","object_id","mainTerm","terms"]},formats:{type:"object",properties:{name:{type:"string"}},required:["name"]},statuses:{type:"object",properties:{name:{type:"string"},color:{type:"string"}},required:["name"]},tools:{type:"object",properties:{name:{type:"string"},link:{type:"string"},description:{type:"string"},toolTypeIds:{type:"array",items:{type:"number"}}},required:["name"]},shifts:{type:"object",properties:{name:{type:"string",description:"Shift name - REQUIRED"},start_time:{type:"string",description:"Start time in HH:MM:SS format - REQUIRED"},end_time:{type:"string",description:"End time in HH:MM:SS format - REQUIRED"}},required:["name","start_time","end_time"]},currencies:{type:"object",properties:{name:{type:"string",description:"Currency name - REQUIRED"},iso3:{type:"string",description:"ISO 3-letter currency code - REQUIRED"},symbol:{type:"string",description:"Currency symbol - REQUIRED"}},required:["name","iso3","symbol"]},rates:{type:"object",properties:{name:{type:"string",description:"Rate name - REQUIRED"},value:{type:"number",description:"Rate value (decimal) - REQUIRED"},hours:{type:"number",description:"Number of hours - REQUIRED"}},required:["name","value","hours"]},levels:{type:"object",properties:{mainTerm:de({description:"Main term for the level (REQUIRED)",valueDescription:"Term value (level name) - REQUIRED"}),terms:{type:"array",items:fe({withId:!0})},short_name:{type:"string",description:"Short name identifier - REQUIRED"}},required:["mainTerm","short_name"]},positions:{type:"object",properties:{mainTerm:de({description:"Main term for the position (REQUIRED)",valueDescription:"Term value (position name) - REQUIRED"}),terms:{type:"array",items:fe({withId:!0})}},required:["mainTerm"]}},Ro=[{name:"list",description:"List entities (supports UA/RU/EN resource names)",inputSchema:{type:"object",properties:{resource:{type:"string",description:"Entity name or synonym (e.g., \u0434\u0435\u043F\u0430\u0440\u0442\u0430\u043C\u0435\u043D\u0442\u0438 | \u043E\u0442\u0434\u0435\u043B\u044B | departments)"},page:{type:"number"},limit:{type:"number"},search:{type:"string"},all:{type:"string",enum:["true","false"]},isShort:{type:"string",enum:["true","false"]}},required:["resource"]}},{name:"get",description:"Get single entity by ID (short form in light mode)",inputSchema:{type:"object",properties:{resource:{type:"string"},id:{type:"string"},isShort:{type:"string",enum:["true","false"]}},required:["resource","id"]}},{name:"create",description:'Create an entity for the given resource. Payload shape depends on resource (e.g., departments, professions, languages, etc.). For entities with terms, provide mainTerm and optional terms with correct IDs/types. IMPORTANT: When creating AI-generated content, ALWAYS include aiMetadata fields with ai_generated=true, ai_model (e.g., "gpt-4o-mini"), and ai_generation_date. Only attach aiMetadata to the specific term(s) you are creating; terms without aiMetadata will not be touched.',inputSchema:{type:"object",properties:{resource:{type:"string"},payload:{type:"object"}},required:["resource","payload"],allOf:[{if:{properties:{resource:{const:"departments"}}},then:{properties:{payload:xe.departments}}},{if:{properties:{resource:{const:"professions"}}},then:{properties:{payload:xe.professions}}},{if:{properties:{resource:{const:"languages"}}},then:{properties:{payload:xe.languages}}},{if:{properties:{resource:{const:"industries"}}},then:{properties:{payload:xe.industries}}},{if:{properties:{resource:{const:"sub-industries"}}},then:{properties:{payload:xe["sub-industries"]}}},{if:{properties:{resource:{const:"tool-types"}}},then:{properties:{payload:xe["tool-types"]}}},{if:{properties:{resource:{const:"countries"}}},then:{properties:{payload:xe.countries}}},{if:{properties:{resource:{const:"cities"}}},then:{properties:{payload:xe.cities}}},{if:{properties:{resource:{const:"actions"}}},then:{properties:{payload:xe.actions}}},{if:{properties:{resource:{const:"objects"}}},then:{properties:{payload:xe.objects}}},{if:{properties:{resource:{const:"responsibilities"}}},then:{properties:{payload:xe.responsibilities}}},{if:{properties:{resource:{const:"formats"}}},then:{properties:{payload:xe.formats}}},{if:{properties:{resource:{const:"statuses"}}},then:{properties:{payload:xe.statuses}}},{if:{properties:{resource:{const:"tools"}}},then:{properties:{payload:xe.tools}}},{if:{properties:{resource:{const:"shifts"}}},then:{properties:{payload:xe.shifts}}},{if:{properties:{resource:{const:"currencies"}}},then:{properties:{payload:xe.currencies}}},{if:{properties:{resource:{const:"rates"}}},then:{properties:{payload:xe.rates}}},{if:{properties:{resource:{const:"levels"}}},then:{properties:{payload:xe.levels}}},{if:{properties:{resource:{const:"positions"}}},then:{properties:{payload:xe.positions}}}]}},{name:"update",description:'Update an entity by ID for the given resource. Payload shape depends on resource. For term-managed entities, send the FULL terms array on update to avoid deletions (include unchanged terms with their IDs). IMPORTANT: Include aiMetadata ONLY for the term(s) you want to update; other terms without aiMetadata in the payload will keep their existing AI metadata. Recommended fields when updating AI-generated content: ai_generated=true, ai_model (e.g., "gpt-4o-mini"), ai_generation_date.',inputSchema:{type:"object",properties:{resource:{type:"string"},id:{type:"string"},payload:{type:"object"}},required:["resource","id","payload"],allOf:[{if:{properties:{resource:{const:"departments"}}},then:{properties:{payload:Se.departments}}},{if:{properties:{resource:{const:"professions"}}},then:{properties:{payload:Se.professions}}},{if:{properties:{resource:{const:"languages"}}},then:{properties:{payload:Se.languages}}},{if:{properties:{resource:{const:"industries"}}},then:{properties:{payload:Se.industries}}},{if:{properties:{resource:{const:"sub-industries"}}},then:{properties:{payload:Se["sub-industries"]}}},{if:{properties:{resource:{const:"tool-types"}}},then:{properties:{payload:Se["tool-types"]}}},{if:{properties:{resource:{const:"countries"}}},then:{properties:{payload:Se.countries}}},{if:{properties:{resource:{const:"cities"}}},then:{properties:{payload:Se.cities}}},{if:{properties:{resource:{const:"actions"}}},then:{properties:{payload:Se.actions}}},{if:{properties:{resource:{const:"objects"}}},then:{properties:{payload:Se.objects}}},{if:{properties:{resource:{const:"responsibilities"}}},then:{properties:{payload:Se.responsibilities}}},{if:{properties:{resource:{const:"formats"}}},then:{properties:{payload:Se.formats}}},{if:{properties:{resource:{const:"statuses"}}},then:{properties:{payload:Se.statuses}}},{if:{properties:{resource:{const:"tools"}}},then:{properties:{payload:Se.tools}}},{if:{properties:{resource:{const:"shifts"}}},then:{properties:{payload:Se.shifts}}},{if:{properties:{resource:{const:"currencies"}}},then:{properties:{payload:Se.currencies}}},{if:{properties:{resource:{const:"rates"}}},then:{properties:{payload:Se.rates}}},{if:{properties:{resource:{const:"levels"}}},then:{properties:{payload:Se.levels}}},{if:{properties:{resource:{const:"positions"}}},then:{properties:{payload:Se.positions}}}]}},{name:"get_term_types",description:"Get all term types",inputSchema:{type:"object",properties:{page:{type:"number",description:"Page number (default: 1)"},limit:{type:"number",description:"Number of term types per page (default: 10)"},search:{type:"string",description:"Search by term type name or description"}}}},{name:"find_existing_responsibility_terms",description:"Find existing Actions and Objects by language to check what terms already exist. Use this BEFORE adding new terms to responsibilities.",inputSchema:{type:"object",properties:{language_id:{type:"number",description:"Language ID - REQUIRED. Use get_languages to find language ID."},term_type_id:{type:"number",description:"Term type ID - REQUIRED. Use get_term_types to find term type ID."},action_id:{type:"number",description:"Action ID - REQUIRED. Use get_actions to find action ID."},object_id:{type:"number",description:"Object ID - REQUIRED. Use get_objects to find object ID."},search:{type:"string",description:"Search term (optional). Use to filter specific action-object combinations."}},required:["language_id","term_type_id","action_id","object_id"]}},{name:"create_term",description:'Create a new individual term using API token authentication. Terms can exist independently and be linked to term groups. IMPORTANT: When creating AI-generated terms, ALWAYS include aiMetadata with ai_generated=true, ai_model (e.g., "gpt-4o-mini"), and ai_generation_date for proper tracking. Only the created term\u2019s AI metadata is affected.',inputSchema:{type:"object",properties:{value:{type:"string",description:"Term value - REQUIRED"},description:{type:"string",description:"Term description (optional)"},language_id:{type:"number",description:"Language ID - REQUIRED. Use get_languages to find language ID"},term_type_id:{type:"number",description:"Term type ID - REQUIRED. Use get_term_types to find term type ID"},status_id:{type:"number",description:"Status ID (optional). Use get_statuses to find status ID"},term_group_id:{type:"number",description:"Term group ID (optional). If provided, term will be linked to this group"},aiMetadata:{type:"object",description:"AI metadata for tracking AI-generated content (optional)",properties:{...va}}},allOf:ga,required:["value","language_id","term_type_id","term_group_id"]}},{name:"update_term",description:"Update an existing individual term using API token authentication. IMPORTANT: Send aiMetadata only when you intend to change AI fields for this term; omitting aiMetadata leaves existing AI fields unchanged. Recommended: include ai_generated=true, ai_model, ai_generation_date. Supports version tracking and term group relation management.",inputSchema:{type:"object",properties:{termId:{type:"string",description:"Term ID (REQUIRED)"},value:{type:"string",description:"Term value (optional)"},description:{type:"string",description:"Term description (optional)"},language_id:{type:"number",description:"Language ID (optional). Use get_languages to find language ID"},term_type_id:{type:"number",description:"Term type ID (optional). Use get_term_types to find term type ID"},status_id:{type:"number",description:"Status ID (optional). Use get_statuses to find status ID"},term_group_id:{type:"number",description:"Term group ID (optional). For creating/updating group relation"},aiMetadata:{type:"object",description:"AI metadata updates (optional)",properties:{...va}}},allOf:ga,required:["termId","term_group_id"]}}];var fr=class extends Error{constructor(e){super(e),this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}toJSON(){return{name:this.name,message:this.message,code:this.code,statusCode:this.statusCode,context:this.context,stack:this.stack}}},Ke=class extends fr{constructor(e,r=500,s){super(e),this.statusCode=r,this.code="API_ERROR",this.context=s}},Tr=class extends fr{constructor(e,r){super(e),this.statusCode=408,this.code="TIMEOUT_ERROR",this.context={timeout:r}}};function Ir(a,e){if(a instanceof fr)return a;if(a&&typeof a=="object"){let r=a.message||String(a);if(r.includes("timeout"))return new Tr(r,e?.timeout??3e4);if(r.includes("status: 404"))return new Ke(r,404,e);if(r.includes("status: 401"))return new Ke("Authentication failed",401,e);if(r.includes("status: 403"))return new Ke("Access forbidden",403,e);let s=r.match(/status:\s*(\d+)/),t=s?parseInt(s[1],10):500;return new Ke(r,t,e)}return new Ke(a?String(a):"Unknown error occurred",500,{originalError:a,...e})}function ds(a){let e=a instanceof fr?a:Ir(a);return{content:[{type:"text",text:JSON.stringify({error:{message:e.message,code:e.code,type:e.name,statusCode:e.statusCode,context:e.context}},null,2)}]}}var fs=class{constructor(e={}){this.cache=new Map,this.ttl=e.ttl||3e5,this.maxSize=e.maxSize||1e3}get(e){let r=this.cache.get(e);return r?Date.now()>r.expiry?(this.cache.delete(e),null):(r.accessed=Date.now(),r.value):null}set(e,r,s){let t=s||this.ttl,n=Date.now()+t;this.cache.size>=this.maxSize&&this.evictOldest(),this.cache.set(e,{value:r,expiry:n,accessed:Date.now()})}clear(){this.cache.clear()}getStats(){return{size:this.cache.size,maxSize:this.maxSize,ttl:this.ttl}}evictOldest(){let e=null,r=Date.now();for(let[s,t]of this.cache.entries())t.accessed<r&&(r=t.accessed,e=s);e&&this.cache.delete(e)}},Or=new fs({ttl:parseInt(process.env.CACHE_TTL_MS||"300000"),maxSize:parseInt(process.env.CACHE_MAX_SIZE||"1000")});function ps(a,e){let{url:r,headers:s,query:t,extras:n}=e||{},o={url:r||a,headers:ip(s||{}),query:t||{},extras:n||{}};return`${o.url}:${JSON.stringify(o)}`}function ip(a){let e={...a};return e.Authorization&&(e.Authorization="Bearer ***"),e.authorization&&(e.authorization="Bearer ***"),e}function To(a){for(let e of Or.cache.keys())e.startsWith(a)&&Or.cache.delete(e)}async function A(a,e={}){let r=`${dr}/api/token/${a}`,s=e.method||"GET",t=e.timeout||3e4,n=100*1024,o=new AbortController,i=setTimeout(()=>o.abort(),t),l={headers:{Authorization:`Bearer ${Rr}`,"Content-Type":"application/json",...e.headers},body:e.body,method:s,signal:o.signal};if(l.body&&typeof l.body=="string"&&l.body.length>n)throw new Ke("Request body too large",413,{endpoint:a,method:s,maxBytes:n});try{if(s==="GET"&&e.skipCache!==!0){let m=ps(a,{url:r,headers:l.headers,query:e.query,extras:e.cacheKeyExtras}),_=Or.get(m);if(_)return clearTimeout(i),_}let u=await fetch(r,l);if(clearTimeout(i),!u.ok){let m=await u.text(),_=`HTTP error! status: ${u.status}`;try{_=JSON.parse(m).message||_}catch{}throw new Ke(_,u.status,{endpoint:a,method:s,responseBody:m})}let p=await u.json();if(s==="GET"&&e.skipCache!==!0){let m=ps(a,{url:r,headers:l.headers,query:e.query,extras:e.cacheKeyExtras});Or.set(m,p,e.cacheTtl)}else if(s!=="GET"){let m=String(a).split("/")[0];m&&To(`${dr}/api/token/${m}`)}return p}catch(u){throw clearTimeout(i),u.name==="AbortError"?new Tr(`Request timeout after ${t}ms`,t):Ir(u,{endpoint:a,method:s,timeout:t})}}function ot(){return process.env.MODE==="light"}function Pe(a={}){let{page:e=1,limit:r=10,search:s="",...t}=a,n=new URLSearchParams({page:String(e),limit:String(r),...s&&{search:s}});return Object.entries(t).forEach(([o,i])=>{i!=null&&n.set(o,String(i))}),ot()&&(n.has("all")||n.set("all","true"),n.has("isShort")||n.set("isShort","true")),n}async function Io(a={}){let e=Pe(a);return await A(`departments?${e}`)}async function hs(a,e={}){return await A(`departments/${a}`)}async function Oo(a){return await A("departments",{method:"POST",body:JSON.stringify(a)})}async function Do(a,e){let{preserveExistingTerms:r=!0,...s}=e;if(r){let n=(await hs(a)).terms||[];if(e.terms){let o=e.terms,i=[...n];o.forEach(l=>{let u=i.findIndex(p=>p.id===l.id);u>=0?i[u]={...i[u],...l}:i.push(l)}),s.terms=i}else s.terms=n}return await A(`departments/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function $o(a={}){let e=Pe(a);return await A(`professions?${e}`)}async function ms(a,e={}){return await A(`professions/${a}`)}async function jo(a){return await A("professions",{method:"POST",body:JSON.stringify(a)})}async function Ao(a,e){let{preserveExistingTerms:r=!0,...s}=e;if(r){let n=(await ms(a)).terms||[];if(e.terms){let o=e.terms,i=[...n];o.forEach(l=>{let u=i.findIndex(p=>p.id===l.id);u>=0?i[u]={...i[u],...l}:i.push(l)}),s.terms=i}else s.terms=n}return await A(`professions/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function Co(a={}){let e=Pe(a);return await A(`statuses?${e}`)}async function ko(a,e={}){return await A(`statuses/${a}`)}async function No(a){return await A("statuses",{method:"POST",body:JSON.stringify(a)})}async function qo(a,e){return await A(`statuses/${a}`,{method:"PUT",body:JSON.stringify(e)})}async function Fo(a={}){let e=Pe(a);return await A(`languages?${e}`)}async function vs(a,e={}){return await A(`languages/${a}`)}async function Uo(a){return await A("languages",{method:"POST",body:JSON.stringify(a)})}async function Lo(a,e){let{preserveExistingTerms:r=!0,...s}=e;if(r){let n=(await vs(a)).terms||[];if(e.terms){let o=e.terms,i=[...n];o.forEach(l=>{let u=i.findIndex(p=>p.id===l.id);u>=0?i[u]={...i[u],...l}:i.push(l)}),s.terms=i}else s.terms=n}return await A(`languages/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function ya(a={}){let e=Pe(a);return await A(`term-types?${e}`)}async function Mo(a={}){let e=Pe(a);return await A(`countries?${e}`)}async function gs(a,e={}){let r=await A(`countries/${a}`);return ot()&&e.isShort!==!1?{id:r?.id,name:r?.name}:r}async function zo(a){return await A("countries",{method:"POST",body:JSON.stringify(a)})}async function Qo(a,e){let{preserveExistingTerms:r=!0,...s}=e;if(r){let n=(await gs(a)).terms||[];if(e.terms){let o=e.terms,i=[...n];o.forEach(l=>{let u=i.findIndex(p=>p.id===l.id);u>=0?i[u]={...i[u],...l}:i.push(l)}),s.terms=i}else s.terms=n}return await A(`countries/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function Vo(a={}){let e=Pe(a);return await A(`tool-types?${e}`)}async function Ho(a,e={}){let r=await A(`tool-types/${a}`);return ot()&&e.isShort!==!1?{id:r?.id,name:r?.name}:r}async function Jo(a){return await A("tool-types",{method:"POST",body:JSON.stringify(a)})}async function Bo(a,e){return await A(`tool-types/${a}`,{method:"PUT",body:JSON.stringify(e)})}async function Zo(a={}){let e=Pe(a);return await A(`tools?${e}`)}async function Ko(a,e={}){return await A(`tools/${a}`)}async function Go(a){return await A("tools",{method:"POST",body:JSON.stringify(a)})}async function Wo(a,e){return await A(`tools/${a}`,{method:"PUT",body:JSON.stringify(e)})}async function Yo(a={}){let e=Pe(a);return await A(`actions?${e}`)}async function ys(a,e={}){let r=await A(`actions/${a}`);return ot()&&e.isShort!==!1?{id:r?.id,name:r?.name}:r}async function Xo(a){return await A("actions",{method:"POST",body:JSON.stringify(a)})}async function ec(a,e){let{preserveExistingTerms:r=!0,...s}=e;if(r){let n=(await ys(a)).terms||[];if(e.terms){let o=e.terms,i=[...n];o.forEach(l=>{let u=i.findIndex(p=>p.id===l.id);u>=0?i[u]={...i[u],...l}:i.push(l)}),s.terms=i}else s.terms=n}return await A(`actions/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function tc(a={}){let e=Pe(a);return await A(`objects?${e}`)}async function _s(a,e={}){let r=await A(`objects/${a}`);return ot()&&e.isShort!==!1?{id:r?.id,name:r?.name}:r}async function rc(a){return await A("objects",{method:"POST",body:JSON.stringify(a)})}async function ac(a,e){let{preserveExistingTerms:r=!0,...s}=e;if(r){let n=(await _s(a)).terms||[];if(e.terms){let o=e.terms,i=[...n];o.forEach(l=>{let u=i.findIndex(p=>p.id===l.id);u>=0?i[u]={...i[u],...l}:i.push(l)}),s.terms=i}else s.terms=n}return await A(`objects/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function sc(a={}){let e=Pe(a);return await A(`formats?${e}`)}async function nc(a,e={}){let r=await A(`formats/${a}`);return ot()&&e.isShort!==!1?{id:r?.id,name:r?.name}:r}async function ic(a){return await A("formats",{method:"POST",body:JSON.stringify(a)})}async function oc(a,e){return await A(`formats/${a}`,{method:"PUT",body:JSON.stringify(e)})}async function cc(a={}){let{page:e=1,limit:r=10,search:s="",language_ids:t,action_id:n,object_id:o,filters:i,all:l}=a,u=new URLSearchParams({page:e.toString(),limit:r.toString(),...s&&{search:s},...t&&{language_ids:JSON.stringify(t)},...n&&{action_id:n.toString()},...o&&{object_id:o.toString()},...i&&{filters:i},...l&&{all:l}});return await A(`responsibilities?${u}`)}async function uc(a,e={}){let r=await A(`responsibilities/${a}`);return ot()&&e.isShort!==!1?{id:r?.id,name:r?.name}:r}async function lc(a){return await A("responsibilities",{method:"POST",body:JSON.stringify(a)})}async function dc(a,e){return await A(`responsibilities/${a}`,{method:"PUT",body:JSON.stringify(e)})}async function bs(a={}){let{language_id:e,term_type_id:r,action_id:s,object_id:t,search:n=""}=a,o=new URLSearchParams({language_id:e.toString(),term_type_id:r.toString(),action_id:s.toString(),object_id:t.toString(),...n&&{search:n}});return await A(`responsibilities/find-existing-terms?${o}`)}async function fc(a={}){let e=Pe(a);return await A(`cities?${e}`)}async function Es(a,e={}){let r=await A(`cities/${a}`);return ot()&&e.isShort!==!1?{id:r?.id,name:r?.name}:r}async function pc(a){return await A("cities",{method:"POST",body:JSON.stringify(a)})}async function hc(a,e){let{preserveExistingTerms:r=!0,...s}=e;if(r){let n=(await Es(a)).terms||[];if(e.terms){let o=e.terms,i=[...n];o.forEach(l=>{let u=i.findIndex(p=>p.id===l.id);u>=0?i[u]={...i[u],...l}:i.push(l)}),s.terms=i}else s.terms=n}return await A(`cities/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function mc(a={}){let e=Pe(a);return await A(`industries?${e}`)}async function xs(a,e={}){let r=await A(`industries/${a}`);return ot()&&e.isShort!==!1?{id:r?.id,name:r?.name}:r}async function vc(a){return await A("industries",{method:"POST",body:JSON.stringify(a)})}async function gc(a,e){let{preserveExistingTerms:r=!0,...s}=e;if(r){let n=(await xs(a)).terms||[];if(e.terms){let o=e.terms,i=[...n];o.forEach(l=>{let u=i.findIndex(p=>p.id===l.id);u>=0?i[u]={...i[u],...l}:i.push(l)}),s.terms=i}else s.terms=n}return await A(`industries/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function yc(a={}){let e=Pe(a);return await A(`sub-industries?${e}`)}async function Ss(a,e={}){let r=await A(`sub-industries/${a}`);return ot()&&e.isShort!==!1?{id:r?.id,name:r?.name}:r}async function _c(a){return await A("sub-industries",{method:"POST",body:JSON.stringify(a)})}async function bc(a,e){let{preserveExistingTerms:r=!0,...s}=e;if(r){let n=(await Ss(a)).terms||[];if(e.terms){let o=e.terms,i=[...n];o.forEach(l=>{let u=i.findIndex(p=>p.id===l.id);u>=0?i[u]={...i[u],...l}:i.push(l)}),s.terms=i}else s.terms=n}return await A(`sub-industries/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function Ec(a={}){let e=Pe(a);return await A(`shifts?${e}`)}async function xc(a,e={}){return await A(`shifts/${a}`)}async function Sc(a){return await A("shifts",{method:"POST",body:JSON.stringify(a)})}async function Pc(a,e){return await A(`shifts/${a}`,{method:"PUT",body:JSON.stringify(e)})}async function wc(a={}){let e=Pe(a);return await A(`currencies?${e}`)}async function Rc(a,e={}){return await A(`currencies/${a}`)}async function Tc(a){return await A("currencies",{method:"POST",body:JSON.stringify(a)})}async function Ic(a,e){return await A(`currencies/${a}`,{method:"PUT",body:JSON.stringify(e)})}async function Oc(a={}){let e=Pe(a);return await A(`levels?${e}`)}async function Ps(a,e={}){return await A(`levels/${a}`)}async function Dc(a){return await A("levels",{method:"POST",body:JSON.stringify(a)})}async function $c(a,e){let{preserveExistingTerms:r=!0,...s}=e;if(r){let t=await Ps(a),n=t.terms||[],o=t.mainTerm||{},i=[...n];s.terms&&s.terms.forEach(l=>{let u=i.findIndex(p=>p.id===l.id);u>=0?i[u]={...i[u],...l}:i.push(l)}),s.terms=i,!s.mainTerm&&o&&(s.mainTerm=o)}return await A(`levels/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function jc(a={}){let e=Pe(a);return await A(`rates?${e}`)}async function Ac(a,e={}){return await A(`rates/${a}`)}async function Cc(a){return await A("rates",{method:"POST",body:JSON.stringify(a)})}async function kc(a,e){return await A(`rates/${a}`,{method:"PUT",body:JSON.stringify(e)})}async function Nc(a={}){let e=Pe(a);return await A(`positions?${e}`)}async function ws(a,e={}){return await A(`positions/${a}`)}async function qc(a){return await A("positions",{method:"POST",body:JSON.stringify(a)})}async function Fc(a,e){let{preserveExistingTerms:r=!0,...s}=e;if(r){let t=await ws(a),n=t.terms||[],o=t.mainTerm||{},i=[...n];s.terms&&s.terms.forEach(l=>{let u=i.findIndex(p=>p.id===l.id);u>=0?i[u]={...i[u],...l}:i.push(l)}),s.terms=i,!s.mainTerm&&o&&(s.mainTerm=o)}return await A(`positions/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function Rs(a){return await A("terms",{method:"POST",body:JSON.stringify(a)})}async function Ts(a,e){return await A(`terms/${a}`,{method:"PUT",body:JSON.stringify(e)})}var Uc={\u0434\u0435\u043F\u0430\u0440\u0442\u0430\u043C\u0435\u043D\u0442:"departments",\u0434\u0435\u043F\u0430\u0440\u0442\u0430\u043C\u0435\u043D\u0442\u0438:"departments",\u0432\u0456\u0434\u0434\u0456\u043B:"departments",\u0432\u0456\u0434\u0434\u0456\u043B\u0438:"departments",\u043E\u0442\u0434\u0435\u043B:"departments",\u043E\u0442\u0434\u0435\u043B\u044B:"departments",department:"departments",departments:"departments",\u043F\u0440\u043E\u0444\u0435\u0441\u0456\u044F:"professions",\u043F\u0440\u043E\u0444\u0435\u0441\u0456\u0457:"professions",\u043F\u0440\u043E\u0444\u0435\u0441\u0441\u0438\u044F:"professions",\u043F\u0440\u043E\u0444\u0435\u0441\u0441\u0438\u0438:"professions",profession:"professions",professions:"professions",\u043C\u043E\u0432\u0430:"languages",\u043C\u043E\u0432\u0438:"languages",\u044F\u0437\u044B\u043A:"languages",\u044F\u0437\u044B\u043A\u0438:"languages",language:"languages",languages:"languages",\u0441\u0442\u0430\u0442\u0443\u0441:"statuses",\u0441\u0442\u0430\u0442\u0443\u0441\u0438:"statuses",\u0441\u0442\u0430\u0442\u0443\u0441\u044B:"statuses",status:"statuses",statuses:"statuses",\u043A\u0440\u0430\u0457\u043D\u0430:"countries",\u043A\u0440\u0430\u0457\u043D\u0438:"countries",\u0441\u0442\u0440\u0430\u043D\u0430:"countries",\u0441\u0442\u0440\u0430\u043D\u044B:"countries",country:"countries",countries:"countries",\u043C\u0456\u0441\u0442\u043E:"cities",\u043C\u0456\u0441\u0442\u0430:"cities",\u0433\u043E\u0440\u043E\u0434:"cities",\u0433\u043E\u0440\u043E\u0434\u0430:"cities",city:"cities",cities:"cities",\u0456\u043D\u0434\u0443\u0441\u0442\u0440\u0456\u044F:"industries",\u0456\u043D\u0434\u0443\u0441\u0442\u0440\u0456\u0457:"industries",\u0438\u043D\u0434\u0443\u0441\u0442\u0440\u0438\u044F:"industries",\u0438\u043D\u0434\u0443\u0441\u0442\u0440\u0438\u0438:"industries",industry:"industries",industries:"industries",\u0441\u0443\u0431\u0456\u043D\u0434\u0443\u0441\u0442\u0440\u0456\u044F:"sub-industries",\u0441\u0443\u0431\u0456\u043D\u0434\u0443\u0441\u0442\u0440\u0456\u0457:"sub-industries",\u0441\u0443\u0431\u0438\u043D\u0434\u0443\u0441\u0442\u0440\u0438\u044F:"sub-industries",\u0441\u0443\u0431\u0438\u043D\u0434\u0443\u0441\u0442\u0440\u0438\u0438:"sub-industries","sub-industry":"sub-industries","sub-industries":"sub-industries",\u0456\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442:"tools",\u0456\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442\u0438:"tools",\u0438\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442:"tools",\u0438\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442\u044B:"tools",tool:"tools",tools:"tools","\u0442\u0438\u043F \u0456\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442\u0443":"tool-types","\u0442\u0438\u043F\u0438 \u0456\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442\u0456\u0432":"tool-types","\u0442\u0438\u043F \u0438\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442\u0430":"tool-types","\u0442\u0438\u043F\u044B \u0438\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442\u043E\u0432":"tool-types","tool type":"tool-types","tool types":"tool-types","tool-types":"tool-types","\u0442\u0438\u043F \u0442\u0435\u0440\u043C\u0456\u043D\u0443":"term-types","\u0442\u0438\u043F\u0438 \u0442\u0435\u0440\u043C\u0456\u043D\u0456\u0432":"term-types","\u0442\u0438\u043F \u0442\u0435\u0440\u043C\u0438\u043D\u0430":"term-types","\u0442\u0438\u043F\u044B \u0442\u0435\u0440\u043C\u0438\u043D\u043E\u0432":"term-types","term type":"term-types","term types":"term-types","term-types":"term-types",\u0434\u0456\u044F:"actions",\u0434\u0456\u0457:"actions",\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435:"actions",\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F:"actions",action:"actions",actions:"actions",\u043E\u0431\u02BC\u0454\u043A\u0442:"objects",\u043E\u0431\u044A\u0435\u043A\u0442:"objects",\u043E\u0431\u044A\u0435\u043A\u0442\u044B:"objects",objects:"objects",object:"objects",\u043E\u0431\u02BC\u0454\u043A\u0442\u0438:"objects",\u0444\u043E\u0440\u043C\u0430\u0442:"formats",\u0444\u043E\u0440\u043C\u0430\u0442\u0438:"formats",\u0444\u043E\u0440\u043C\u0430\u0442\u044B:"formats",format:"formats",formats:"formats",\u0437\u043C\u0456\u043D\u0430:"shifts",\u0437\u043C\u0456\u043D\u0438:"shifts",\u0441\u043C\u0435\u043D\u0430:"shifts",\u0441\u043C\u0435\u043D\u044B:"shifts",shift:"shifts",shifts:"shifts",\u0432\u0430\u043B\u044E\u0442\u0430:"currencies",\u0432\u0430\u043B\u044E\u0442\u0438:"currencies",\u0432\u0430\u043B\u044E\u0442\u044B:"currencies",currency:"currencies",currencies:"currencies",\u0441\u0442\u0430\u0432\u043A\u0430:"rates",\u0441\u0442\u0430\u0432\u043A\u0438:"rates",\u0442\u0430\u0440\u0438\u0444:"rates",\u0442\u0430\u0440\u0438\u0444\u044B:"rates",rate:"rates",rates:"rates",\u0440\u0456\u0432\u0435\u043D\u044C:"levels",\u0440\u0456\u0432\u043D\u0456:"levels",\u0443\u0440\u043E\u0432\u0435\u043D\u044C:"levels",\u0443\u0440\u043E\u0432\u043D\u0438:"levels",level:"levels",levels:"levels",\u043F\u043E\u0437\u0438\u0446\u0456\u044F:"positions",\u043F\u043E\u0437\u0438\u0446\u0456\u0457:"positions",\u0434\u043E\u043B\u0436\u043D\u043E\u0441\u0442\u044C:"positions",\u0434\u043E\u043B\u0436\u043D\u043E\u0441\u0442\u0438:"positions",position:"positions",positions:"positions"};function _a(a){if(!a)throw new Error("Resource is required");let e=String(a).toLowerCase().trim(),r=Uc[e]||null;if(!r){let s=[...new Set(Object.values(Uc))].sort();throw new Error(`Unknown resource "${a}". Try one of: ${s.join(", ")}`)}return r}var Dr={departments:{list:Io,get:hs,create:Oo,update:Do},professions:{list:$o,get:ms,create:jo,update:Ao},languages:{list:Fo,get:vs,create:Uo,update:Lo},statuses:{list:Co,get:ko,create:No,update:qo},countries:{list:Mo,get:gs,create:zo,update:Qo},cities:{list:fc,get:Es,create:pc,update:hc},industries:{list:mc,get:xs,create:vc,update:gc},"sub-industries":{list:yc,get:Ss,create:_c,update:bc},tools:{list:Zo,get:Ko,create:Go,update:Wo},"tool-types":{list:Vo,get:Ho,create:Jo,update:Bo},"term-types":{list:ya},actions:{list:Yo,get:ys,create:Xo,update:ec},objects:{list:tc,get:_s,create:rc,update:ac},formats:{list:sc,get:nc,create:ic,update:oc},responsibilities:{list:cc,get:uc,create:lc,update:dc},shifts:{list:Ec,get:xc,create:Sc,update:Pc},currencies:{list:wc,get:Rc,create:Tc,update:Ic},rates:{list:jc,get:Ac,create:Cc,update:kc},levels:{list:Oc,get:Ps,create:Dc,update:$c},positions:{list:Nc,get:ws,create:qc,update:Fc}};async function Lc({resource:a,...e}){let r=_a(a),s=Dr[r]?.list;if(!s)throw new Error(`List not supported for ${r}`);let t=process.env.MODE||"standard",o=(["light","standard"].includes(t)?t:"standard")==="light"?{...e,all:!0,isShort:!0}:e;return await s(o)}async function Mc({resource:a,id:e}){let r=_a(a),s=Dr[r]?.get;if(!s)throw new Error(`Get not supported for ${r}`);return await s(e)}async function zc({resource:a,payload:e}){let r=_a(a),s=Dr[r]?.create;if(!s)throw new Error(`Create not supported for ${r}`);return await s(e)}async function Qc({resource:a,id:e,payload:r}){let s=_a(a),t=Dr[s]?.update;if(!t)throw new Error(`Update not supported for ${s}`);let n=r;return cp(s)&&(n=await up(s,e,n),n={preserveExistingTerms:!1,...n}),await t(e,n)}var op=new Set(["departments","professions","languages","countries","cities","industries","sub-industries","actions","objects","responsibilities","levels","positions"]);function cp(a){return op.has(a)}async function up(a,e,r){let s=Dr[a]?.get;if(!s)return r;let t=await s(e),n={...t,...r};if(r&&Object.prototype.hasOwnProperty.call(r,"mainTerm")?n.mainTerm=r.mainTerm||t.mainTerm:t.mainTerm&&(n.mainTerm=t.mainTerm),Array.isArray(r?.terms)){let i=[...Array.isArray(t.terms)?t.terms:[]];for(let l of r.terms){let u=l&&l.id!=null?i.findIndex(p=>p.id===l.id):-1;u>=0?i[u]={...i[u],...l}:i.push(l)}n.terms=i}else Array.isArray(t.terms)&&(n.terms=t.terms);return delete n.id,n}var Is=class{constructor(e){this.requests=new Map,this.maxRequests=e.maxRequests,this.windowMs=e.windowMs}isAllowed(e){let r=Date.now(),s=this.requests.get(e)||{requests:[],blocked:0};return s.requests=s.requests.filter(t=>r-t<this.windowMs),s.requests.length>=this.maxRequests?(s.blocked++,this.requests.set(e,s),!1):(s.requests.push(r),this.requests.set(e,s),!0)}getStats(e){if(e){let r=this.requests.get(e);return{clientId:e,requests:r?.requests.length||0,blocked:r?.blocked||0}}return{totalClients:this.requests.size,totalBlocked:Array.from(this.requests.values()).reduce((r,s)=>r+s.blocked,0)}}},Vc=new Is({maxRequests:60,windowMs:6e4});Rr||process.exit(1);dr||process.exit(1);var Os=new pa({name:"libs-mcp-service",version:"1.0.0"},{capabilities:{tools:{}}});Os.setRequestHandler(Na,async()=>({tools:Ro}));Os.setRequestHandler(qa,async a=>{let{name:e,arguments:r}=a.params,s=a?.params?.$clientId||"default-client";if(!Vc.isAllowed(s)){let t=new Ke("Rate limit exceeded",429,{clientId:s});return ds(t)}try{let t;switch(e){case"list":t=await Lc(r);break;case"get":t=await Mc(r);break;case"create":t=await zc(r);break;case"update":t=await Qc(r);break;case"get_term_types":t=await ya(r);break;case"find_existing_responsibility_terms":t=await bs(r);break;case"create_term":t=await Rs(r);break;case"update_term":t=await Ts(r.termId,r);break;default:throw new Error(`Unhandled tool: ${e}`)}return{content:[{type:"text",text:JSON.stringify(t,null,2)}]}}catch(t){let n=Ir(t,{tool:e,args:r});return ds(n)}});var lp=new ma;await Os.connect(lp);
/*! Bundled license information:

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)
*/
