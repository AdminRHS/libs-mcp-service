#!/usr/bin/env node
var hl=Object.create;var Pa=Object.defineProperty;var ml=Object.getOwnPropertyDescriptor;var vl=Object.getOwnPropertyNames;var gl=Object.getPrototypeOf,yl=Object.prototype.hasOwnProperty;var B=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),_l=(a,e)=>{for(var r in e)Pa(a,r,{get:e[r],enumerable:!0})},bl=(a,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of vl(e))!yl.call(a,t)&&t!==r&&Pa(a,t,{get:()=>e[t],enumerable:!(s=ml(e,t))||s.enumerable});return a};var El=(a,e,r)=>(r=a!=null?hl(gl(a)):{},bl(e||!a||!a.__esModule?Pa(r,"default",{value:a,enumerable:!0}):r,a));var Ei=B((Kr,bi)=>{(function(a,e){typeof Kr=="object"&&typeof bi<"u"?e(Kr):typeof define=="function"&&define.amd?define(["exports"],e):e(a.URI=a.URI||{})})(Kr,function(a){"use strict";function e(){for(var h=arguments.length,p=Array(h),v=0;v<h;v++)p[v]=arguments[v];if(p.length>1){p[0]=p[0].slice(0,-1);for(var E=p.length-1,x=1;x<E;++x)p[x]=p[x].slice(1,-1);return p[E]=p[E].slice(1),p.join("")}else return p[0]}function r(h){return"(?:"+h+")"}function s(h){return h===void 0?"undefined":h===null?"null":Object.prototype.toString.call(h).split(" ").pop().split("]").shift().toLowerCase()}function t(h){return h.toUpperCase()}function i(h){return h!=null?h instanceof Array?h:typeof h.length!="number"||h.split||h.setInterval||h.call?[h]:Array.prototype.slice.call(h):[]}function o(h,p){var v=h;if(p)for(var E in p)v[E]=p[E];return v}function n(h){var p="[A-Za-z]",v="[\\x0D]",E="[0-9]",x="[\\x22]",N=e(E,"[A-Fa-f]"),K="[\\x0A]",re="[\\x20]",ne=r(r("%[EFef]"+N+"%"+N+N+"%"+N+N)+"|"+r("%[89A-Fa-f]"+N+"%"+N+N)+"|"+r("%"+N+N)),be="[\\:\\/\\?\\#\\[\\]\\@]",te="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",fe=e(be,te),Ee=h?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",pe=h?"[\\uE000-\\uF8FF]":"[]",se=e(p,E,"[\\-\\.\\_\\~]",Ee),he=r(p+e(p,E,"[\\+\\-\\.]")+"*"),ce=r(r(ne+"|"+e(se,te,"[\\:]"))+"*"),Dt=r(r("25[0-5]")+"|"+r("2[0-4]"+E)+"|"+r("1"+E+E)+"|"+r("[1-9]"+E)+"|"+E),Fe=r(r("25[0-5]")+"|"+r("2[0-4]"+E)+"|"+r("1"+E+E)+"|"+r("0?[1-9]"+E)+"|0?0?"+E),Qe=r(Fe+"\\."+Fe+"\\."+Fe+"\\."+Fe),le=r(N+"{1,4}"),Le=r(r(le+"\\:"+le)+"|"+Qe),ze=r(r(le+"\\:")+"{6}"+Le),rt=r("\\:\\:"+r(le+"\\:")+"{5}"+Le),Ot=r(r(le)+"?\\:\\:"+r(le+"\\:")+"{4}"+Le),ut=r(r(r(le+"\\:")+"{0,1}"+le)+"?\\:\\:"+r(le+"\\:")+"{3}"+Le),mr=r(r(r(le+"\\:")+"{0,2}"+le)+"?\\:\\:"+r(le+"\\:")+"{2}"+Le),jr=r(r(r(le+"\\:")+"{0,3}"+le)+"?\\:\\:"+le+"\\:"+Le),kr=r(r(r(le+"\\:")+"{0,4}"+le)+"?\\:\\:"+Le),Wt=r(r(r(le+"\\:")+"{0,5}"+le)+"?\\:\\:"+le),Yt=r(r(r(le+"\\:")+"{0,6}"+le)+"?\\:\\:"),dt=r([ze,rt,Ot,ut,mr,jr,kr,Wt,Yt].join("|")),Xt=r(r(se+"|"+ne)+"+"),xa=r(dt+"\\%25"+Xt),$t=r(dt+r("\\%25|\\%(?!"+N+"{2})")+Xt),ol=r("[vV]"+N+"+\\."+e(se,te,"[\\:]")+"+"),cl=r("\\["+r($t+"|"+dt+"|"+ol)+"\\]"),Fs=r(r(ne+"|"+e(se,te))+"*"),vr=r(cl+"|"+Qe+"(?!"+Fs+")|"+Fs),gr=r(E+"*"),Ls=r(r(ce+"@")+"?"+vr+r("\\:"+gr)+"?"),yr=r(ne+"|"+e(se,te,"[\\:\\@]")),ll=r(yr+"*"),Ms=r(yr+"+"),ul=r(r(ne+"|"+e(se,te,"[\\@]"))+"+"),pt=r(r("\\/"+ll)+"*"),er=r("\\/"+r(Ms+pt)+"?"),Sa=r(ul+pt),Ar=r(Ms+pt),tr="(?!"+yr+")",mf=r(pt+"|"+er+"|"+Sa+"|"+Ar+"|"+tr),rr=r(r(yr+"|"+e("[\\/\\?]",pe))+"*"),_r=r(r(yr+"|[\\/\\?]")+"*"),Qs=r(r("\\/\\/"+Ls+pt)+"|"+er+"|"+Ar+"|"+tr),dl=r(he+"\\:"+Qs+r("\\?"+rr)+"?"+r("\\#"+_r)+"?"),pl=r(r("\\/\\/"+Ls+pt)+"|"+er+"|"+Sa+"|"+tr),fl=r(pl+r("\\?"+rr)+"?"+r("\\#"+_r)+"?"),vf=r(dl+"|"+fl),gf=r(he+"\\:"+Qs+r("\\?"+rr)+"?"),yf="^("+he+")\\:"+r(r("\\/\\/("+r("("+ce+")@")+"?("+vr+")"+r("\\:("+gr+")")+"?)")+"?("+pt+"|"+er+"|"+Ar+"|"+tr+")")+r("\\?("+rr+")")+"?"+r("\\#("+_r+")")+"?$",_f="^(){0}"+r(r("\\/\\/("+r("("+ce+")@")+"?("+vr+")"+r("\\:("+gr+")")+"?)")+"?("+pt+"|"+er+"|"+Sa+"|"+tr+")")+r("\\?("+rr+")")+"?"+r("\\#("+_r+")")+"?$",bf="^("+he+")\\:"+r(r("\\/\\/("+r("("+ce+")@")+"?("+vr+")"+r("\\:("+gr+")")+"?)")+"?("+pt+"|"+er+"|"+Ar+"|"+tr+")")+r("\\?("+rr+")")+"?$",Ef="^"+r("\\#("+_r+")")+"?$",xf="^"+r("("+ce+")@")+"?("+vr+")"+r("\\:("+gr+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",p,E,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",se,te),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",se,te),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",se,te),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",se,te),"g"),NOT_QUERY:new RegExp(e("[^\\%]",se,te,"[\\:\\@\\/\\?]",pe),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",se,te,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",se,te),"g"),UNRESERVED:new RegExp(se,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",se,fe),"g"),PCT_ENCODED:new RegExp(ne,"g"),IPV4ADDRESS:new RegExp("^("+Qe+")$"),IPV6ADDRESS:new RegExp("^\\[?("+dt+")"+r(r("\\%25|\\%(?!"+N+"{2})")+"("+Xt+")")+"?\\]?$")}}var u=n(!1),l=n(!0),f=function(){function h(p,v){var E=[],x=!0,N=!1,K=void 0;try{for(var re=p[Symbol.iterator](),ne;!(x=(ne=re.next()).done)&&(E.push(ne.value),!(v&&E.length===v));x=!0);}catch(be){N=!0,K=be}finally{try{!x&&re.return&&re.return()}finally{if(N)throw K}}return E}return function(p,v){if(Array.isArray(p))return p;if(Symbol.iterator in Object(p))return h(p,v);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=function(h){if(Array.isArray(h)){for(var p=0,v=Array(h.length);p<h.length;p++)v[p]=h[p];return v}else return Array.from(h)},_=2147483647,d=36,y=1,b=26,g=38,S=700,T=72,P=128,w="-",D=/^xn--/,O=/[^\0-\x7E]/,z=/[\x2E\u3002\uFF0E\uFF61]/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},$=d-y,M=Math.floor,F=String.fromCharCode;function q(h){throw new RangeError(L[h])}function I(h,p){for(var v=[],E=h.length;E--;)v[E]=p(h[E]);return v}function j(h,p){var v=h.split("@"),E="";v.length>1&&(E=v[0]+"@",h=v[1]),h=h.replace(z,".");var x=h.split("."),N=I(x,p).join(".");return E+N}function U(h){for(var p=[],v=0,E=h.length;v<E;){var x=h.charCodeAt(v++);if(x>=55296&&x<=56319&&v<E){var N=h.charCodeAt(v++);(N&64512)==56320?p.push(((x&1023)<<10)+(N&1023)+65536):(p.push(x),v--)}else p.push(x)}return p}var oe=function(p){return String.fromCodePoint.apply(String,m(p))},Y=function(p){return p-48<10?p-22:p-65<26?p-65:p-97<26?p-97:d},ee=function(p,v){return p+22+75*(p<26)-((v!=0)<<5)},W=function(p,v,E){var x=0;for(p=E?M(p/S):p>>1,p+=M(p/v);p>$*b>>1;x+=d)p=M(p/$);return M(x+($+1)*p/(p+g))},V=function(p){var v=[],E=p.length,x=0,N=P,K=T,re=p.lastIndexOf(w);re<0&&(re=0);for(var ne=0;ne<re;++ne)p.charCodeAt(ne)>=128&&q("not-basic"),v.push(p.charCodeAt(ne));for(var be=re>0?re+1:0;be<E;){for(var te=x,fe=1,Ee=d;;Ee+=d){be>=E&&q("invalid-input");var pe=Y(p.charCodeAt(be++));(pe>=d||pe>M((_-x)/fe))&&q("overflow"),x+=pe*fe;var se=Ee<=K?y:Ee>=K+b?b:Ee-K;if(pe<se)break;var he=d-se;fe>M(_/he)&&q("overflow"),fe*=he}var ce=v.length+1;K=W(x-te,ce,te==0),M(x/ce)>_-N&&q("overflow"),N+=M(x/ce),x%=ce,v.splice(x++,0,N)}return String.fromCodePoint.apply(String,v)},me=function(p){var v=[];p=U(p);var E=p.length,x=P,N=0,K=T,re=!0,ne=!1,be=void 0;try{for(var te=p[Symbol.iterator](),fe;!(re=(fe=te.next()).done);re=!0){var Ee=fe.value;Ee<128&&v.push(F(Ee))}}catch($t){ne=!0,be=$t}finally{try{!re&&te.return&&te.return()}finally{if(ne)throw be}}var pe=v.length,se=pe;for(pe&&v.push(w);se<E;){var he=_,ce=!0,Dt=!1,Fe=void 0;try{for(var Qe=p[Symbol.iterator](),le;!(ce=(le=Qe.next()).done);ce=!0){var Le=le.value;Le>=x&&Le<he&&(he=Le)}}catch($t){Dt=!0,Fe=$t}finally{try{!ce&&Qe.return&&Qe.return()}finally{if(Dt)throw Fe}}var ze=se+1;he-x>M((_-N)/ze)&&q("overflow"),N+=(he-x)*ze,x=he;var rt=!0,Ot=!1,ut=void 0;try{for(var mr=p[Symbol.iterator](),jr;!(rt=(jr=mr.next()).done);rt=!0){var kr=jr.value;if(kr<x&&++N>_&&q("overflow"),kr==x){for(var Wt=N,Yt=d;;Yt+=d){var dt=Yt<=K?y:Yt>=K+b?b:Yt-K;if(Wt<dt)break;var Xt=Wt-dt,xa=d-dt;v.push(F(ee(dt+Xt%xa,0))),Wt=M(Xt/xa)}v.push(F(ee(Wt,0))),K=W(N,ze,se==pe),N=0,++se}}}catch($t){Ot=!0,ut=$t}finally{try{!rt&&mr.return&&mr.return()}finally{if(Ot)throw ut}}++N,++x}return v.join("")},Te=function(p){return j(p,function(v){return D.test(v)?V(v.slice(4).toLowerCase()):v})},$e=function(p){return j(p,function(v){return O.test(v)?"xn--"+me(v):v})},ae={version:"2.1.0",ucs2:{decode:U,encode:oe},decode:V,encode:me,toASCII:$e,toUnicode:Te},ye={};function Re(h){var p=h.charCodeAt(0),v=void 0;return p<16?v="%0"+p.toString(16).toUpperCase():p<128?v="%"+p.toString(16).toUpperCase():p<2048?v="%"+(p>>6|192).toString(16).toUpperCase()+"%"+(p&63|128).toString(16).toUpperCase():v="%"+(p>>12|224).toString(16).toUpperCase()+"%"+(p>>6&63|128).toString(16).toUpperCase()+"%"+(p&63|128).toString(16).toUpperCase(),v}function je(h){for(var p="",v=0,E=h.length;v<E;){var x=parseInt(h.substr(v+1,2),16);if(x<128)p+=String.fromCharCode(x),v+=3;else if(x>=194&&x<224){if(E-v>=6){var N=parseInt(h.substr(v+4,2),16);p+=String.fromCharCode((x&31)<<6|N&63)}else p+=h.substr(v,6);v+=6}else if(x>=224){if(E-v>=9){var K=parseInt(h.substr(v+4,2),16),re=parseInt(h.substr(v+7,2),16);p+=String.fromCharCode((x&15)<<12|(K&63)<<6|re&63)}else p+=h.substr(v,9);v+=9}else p+=h.substr(v,3),v+=3}return p}function gt(h,p){function v(E){var x=je(E);return x.match(p.UNRESERVED)?x:E}return h.scheme&&(h.scheme=String(h.scheme).replace(p.PCT_ENCODED,v).toLowerCase().replace(p.NOT_SCHEME,"")),h.userinfo!==void 0&&(h.userinfo=String(h.userinfo).replace(p.PCT_ENCODED,v).replace(p.NOT_USERINFO,Re).replace(p.PCT_ENCODED,t)),h.host!==void 0&&(h.host=String(h.host).replace(p.PCT_ENCODED,v).toLowerCase().replace(p.NOT_HOST,Re).replace(p.PCT_ENCODED,t)),h.path!==void 0&&(h.path=String(h.path).replace(p.PCT_ENCODED,v).replace(h.scheme?p.NOT_PATH:p.NOT_PATH_NOSCHEME,Re).replace(p.PCT_ENCODED,t)),h.query!==void 0&&(h.query=String(h.query).replace(p.PCT_ENCODED,v).replace(p.NOT_QUERY,Re).replace(p.PCT_ENCODED,t)),h.fragment!==void 0&&(h.fragment=String(h.fragment).replace(p.PCT_ENCODED,v).replace(p.NOT_FRAGMENT,Re).replace(p.PCT_ENCODED,t)),h}function ct(h){return h.replace(/^0*(.*)/,"$1")||"0"}function _e(h,p){var v=h.match(p.IPV4ADDRESS)||[],E=f(v,2),x=E[1];return x?x.split(".").map(ct).join("."):h}function ve(h,p){var v=h.match(p.IPV6ADDRESS)||[],E=f(v,3),x=E[1],N=E[2];if(x){for(var K=x.toLowerCase().split("::").reverse(),re=f(K,2),ne=re[0],be=re[1],te=be?be.split(":").map(ct):[],fe=ne.split(":").map(ct),Ee=p.IPV4ADDRESS.test(fe[fe.length-1]),pe=Ee?7:8,se=fe.length-pe,he=Array(pe),ce=0;ce<pe;++ce)he[ce]=te[ce]||fe[se+ce]||"";Ee&&(he[pe-1]=_e(he[pe-1],p));var Dt=he.reduce(function(ze,rt,Ot){if(!rt||rt==="0"){var ut=ze[ze.length-1];ut&&ut.index+ut.length===Ot?ut.length++:ze.push({index:Ot,length:1})}return ze},[]),Fe=Dt.sort(function(ze,rt){return rt.length-ze.length})[0],Qe=void 0;if(Fe&&Fe.length>1){var le=he.slice(0,Fe.index),Le=he.slice(Fe.index+Fe.length);Qe=le.join(":")+"::"+Le.join(":")}else Qe=he.join(":");return N&&(Qe+="%"+N),Qe}else return h}var wt=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,De="".match(/(){0}/)[1]===void 0;function ie(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v={},E=p.iri!==!1?l:u;p.reference==="suffix"&&(h=(p.scheme?p.scheme+":":"")+"//"+h);var x=h.match(wt);if(x){De?(v.scheme=x[1],v.userinfo=x[3],v.host=x[4],v.port=parseInt(x[5],10),v.path=x[6]||"",v.query=x[7],v.fragment=x[8],isNaN(v.port)&&(v.port=x[5])):(v.scheme=x[1]||void 0,v.userinfo=h.indexOf("@")!==-1?x[3]:void 0,v.host=h.indexOf("//")!==-1?x[4]:void 0,v.port=parseInt(x[5],10),v.path=x[6]||"",v.query=h.indexOf("?")!==-1?x[7]:void 0,v.fragment=h.indexOf("#")!==-1?x[8]:void 0,isNaN(v.port)&&(v.port=h.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?x[4]:void 0)),v.host&&(v.host=ve(_e(v.host,E),E)),v.scheme===void 0&&v.userinfo===void 0&&v.host===void 0&&v.port===void 0&&!v.path&&v.query===void 0?v.reference="same-document":v.scheme===void 0?v.reference="relative":v.fragment===void 0?v.reference="absolute":v.reference="uri",p.reference&&p.reference!=="suffix"&&p.reference!==v.reference&&(v.error=v.error||"URI is not a "+p.reference+" reference.");var N=ye[(p.scheme||v.scheme||"").toLowerCase()];if(!p.unicodeSupport&&(!N||!N.unicodeSupport)){if(v.host&&(p.domainHost||N&&N.domainHost))try{v.host=ae.toASCII(v.host.replace(E.PCT_ENCODED,je).toLowerCase())}catch(K){v.error=v.error||"Host's domain name can not be converted to ASCII via punycode: "+K}gt(v,u)}else gt(v,E);N&&N.parse&&N.parse(v,p)}else v.error=v.error||"URI can not be parsed.";return v}function yt(h,p){var v=p.iri!==!1?l:u,E=[];return h.userinfo!==void 0&&(E.push(h.userinfo),E.push("@")),h.host!==void 0&&E.push(ve(_e(String(h.host),v),v).replace(v.IPV6ADDRESS,function(x,N,K){return"["+N+(K?"%25"+K:"")+"]"})),(typeof h.port=="number"||typeof h.port=="string")&&(E.push(":"),E.push(String(h.port))),E.length?E.join(""):void 0}var lt=/^\.\.?\//,It=/^\/\.(\/|$)/,Tt=/^\/\.\.(\/|$)/,we=/^\/?(?:.|\n)*?(?=\/|$)/;function Me(h){for(var p=[];h.length;)if(h.match(lt))h=h.replace(lt,"");else if(h.match(It))h=h.replace(It,"/");else if(h.match(Tt))h=h.replace(Tt,"/"),p.pop();else if(h==="."||h==="..")h="";else{var v=h.match(we);if(v){var E=v[0];h=h.slice(E.length),p.push(E)}else throw new Error("Unexpected dot segment condition")}return p.join("")}function Ae(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=p.iri?l:u,E=[],x=ye[(p.scheme||h.scheme||"").toLowerCase()];if(x&&x.serialize&&x.serialize(h,p),h.host&&!v.IPV6ADDRESS.test(h.host)){if(p.domainHost||x&&x.domainHost)try{h.host=p.iri?ae.toUnicode(h.host):ae.toASCII(h.host.replace(v.PCT_ENCODED,je).toLowerCase())}catch(re){h.error=h.error||"Host's domain name can not be converted to "+(p.iri?"Unicode":"ASCII")+" via punycode: "+re}}gt(h,v),p.reference!=="suffix"&&h.scheme&&(E.push(h.scheme),E.push(":"));var N=yt(h,p);if(N!==void 0&&(p.reference!=="suffix"&&E.push("//"),E.push(N),h.path&&h.path.charAt(0)!=="/"&&E.push("/")),h.path!==void 0){var K=h.path;!p.absolutePath&&(!x||!x.absolutePath)&&(K=Me(K)),N===void 0&&(K=K.replace(/^\/\//,"/%2F")),E.push(K)}return h.query!==void 0&&(E.push("?"),E.push(h.query)),h.fragment!==void 0&&(E.push("#"),E.push(h.fragment)),E.join("")}function ke(h,p){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},E=arguments[3],x={};return E||(h=ie(Ae(h,v),v),p=ie(Ae(p,v),v)),v=v||{},!v.tolerant&&p.scheme?(x.scheme=p.scheme,x.userinfo=p.userinfo,x.host=p.host,x.port=p.port,x.path=Me(p.path||""),x.query=p.query):(p.userinfo!==void 0||p.host!==void 0||p.port!==void 0?(x.userinfo=p.userinfo,x.host=p.host,x.port=p.port,x.path=Me(p.path||""),x.query=p.query):(p.path?(p.path.charAt(0)==="/"?x.path=Me(p.path):((h.userinfo!==void 0||h.host!==void 0||h.port!==void 0)&&!h.path?x.path="/"+p.path:h.path?x.path=h.path.slice(0,h.path.lastIndexOf("/")+1)+p.path:x.path=p.path,x.path=Me(x.path)),x.query=p.query):(x.path=h.path,p.query!==void 0?x.query=p.query:x.query=h.query),x.userinfo=h.userinfo,x.host=h.host,x.port=h.port),x.scheme=h.scheme),x.fragment=p.fragment,x}function et(h,p,v){var E=o({scheme:"null"},v);return Ae(ke(ie(h,E),ie(p,E),E,!0),E)}function Ue(h,p){return typeof h=="string"?h=Ae(ie(h,p),p):s(h)==="object"&&(h=ie(Ae(h,p),p)),h}function $r(h,p,v){return typeof h=="string"?h=Ae(ie(h,v),v):s(h)==="object"&&(h=Ae(h,v)),typeof p=="string"?p=Ae(ie(p,v),v):s(p)==="object"&&(p=Ae(p,v)),h===p}function ba(h,p){return h&&h.toString().replace(!p||!p.iri?u.ESCAPE:l.ESCAPE,Re)}function Ge(h,p){return h&&h.toString().replace(!p||!p.iri?u.PCT_ENCODED:l.PCT_ENCODED,je)}var fr={scheme:"http",domainHost:!0,parse:function(p,v){return p.host||(p.error=p.error||"HTTP URIs must have a host."),p},serialize:function(p,v){var E=String(p.scheme).toLowerCase()==="https";return(p.port===(E?443:80)||p.port==="")&&(p.port=void 0),p.path||(p.path="/"),p}},$s={scheme:"https",domainHost:fr.domainHost,parse:fr.parse,serialize:fr.serialize};function js(h){return typeof h.secure=="boolean"?h.secure:String(h.scheme).toLowerCase()==="wss"}var hr={scheme:"ws",domainHost:!0,parse:function(p,v){var E=p;return E.secure=js(E),E.resourceName=(E.path||"/")+(E.query?"?"+E.query:""),E.path=void 0,E.query=void 0,E},serialize:function(p,v){if((p.port===(js(p)?443:80)||p.port==="")&&(p.port=void 0),typeof p.secure=="boolean"&&(p.scheme=p.secure?"wss":"ws",p.secure=void 0),p.resourceName){var E=p.resourceName.split("?"),x=f(E,2),N=x[0],K=x[1];p.path=N&&N!=="/"?N:void 0,p.query=K,p.resourceName=void 0}return p.fragment=void 0,p}},ks={scheme:"wss",domainHost:hr.domainHost,parse:hr.parse,serialize:hr.serialize},Kc={},Gc=!0,As="[A-Za-z0-9\\-\\.\\_\\~"+(Gc?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",tt="[0-9A-Fa-f]",Wc=r(r("%[EFef]"+tt+"%"+tt+tt+"%"+tt+tt)+"|"+r("%[89A-Fa-f]"+tt+"%"+tt+tt)+"|"+r("%"+tt+tt)),Yc="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Xc="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",el=e(Xc,'[\\"\\\\]'),tl="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",rl=new RegExp(As,"g"),Gt=new RegExp(Wc,"g"),al=new RegExp(e("[^]",Yc,"[\\.]",'[\\"]',el),"g"),Cs=new RegExp(e("[^]",As,tl),"g"),sl=Cs;function Ea(h){var p=je(h);return p.match(rl)?p:h}var Ns={scheme:"mailto",parse:function(p,v){var E=p,x=E.to=E.path?E.path.split(","):[];if(E.path=void 0,E.query){for(var N=!1,K={},re=E.query.split("&"),ne=0,be=re.length;ne<be;++ne){var te=re[ne].split("=");switch(te[0]){case"to":for(var fe=te[1].split(","),Ee=0,pe=fe.length;Ee<pe;++Ee)x.push(fe[Ee]);break;case"subject":E.subject=Ge(te[1],v);break;case"body":E.body=Ge(te[1],v);break;default:N=!0,K[Ge(te[0],v)]=Ge(te[1],v);break}}N&&(E.headers=K)}E.query=void 0;for(var se=0,he=x.length;se<he;++se){var ce=x[se].split("@");if(ce[0]=Ge(ce[0]),v.unicodeSupport)ce[1]=Ge(ce[1],v).toLowerCase();else try{ce[1]=ae.toASCII(Ge(ce[1],v).toLowerCase())}catch(Dt){E.error=E.error||"Email address's domain name can not be converted to ASCII via punycode: "+Dt}x[se]=ce.join("@")}return E},serialize:function(p,v){var E=p,x=i(p.to);if(x){for(var N=0,K=x.length;N<K;++N){var re=String(x[N]),ne=re.lastIndexOf("@"),be=re.slice(0,ne).replace(Gt,Ea).replace(Gt,t).replace(al,Re),te=re.slice(ne+1);try{te=v.iri?ae.toUnicode(te):ae.toASCII(Ge(te,v).toLowerCase())}catch(se){E.error=E.error||"Email address's domain name can not be converted to "+(v.iri?"Unicode":"ASCII")+" via punycode: "+se}x[N]=be+"@"+te}E.path=x.join(",")}var fe=p.headers=p.headers||{};p.subject&&(fe.subject=p.subject),p.body&&(fe.body=p.body);var Ee=[];for(var pe in fe)fe[pe]!==Kc[pe]&&Ee.push(pe.replace(Gt,Ea).replace(Gt,t).replace(Cs,Re)+"="+fe[pe].replace(Gt,Ea).replace(Gt,t).replace(sl,Re));return Ee.length&&(E.query=Ee.join("&")),E}},il=/^([^\:]+)\:(.*)/,qs={scheme:"urn",parse:function(p,v){var E=p.path&&p.path.match(il),x=p;if(E){var N=v.scheme||x.scheme||"urn",K=E[1].toLowerCase(),re=E[2],ne=N+":"+(v.nid||K),be=ye[ne];x.nid=K,x.nss=re,x.path=void 0,be&&(x=be.parse(x,v))}else x.error=x.error||"URN can not be parsed.";return x},serialize:function(p,v){var E=v.scheme||p.scheme||"urn",x=p.nid,N=E+":"+(v.nid||x),K=ye[N];K&&(p=K.serialize(p,v));var re=p,ne=p.nss;return re.path=(x||v.nid)+":"+ne,re}},nl=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Us={scheme:"urn:uuid",parse:function(p,v){var E=p;return E.uuid=E.nss,E.nss=void 0,!v.tolerant&&(!E.uuid||!E.uuid.match(nl))&&(E.error=E.error||"UUID is not valid."),E},serialize:function(p,v){var E=p;return E.nss=(p.uuid||"").toLowerCase(),E}};ye[fr.scheme]=fr,ye[$s.scheme]=$s,ye[hr.scheme]=hr,ye[ks.scheme]=ks,ye[Ns.scheme]=Ns,ye[qs.scheme]=qs,ye[Us.scheme]=Us,a.SCHEMES=ye,a.pctEncChar=Re,a.pctDecChars=je,a.parse=ie,a.removeDotSegments=Me,a.serialize=Ae,a.resolveComponents=ke,a.resolve=et,a.normalize=Ue,a.equal=$r,a.escapeComponent=ba,a.unescapeComponent=Ge,Object.defineProperty(a,"__esModule",{value:!0})})});var Gr=B((oh,xi)=>{"use strict";xi.exports=function a(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var s,t,i;if(Array.isArray(e)){if(s=e.length,s!=r.length)return!1;for(t=s;t--!==0;)if(!a(e[t],r[t]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),s=i.length,s!==Object.keys(r).length)return!1;for(t=s;t--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[t]))return!1;for(t=s;t--!==0;){var o=i[t];if(!a(e[o],r[o]))return!1}return!0}return e!==e&&r!==r}});var Pi=B((ch,Si)=>{"use strict";Si.exports=function(e){for(var r=0,s=e.length,t=0,i;t<s;)r++,i=e.charCodeAt(t++),i>=55296&&i<=56319&&t<s&&(i=e.charCodeAt(t),(i&64512)==56320&&t++);return r}});var Zt=B((lh,Ii)=>{"use strict";Ii.exports={copy:Td,checkDataType:Ma,checkDataTypes:Dd,coerceToTypes:Od,toHash:za,getProperty:Va,escapeQuotes:Ha,equal:Gr(),ucs2length:Pi(),varOccurences:kd,varReplace:Ad,schemaHasRules:Cd,schemaHasRulesExcept:Nd,schemaUnknownRules:qd,toQuotedString:Qa,getPathExpr:Ud,getPath:Fd,getData:Qd,unescapeFragment:zd,unescapeJsonPointer:Ba,escapeFragment:Vd,escapeJsonPointer:Ja};function Td(a,e){e=e||{};for(var r in a)e[r]=a[r];return e}function Ma(a,e,r,s){var t=s?" !== ":" === ",i=s?" || ":" && ",o=s?"!":"",n=s?"":"!";switch(a){case"null":return e+t+"null";case"array":return o+"Array.isArray("+e+")";case"object":return"("+o+e+i+"typeof "+e+t+'"object"'+i+n+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+t+'"number"'+i+n+"("+e+" % 1)"+i+e+t+e+(r?i+o+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+t+'"'+a+'"'+(r?i+o+"isFinite("+e+")":"")+")";default:return"typeof "+e+t+'"'+a+'"'}}function Dd(a,e,r){switch(a.length){case 1:return Ma(a[0],e,r,!0);default:var s="",t=za(a);t.array&&t.object&&(s=t.null?"(":"(!"+e+" || ",s+="typeof "+e+' !== "object")',delete t.null,delete t.array,delete t.object),t.number&&delete t.integer;for(var i in t)s+=(s?" && ":"")+Ma(i,e,r,!0);return s}}var Ri=za(["string","number","integer","boolean","null"]);function Od(a,e){if(Array.isArray(e)){for(var r=[],s=0;s<e.length;s++){var t=e[s];(Ri[t]||a==="array"&&t==="array")&&(r[r.length]=t)}if(r.length)return r}else{if(Ri[e])return[e];if(a==="array"&&e==="array")return["array"]}}function za(a){for(var e={},r=0;r<a.length;r++)e[a[r]]=!0;return e}var $d=/^[a-z$_][a-z$_0-9]*$/i,jd=/'|\\/g;function Va(a){return typeof a=="number"?"["+a+"]":$d.test(a)?"."+a:"['"+Ha(a)+"']"}function Ha(a){return a.replace(jd,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function kd(a,e){e+="[^0-9]";var r=a.match(new RegExp(e,"g"));return r?r.length:0}function Ad(a,e,r){return e+="([^0-9])",r=r.replace(/\$/g,"$$$$"),a.replace(new RegExp(e,"g"),r+"$1")}function Cd(a,e){if(typeof a=="boolean")return!a;for(var r in a)if(e[r])return!0}function Nd(a,e,r){if(typeof a=="boolean")return!a&&r!="not";for(var s in a)if(s!=r&&e[s])return!0}function qd(a,e){if(typeof a!="boolean"){for(var r in a)if(!e[r])return r}}function Qa(a){return"'"+Ha(a)+"'"}function Ud(a,e,r,s){var t=r?"'/' + "+e+(s?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):s?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return wi(a,t)}function Fd(a,e,r){var s=Qa(r?"/"+Ja(e):Va(e));return wi(a,s)}var Ld=/^\/(?:[^~]|~0|~1)*$/,Md=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Qd(a,e,r){var s,t,i,o;if(a==="")return"rootData";if(a[0]=="/"){if(!Ld.test(a))throw new Error("Invalid JSON-pointer: "+a);t=a,i="rootData"}else{if(o=a.match(Md),!o)throw new Error("Invalid JSON-pointer: "+a);if(s=+o[1],t=o[2],t=="#"){if(s>=e)throw new Error("Cannot access property/index "+s+" levels up, current level is "+e);return r[e-s]}if(s>e)throw new Error("Cannot access data "+s+" levels up, current level is "+e);if(i="data"+(e-s||""),!t)return i}for(var n=i,u=t.split("/"),l=0;l<u.length;l++){var f=u[l];f&&(i+=Va(Ba(f)),n+=" && "+i)}return n}function wi(a,e){return a=='""'?e:(a+" + "+e).replace(/([^\\])' \+ '/g,"$1")}function zd(a){return Ba(decodeURIComponent(a))}function Vd(a){return encodeURIComponent(Ja(a))}function Ja(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}function Ba(a){return a.replace(/~1/g,"/").replace(/~0/g,"~")}});var Za=B((uh,Ti)=>{"use strict";var Hd=Zt();Ti.exports=Jd;function Jd(a){Hd.copy(a,this)}});var Oi=B((dh,Di)=>{"use strict";var St=Di.exports=function(a,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var s=typeof r=="function"?r:r.pre||function(){},t=r.post||function(){};Wr(e,s,t,a,"",a)};St.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};St.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};St.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};St.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Wr(a,e,r,s,t,i,o,n,u,l){if(s&&typeof s=="object"&&!Array.isArray(s)){e(s,t,i,o,n,u,l);for(var f in s){var m=s[f];if(Array.isArray(m)){if(f in St.arrayKeywords)for(var _=0;_<m.length;_++)Wr(a,e,r,m[_],t+"/"+f+"/"+_,i,t,f,s,_)}else if(f in St.propsKeywords){if(m&&typeof m=="object")for(var d in m)Wr(a,e,r,m[d],t+"/"+f+"/"+Bd(d),i,t,f,s,d)}else(f in St.keywords||a.allKeys&&!(f in St.skipKeywords))&&Wr(a,e,r,m,t+"/"+f,i,t,f,s)}r(s,t,i,o,n,u,l)}}function Bd(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}});var aa=B((ph,Ai)=>{"use strict";var Rr=Ei(),$i=Gr(),ta=Zt(),Yr=Za(),Zd=Oi();Ai.exports=Rt;Rt.normalizeId=Pt;Rt.fullPath=Xr;Rt.url=ea;Rt.ids=Xd;Rt.inlineRef=Ka;Rt.schema=ra;function Rt(a,e,r){var s=this._refs[r];if(typeof s=="string")if(this._refs[s])s=this._refs[s];else return Rt.call(this,a,e,s);if(s=s||this._schemas[r],s instanceof Yr)return Ka(s.schema,this._opts.inlineRefs)?s.schema:s.validate||this._compile(s);var t=ra.call(this,e,r),i,o,n;return t&&(i=t.schema,e=t.root,n=t.baseId),i instanceof Yr?o=i.validate||a.call(this,i.schema,e,void 0,n):i!==void 0&&(o=Ka(i,this._opts.inlineRefs)?i:a.call(this,i,e,void 0,n)),o}function ra(a,e){var r=Rr.parse(e),s=ki(r),t=Xr(this._getId(a.schema));if(Object.keys(a.schema).length===0||s!==t){var i=Pt(s),o=this._refs[i];if(typeof o=="string")return Kd.call(this,a,o,r);if(o instanceof Yr)o.validate||this._compile(o),a=o;else if(o=this._schemas[i],o instanceof Yr){if(o.validate||this._compile(o),i==Pt(e))return{schema:o,root:a,baseId:t};a=o}else return;if(!a.schema)return;t=Xr(this._getId(a.schema))}return ji.call(this,r,t,a.schema,a)}function Kd(a,e,r){var s=ra.call(this,a,e);if(s){var t=s.schema,i=s.baseId;a=s.root;var o=this._getId(t);return o&&(i=ea(i,o)),ji.call(this,r,i,t,a)}}var Gd=ta.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function ji(a,e,r,s){if(a.fragment=a.fragment||"",a.fragment.slice(0,1)=="/"){for(var t=a.fragment.split("/"),i=1;i<t.length;i++){var o=t[i];if(o){if(o=ta.unescapeFragment(o),r=r[o],r===void 0)break;var n;if(!Gd[o]&&(n=this._getId(r),n&&(e=ea(e,n)),r.$ref)){var u=ea(e,r.$ref),l=ra.call(this,s,u);l&&(r=l.schema,s=l.root,e=l.baseId)}}}if(r!==void 0&&r!==s.schema)return{schema:r,root:s,baseId:e}}}var Wd=ta.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function Ka(a,e){if(e===!1)return!1;if(e===void 0||e===!0)return Ga(a);if(e)return Wa(a)<=e}function Ga(a){var e;if(Array.isArray(a)){for(var r=0;r<a.length;r++)if(e=a[r],typeof e=="object"&&!Ga(e))return!1}else for(var s in a)if(s=="$ref"||(e=a[s],typeof e=="object"&&!Ga(e)))return!1;return!0}function Wa(a){var e=0,r;if(Array.isArray(a)){for(var s=0;s<a.length;s++)if(r=a[s],typeof r=="object"&&(e+=Wa(r)),e==1/0)return 1/0}else for(var t in a){if(t=="$ref")return 1/0;if(Wd[t])e++;else if(r=a[t],typeof r=="object"&&(e+=Wa(r)+1),e==1/0)return 1/0}return e}function Xr(a,e){e!==!1&&(a=Pt(a));var r=Rr.parse(a);return ki(r)}function ki(a){return Rr.serialize(a).split("#")[0]+"#"}var Yd=/#\/?$/;function Pt(a){return a?a.replace(Yd,""):""}function ea(a,e){return e=Pt(e),Rr.resolve(a,e)}function Xd(a){var e=Pt(this._getId(a)),r={"":e},s={"":Xr(e,!1)},t={},i=this;return Zd(a,{allKeys:!0},function(o,n,u,l,f,m,_){if(n!==""){var d=i._getId(o),y=r[l],b=s[l]+"/"+f;if(_!==void 0&&(b+="/"+(typeof _=="number"?_:ta.escapeFragment(_))),typeof d=="string"){d=y=Pt(y?Rr.resolve(y,d):d);var g=i._refs[d];if(typeof g=="string"&&(g=i._refs[g]),g&&g.schema){if(!$i(o,g.schema))throw new Error('id "'+d+'" resolves to more than one schema')}else if(d!=Pt(b))if(d[0]=="#"){if(t[d]&&!$i(o,t[d]))throw new Error('id "'+d+'" resolves to more than one schema');t[d]=o}else i._refs[d]=b}r[n]=y,s[n]=b}}),t}});var sa=B((fh,Ni)=>{"use strict";var Ya=aa();Ni.exports={Validation:Ci(ep),MissingRef:Ci(Xa)};function ep(a){this.message="validation failed",this.errors=a,this.ajv=this.validation=!0}Xa.message=function(a,e){return"can't resolve reference "+e+" from id "+a};function Xa(a,e,r){this.message=r||Xa.message(a,e),this.missingRef=Ya.url(a,e),this.missingSchema=Ya.normalizeId(Ya.fullPath(this.missingRef))}function Ci(a){return a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a}});var es=B((hh,qi)=>{"use strict";qi.exports=function(a,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=typeof e.cycles=="boolean"?e.cycles:!1,s=e.cmp&&function(i){return function(o){return function(n,u){var l={key:n,value:o[n]},f={key:u,value:o[u]};return i(l,f)}}}(e.cmp),t=[];return function i(o){if(o&&o.toJSON&&typeof o.toJSON=="function"&&(o=o.toJSON()),o!==void 0){if(typeof o=="number")return isFinite(o)?""+o:"null";if(typeof o!="object")return JSON.stringify(o);var n,u;if(Array.isArray(o)){for(u="[",n=0;n<o.length;n++)n&&(u+=","),u+=i(o[n])||"null";return u+"]"}if(o===null)return"null";if(t.indexOf(o)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var l=t.push(o)-1,f=Object.keys(o).sort(s&&s(o));for(u="",n=0;n<f.length;n++){var m=f[n],_=i(o[m]);_&&(u&&(u+=","),u+=JSON.stringify(m)+":"+_)}return t.splice(l,1),"{"+u+"}"}}(a)}});var ts=B((mh,Ui)=>{"use strict";Ui.exports=function(e,r,s){var t="",i=e.schema.$async===!0,o=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),n=e.self._getId(e.schema);if(e.opts.strictKeywords){var u=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(u){var l="unknown keyword: "+u;if(e.opts.strictKeywords==="log")e.logger.warn(l);else throw new Error(l)}}if(e.isTop&&(t+=" var validate = ",i&&(e.async=!0,t+="async "),t+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",n&&(e.opts.sourceCode||e.opts.processCode)&&(t+=" "+("/*# sourceURL="+n+" */")+" ")),typeof e.schema=="boolean"||!(o||e.schema.$ref)){var r="false schema",f=e.level,m=e.dataLevel,_=e.schema[r],d=e.schemaPath+e.util.getProperty(r),y=e.errSchemaPath+"/"+r,D=!e.opts.allErrors,L,b="data"+(m||""),w="valid"+f;if(e.schema===!1){e.isTop?D=!0:t+=" var "+w+" = false; ";var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(L||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'boolean schema is false' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+b+" "),t+=" } "):t+=" {} ";var S=t;t=g.pop(),!e.compositeRule&&D?e.async?t+=" throw new ValidationError(["+S+"]); ":t+=" validate.errors = ["+S+"]; return false; ":t+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?i?t+=" return data; ":t+=" validate.errors = null; return true; ":t+=" var "+w+" = true; ";return e.isTop&&(t+=" }; return validate; "),t}if(e.isTop){var T=e.isTop,f=e.level=0,m=e.dataLevel=0,b="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var P="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(P);else throw new Error(P)}t+=" var vErrors = null; ",t+=" var errors = 0;     ",t+=" if (rootData === undefined) rootData = data; "}else{var f=e.level,m=e.dataLevel,b="data"+(m||"");if(n&&(e.baseId=e.resolve.url(e.baseId,n)),i&&!e.async)throw new Error("async schema in sync schema");t+=" var errs_"+f+" = errors;"}var w="valid"+f,D=!e.opts.allErrors,O="",z="",L,$=e.schema.type,M=Array.isArray($);if($&&e.opts.nullable&&e.schema.nullable===!0&&(M?$.indexOf("null")==-1&&($=$.concat("null")):$!="null"&&($=[$,"null"],M=!0)),M&&$.length==1&&($=$[0],M=!1),e.schema.$ref&&o){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(o=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(t+=" "+e.RULES.all.$comment.code(e,"$comment")),$){if(e.opts.coerceTypes)var F=e.util.coerceToTypes(e.opts.coerceTypes,$);var q=e.RULES.types[$];if(F||M||q===!0||q&&!we(q)){var d=e.schemaPath+".type",y=e.errSchemaPath+"/type",d=e.schemaPath+".type",y=e.errSchemaPath+"/type",I=M?"checkDataTypes":"checkDataType";if(t+=" if ("+e.util[I]($,b,e.opts.strictNumbers,!0)+") { ",F){var j="dataType"+f,U="coerced"+f;t+=" var "+j+" = typeof "+b+"; var "+U+" = undefined; ",e.opts.coerceTypes=="array"&&(t+=" if ("+j+" == 'object' && Array.isArray("+b+") && "+b+".length == 1) { "+b+" = "+b+"[0]; "+j+" = typeof "+b+"; if ("+e.util.checkDataType(e.schema.type,b,e.opts.strictNumbers)+") "+U+" = "+b+"; } "),t+=" if ("+U+" !== undefined) ; ";var oe=F;if(oe)for(var Y,ee=-1,W=oe.length-1;ee<W;)Y=oe[ee+=1],Y=="string"?t+=" else if ("+j+" == 'number' || "+j+" == 'boolean') "+U+" = '' + "+b+"; else if ("+b+" === null) "+U+" = ''; ":Y=="number"||Y=="integer"?(t+=" else if ("+j+" == 'boolean' || "+b+" === null || ("+j+" == 'string' && "+b+" && "+b+" == +"+b+" ",Y=="integer"&&(t+=" && !("+b+" % 1)"),t+=")) "+U+" = +"+b+"; "):Y=="boolean"?t+=" else if ("+b+" === 'false' || "+b+" === 0 || "+b+" === null) "+U+" = false; else if ("+b+" === 'true' || "+b+" === 1) "+U+" = true; ":Y=="null"?t+=" else if ("+b+" === '' || "+b+" === 0 || "+b+" === false) "+U+" = null; ":e.opts.coerceTypes=="array"&&Y=="array"&&(t+=" else if ("+j+" == 'string' || "+j+" == 'number' || "+j+" == 'boolean' || "+b+" == null) "+U+" = ["+b+"]; ");t+=" else {   ";var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(L||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",M?t+=""+$.join(","):t+=""+$,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",M?t+=""+$.join(","):t+=""+$,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+b+" "),t+=" } "):t+=" {} ";var S=t;t=g.pop(),!e.compositeRule&&D?e.async?t+=" throw new ValidationError(["+S+"]); ":t+=" validate.errors = ["+S+"]; return false; ":t+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } if ("+U+" !== undefined) {  ";var V=m?"data"+(m-1||""):"parentData",me=m?e.dataPathArr[m]:"parentDataProperty";t+=" "+b+" = "+U+"; ",m||(t+="if ("+V+" !== undefined)"),t+=" "+V+"["+me+"] = "+U+"; } "}else{var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(L||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",M?t+=""+$.join(","):t+=""+$,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",M?t+=""+$.join(","):t+=""+$,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+b+" "),t+=" } "):t+=" {} ";var S=t;t=g.pop(),!e.compositeRule&&D?e.async?t+=" throw new ValidationError(["+S+"]); ":t+=" validate.errors = ["+S+"]; return false; ":t+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}t+=" } "}}if(e.schema.$ref&&!o)t+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",D&&(t+=" } if (errors === ",T?t+="0":t+="errs_"+f,t+=") { ",z+="}");else{var Te=e.RULES;if(Te){for(var q,$e=-1,ae=Te.length-1;$e<ae;)if(q=Te[$e+=1],we(q)){if(q.type&&(t+=" if ("+e.util.checkDataType(q.type,b,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(q.type=="object"&&e.schema.properties){var _=e.schema.properties,ye=Object.keys(_),Re=ye;if(Re)for(var je,gt=-1,ct=Re.length-1;gt<ct;){je=Re[gt+=1];var _e=_[je];if(_e.default!==void 0){var ve=b+e.util.getProperty(je);if(e.compositeRule){if(e.opts.strictDefaults){var P="default is ignored for: "+ve;if(e.opts.strictDefaults==="log")e.logger.warn(P);else throw new Error(P)}}else t+=" if ("+ve+" === undefined ",e.opts.useDefaults=="empty"&&(t+=" || "+ve+" === null || "+ve+" === '' "),t+=" ) "+ve+" = ",e.opts.useDefaults=="shared"?t+=" "+e.useDefault(_e.default)+" ":t+=" "+JSON.stringify(_e.default)+" ",t+="; "}}}else if(q.type=="array"&&Array.isArray(e.schema.items)){var wt=e.schema.items;if(wt){for(var _e,ee=-1,De=wt.length-1;ee<De;)if(_e=wt[ee+=1],_e.default!==void 0){var ve=b+"["+ee+"]";if(e.compositeRule){if(e.opts.strictDefaults){var P="default is ignored for: "+ve;if(e.opts.strictDefaults==="log")e.logger.warn(P);else throw new Error(P)}}else t+=" if ("+ve+" === undefined ",e.opts.useDefaults=="empty"&&(t+=" || "+ve+" === null || "+ve+" === '' "),t+=" ) "+ve+" = ",e.opts.useDefaults=="shared"?t+=" "+e.useDefault(_e.default)+" ":t+=" "+JSON.stringify(_e.default)+" ",t+="; "}}}}var ie=q.rules;if(ie){for(var yt,lt=-1,It=ie.length-1;lt<It;)if(yt=ie[lt+=1],Me(yt)){var Tt=yt.code(e,yt.keyword,q.type);Tt&&(t+=" "+Tt+" ",D&&(O+="}"))}}if(D&&(t+=" "+O+" ",O=""),q.type&&(t+=" } ",$&&$===q.type&&!F)){t+=" else { ";var d=e.schemaPath+".type",y=e.errSchemaPath+"/type",g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(L||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",M?t+=""+$.join(","):t+=""+$,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",M?t+=""+$.join(","):t+=""+$,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+b+" "),t+=" } "):t+=" {} ";var S=t;t=g.pop(),!e.compositeRule&&D?e.async?t+=" throw new ValidationError(["+S+"]); ":t+=" validate.errors = ["+S+"]; return false; ":t+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } "}D&&(t+=" if (errors === ",T?t+="0":t+="errs_"+f,t+=") { ",z+="}")}}}D&&(t+=" "+z+" "),T?(i?(t+=" if (errors === 0) return data;           ",t+=" else throw new ValidationError(vErrors); "):(t+=" validate.errors = vErrors; ",t+=" return errors === 0;       "),t+=" }; return validate;"):t+=" var "+w+" = errors === errs_"+f+";";function we(ke){for(var et=ke.rules,Ue=0;Ue<et.length;Ue++)if(Me(et[Ue]))return!0}function Me(ke){return e.schema[ke.keyword]!==void 0||ke.implements&&Ae(ke)}function Ae(ke){for(var et=ke.implements,Ue=0;Ue<et.length;Ue++)if(e.schema[et[Ue]]!==void 0)return!0}return t}});var zi=B((vh,Qi)=>{"use strict";var ia=aa(),oa=Zt(),Li=sa(),tp=es(),Fi=ts(),rp=oa.ucs2length,ap=Gr(),sp=Li.Validation;Qi.exports=rs;function rs(a,e,r,s){var t=this,i=this._opts,o=[void 0],n={},u=[],l={},f=[],m={},_=[];e=e||{schema:a,refVal:o,refs:n};var d=ip.call(this,a,e,s),y=this._compilations[d.index];if(d.compiling)return y.callValidate=P;var b=this._formats,g=this.RULES;try{var S=w(a,e,r,s);y.validate=S;var T=y.callValidate;return T&&(T.schema=S.schema,T.errors=null,T.refs=S.refs,T.refVal=S.refVal,T.root=S.root,T.$async=S.$async,i.sourceCode&&(T.source=S.source)),S}finally{np.call(this,a,e,s)}function P(){var I=y.validate,j=I.apply(this,arguments);return P.errors=I.errors,j}function w(I,j,U,oe){var Y=!j||j&&j.schema==I;if(j.schema!=e.schema)return rs.call(t,I,j,U,oe);var ee=I.$async===!0,W=Fi({isTop:!0,schema:I,isRoot:Y,baseId:oe,root:j,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:Li.MissingRef,RULES:g,validate:Fi,util:oa,resolve:ia,resolveRef:D,usePattern:M,useDefault:F,useCustomRule:q,opts:i,formats:b,logger:t.logger,self:t});W=na(o,lp)+na(u,op)+na(f,cp)+na(_,up)+W,i.processCode&&(W=i.processCode(W,I));var V;try{var me=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",W);V=me(t,g,b,e,o,f,_,ap,rp,sp),o[0]=V}catch(Te){throw t.logger.error("Error compiling schema, function code:",W),Te}return V.schema=I,V.errors=null,V.refs=n,V.refVal=o,V.root=Y?V:j,ee&&(V.$async=!0),i.sourceCode===!0&&(V.source={code:W,patterns:u,defaults:f}),V}function D(I,j,U){j=ia.url(I,j);var oe=n[j],Y,ee;if(oe!==void 0)return Y=o[oe],ee="refVal["+oe+"]",$(Y,ee);if(!U&&e.refs){var W=e.refs[j];if(W!==void 0)return Y=e.refVal[W],ee=O(j,Y),$(Y,ee)}ee=O(j);var V=ia.call(t,w,e,j);if(V===void 0){var me=r&&r[j];me&&(V=ia.inlineRef(me,i.inlineRefs)?me:rs.call(t,me,e,r,I))}if(V===void 0)z(j);else return L(j,V),$(V,ee)}function O(I,j){var U=o.length;return o[U]=j,n[I]=U,"refVal"+U}function z(I){delete n[I]}function L(I,j){var U=n[I];o[U]=j}function $(I,j){return typeof I=="object"||typeof I=="boolean"?{code:j,schema:I,inline:!0}:{code:j,$async:I&&!!I.$async}}function M(I){var j=l[I];return j===void 0&&(j=l[I]=u.length,u[j]=I),"pattern"+j}function F(I){switch(typeof I){case"boolean":case"number":return""+I;case"string":return oa.toQuotedString(I);case"object":if(I===null)return"null";var j=tp(I),U=m[j];return U===void 0&&(U=m[j]=f.length,f[U]=I),"default"+U}}function q(I,j,U,oe){if(t._opts.validateSchema!==!1){var Y=I.definition.dependencies;if(Y&&!Y.every(function(Re){return Object.prototype.hasOwnProperty.call(U,Re)}))throw new Error("parent schema must have all required keywords: "+Y.join(","));var ee=I.definition.validateSchema;if(ee){var W=ee(j);if(!W){var V="keyword schema is invalid: "+t.errorsText(ee.errors);if(t._opts.validateSchema=="log")t.logger.error(V);else throw new Error(V)}}}var me=I.definition.compile,Te=I.definition.inline,$e=I.definition.macro,ae;if(me)ae=me.call(t,j,U,oe);else if($e)ae=$e.call(t,j,U,oe),i.validateSchema!==!1&&t.validateSchema(ae,!0);else if(Te)ae=Te.call(t,oe,I.keyword,j,U);else if(ae=I.definition.validate,!ae)return;if(ae===void 0)throw new Error('custom keyword "'+I.keyword+'"failed to compile');var ye=_.length;return _[ye]=ae,{code:"customRule"+ye,validate:ae}}}function ip(a,e,r){var s=Mi.call(this,a,e,r);return s>=0?{index:s,compiling:!0}:(s=this._compilations.length,this._compilations[s]={schema:a,root:e,baseId:r},{index:s,compiling:!1})}function np(a,e,r){var s=Mi.call(this,a,e,r);s>=0&&this._compilations.splice(s,1)}function Mi(a,e,r){for(var s=0;s<this._compilations.length;s++){var t=this._compilations[s];if(t.schema==a&&t.root==e&&t.baseId==r)return s}return-1}function op(a,e){return"var pattern"+a+" = new RegExp("+oa.toQuotedString(e[a])+");"}function cp(a){return"var default"+a+" = defaults["+a+"];"}function lp(a,e){return e[a]===void 0?"":"var refVal"+a+" = refVal["+a+"];"}function up(a){return"var customRule"+a+" = customRules["+a+"];"}function na(a,e){if(!a.length)return"";for(var r="",s=0;s<a.length;s++)r+=e(s,a);return r}});var Hi=B((gh,Vi)=>{"use strict";var ca=Vi.exports=function(){this._cache={}};ca.prototype.put=function(e,r){this._cache[e]=r};ca.prototype.get=function(e){return this._cache[e]};ca.prototype.del=function(e){delete this._cache[e]};ca.prototype.clear=function(){this._cache={}}});var an=B((yh,rn)=>{"use strict";var dp=Zt(),pp=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,fp=[0,31,28,31,30,31,30,31,31,30,31,30,31],hp=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,Ji=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,mp=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,vp=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Bi=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Zi=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,Ki=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,Gi=/^(?:\/(?:[^~/]|~0|~1)*)*$/,Wi=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,Yi=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;rn.exports=la;function la(a){return a=a=="full"?"full":"fast",dp.copy(la[a])}la.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":Bi,url:Zi,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:Ji,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:tn,uuid:Ki,"json-pointer":Gi,"json-pointer-uri-fragment":Wi,"relative-json-pointer":Yi};la.full={date:Xi,time:en,"date-time":_p,uri:Ep,"uri-reference":vp,"uri-template":Bi,url:Zi,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:Ji,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:tn,uuid:Ki,"json-pointer":Gi,"json-pointer-uri-fragment":Wi,"relative-json-pointer":Yi};function gp(a){return a%4===0&&(a%100!==0||a%400===0)}function Xi(a){var e=a.match(pp);if(!e)return!1;var r=+e[1],s=+e[2],t=+e[3];return s>=1&&s<=12&&t>=1&&t<=(s==2&&gp(r)?29:fp[s])}function en(a,e){var r=a.match(hp);if(!r)return!1;var s=r[1],t=r[2],i=r[3],o=r[5];return(s<=23&&t<=59&&i<=59||s==23&&t==59&&i==60)&&(!e||o)}var yp=/t|\s/i;function _p(a){var e=a.split(yp);return e.length==2&&Xi(e[0])&&en(e[1],!0)}var bp=/\/|:/;function Ep(a){return bp.test(a)&&mp.test(a)}var xp=/[^\\]\\Z/;function tn(a){if(xp.test(a))return!1;try{return new RegExp(a),!0}catch{return!1}}});var nn=B((_h,sn)=>{"use strict";sn.exports=function(e,r,s){var t=" ",i=e.level,o=e.dataLevel,n=e.schema[r],u=e.errSchemaPath+"/"+r,l=!e.opts.allErrors,f="data"+(o||""),m="valid"+i,_,d;if(n=="#"||n=="#/")e.isRoot?(_=e.async,d="validate"):(_=e.root.schema.$async===!0,d="root.refVal[0]");else{var y=e.resolveRef(e.baseId,n,e.isRoot);if(y===void 0){var b=e.MissingRefError.message(e.baseId,n);if(e.opts.missingRefs=="fail"){e.logger.error(b);var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { ref: '"+e.util.escapeQuotes(n)+"' } ",e.opts.messages!==!1&&(t+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(n)+"' "),e.opts.verbose&&(t+=" , schema: "+e.util.toQuotedString(n)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),t+=" } "):t+=" {} ";var S=t;t=g.pop(),!e.compositeRule&&l?e.async?t+=" throw new ValidationError(["+S+"]); ":t+=" validate.errors = ["+S+"]; return false; ":t+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(t+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(b),l&&(t+=" if (true) { ");else throw new e.MissingRefError(e.baseId,n,b)}else if(y.inline){var T=e.util.copy(e);T.level++;var P="valid"+T.level;T.schema=y.schema,T.schemaPath="",T.errSchemaPath=n;var w=e.validate(T).replace(/validate\.schema/g,y.code);t+=" "+w+" ",l&&(t+=" if ("+P+") { ")}else _=y.$async===!0||e.async&&y.$async!==!1,d=y.code}if(d){var g=g||[];g.push(t),t="",e.opts.passContext?t+=" "+d+".call(this, ":t+=" "+d+"( ",t+=" "+f+", (dataPath || '')",e.errorPath!='""'&&(t+=" + "+e.errorPath);var D=o?"data"+(o-1||""):"parentData",O=o?e.dataPathArr[o]:"parentDataProperty";t+=" , "+D+" , "+O+", rootData)  ";var z=t;if(t=g.pop(),_){if(!e.async)throw new Error("async schema referenced by sync schema");l&&(t+=" var "+m+"; "),t+=" try { await "+z+"; ",l&&(t+=" "+m+" = true; "),t+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",l&&(t+=" "+m+" = false; "),t+=" } ",l&&(t+=" if ("+m+") { ")}else t+=" if (!"+z+") { if (vErrors === null) vErrors = "+d+".errors; else vErrors = vErrors.concat("+d+".errors); errors = vErrors.length; } ",l&&(t+=" else { ")}return t}});var cn=B((bh,on)=>{"use strict";on.exports=function(e,r,s){var t=" ",i=e.schema[r],o=e.schemaPath+e.util.getProperty(r),n=e.errSchemaPath+"/"+r,u=!e.opts.allErrors,l=e.util.copy(e),f="";l.level++;var m="valid"+l.level,_=l.baseId,d=!0,y=i;if(y)for(var b,g=-1,S=y.length-1;g<S;)b=y[g+=1],(e.opts.strictKeywords?typeof b=="object"&&Object.keys(b).length>0||b===!1:e.util.schemaHasRules(b,e.RULES.all))&&(d=!1,l.schema=b,l.schemaPath=o+"["+g+"]",l.errSchemaPath=n+"/"+g,t+="  "+e.validate(l)+" ",l.baseId=_,u&&(t+=" if ("+m+") { ",f+="}"));return u&&(d?t+=" if (true) { ":t+=" "+f.slice(0,-1)+" "),t}});var un=B((Eh,ln)=>{"use strict";ln.exports=function(e,r,s){var t=" ",i=e.level,o=e.dataLevel,n=e.schema[r],u=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,m="data"+(o||""),_="valid"+i,d="errs__"+i,y=e.util.copy(e),b="";y.level++;var g="valid"+y.level,S=n.every(function(L){return e.opts.strictKeywords?typeof L=="object"&&Object.keys(L).length>0||L===!1:e.util.schemaHasRules(L,e.RULES.all)});if(S){var T=y.baseId;t+=" var "+d+" = errors; var "+_+" = false;  ";var P=e.compositeRule;e.compositeRule=y.compositeRule=!0;var w=n;if(w)for(var D,O=-1,z=w.length-1;O<z;)D=w[O+=1],y.schema=D,y.schemaPath=u+"["+O+"]",y.errSchemaPath=l+"/"+O,t+="  "+e.validate(y)+" ",y.baseId=T,t+=" "+_+" = "+_+" || "+g+"; if (!"+_+") { ",b+="}";e.compositeRule=y.compositeRule=P,t+=" "+b+" if (!"+_+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(t+=" } ")}else f&&(t+=" if (true) { ");return t}});var pn=B((xh,dn)=>{"use strict";dn.exports=function(e,r,s){var t=" ",i=e.schema[r],o=e.errSchemaPath+"/"+r,n=!e.opts.allErrors,u=e.util.toQuotedString(i);return e.opts.$comment===!0?t+=" console.log("+u+");":typeof e.opts.$comment=="function"&&(t+=" self._opts.$comment("+u+", "+e.util.toQuotedString(o)+", validate.root.schema);"),t}});var hn=B((Sh,fn)=>{"use strict";fn.exports=function(e,r,s){var t=" ",i=e.level,o=e.dataLevel,n=e.schema[r],u=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,m="data"+(o||""),_="valid"+i,d=e.opts.$data&&n&&n.$data,y;d?(t+=" var schema"+i+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",y="schema"+i):y=n,d||(t+=" var schema"+i+" = validate.schema"+u+";"),t+="var "+_+" = equal("+m+", schema"+i+"); if (!"+_+") {   ";var b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValue: schema"+i+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be equal to constant' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var g=t;return t=b.pop(),!e.compositeRule&&f?e.async?t+=" throw new ValidationError(["+g+"]); ":t+=" validate.errors = ["+g+"]; return false; ":t+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" }",f&&(t+=" else { "),t}});var vn=B((Ph,mn)=>{"use strict";mn.exports=function(e,r,s){var t=" ",i=e.level,o=e.dataLevel,n=e.schema[r],u=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,m="data"+(o||""),_="valid"+i,d="errs__"+i,y=e.util.copy(e),b="";y.level++;var g="valid"+y.level,S="i"+i,T=y.dataLevel=e.dataLevel+1,P="data"+T,w=e.baseId,D=e.opts.strictKeywords?typeof n=="object"&&Object.keys(n).length>0||n===!1:e.util.schemaHasRules(n,e.RULES.all);if(t+="var "+d+" = errors;var "+_+";",D){var O=e.compositeRule;e.compositeRule=y.compositeRule=!0,y.schema=n,y.schemaPath=u,y.errSchemaPath=l,t+=" var "+g+" = false; for (var "+S+" = 0; "+S+" < "+m+".length; "+S+"++) { ",y.errorPath=e.util.getPathExpr(e.errorPath,S,e.opts.jsonPointers,!0);var z=m+"["+S+"]";y.dataPathArr[T]=S;var L=e.validate(y);y.baseId=w,e.util.varOccurences(L,P)<2?t+=" "+e.util.varReplace(L,P,z)+" ":t+=" var "+P+" = "+z+"; "+L+" ",t+=" if ("+g+") break; }  ",e.compositeRule=y.compositeRule=O,t+=" "+b+" if (!"+g+") {"}else t+=" if ("+m+".length == 0) {";var $=$||[];$.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should contain a valid item' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var M=t;return t=$.pop(),!e.compositeRule&&f?e.async?t+=" throw new ValidationError(["+M+"]); ":t+=" validate.errors = ["+M+"]; return false; ":t+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { ",D&&(t+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } "),e.opts.allErrors&&(t+=" } "),t}});var yn=B((Rh,gn)=>{"use strict";gn.exports=function(e,r,s){var t=" ",i=e.level,o=e.dataLevel,n=e.schema[r],u=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,m="data"+(o||""),_="errs__"+i,d=e.util.copy(e),y="";d.level++;var b="valid"+d.level,g={},S={},T=e.opts.ownProperties;for(O in n)if(O!="__proto__"){var P=n[O],w=Array.isArray(P)?S:g;w[O]=P}t+="var "+_+" = errors;";var D=e.errorPath;t+="var missing"+i+";";for(var O in S)if(w=S[O],w.length){if(t+=" if ( "+m+e.util.getProperty(O)+" !== undefined ",T&&(t+=" && Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(O)+"') "),f){t+=" && ( ";var z=w;if(z)for(var L,$=-1,M=z.length-1;$<M;){L=z[$+=1],$&&(t+=" || ");var F=e.util.getProperty(L),q=m+F;t+=" ( ( "+q+" === undefined ",T&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(L)+"') "),t+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?L:F)+") ) "}t+=")) {  ";var I="missing"+i,j="' + "+I+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(D,I,!0):D+" + "+I);var U=U||[];U.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(O)+"', missingProperty: '"+j+"', depsCount: "+w.length+", deps: '"+e.util.escapeQuotes(w.length==1?w[0]:w.join(", "))+"' } ",e.opts.messages!==!1&&(t+=" , message: 'should have ",w.length==1?t+="property "+e.util.escapeQuotes(w[0]):t+="properties "+e.util.escapeQuotes(w.join(", ")),t+=" when property "+e.util.escapeQuotes(O)+" is present' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var oe=t;t=U.pop(),!e.compositeRule&&f?e.async?t+=" throw new ValidationError(["+oe+"]); ":t+=" validate.errors = ["+oe+"]; return false; ":t+=" var err = "+oe+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{t+=" ) { ";var Y=w;if(Y)for(var L,ee=-1,W=Y.length-1;ee<W;){L=Y[ee+=1];var F=e.util.getProperty(L),j=e.util.escapeQuotes(L),q=m+F;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(D,L,e.opts.jsonPointers)),t+=" if ( "+q+" === undefined ",T&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(L)+"') "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(O)+"', missingProperty: '"+j+"', depsCount: "+w.length+", deps: '"+e.util.escapeQuotes(w.length==1?w[0]:w.join(", "))+"' } ",e.opts.messages!==!1&&(t+=" , message: 'should have ",w.length==1?t+="property "+e.util.escapeQuotes(w[0]):t+="properties "+e.util.escapeQuotes(w.join(", ")),t+=" when property "+e.util.escapeQuotes(O)+" is present' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}t+=" }   ",f&&(y+="}",t+=" else { ")}e.errorPath=D;var V=d.baseId;for(var O in g){var P=g[O];(e.opts.strictKeywords?typeof P=="object"&&Object.keys(P).length>0||P===!1:e.util.schemaHasRules(P,e.RULES.all))&&(t+=" "+b+" = true; if ( "+m+e.util.getProperty(O)+" !== undefined ",T&&(t+=" && Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(O)+"') "),t+=") { ",d.schema=P,d.schemaPath=u+e.util.getProperty(O),d.errSchemaPath=l+"/"+e.util.escapeFragment(O),t+="  "+e.validate(d)+" ",d.baseId=V,t+=" }  ",f&&(t+=" if ("+b+") { ",y+="}"))}return f&&(t+="   "+y+" if ("+_+" == errors) {"),t}});var bn=B((wh,_n)=>{"use strict";_n.exports=function(e,r,s){var t=" ",i=e.level,o=e.dataLevel,n=e.schema[r],u=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,m="data"+(o||""),_="valid"+i,d=e.opts.$data&&n&&n.$data,y;d?(t+=" var schema"+i+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",y="schema"+i):y=n;var b="i"+i,g="schema"+i;d||(t+=" var "+g+" = validate.schema"+u+";"),t+="var "+_+";",d&&(t+=" if (schema"+i+" === undefined) "+_+" = true; else if (!Array.isArray(schema"+i+")) "+_+" = false; else {"),t+=""+_+" = false;for (var "+b+"=0; "+b+"<"+g+".length; "+b+"++) if (equal("+m+", "+g+"["+b+"])) { "+_+" = true; break; }",d&&(t+="  }  "),t+=" if (!"+_+") {   ";var S=S||[];S.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValues: schema"+i+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var T=t;return t=S.pop(),!e.compositeRule&&f?e.async?t+=" throw new ValidationError(["+T+"]); ":t+=" validate.errors = ["+T+"]; return false; ":t+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" }",f&&(t+=" else { "),t}});var xn=B((Ih,En)=>{"use strict";En.exports=function(e,r,s){var t=" ",i=e.level,o=e.dataLevel,n=e.schema[r],u=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,m="data"+(o||"");if(e.opts.format===!1)return f&&(t+=" if (true) { "),t;var _=e.opts.$data&&n&&n.$data,d;_?(t+=" var schema"+i+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",d="schema"+i):d=n;var y=e.opts.unknownFormats,b=Array.isArray(y);if(_){var g="format"+i,S="isObject"+i,T="formatType"+i;t+=" var "+g+" = formats["+d+"]; var "+S+" = typeof "+g+" == 'object' && !("+g+" instanceof RegExp) && "+g+".validate; var "+T+" = "+S+" && "+g+".type || 'string'; if ("+S+") { ",e.async&&(t+=" var async"+i+" = "+g+".async; "),t+=" "+g+" = "+g+".validate; } if (  ",_&&(t+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),t+=" (",y!="ignore"&&(t+=" ("+d+" && !"+g+" ",b&&(t+=" && self._opts.unknownFormats.indexOf("+d+") == -1 "),t+=") || "),t+=" ("+g+" && "+T+" == '"+s+"' && !(typeof "+g+" == 'function' ? ",e.async?t+=" (async"+i+" ? await "+g+"("+m+") : "+g+"("+m+")) ":t+=" "+g+"("+m+") ",t+=" : "+g+".test("+m+"))))) {"}else{var g=e.formats[n];if(!g){if(y=="ignore")return e.logger.warn('unknown format "'+n+'" ignored in schema at path "'+e.errSchemaPath+'"'),f&&(t+=" if (true) { "),t;if(b&&y.indexOf(n)>=0)return f&&(t+=" if (true) { "),t;throw new Error('unknown format "'+n+'" is used in schema at path "'+e.errSchemaPath+'"')}var S=typeof g=="object"&&!(g instanceof RegExp)&&g.validate,T=S&&g.type||"string";if(S){var P=g.async===!0;g=g.validate}if(T!=s)return f&&(t+=" if (true) { "),t;if(P){if(!e.async)throw new Error("async format in sync schema");var w="formats"+e.util.getProperty(n)+".validate";t+=" if (!(await "+w+"("+m+"))) { "}else{t+=" if (! ";var w="formats"+e.util.getProperty(n);S&&(w+=".validate"),typeof g=="function"?t+=" "+w+"("+m+") ":t+=" "+w+".test("+m+") ",t+=") { "}}var D=D||[];D.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { format:  ",_?t+=""+d:t+=""+e.util.toQuotedString(n),t+="  } ",e.opts.messages!==!1&&(t+=` , message: 'should match format "`,_?t+="' + "+d+" + '":t+=""+e.util.escapeQuotes(n),t+=`"' `),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+u:t+=""+e.util.toQuotedString(n),t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var O=t;return t=D.pop(),!e.compositeRule&&f?e.async?t+=" throw new ValidationError(["+O+"]); ":t+=" validate.errors = ["+O+"]; return false; ":t+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",f&&(t+=" else { "),t}});var Pn=B((Th,Sn)=>{"use strict";Sn.exports=function(e,r,s){var t=" ",i=e.level,o=e.dataLevel,n=e.schema[r],u=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,m="data"+(o||""),_="valid"+i,d="errs__"+i,y=e.util.copy(e);y.level++;var b="valid"+y.level,g=e.schema.then,S=e.schema.else,T=g!==void 0&&(e.opts.strictKeywords?typeof g=="object"&&Object.keys(g).length>0||g===!1:e.util.schemaHasRules(g,e.RULES.all)),P=S!==void 0&&(e.opts.strictKeywords?typeof S=="object"&&Object.keys(S).length>0||S===!1:e.util.schemaHasRules(S,e.RULES.all)),w=y.baseId;if(T||P){var D;y.createErrors=!1,y.schema=n,y.schemaPath=u,y.errSchemaPath=l,t+=" var "+d+" = errors; var "+_+" = true;  ";var O=e.compositeRule;e.compositeRule=y.compositeRule=!0,t+="  "+e.validate(y)+" ",y.baseId=w,y.createErrors=!0,t+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }  ",e.compositeRule=y.compositeRule=O,T?(t+=" if ("+b+") {  ",y.schema=e.schema.then,y.schemaPath=e.schemaPath+".then",y.errSchemaPath=e.errSchemaPath+"/then",t+="  "+e.validate(y)+" ",y.baseId=w,t+=" "+_+" = "+b+"; ",T&&P?(D="ifClause"+i,t+=" var "+D+" = 'then'; "):D="'then'",t+=" } ",P&&(t+=" else { ")):t+=" if (!"+b+") { ",P&&(y.schema=e.schema.else,y.schemaPath=e.schemaPath+".else",y.errSchemaPath=e.errSchemaPath+"/else",t+="  "+e.validate(y)+" ",y.baseId=w,t+=" "+_+" = "+b+"; ",T&&P?(D="ifClause"+i,t+=" var "+D+" = 'else'; "):D="'else'",t+=" } "),t+=" if (!"+_+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { failingKeyword: "+D+" } ",e.opts.messages!==!1&&(t+=` , message: 'should match "' + `+D+` + '" schema' `),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+=" }   ",f&&(t+=" else { ")}else f&&(t+=" if (true) { ");return t}});var wn=B((Dh,Rn)=>{"use strict";Rn.exports=function(e,r,s){var t=" ",i=e.level,o=e.dataLevel,n=e.schema[r],u=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,m="data"+(o||""),_="valid"+i,d="errs__"+i,y=e.util.copy(e),b="";y.level++;var g="valid"+y.level,S="i"+i,T=y.dataLevel=e.dataLevel+1,P="data"+T,w=e.baseId;if(t+="var "+d+" = errors;var "+_+";",Array.isArray(n)){var D=e.schema.additionalItems;if(D===!1){t+=" "+_+" = "+m+".length <= "+n.length+"; ";var O=l;l=e.errSchemaPath+"/additionalItems",t+="  if (!"+_+") {   ";var z=z||[];z.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+n.length+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have more than "+n.length+" items' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var L=t;t=z.pop(),!e.compositeRule&&f?e.async?t+=" throw new ValidationError(["+L+"]); ":t+=" validate.errors = ["+L+"]; return false; ":t+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",l=O,f&&(b+="}",t+=" else { ")}var $=n;if($){for(var M,F=-1,q=$.length-1;F<q;)if(M=$[F+=1],e.opts.strictKeywords?typeof M=="object"&&Object.keys(M).length>0||M===!1:e.util.schemaHasRules(M,e.RULES.all)){t+=" "+g+" = true; if ("+m+".length > "+F+") { ";var I=m+"["+F+"]";y.schema=M,y.schemaPath=u+"["+F+"]",y.errSchemaPath=l+"/"+F,y.errorPath=e.util.getPathExpr(e.errorPath,F,e.opts.jsonPointers,!0),y.dataPathArr[T]=F;var j=e.validate(y);y.baseId=w,e.util.varOccurences(j,P)<2?t+=" "+e.util.varReplace(j,P,I)+" ":t+=" var "+P+" = "+I+"; "+j+" ",t+=" }  ",f&&(t+=" if ("+g+") { ",b+="}")}}if(typeof D=="object"&&(e.opts.strictKeywords?typeof D=="object"&&Object.keys(D).length>0||D===!1:e.util.schemaHasRules(D,e.RULES.all))){y.schema=D,y.schemaPath=e.schemaPath+".additionalItems",y.errSchemaPath=e.errSchemaPath+"/additionalItems",t+=" "+g+" = true; if ("+m+".length > "+n.length+") {  for (var "+S+" = "+n.length+"; "+S+" < "+m+".length; "+S+"++) { ",y.errorPath=e.util.getPathExpr(e.errorPath,S,e.opts.jsonPointers,!0);var I=m+"["+S+"]";y.dataPathArr[T]=S;var j=e.validate(y);y.baseId=w,e.util.varOccurences(j,P)<2?t+=" "+e.util.varReplace(j,P,I)+" ":t+=" var "+P+" = "+I+"; "+j+" ",f&&(t+=" if (!"+g+") break; "),t+=" } }  ",f&&(t+=" if ("+g+") { ",b+="}")}}else if(e.opts.strictKeywords?typeof n=="object"&&Object.keys(n).length>0||n===!1:e.util.schemaHasRules(n,e.RULES.all)){y.schema=n,y.schemaPath=u,y.errSchemaPath=l,t+="  for (var "+S+" = 0; "+S+" < "+m+".length; "+S+"++) { ",y.errorPath=e.util.getPathExpr(e.errorPath,S,e.opts.jsonPointers,!0);var I=m+"["+S+"]";y.dataPathArr[T]=S;var j=e.validate(y);y.baseId=w,e.util.varOccurences(j,P)<2?t+=" "+e.util.varReplace(j,P,I)+" ":t+=" var "+P+" = "+I+"; "+j+" ",f&&(t+=" if (!"+g+") break; "),t+=" }"}return f&&(t+=" "+b+" if ("+d+" == errors) {"),t}});var as=B((Oh,In)=>{"use strict";In.exports=function(e,r,s){var t=" ",i=e.level,o=e.dataLevel,n=e.schema[r],u=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,w,m="data"+(o||""),_=e.opts.$data&&n&&n.$data,d;_?(t+=" var schema"+i+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",d="schema"+i):d=n;var y=r=="maximum",b=y?"exclusiveMaximum":"exclusiveMinimum",g=e.schema[b],S=e.opts.$data&&g&&g.$data,T=y?"<":">",P=y?">":"<",w=void 0;if(!(_||typeof n=="number"||n===void 0))throw new Error(r+" must be number");if(!(S||g===void 0||typeof g=="number"||typeof g=="boolean"))throw new Error(b+" must be number or boolean");if(S){var D=e.util.getData(g.$data,o,e.dataPathArr),O="exclusive"+i,z="exclType"+i,L="exclIsNumber"+i,$="op"+i,M="' + "+$+" + '";t+=" var schemaExcl"+i+" = "+D+"; ",D="schemaExcl"+i,t+=" var "+O+"; var "+z+" = typeof "+D+"; if ("+z+" != 'boolean' && "+z+" != 'undefined' && "+z+" != 'number') { ";var w=b,F=F||[];F.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(w||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: '"+b+" should be boolean' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var q=t;t=F.pop(),!e.compositeRule&&f?e.async?t+=" throw new ValidationError(["+q+"]); ":t+=" validate.errors = ["+q+"]; return false; ":t+=" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else if ( ",_&&(t+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),t+=" "+z+" == 'number' ? ( ("+O+" = "+d+" === undefined || "+D+" "+T+"= "+d+") ? "+m+" "+P+"= "+D+" : "+m+" "+P+" "+d+" ) : ( ("+O+" = "+D+" === true) ? "+m+" "+P+"= "+d+" : "+m+" "+P+" "+d+" ) || "+m+" !== "+m+") { var op"+i+" = "+O+" ? '"+T+"' : '"+T+"='; ",n===void 0&&(w=b,l=e.errSchemaPath+"/"+b,d=D,_=S)}else{var L=typeof g=="number",M=T;if(L&&_){var $="'"+M+"'";t+=" if ( ",_&&(t+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),t+=" ( "+d+" === undefined || "+g+" "+T+"= "+d+" ? "+m+" "+P+"= "+g+" : "+m+" "+P+" "+d+" ) || "+m+" !== "+m+") { "}else{L&&n===void 0?(O=!0,w=b,l=e.errSchemaPath+"/"+b,d=g,P+="="):(L&&(d=Math[y?"min":"max"](g,n)),g===(L?d:!0)?(O=!0,w=b,l=e.errSchemaPath+"/"+b,P+="="):(O=!1,M+="="));var $="'"+M+"'";t+=" if ( ",_&&(t+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),t+=" "+m+" "+P+" "+d+" || "+m+" !== "+m+") { "}}w=w||r;var F=F||[];F.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(w||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { comparison: "+$+", limit: "+d+", exclusive: "+O+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be "+M+" ",_?t+="' + "+d:t+=""+d+"'"),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+u:t+=""+n,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var q=t;return t=F.pop(),!e.compositeRule&&f?e.async?t+=" throw new ValidationError(["+q+"]); ":t+=" validate.errors = ["+q+"]; return false; ":t+=" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",f&&(t+=" else { "),t}});var ss=B(($h,Tn)=>{"use strict";Tn.exports=function(e,r,s){var t=" ",i=e.level,o=e.dataLevel,n=e.schema[r],u=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,b,m="data"+(o||""),_=e.opts.$data&&n&&n.$data,d;if(_?(t+=" var schema"+i+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",d="schema"+i):d=n,!(_||typeof n=="number"))throw new Error(r+" must be number");var y=r=="maxItems"?">":"<";t+="if ( ",_&&(t+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),t+=" "+m+".length "+y+" "+d+") { ";var b=r,g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(b||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+d+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have ",r=="maxItems"?t+="more":t+="fewer",t+=" than ",_?t+="' + "+d+" + '":t+=""+n,t+=" items' "),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+u:t+=""+n,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var S=t;return t=g.pop(),!e.compositeRule&&f?e.async?t+=" throw new ValidationError(["+S+"]); ":t+=" validate.errors = ["+S+"]; return false; ":t+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",f&&(t+=" else { "),t}});var is=B((jh,Dn)=>{"use strict";Dn.exports=function(e,r,s){var t=" ",i=e.level,o=e.dataLevel,n=e.schema[r],u=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,b,m="data"+(o||""),_=e.opts.$data&&n&&n.$data,d;if(_?(t+=" var schema"+i+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",d="schema"+i):d=n,!(_||typeof n=="number"))throw new Error(r+" must be number");var y=r=="maxLength"?">":"<";t+="if ( ",_&&(t+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),e.opts.unicode===!1?t+=" "+m+".length ":t+=" ucs2length("+m+") ",t+=" "+y+" "+d+") { ";var b=r,g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(b||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+d+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be ",r=="maxLength"?t+="longer":t+="shorter",t+=" than ",_?t+="' + "+d+" + '":t+=""+n,t+=" characters' "),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+u:t+=""+n,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var S=t;return t=g.pop(),!e.compositeRule&&f?e.async?t+=" throw new ValidationError(["+S+"]); ":t+=" validate.errors = ["+S+"]; return false; ":t+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",f&&(t+=" else { "),t}});var ns=B((kh,On)=>{"use strict";On.exports=function(e,r,s){var t=" ",i=e.level,o=e.dataLevel,n=e.schema[r],u=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,b,m="data"+(o||""),_=e.opts.$data&&n&&n.$data,d;if(_?(t+=" var schema"+i+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",d="schema"+i):d=n,!(_||typeof n=="number"))throw new Error(r+" must be number");var y=r=="maxProperties"?">":"<";t+="if ( ",_&&(t+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),t+=" Object.keys("+m+").length "+y+" "+d+") { ";var b=r,g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(b||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+d+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have ",r=="maxProperties"?t+="more":t+="fewer",t+=" than ",_?t+="' + "+d+" + '":t+=""+n,t+=" properties' "),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+u:t+=""+n,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var S=t;return t=g.pop(),!e.compositeRule&&f?e.async?t+=" throw new ValidationError(["+S+"]); ":t+=" validate.errors = ["+S+"]; return false; ":t+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",f&&(t+=" else { "),t}});var jn=B((Ah,$n)=>{"use strict";$n.exports=function(e,r,s){var t=" ",i=e.level,o=e.dataLevel,n=e.schema[r],u=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,m="data"+(o||""),_=e.opts.$data&&n&&n.$data,d;if(_?(t+=" var schema"+i+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",d="schema"+i):d=n,!(_||typeof n=="number"))throw new Error(r+" must be number");t+="var division"+i+";if (",_&&(t+=" "+d+" !== undefined && ( typeof "+d+" != 'number' || "),t+=" (division"+i+" = "+m+" / "+d+", ",e.opts.multipleOfPrecision?t+=" Math.abs(Math.round(division"+i+") - division"+i+") > 1e-"+e.opts.multipleOfPrecision+" ":t+=" division"+i+" !== parseInt(division"+i+") ",t+=" ) ",_&&(t+="  )  "),t+=" ) {   ";var y=y||[];y.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { multipleOf: "+d+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be multiple of ",_?t+="' + "+d:t+=""+d+"'"),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+u:t+=""+n,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var b=t;return t=y.pop(),!e.compositeRule&&f?e.async?t+=" throw new ValidationError(["+b+"]); ":t+=" validate.errors = ["+b+"]; return false; ":t+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",f&&(t+=" else { "),t}});var An=B((Ch,kn)=>{"use strict";kn.exports=function(e,r,s){var t=" ",i=e.level,o=e.dataLevel,n=e.schema[r],u=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,m="data"+(o||""),_="errs__"+i,d=e.util.copy(e);d.level++;var y="valid"+d.level;if(e.opts.strictKeywords?typeof n=="object"&&Object.keys(n).length>0||n===!1:e.util.schemaHasRules(n,e.RULES.all)){d.schema=n,d.schemaPath=u,d.errSchemaPath=l,t+=" var "+_+" = errors;  ";var b=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.createErrors=!1;var g;d.opts.allErrors&&(g=d.opts.allErrors,d.opts.allErrors=!1),t+=" "+e.validate(d)+" ",d.createErrors=!0,g&&(d.opts.allErrors=g),e.compositeRule=d.compositeRule=b,t+=" if ("+y+") {   ";var S=S||[];S.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be valid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var T=t;t=S.pop(),!e.compositeRule&&f?e.async?t+=" throw new ValidationError(["+T+"]); ":t+=" validate.errors = ["+T+"]; return false; ":t+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else {  errors = "+_+"; if (vErrors !== null) { if ("+_+") vErrors.length = "+_+"; else vErrors = null; } ",e.opts.allErrors&&(t+=" } ")}else t+="  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be valid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",f&&(t+=" if (false) { ");return t}});var Nn=B((Nh,Cn)=>{"use strict";Cn.exports=function(e,r,s){var t=" ",i=e.level,o=e.dataLevel,n=e.schema[r],u=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,m="data"+(o||""),_="valid"+i,d="errs__"+i,y=e.util.copy(e),b="";y.level++;var g="valid"+y.level,S=y.baseId,T="prevValid"+i,P="passingSchemas"+i;t+="var "+d+" = errors , "+T+" = false , "+_+" = false , "+P+" = null; ";var w=e.compositeRule;e.compositeRule=y.compositeRule=!0;var D=n;if(D)for(var O,z=-1,L=D.length-1;z<L;)O=D[z+=1],(e.opts.strictKeywords?typeof O=="object"&&Object.keys(O).length>0||O===!1:e.util.schemaHasRules(O,e.RULES.all))?(y.schema=O,y.schemaPath=u+"["+z+"]",y.errSchemaPath=l+"/"+z,t+="  "+e.validate(y)+" ",y.baseId=S):t+=" var "+g+" = true; ",z&&(t+=" if ("+g+" && "+T+") { "+_+" = false; "+P+" = ["+P+", "+z+"]; } else { ",b+="}"),t+=" if ("+g+") { "+_+" = "+T+" = true; "+P+" = "+z+"; }";return e.compositeRule=y.compositeRule=w,t+=""+b+"if (!"+_+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { passingSchemas: "+P+" } ",e.opts.messages!==!1&&(t+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+="} else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }",e.opts.allErrors&&(t+=" } "),t}});var Un=B((qh,qn)=>{"use strict";qn.exports=function(e,r,s){var t=" ",i=e.level,o=e.dataLevel,n=e.schema[r],u=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,m="data"+(o||""),_=e.opts.$data&&n&&n.$data,d;_?(t+=" var schema"+i+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",d="schema"+i):d=n;var y=_?"(new RegExp("+d+"))":e.usePattern(n);t+="if ( ",_&&(t+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),t+=" !"+y+".test("+m+") ) {   ";var b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { pattern:  ",_?t+=""+d:t+=""+e.util.toQuotedString(n),t+="  } ",e.opts.messages!==!1&&(t+=` , message: 'should match pattern "`,_?t+="' + "+d+" + '":t+=""+e.util.escapeQuotes(n),t+=`"' `),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+u:t+=""+e.util.toQuotedString(n),t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var g=t;return t=b.pop(),!e.compositeRule&&f?e.async?t+=" throw new ValidationError(["+g+"]); ":t+=" validate.errors = ["+g+"]; return false; ":t+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",f&&(t+=" else { "),t}});var Ln=B((Uh,Fn)=>{"use strict";Fn.exports=function(e,r,s){var t=" ",i=e.level,o=e.dataLevel,n=e.schema[r],u=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,m="data"+(o||""),_="errs__"+i,d=e.util.copy(e),y="";d.level++;var b="valid"+d.level,g="key"+i,S="idx"+i,T=d.dataLevel=e.dataLevel+1,P="data"+T,w="dataProperties"+i,D=Object.keys(n||{}).filter(ee),O=e.schema.patternProperties||{},z=Object.keys(O).filter(ee),L=e.schema.additionalProperties,$=D.length||z.length,M=L===!1,F=typeof L=="object"&&Object.keys(L).length,q=e.opts.removeAdditional,I=M||F||q,j=e.opts.ownProperties,U=e.baseId,oe=e.schema.required;if(oe&&!(e.opts.$data&&oe.$data)&&oe.length<e.opts.loopRequired)var Y=e.util.toHash(oe);function ee(Ge){return Ge!=="__proto__"}if(t+="var "+_+" = errors;var "+b+" = true;",j&&(t+=" var "+w+" = undefined;"),I){if(j?t+=" "+w+" = "+w+" || Object.keys("+m+"); for (var "+S+"=0; "+S+"<"+w+".length; "+S+"++) { var "+g+" = "+w+"["+S+"]; ":t+=" for (var "+g+" in "+m+") { ",$){if(t+=" var isAdditional"+i+" = !(false ",D.length)if(D.length>8)t+=" || validate.schema"+u+".hasOwnProperty("+g+") ";else{var W=D;if(W)for(var V,me=-1,Te=W.length-1;me<Te;)V=W[me+=1],t+=" || "+g+" == "+e.util.toQuotedString(V)+" "}if(z.length){var $e=z;if($e)for(var ae,ye=-1,Re=$e.length-1;ye<Re;)ae=$e[ye+=1],t+=" || "+e.usePattern(ae)+".test("+g+") "}t+=" ); if (isAdditional"+i+") { "}if(q=="all")t+=" delete "+m+"["+g+"]; ";else{var je=e.errorPath,gt="' + "+g+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers)),M)if(q)t+=" delete "+m+"["+g+"]; ";else{t+=" "+b+" = false; ";var ct=l;l=e.errSchemaPath+"/additionalProperties";var _e=_e||[];_e.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { additionalProperty: '"+gt+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is an invalid additional property":t+="should NOT have additional properties",t+="' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var ve=t;t=_e.pop(),!e.compositeRule&&f?e.async?t+=" throw new ValidationError(["+ve+"]); ":t+=" validate.errors = ["+ve+"]; return false; ":t+=" var err = "+ve+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=ct,f&&(t+=" break; ")}else if(F)if(q=="failing"){t+=" var "+_+" = errors;  ";var wt=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.schema=L,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var De=m+"["+g+"]";d.dataPathArr[T]=g;var ie=e.validate(d);d.baseId=U,e.util.varOccurences(ie,P)<2?t+=" "+e.util.varReplace(ie,P,De)+" ":t+=" var "+P+" = "+De+"; "+ie+" ",t+=" if (!"+b+") { errors = "+_+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+m+"["+g+"]; }  ",e.compositeRule=d.compositeRule=wt}else{d.schema=L,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var De=m+"["+g+"]";d.dataPathArr[T]=g;var ie=e.validate(d);d.baseId=U,e.util.varOccurences(ie,P)<2?t+=" "+e.util.varReplace(ie,P,De)+" ":t+=" var "+P+" = "+De+"; "+ie+" ",f&&(t+=" if (!"+b+") break; ")}e.errorPath=je}$&&(t+=" } "),t+=" }  ",f&&(t+=" if ("+b+") { ",y+="}")}var yt=e.opts.useDefaults&&!e.compositeRule;if(D.length){var lt=D;if(lt)for(var V,It=-1,Tt=lt.length-1;It<Tt;){V=lt[It+=1];var we=n[V];if(e.opts.strictKeywords?typeof we=="object"&&Object.keys(we).length>0||we===!1:e.util.schemaHasRules(we,e.RULES.all)){var Me=e.util.getProperty(V),De=m+Me,Ae=yt&&we.default!==void 0;d.schema=we,d.schemaPath=u+Me,d.errSchemaPath=l+"/"+e.util.escapeFragment(V),d.errorPath=e.util.getPath(e.errorPath,V,e.opts.jsonPointers),d.dataPathArr[T]=e.util.toQuotedString(V);var ie=e.validate(d);if(d.baseId=U,e.util.varOccurences(ie,P)<2){ie=e.util.varReplace(ie,P,De);var ke=De}else{var ke=P;t+=" var "+P+" = "+De+"; "}if(Ae)t+=" "+ie+" ";else{if(Y&&Y[V]){t+=" if ( "+ke+" === undefined ",j&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(V)+"') "),t+=") { "+b+" = false; ";var je=e.errorPath,ct=l,et=e.util.escapeQuotes(V);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(je,V,e.opts.jsonPointers)),l=e.errSchemaPath+"/required";var _e=_e||[];_e.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+et+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+et+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var ve=t;t=_e.pop(),!e.compositeRule&&f?e.async?t+=" throw new ValidationError(["+ve+"]); ":t+=" validate.errors = ["+ve+"]; return false; ":t+=" var err = "+ve+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=ct,e.errorPath=je,t+=" } else { "}else f?(t+=" if ( "+ke+" === undefined ",j&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(V)+"') "),t+=") { "+b+" = true; } else { "):(t+=" if ("+ke+" !== undefined ",j&&(t+=" &&   Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(V)+"') "),t+=" ) { ");t+=" "+ie+" } "}}f&&(t+=" if ("+b+") { ",y+="}")}}if(z.length){var Ue=z;if(Ue)for(var ae,$r=-1,ba=Ue.length-1;$r<ba;){ae=Ue[$r+=1];var we=O[ae];if(e.opts.strictKeywords?typeof we=="object"&&Object.keys(we).length>0||we===!1:e.util.schemaHasRules(we,e.RULES.all)){d.schema=we,d.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ae),d.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ae),j?t+=" "+w+" = "+w+" || Object.keys("+m+"); for (var "+S+"=0; "+S+"<"+w+".length; "+S+"++) { var "+g+" = "+w+"["+S+"]; ":t+=" for (var "+g+" in "+m+") { ",t+=" if ("+e.usePattern(ae)+".test("+g+")) { ",d.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var De=m+"["+g+"]";d.dataPathArr[T]=g;var ie=e.validate(d);d.baseId=U,e.util.varOccurences(ie,P)<2?t+=" "+e.util.varReplace(ie,P,De)+" ":t+=" var "+P+" = "+De+"; "+ie+" ",f&&(t+=" if (!"+b+") break; "),t+=" } ",f&&(t+=" else "+b+" = true; "),t+=" }  ",f&&(t+=" if ("+b+") { ",y+="}")}}}return f&&(t+=" "+y+" if ("+_+" == errors) {"),t}});var Qn=B((Fh,Mn)=>{"use strict";Mn.exports=function(e,r,s){var t=" ",i=e.level,o=e.dataLevel,n=e.schema[r],u=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,m="data"+(o||""),_="errs__"+i,d=e.util.copy(e),y="";d.level++;var b="valid"+d.level;if(t+="var "+_+" = errors;",e.opts.strictKeywords?typeof n=="object"&&Object.keys(n).length>0||n===!1:e.util.schemaHasRules(n,e.RULES.all)){d.schema=n,d.schemaPath=u,d.errSchemaPath=l;var g="key"+i,S="idx"+i,T="i"+i,P="' + "+g+" + '",w=d.dataLevel=e.dataLevel+1,D="data"+w,O="dataProperties"+i,z=e.opts.ownProperties,L=e.baseId;z&&(t+=" var "+O+" = undefined; "),z?t+=" "+O+" = "+O+" || Object.keys("+m+"); for (var "+S+"=0; "+S+"<"+O+".length; "+S+"++) { var "+g+" = "+O+"["+S+"]; ":t+=" for (var "+g+" in "+m+") { ",t+=" var startErrs"+i+" = errors; ";var $=g,M=e.compositeRule;e.compositeRule=d.compositeRule=!0;var F=e.validate(d);d.baseId=L,e.util.varOccurences(F,D)<2?t+=" "+e.util.varReplace(F,D,$)+" ":t+=" var "+D+" = "+$+"; "+F+" ",e.compositeRule=d.compositeRule=M,t+=" if (!"+b+") { for (var "+T+"=startErrs"+i+"; "+T+"<errors; "+T+"++) { vErrors["+T+"].propertyName = "+g+"; }   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { propertyName: '"+P+"' } ",e.opts.messages!==!1&&(t+=" , message: 'property name \\'"+P+"\\' is invalid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),f&&(t+=" break; "),t+=" } }"}return f&&(t+=" "+y+" if ("+_+" == errors) {"),t}});var Vn=B((Lh,zn)=>{"use strict";zn.exports=function(e,r,s){var t=" ",i=e.level,o=e.dataLevel,n=e.schema[r],u=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,m="data"+(o||""),_="valid"+i,d=e.opts.$data&&n&&n.$data,y;d?(t+=" var schema"+i+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",y="schema"+i):y=n;var b="schema"+i;if(!d)if(n.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var g=[],S=n;if(S)for(var T,P=-1,w=S.length-1;P<w;){T=S[P+=1];var D=e.schema.properties[T];D&&(e.opts.strictKeywords?typeof D=="object"&&Object.keys(D).length>0||D===!1:e.util.schemaHasRules(D,e.RULES.all))||(g[g.length]=T)}}else var g=n;if(d||g.length){var O=e.errorPath,z=d||g.length>=e.opts.loopRequired,L=e.opts.ownProperties;if(f)if(t+=" var missing"+i+"; ",z){d||(t+=" var "+b+" = validate.schema"+u+"; ");var $="i"+i,M="schema"+i+"["+$+"]",F="' + "+M+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(O,M,e.opts.jsonPointers)),t+=" var "+_+" = true; ",d&&(t+=" if (schema"+i+" === undefined) "+_+" = true; else if (!Array.isArray(schema"+i+")) "+_+" = false; else {"),t+=" for (var "+$+" = 0; "+$+" < "+b+".length; "+$+"++) { "+_+" = "+m+"["+b+"["+$+"]] !== undefined ",L&&(t+=" &&   Object.prototype.hasOwnProperty.call("+m+", "+b+"["+$+"]) "),t+="; if (!"+_+") break; } ",d&&(t+="  }  "),t+="  if (!"+_+") {   ";var q=q||[];q.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+F+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+F+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var I=t;t=q.pop(),!e.compositeRule&&f?e.async?t+=" throw new ValidationError(["+I+"]); ":t+=" validate.errors = ["+I+"]; return false; ":t+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { "}else{t+=" if ( ";var j=g;if(j)for(var U,$=-1,oe=j.length-1;$<oe;){U=j[$+=1],$&&(t+=" || ");var Y=e.util.getProperty(U),ee=m+Y;t+=" ( ( "+ee+" === undefined ",L&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(U)+"') "),t+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?U:Y)+") ) "}t+=") {  ";var M="missing"+i,F="' + "+M+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(O,M,!0):O+" + "+M);var q=q||[];q.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+F+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+F+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var I=t;t=q.pop(),!e.compositeRule&&f?e.async?t+=" throw new ValidationError(["+I+"]); ":t+=" validate.errors = ["+I+"]; return false; ":t+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { "}else if(z){d||(t+=" var "+b+" = validate.schema"+u+"; ");var $="i"+i,M="schema"+i+"["+$+"]",F="' + "+M+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(O,M,e.opts.jsonPointers)),d&&(t+=" if ("+b+" && !Array.isArray("+b+")) {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+F+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+F+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+b+" !== undefined) { "),t+=" for (var "+$+" = 0; "+$+" < "+b+".length; "+$+"++) { if ("+m+"["+b+"["+$+"]] === undefined ",L&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", "+b+"["+$+"]) "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+F+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+F+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",d&&(t+="  }  ")}else{var W=g;if(W)for(var U,V=-1,me=W.length-1;V<me;){U=W[V+=1];var Y=e.util.getProperty(U),F=e.util.escapeQuotes(U),ee=m+Y;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(O,U,e.opts.jsonPointers)),t+=" if ( "+ee+" === undefined ",L&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(U)+"') "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+F+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+F+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=O}else f&&(t+=" if (true) {");return t}});var Jn=B((Mh,Hn)=>{"use strict";Hn.exports=function(e,r,s){var t=" ",i=e.level,o=e.dataLevel,n=e.schema[r],u=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,m="data"+(o||""),_="valid"+i,d=e.opts.$data&&n&&n.$data,y;if(d?(t+=" var schema"+i+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",y="schema"+i):y=n,(n||d)&&e.opts.uniqueItems!==!1){d&&(t+=" var "+_+"; if ("+y+" === false || "+y+" === undefined) "+_+" = true; else if (typeof "+y+" != 'boolean') "+_+" = false; else { "),t+=" var i = "+m+".length , "+_+" = true , j; if (i > 1) { ";var b=e.schema.items&&e.schema.items.type,g=Array.isArray(b);if(!b||b=="object"||b=="array"||g&&(b.indexOf("object")>=0||b.indexOf("array")>=0))t+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+m+"[i], "+m+"[j])) { "+_+" = false; break outer; } } } ";else{t+=" var itemIndices = {}, item; for (;i--;) { var item = "+m+"[i]; ";var S="checkDataType"+(g?"s":"");t+=" if ("+e.util[S](b,"item",e.opts.strictNumbers,!0)+") continue; ",g&&(t+=` if (typeof item == 'string') item = '"' + item; `),t+=" if (typeof itemIndices[item] == 'number') { "+_+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}t+=" } ",d&&(t+="  }  "),t+=" if (!"+_+") {   ";var T=T||[];T.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(t+=" , schema:  ",d?t+="validate.schema"+u:t+=""+n,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var P=t;t=T.pop(),!e.compositeRule&&f?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",f&&(t+=" else { ")}else f&&(t+=" if (true) { ");return t}});var Zn=B((Qh,Bn)=>{"use strict";Bn.exports={$ref:nn(),allOf:cn(),anyOf:un(),$comment:pn(),const:hn(),contains:vn(),dependencies:yn(),enum:bn(),format:xn(),if:Pn(),items:wn(),maximum:as(),minimum:as(),maxItems:ss(),minItems:ss(),maxLength:is(),minLength:is(),maxProperties:ns(),minProperties:ns(),multipleOf:jn(),not:An(),oneOf:Nn(),pattern:Un(),properties:Ln(),propertyNames:Qn(),required:Vn(),uniqueItems:Jn(),validate:ts()}});var Wn=B((zh,Gn)=>{"use strict";var Kn=Zn(),os=Zt().toHash;Gn.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],r=["type","$comment"],s=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],t=["number","integer","string","array","object","boolean","null"];return e.all=os(r),e.types=os(t),e.forEach(function(i){i.rules=i.rules.map(function(o){var n;if(typeof o=="object"){var u=Object.keys(o)[0];n=o[u],o=u,n.forEach(function(f){r.push(f),e.all[f]=!0})}r.push(o);var l=e.all[o]={keyword:o,code:Kn[o],implements:n};return l}),e.all.$comment={keyword:"$comment",code:Kn.$comment},i.type&&(e.types[i.type]=i)}),e.keywords=os(r.concat(s)),e.custom={},e}});var eo=B((Vh,Xn)=>{"use strict";var Yn=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];Xn.exports=function(a,e){for(var r=0;r<e.length;r++){a=JSON.parse(JSON.stringify(a));var s=e[r].split("/"),t=a,i;for(i=1;i<s.length;i++)t=t[s[i]];for(i=0;i<Yn.length;i++){var o=Yn[i],n=t[o];n&&(t[o]={anyOf:[n,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return a}});var ao=B((Hh,ro)=>{"use strict";var Sp=sa().MissingRef;ro.exports=to;function to(a,e,r){var s=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(r=e,e=void 0);var t=i(a).then(function(){var n=s._addSchema(a,void 0,e);return n.validate||o(n)});return r&&t.then(function(n){r(null,n)},r),t;function i(n){var u=n.$schema;return u&&!s.getSchema(u)?to.call(s,{$ref:u},!0):Promise.resolve()}function o(n){try{return s._compile(n)}catch(l){if(l instanceof Sp)return u(l);throw l}function u(l){var f=l.missingSchema;if(d(f))throw new Error("Schema "+f+" is loaded but "+l.missingRef+" cannot be resolved");var m=s._loadingSchemas[f];return m||(m=s._loadingSchemas[f]=s._opts.loadSchema(f),m.then(_,_)),m.then(function(y){if(!d(f))return i(y).then(function(){d(f)||s.addSchema(y,f,void 0,e)})}).then(function(){return o(n)});function _(){delete s._loadingSchemas[f]}function d(y){return s._refs[y]||s._schemas[y]}}}}});var io=B((Jh,so)=>{"use strict";so.exports=function(e,r,s){var t=" ",i=e.level,o=e.dataLevel,n=e.schema[r],u=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,m,_="data"+(o||""),d="valid"+i,y="errs__"+i,b=e.opts.$data&&n&&n.$data,g;b?(t+=" var schema"+i+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",g="schema"+i):g=n;var S=this,T="definition"+i,P=S.definition,w="",D,O,z,L,$;if(b&&P.$data){$="keywordValidate"+i;var M=P.validateSchema;t+=" var "+T+" = RULES.custom['"+r+"'].definition; var "+$+" = "+T+".validate;"}else{if(L=e.useCustomRule(S,n,e.schema,e),!L)return;g="validate.schema"+u,$=L.code,D=P.compile,O=P.inline,z=P.macro}var F=$+".errors",q="i"+i,I="ruleErr"+i,j=P.async;if(j&&!e.async)throw new Error("async keyword in sync schema");if(O||z||(t+=""+F+" = null;"),t+="var "+y+" = errors;var "+d+";",b&&P.$data&&(w+="}",t+=" if ("+g+" === undefined) { "+d+" = true; } else { ",M&&(w+="}",t+=" "+d+" = "+T+".validateSchema("+g+"); if ("+d+") { ")),O)P.statements?t+=" "+L.validate+" ":t+=" "+d+" = "+L.validate+"; ";else if(z){var U=e.util.copy(e),w="";U.level++;var oe="valid"+U.level;U.schema=L.validate,U.schemaPath="";var Y=e.compositeRule;e.compositeRule=U.compositeRule=!0;var ee=e.validate(U).replace(/validate\.schema/g,$);e.compositeRule=U.compositeRule=Y,t+=" "+ee}else{var W=W||[];W.push(t),t="",t+="  "+$+".call( ",e.opts.passContext?t+="this":t+="self",D||P.schema===!1?t+=" , "+_+" ":t+=" , "+g+" , "+_+" , validate.schema"+e.schemaPath+" ",t+=" , (dataPath || '')",e.errorPath!='""'&&(t+=" + "+e.errorPath);var V=o?"data"+(o-1||""):"parentData",me=o?e.dataPathArr[o]:"parentDataProperty";t+=" , "+V+" , "+me+" , rootData )  ";var Te=t;t=W.pop(),P.errors===!1?(t+=" "+d+" = ",j&&(t+="await "),t+=""+Te+"; "):j?(F="customErrors"+i,t+=" var "+F+" = null; try { "+d+" = await "+Te+"; } catch (e) { "+d+" = false; if (e instanceof ValidationError) "+F+" = e.errors; else throw e; } "):t+=" "+F+" = null; "+d+" = "+Te+"; "}if(P.modifying&&(t+=" if ("+V+") "+_+" = "+V+"["+me+"];"),t+=""+w,P.valid)f&&(t+=" if (true) { ");else{t+=" if ( ",P.valid===void 0?(t+=" !",z?t+=""+oe:t+=""+d):t+=" "+!P.valid+" ",t+=") { ",m=S.keyword;var W=W||[];W.push(t),t="";var W=W||[];W.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(m||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { keyword: '"+S.keyword+"' } ",e.opts.messages!==!1&&(t+=` , message: 'should pass "`+S.keyword+`" keyword validation' `),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var $e=t;t=W.pop(),!e.compositeRule&&f?e.async?t+=" throw new ValidationError(["+$e+"]); ":t+=" validate.errors = ["+$e+"]; return false; ":t+=" var err = "+$e+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var ae=t;t=W.pop(),O?P.errors?P.errors!="full"&&(t+="  for (var "+q+"="+y+"; "+q+"<errors; "+q+"++) { var "+I+" = vErrors["+q+"]; if ("+I+".dataPath === undefined) "+I+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+I+".schemaPath === undefined) { "+I+'.schemaPath = "'+l+'"; } ',e.opts.verbose&&(t+=" "+I+".schema = "+g+"; "+I+".data = "+_+"; "),t+=" } "):P.errors===!1?t+=" "+ae+" ":(t+=" if ("+y+" == errors) { "+ae+" } else {  for (var "+q+"="+y+"; "+q+"<errors; "+q+"++) { var "+I+" = vErrors["+q+"]; if ("+I+".dataPath === undefined) "+I+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+I+".schemaPath === undefined) { "+I+'.schemaPath = "'+l+'"; } ',e.opts.verbose&&(t+=" "+I+".schema = "+g+"; "+I+".data = "+_+"; "),t+=" } } "):z?(t+="   var err =   ",e.createErrors!==!1?(t+=" { keyword: '"+(m||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { keyword: '"+S.keyword+"' } ",e.opts.messages!==!1&&(t+=` , message: 'should pass "`+S.keyword+`" keyword validation' `),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; ")):P.errors===!1?t+=" "+ae+" ":(t+=" if (Array.isArray("+F+")) { if (vErrors === null) vErrors = "+F+"; else vErrors = vErrors.concat("+F+"); errors = vErrors.length;  for (var "+q+"="+y+"; "+q+"<errors; "+q+"++) { var "+I+" = vErrors["+q+"]; if ("+I+".dataPath === undefined) "+I+".dataPath = (dataPath || '') + "+e.errorPath+";  "+I+'.schemaPath = "'+l+'";  ',e.opts.verbose&&(t+=" "+I+".schema = "+g+"; "+I+".data = "+_+"; "),t+=" } } else { "+ae+" } "),t+=" } ",f&&(t+=" else { ")}return t}});var cs=B((Bh,Pp)=>{Pp.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var co=B((Zh,oo)=>{"use strict";var no=cs();oo.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:no.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:no.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}});var uo=B((Kh,lo)=>{"use strict";var Rp=/^[a-z_$][a-z0-9_$-]*$/i,wp=io(),Ip=co();lo.exports={add:Tp,get:Dp,remove:Op,validate:ls};function Tp(a,e){var r=this.RULES;if(r.keywords[a])throw new Error("Keyword "+a+" is already defined");if(!Rp.test(a))throw new Error("Keyword "+a+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var s=e.type;if(Array.isArray(s))for(var t=0;t<s.length;t++)o(a,s[t],e);else o(a,s,e);var i=e.metaSchema;i&&(e.$data&&this._opts.$data&&(i={anyOf:[i,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(i,!0))}r.keywords[a]=r.all[a]=!0;function o(n,u,l){for(var f,m=0;m<r.length;m++){var _=r[m];if(_.type==u){f=_;break}}f||(f={type:u,rules:[]},r.push(f));var d={keyword:n,definition:l,custom:!0,code:wp,implements:l.implements};f.rules.push(d),r.custom[n]=d}return this}function Dp(a){var e=this.RULES.custom[a];return e?e.definition:this.RULES.keywords[a]||!1}function Op(a){var e=this.RULES;delete e.keywords[a],delete e.all[a],delete e.custom[a];for(var r=0;r<e.length;r++)for(var s=e[r].rules,t=0;t<s.length;t++)if(s[t].keyword==a){s.splice(t,1);break}return this}function ls(a,e){ls.errors=null;var r=this._validateKeyword=this._validateKeyword||this.compile(Ip,!0);if(r(a))return!0;if(ls.errors=r.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(r.errors));return!1}});var po=B((Gh,$p)=>{$p.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var xo=B((Wh,Eo)=>{"use strict";var ho=zi(),Kt=aa(),jp=Hi(),mo=Za(),kp=es(),Ap=an(),Cp=Wn(),vo=eo(),go=Zt();Eo.exports=ge;ge.prototype.validate=qp;ge.prototype.compile=Up;ge.prototype.addSchema=Fp;ge.prototype.addMetaSchema=Lp;ge.prototype.validateSchema=Mp;ge.prototype.getSchema=zp;ge.prototype.removeSchema=Hp;ge.prototype.addFormat=Xp;ge.prototype.errorsText=Yp;ge.prototype._addSchema=Jp;ge.prototype._compile=Bp;ge.prototype.compileAsync=ao();var pa=uo();ge.prototype.addKeyword=pa.add;ge.prototype.getKeyword=pa.get;ge.prototype.removeKeyword=pa.remove;ge.prototype.validateKeyword=pa.validate;var yo=sa();ge.ValidationError=yo.Validation;ge.MissingRefError=yo.MissingRef;ge.$dataMetaSchema=vo;var da="http://json-schema.org/draft-07/schema",fo=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],Np=["/properties"];function ge(a){if(!(this instanceof ge))return new ge(a);a=this._opts=go.copy(a)||{},nf(this),this._schemas={},this._refs={},this._fragments={},this._formats=Ap(a.format),this._cache=a.cache||new jp,this._loadingSchemas={},this._compilations=[],this.RULES=Cp(),this._getId=Zp(a),a.loopRequired=a.loopRequired||1/0,a.errorDataPath=="property"&&(a._errorDataPathProperty=!0),a.serialize===void 0&&(a.serialize=kp),this._metaOpts=sf(this),a.formats&&rf(this),a.keywords&&af(this),ef(this),typeof a.meta=="object"&&this.addMetaSchema(a.meta),a.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),tf(this)}function qp(a,e){var r;if(typeof a=="string"){if(r=this.getSchema(a),!r)throw new Error('no schema with key or ref "'+a+'"')}else{var s=this._addSchema(a);r=s.validate||this._compile(s)}var t=r(e);return r.$async!==!0&&(this.errors=r.errors),t}function Up(a,e){var r=this._addSchema(a,void 0,e);return r.validate||this._compile(r)}function Fp(a,e,r,s){if(Array.isArray(a)){for(var t=0;t<a.length;t++)this.addSchema(a[t],void 0,r,s);return this}var i=this._getId(a);if(i!==void 0&&typeof i!="string")throw new Error("schema id must be string");return e=Kt.normalizeId(e||i),bo(this,e),this._schemas[e]=this._addSchema(a,r,s,!0),this}function Lp(a,e,r){return this.addSchema(a,e,r,!0),this}function Mp(a,e){var r=a.$schema;if(r!==void 0&&typeof r!="string")throw new Error("$schema must be a string");if(r=r||this._opts.defaultMeta||Qp(this),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var s=this.validate(r,a);if(!s&&e){var t="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(t);else throw new Error(t)}return s}function Qp(a){var e=a._opts.meta;return a._opts.defaultMeta=typeof e=="object"?a._getId(e)||e:a.getSchema(da)?da:void 0,a._opts.defaultMeta}function zp(a){var e=_o(this,a);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return Vp(this,a)}}function Vp(a,e){var r=Kt.schema.call(a,{schema:{}},e);if(r){var s=r.schema,t=r.root,i=r.baseId,o=ho.call(a,s,t,void 0,i);return a._fragments[e]=new mo({ref:e,fragment:!0,schema:s,root:t,baseId:i,validate:o}),o}}function _o(a,e){return e=Kt.normalizeId(e),a._schemas[e]||a._refs[e]||a._fragments[e]}function Hp(a){if(a instanceof RegExp)return ua(this,this._schemas,a),ua(this,this._refs,a),this;switch(typeof a){case"undefined":return ua(this,this._schemas),ua(this,this._refs),this._cache.clear(),this;case"string":var e=_o(this,a);return e&&this._cache.del(e.cacheKey),delete this._schemas[a],delete this._refs[a],this;case"object":var r=this._opts.serialize,s=r?r(a):a;this._cache.del(s);var t=this._getId(a);t&&(t=Kt.normalizeId(t),delete this._schemas[t],delete this._refs[t])}return this}function ua(a,e,r){for(var s in e){var t=e[s];!t.meta&&(!r||r.test(s))&&(a._cache.del(t.cacheKey),delete e[s])}}function Jp(a,e,r,s){if(typeof a!="object"&&typeof a!="boolean")throw new Error("schema should be object or boolean");var t=this._opts.serialize,i=t?t(a):a,o=this._cache.get(i);if(o)return o;s=s||this._opts.addUsedSchema!==!1;var n=Kt.normalizeId(this._getId(a));n&&s&&bo(this,n);var u=this._opts.validateSchema!==!1&&!e,l;u&&!(l=n&&n==Kt.normalizeId(a.$schema))&&this.validateSchema(a,!0);var f=Kt.ids.call(this,a),m=new mo({id:n,schema:a,localRefs:f,cacheKey:i,meta:r});return n[0]!="#"&&s&&(this._refs[n]=m),this._cache.put(i,m),u&&l&&this.validateSchema(a,!0),m}function Bp(a,e){if(a.compiling)return a.validate=t,t.schema=a.schema,t.errors=null,t.root=e||t,a.schema.$async===!0&&(t.$async=!0),t;a.compiling=!0;var r;a.meta&&(r=this._opts,this._opts=this._metaOpts);var s;try{s=ho.call(this,a.schema,e,a.localRefs)}catch(i){throw delete a.validate,i}finally{a.compiling=!1,a.meta&&(this._opts=r)}return a.validate=s,a.refs=s.refs,a.refVal=s.refVal,a.root=s.root,s;function t(){var i=a.validate,o=i.apply(this,arguments);return t.errors=i.errors,o}}function Zp(a){switch(a.schemaId){case"auto":return Wp;case"id":return Kp;default:return Gp}}function Kp(a){return a.$id&&this.logger.warn("schema $id ignored",a.$id),a.id}function Gp(a){return a.id&&this.logger.warn("schema id ignored",a.id),a.$id}function Wp(a){if(a.$id&&a.id&&a.$id!=a.id)throw new Error("schema $id is different from id");return a.$id||a.id}function Yp(a,e){if(a=a||this.errors,!a)return"No errors";e=e||{};for(var r=e.separator===void 0?", ":e.separator,s=e.dataVar===void 0?"data":e.dataVar,t="",i=0;i<a.length;i++){var o=a[i];o&&(t+=s+o.dataPath+" "+o.message+r)}return t.slice(0,-r.length)}function Xp(a,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[a]=e,this}function ef(a){var e;if(a._opts.$data&&(e=po(),a.addMetaSchema(e,e.$id,!0)),a._opts.meta!==!1){var r=cs();a._opts.$data&&(r=vo(r,Np)),a.addMetaSchema(r,da,!0),a._refs["http://json-schema.org/schema"]=da}}function tf(a){var e=a._opts.schemas;if(e)if(Array.isArray(e))a.addSchema(e);else for(var r in e)a.addSchema(e[r],r)}function rf(a){for(var e in a._opts.formats){var r=a._opts.formats[e];a.addFormat(e,r)}}function af(a){for(var e in a._opts.keywords){var r=a._opts.keywords[e];a.addKeyword(e,r)}}function bo(a,e){if(a._schemas[e]||a._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function sf(a){for(var e=go.copy(a._opts),r=0;r<fo.length;r++)delete e[fo[r]];return e}function nf(a){var e=a._opts.logger;if(e===!1)a.logger={log:us,warn:us,error:us};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");a.logger=e}}function us(){}});var c={};_l(c,{BRAND:()=>Bl,DIRTY:()=>jt,EMPTY_PATH:()=>Rl,INVALID:()=>H,NEVER:()=>$u,OK:()=>Oe,ParseStatus:()=>Ie,Schema:()=>G,ZodAny:()=>Et,ZodArray:()=>vt,ZodBigInt:()=>At,ZodBoolean:()=>Ct,ZodBranded:()=>Er,ZodCatch:()=>Jt,ZodDate:()=>Nt,ZodDefault:()=>Ht,ZodDiscriminatedUnion:()=>qr,ZodEffects:()=>Je,ZodEnum:()=>zt,ZodError:()=>Ce,ZodFirstPartyTypeKind:()=>J,ZodFunction:()=>Fr,ZodIntersection:()=>Lt,ZodIssueCode:()=>R,ZodLazy:()=>Mt,ZodLiteral:()=>Qt,ZodMap:()=>cr,ZodNaN:()=>ur,ZodNativeEnum:()=>Vt,ZodNever:()=>We,ZodNull:()=>Ut,ZodNullable:()=>it,ZodNumber:()=>kt,ZodObject:()=>Ne,ZodOptional:()=>Ve,ZodParsedType:()=>C,ZodPipeline:()=>xr,ZodPromise:()=>xt,ZodReadonly:()=>Bt,ZodRecord:()=>Ur,ZodSchema:()=>G,ZodSet:()=>lr,ZodString:()=>bt,ZodSymbol:()=>nr,ZodTransformer:()=>Je,ZodTuple:()=>st,ZodType:()=>G,ZodUndefined:()=>qt,ZodUnion:()=>Ft,ZodUnknown:()=>mt,ZodVoid:()=>or,addIssueToContext:()=>A,any:()=>ru,array:()=>nu,bigint:()=>Wl,boolean:()=>Xs,coerce:()=>Ou,custom:()=>Gs,date:()=>Yl,datetimeRegex:()=>Zs,defaultErrorMap:()=>ft,discriminatedUnion:()=>uu,effect:()=>xu,enum:()=>_u,function:()=>vu,getErrorMap:()=>ar,getParsedType:()=>at,instanceof:()=>Kl,intersection:()=>du,isAborted:()=>Cr,isAsync:()=>sr,isDirty:()=>Nr,isValid:()=>_t,late:()=>Zl,lazy:()=>gu,literal:()=>yu,makeIssue:()=>br,map:()=>hu,nan:()=>Gl,nativeEnum:()=>bu,never:()=>su,null:()=>tu,nullable:()=>Pu,number:()=>Ys,object:()=>ou,objectUtil:()=>Ra,oboolean:()=>Du,onumber:()=>Tu,optional:()=>Su,ostring:()=>Iu,pipeline:()=>wu,preprocess:()=>Ru,promise:()=>Eu,quotelessJson:()=>xl,record:()=>fu,set:()=>mu,setErrorMap:()=>Pl,strictObject:()=>cu,string:()=>Ws,symbol:()=>Xl,transformer:()=>xu,tuple:()=>pu,undefined:()=>eu,union:()=>lu,unknown:()=>au,util:()=>X,void:()=>iu});var X;(function(a){a.assertEqual=t=>{};function e(t){}a.assertIs=e;function r(t){throw new Error}a.assertNever=r,a.arrayToEnum=t=>{let i={};for(let o of t)i[o]=o;return i},a.getValidEnumValues=t=>{let i=a.objectKeys(t).filter(n=>typeof t[t[n]]!="number"),o={};for(let n of i)o[n]=t[n];return a.objectValues(o)},a.objectValues=t=>a.objectKeys(t).map(function(i){return t[i]}),a.objectKeys=typeof Object.keys=="function"?t=>Object.keys(t):t=>{let i=[];for(let o in t)Object.prototype.hasOwnProperty.call(t,o)&&i.push(o);return i},a.find=(t,i)=>{for(let o of t)if(i(o))return o},a.isInteger=typeof Number.isInteger=="function"?t=>Number.isInteger(t):t=>typeof t=="number"&&Number.isFinite(t)&&Math.floor(t)===t;function s(t,i=" | "){return t.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}a.joinValues=s,a.jsonStringifyReplacer=(t,i)=>typeof i=="bigint"?i.toString():i})(X||(X={}));var Ra;(function(a){a.mergeShapes=(e,r)=>({...e,...r})})(Ra||(Ra={}));var C=X.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),at=a=>{switch(typeof a){case"undefined":return C.undefined;case"string":return C.string;case"number":return Number.isNaN(a)?C.nan:C.number;case"boolean":return C.boolean;case"function":return C.function;case"bigint":return C.bigint;case"symbol":return C.symbol;case"object":return Array.isArray(a)?C.array:a===null?C.null:a.then&&typeof a.then=="function"&&a.catch&&typeof a.catch=="function"?C.promise:typeof Map<"u"&&a instanceof Map?C.map:typeof Set<"u"&&a instanceof Set?C.set:typeof Date<"u"&&a instanceof Date?C.date:C.object;default:return C.unknown}};var R=X.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),xl=a=>JSON.stringify(a,null,2).replace(/"([^"]+)":/g,"$1:"),Ce=class a extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(i){return i.message},s={_errors:[]},t=i=>{for(let o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(t);else if(o.code==="invalid_return_type")t(o.returnTypeError);else if(o.code==="invalid_arguments")t(o.argumentsError);else if(o.path.length===0)s._errors.push(r(o));else{let n=s,u=0;for(;u<o.path.length;){let l=o.path[u];u===o.path.length-1?(n[l]=n[l]||{_errors:[]},n[l]._errors.push(r(o))):n[l]=n[l]||{_errors:[]},n=n[l],u++}}};return t(this),s}static assert(e){if(!(e instanceof a))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,X.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},s=[];for(let t of this.issues)if(t.path.length>0){let i=t.path[0];r[i]=r[i]||[],r[i].push(e(t))}else s.push(e(t));return{formErrors:s,fieldErrors:r}}get formErrors(){return this.flatten()}};Ce.create=a=>new Ce(a);var Sl=(a,e)=>{let r;switch(a.code){case R.invalid_type:a.received===C.undefined?r="Required":r=`Expected ${a.expected}, received ${a.received}`;break;case R.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(a.expected,X.jsonStringifyReplacer)}`;break;case R.unrecognized_keys:r=`Unrecognized key(s) in object: ${X.joinValues(a.keys,", ")}`;break;case R.invalid_union:r="Invalid input";break;case R.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${X.joinValues(a.options)}`;break;case R.invalid_enum_value:r=`Invalid enum value. Expected ${X.joinValues(a.options)}, received '${a.received}'`;break;case R.invalid_arguments:r="Invalid function arguments";break;case R.invalid_return_type:r="Invalid function return type";break;case R.invalid_date:r="Invalid date";break;case R.invalid_string:typeof a.validation=="object"?"includes"in a.validation?(r=`Invalid input: must include "${a.validation.includes}"`,typeof a.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${a.validation.position}`)):"startsWith"in a.validation?r=`Invalid input: must start with "${a.validation.startsWith}"`:"endsWith"in a.validation?r=`Invalid input: must end with "${a.validation.endsWith}"`:X.assertNever(a.validation):a.validation!=="regex"?r=`Invalid ${a.validation}`:r="Invalid";break;case R.too_small:a.type==="array"?r=`Array must contain ${a.exact?"exactly":a.inclusive?"at least":"more than"} ${a.minimum} element(s)`:a.type==="string"?r=`String must contain ${a.exact?"exactly":a.inclusive?"at least":"over"} ${a.minimum} character(s)`:a.type==="number"?r=`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:a.type==="bigint"?r=`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:a.type==="date"?r=`Date must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(a.minimum))}`:r="Invalid input";break;case R.too_big:a.type==="array"?r=`Array must contain ${a.exact?"exactly":a.inclusive?"at most":"less than"} ${a.maximum} element(s)`:a.type==="string"?r=`String must contain ${a.exact?"exactly":a.inclusive?"at most":"under"} ${a.maximum} character(s)`:a.type==="number"?r=`Number must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="bigint"?r=`BigInt must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="date"?r=`Date must be ${a.exact?"exactly":a.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(a.maximum))}`:r="Invalid input";break;case R.custom:r="Invalid input";break;case R.invalid_intersection_types:r="Intersection results could not be merged";break;case R.not_multiple_of:r=`Number must be a multiple of ${a.multipleOf}`;break;case R.not_finite:r="Number must be finite";break;default:r=e.defaultError,X.assertNever(a)}return{message:r}},ft=Sl;var zs=ft;function Pl(a){zs=a}function ar(){return zs}var br=a=>{let{data:e,path:r,errorMaps:s,issueData:t}=a,i=[...r,...t.path||[]],o={...t,path:i};if(t.message!==void 0)return{...t,path:i,message:t.message};let n="",u=s.filter(l=>!!l).slice().reverse();for(let l of u)n=l(o,{data:e,defaultError:n}).message;return{...t,path:i,message:n}},Rl=[];function A(a,e){let r=ar(),s=br({issueData:e,data:a.data,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,r,r===ft?void 0:ft].filter(t=>!!t)});a.common.issues.push(s)}var Ie=class a{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let s=[];for(let t of r){if(t.status==="aborted")return H;t.status==="dirty"&&e.dirty(),s.push(t.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,r){let s=[];for(let t of r){let i=await t.key,o=await t.value;s.push({key:i,value:o})}return a.mergeObjectSync(e,s)}static mergeObjectSync(e,r){let s={};for(let t of r){let{key:i,value:o}=t;if(i.status==="aborted"||o.status==="aborted")return H;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||t.alwaysSet)&&(s[i.value]=o.value)}return{status:e.value,value:s}}},H=Object.freeze({status:"aborted"}),jt=a=>({status:"dirty",value:a}),Oe=a=>({status:"valid",value:a}),Cr=a=>a.status==="aborted",Nr=a=>a.status==="dirty",_t=a=>a.status==="valid",sr=a=>typeof Promise<"u"&&a instanceof Promise;var Q;(function(a){a.errToObj=e=>typeof e=="string"?{message:e}:e||{},a.toString=e=>typeof e=="string"?e:e?.message})(Q||(Q={}));var He=class{constructor(e,r,s,t){this._cachedPath=[],this.parent=e,this.data=r,this._path=s,this._key=t}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Vs=(a,e)=>{if(_t(e))return{success:!0,data:e.value};if(!a.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Ce(a.common.issues);return this._error=r,this._error}}};function Z(a){if(!a)return{};let{errorMap:e,invalid_type_error:r,required_error:s,description:t}=a;if(e&&(r||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:t}:{errorMap:(o,n)=>{let{message:u}=a;return o.code==="invalid_enum_value"?{message:u??n.defaultError}:typeof n.data>"u"?{message:u??s??n.defaultError}:o.code!=="invalid_type"?{message:n.defaultError}:{message:u??r??n.defaultError}},description:t}}var G=class{get description(){return this._def.description}_getType(e){return at(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:at(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ie,ctx:{common:e.parent.common,data:e.data,parsedType:at(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(sr(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let s=this.safeParse(e,r);if(s.success)return s.data;throw s.error}safeParse(e,r){let s={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:at(e)},t=this._parseSync({data:e,path:s.path,parent:s});return Vs(s,t)}"~validate"(e){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:at(e)};if(!this["~standard"].async)try{let s=this._parseSync({data:e,path:[],parent:r});return _t(s)?{value:s.value}:{issues:r.common.issues}}catch(s){s?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(s=>_t(s)?{value:s.value}:{issues:r.common.issues})}async parseAsync(e,r){let s=await this.safeParseAsync(e,r);if(s.success)return s.data;throw s.error}async safeParseAsync(e,r){let s={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:at(e)},t=this._parse({data:e,path:s.path,parent:s}),i=await(sr(t)?t:Promise.resolve(t));return Vs(s,i)}refine(e,r){let s=t=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(t):r;return this._refinement((t,i)=>{let o=e(t),n=()=>i.addIssue({code:R.custom,...s(t)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(n(),!1)):o?!0:(n(),!1)})}refinement(e,r){return this._refinement((s,t)=>e(s)?!0:(t.addIssue(typeof r=="function"?r(s,t):r),!1))}_refinement(e){return new Je({schema:this,typeName:J.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Ve.create(this,this._def)}nullable(){return it.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return vt.create(this)}promise(){return xt.create(this,this._def)}or(e){return Ft.create([this,e],this._def)}and(e){return Lt.create(this,e,this._def)}transform(e){return new Je({...Z(this._def),schema:this,typeName:J.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Ht({...Z(this._def),innerType:this,defaultValue:r,typeName:J.ZodDefault})}brand(){return new Er({typeName:J.ZodBranded,type:this,...Z(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Jt({...Z(this._def),innerType:this,catchValue:r,typeName:J.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return xr.create(this,e)}readonly(){return Bt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},wl=/^c[^\s-]{8,}$/i,Il=/^[0-9a-z]+$/,Tl=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Dl=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Ol=/^[a-z0-9_-]{21}$/i,$l=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,jl=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,kl=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Al="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",wa,Cl=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Nl=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ql=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Ul=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Fl=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Ll=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Js="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Ml=new RegExp(`^${Js}$`);function Bs(a){let e="[0-5]\\d";a.precision?e=`${e}\\.\\d{${a.precision}}`:a.precision==null&&(e=`${e}(\\.\\d+)?`);let r=a.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function Ql(a){return new RegExp(`^${Bs(a)}$`)}function Zs(a){let e=`${Js}T${Bs(a)}`,r=[];return r.push(a.local?"Z?":"Z"),a.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function zl(a,e){return!!((e==="v4"||!e)&&Cl.test(a)||(e==="v6"||!e)&&ql.test(a))}function Vl(a,e){if(!$l.test(a))return!1;try{let[r]=a.split(".");if(!r)return!1;let s=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),t=JSON.parse(atob(s));return!(typeof t!="object"||t===null||"typ"in t&&t?.typ!=="JWT"||!t.alg||e&&t.alg!==e)}catch{return!1}}function Hl(a,e){return!!((e==="v4"||!e)&&Nl.test(a)||(e==="v6"||!e)&&Ul.test(a))}var bt=class a extends G{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==C.string){let i=this._getOrReturnCtx(e);return A(i,{code:R.invalid_type,expected:C.string,received:i.parsedType}),H}let s=new Ie,t;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(t=this._getOrReturnCtx(e,t),A(t,{code:R.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="max")e.data.length>i.value&&(t=this._getOrReturnCtx(e,t),A(t,{code:R.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="length"){let o=e.data.length>i.value,n=e.data.length<i.value;(o||n)&&(t=this._getOrReturnCtx(e,t),o?A(t,{code:R.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):n&&A(t,{code:R.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),s.dirty())}else if(i.kind==="email")kl.test(e.data)||(t=this._getOrReturnCtx(e,t),A(t,{validation:"email",code:R.invalid_string,message:i.message}),s.dirty());else if(i.kind==="emoji")wa||(wa=new RegExp(Al,"u")),wa.test(e.data)||(t=this._getOrReturnCtx(e,t),A(t,{validation:"emoji",code:R.invalid_string,message:i.message}),s.dirty());else if(i.kind==="uuid")Dl.test(e.data)||(t=this._getOrReturnCtx(e,t),A(t,{validation:"uuid",code:R.invalid_string,message:i.message}),s.dirty());else if(i.kind==="nanoid")Ol.test(e.data)||(t=this._getOrReturnCtx(e,t),A(t,{validation:"nanoid",code:R.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid")wl.test(e.data)||(t=this._getOrReturnCtx(e,t),A(t,{validation:"cuid",code:R.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid2")Il.test(e.data)||(t=this._getOrReturnCtx(e,t),A(t,{validation:"cuid2",code:R.invalid_string,message:i.message}),s.dirty());else if(i.kind==="ulid")Tl.test(e.data)||(t=this._getOrReturnCtx(e,t),A(t,{validation:"ulid",code:R.invalid_string,message:i.message}),s.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{t=this._getOrReturnCtx(e,t),A(t,{validation:"url",code:R.invalid_string,message:i.message}),s.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(t=this._getOrReturnCtx(e,t),A(t,{validation:"regex",code:R.invalid_string,message:i.message}),s.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(t=this._getOrReturnCtx(e,t),A(t,{code:R.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),s.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(t=this._getOrReturnCtx(e,t),A(t,{code:R.invalid_string,validation:{startsWith:i.value},message:i.message}),s.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(t=this._getOrReturnCtx(e,t),A(t,{code:R.invalid_string,validation:{endsWith:i.value},message:i.message}),s.dirty()):i.kind==="datetime"?Zs(i).test(e.data)||(t=this._getOrReturnCtx(e,t),A(t,{code:R.invalid_string,validation:"datetime",message:i.message}),s.dirty()):i.kind==="date"?Ml.test(e.data)||(t=this._getOrReturnCtx(e,t),A(t,{code:R.invalid_string,validation:"date",message:i.message}),s.dirty()):i.kind==="time"?Ql(i).test(e.data)||(t=this._getOrReturnCtx(e,t),A(t,{code:R.invalid_string,validation:"time",message:i.message}),s.dirty()):i.kind==="duration"?jl.test(e.data)||(t=this._getOrReturnCtx(e,t),A(t,{validation:"duration",code:R.invalid_string,message:i.message}),s.dirty()):i.kind==="ip"?zl(e.data,i.version)||(t=this._getOrReturnCtx(e,t),A(t,{validation:"ip",code:R.invalid_string,message:i.message}),s.dirty()):i.kind==="jwt"?Vl(e.data,i.alg)||(t=this._getOrReturnCtx(e,t),A(t,{validation:"jwt",code:R.invalid_string,message:i.message}),s.dirty()):i.kind==="cidr"?Hl(e.data,i.version)||(t=this._getOrReturnCtx(e,t),A(t,{validation:"cidr",code:R.invalid_string,message:i.message}),s.dirty()):i.kind==="base64"?Fl.test(e.data)||(t=this._getOrReturnCtx(e,t),A(t,{validation:"base64",code:R.invalid_string,message:i.message}),s.dirty()):i.kind==="base64url"?Ll.test(e.data)||(t=this._getOrReturnCtx(e,t),A(t,{validation:"base64url",code:R.invalid_string,message:i.message}),s.dirty()):X.assertNever(i);return{status:s.value,value:e.data}}_regex(e,r,s){return this.refinement(t=>e.test(t),{validation:r,code:R.invalid_string,...Q.errToObj(s)})}_addCheck(e){return new a({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Q.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Q.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Q.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Q.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Q.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Q.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Q.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Q.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Q.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Q.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Q.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Q.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Q.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...Q.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Q.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Q.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Q.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...Q.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Q.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Q.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Q.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Q.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Q.errToObj(r)})}nonempty(e){return this.min(1,Q.errToObj(e))}trim(){return new a({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new a({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new a({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};bt.create=a=>new bt({checks:[],typeName:J.ZodString,coerce:a?.coerce??!1,...Z(a)});function Jl(a,e){let r=(a.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,t=r>s?r:s,i=Number.parseInt(a.toFixed(t).replace(".","")),o=Number.parseInt(e.toFixed(t).replace(".",""));return i%o/10**t}var kt=class a extends G{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==C.number){let i=this._getOrReturnCtx(e);return A(i,{code:R.invalid_type,expected:C.number,received:i.parsedType}),H}let s,t=new Ie;for(let i of this._def.checks)i.kind==="int"?X.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),A(s,{code:R.invalid_type,expected:"integer",received:"float",message:i.message}),t.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),A(s,{code:R.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),t.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),A(s,{code:R.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),t.dirty()):i.kind==="multipleOf"?Jl(e.data,i.value)!==0&&(s=this._getOrReturnCtx(e,s),A(s,{code:R.not_multiple_of,multipleOf:i.value,message:i.message}),t.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),A(s,{code:R.not_finite,message:i.message}),t.dirty()):X.assertNever(i);return{status:t.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Q.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Q.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Q.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Q.toString(r))}setLimit(e,r,s,t){return new a({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:s,message:Q.toString(t)}]})}_addCheck(e){return new a({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Q.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Q.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Q.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Q.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Q.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Q.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Q.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Q.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Q.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&X.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(r===null||s.value>r)&&(r=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(r)&&Number.isFinite(e)}};kt.create=a=>new kt({checks:[],typeName:J.ZodNumber,coerce:a?.coerce||!1,...Z(a)});var At=class a extends G{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==C.bigint)return this._getInvalidInput(e);let s,t=new Ie;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),A(s,{code:R.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),t.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),A(s,{code:R.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),t.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),A(s,{code:R.not_multiple_of,multipleOf:i.value,message:i.message}),t.dirty()):X.assertNever(i);return{status:t.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return A(r,{code:R.invalid_type,expected:C.bigint,received:r.parsedType}),H}gte(e,r){return this.setLimit("min",e,!0,Q.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Q.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Q.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Q.toString(r))}setLimit(e,r,s,t){return new a({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:s,message:Q.toString(t)}]})}_addCheck(e){return new a({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Q.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Q.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Q.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Q.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Q.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};At.create=a=>new At({checks:[],typeName:J.ZodBigInt,coerce:a?.coerce??!1,...Z(a)});var Ct=class extends G{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==C.boolean){let s=this._getOrReturnCtx(e);return A(s,{code:R.invalid_type,expected:C.boolean,received:s.parsedType}),H}return Oe(e.data)}};Ct.create=a=>new Ct({typeName:J.ZodBoolean,coerce:a?.coerce||!1,...Z(a)});var Nt=class a extends G{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==C.date){let i=this._getOrReturnCtx(e);return A(i,{code:R.invalid_type,expected:C.date,received:i.parsedType}),H}if(Number.isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return A(i,{code:R.invalid_date}),H}let s=new Ie,t;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(t=this._getOrReturnCtx(e,t),A(t,{code:R.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),s.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(t=this._getOrReturnCtx(e,t),A(t,{code:R.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),s.dirty()):X.assertNever(i);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new a({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Q.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Q.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Nt.create=a=>new Nt({checks:[],coerce:a?.coerce||!1,typeName:J.ZodDate,...Z(a)});var nr=class extends G{_parse(e){if(this._getType(e)!==C.symbol){let s=this._getOrReturnCtx(e);return A(s,{code:R.invalid_type,expected:C.symbol,received:s.parsedType}),H}return Oe(e.data)}};nr.create=a=>new nr({typeName:J.ZodSymbol,...Z(a)});var qt=class extends G{_parse(e){if(this._getType(e)!==C.undefined){let s=this._getOrReturnCtx(e);return A(s,{code:R.invalid_type,expected:C.undefined,received:s.parsedType}),H}return Oe(e.data)}};qt.create=a=>new qt({typeName:J.ZodUndefined,...Z(a)});var Ut=class extends G{_parse(e){if(this._getType(e)!==C.null){let s=this._getOrReturnCtx(e);return A(s,{code:R.invalid_type,expected:C.null,received:s.parsedType}),H}return Oe(e.data)}};Ut.create=a=>new Ut({typeName:J.ZodNull,...Z(a)});var Et=class extends G{constructor(){super(...arguments),this._any=!0}_parse(e){return Oe(e.data)}};Et.create=a=>new Et({typeName:J.ZodAny,...Z(a)});var mt=class extends G{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Oe(e.data)}};mt.create=a=>new mt({typeName:J.ZodUnknown,...Z(a)});var We=class extends G{_parse(e){let r=this._getOrReturnCtx(e);return A(r,{code:R.invalid_type,expected:C.never,received:r.parsedType}),H}};We.create=a=>new We({typeName:J.ZodNever,...Z(a)});var or=class extends G{_parse(e){if(this._getType(e)!==C.undefined){let s=this._getOrReturnCtx(e);return A(s,{code:R.invalid_type,expected:C.void,received:s.parsedType}),H}return Oe(e.data)}};or.create=a=>new or({typeName:J.ZodVoid,...Z(a)});var vt=class a extends G{_parse(e){let{ctx:r,status:s}=this._processInputParams(e),t=this._def;if(r.parsedType!==C.array)return A(r,{code:R.invalid_type,expected:C.array,received:r.parsedType}),H;if(t.exactLength!==null){let o=r.data.length>t.exactLength.value,n=r.data.length<t.exactLength.value;(o||n)&&(A(r,{code:o?R.too_big:R.too_small,minimum:n?t.exactLength.value:void 0,maximum:o?t.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:t.exactLength.message}),s.dirty())}if(t.minLength!==null&&r.data.length<t.minLength.value&&(A(r,{code:R.too_small,minimum:t.minLength.value,type:"array",inclusive:!0,exact:!1,message:t.minLength.message}),s.dirty()),t.maxLength!==null&&r.data.length>t.maxLength.value&&(A(r,{code:R.too_big,maximum:t.maxLength.value,type:"array",inclusive:!0,exact:!1,message:t.maxLength.message}),s.dirty()),r.common.async)return Promise.all([...r.data].map((o,n)=>t.type._parseAsync(new He(r,o,r.path,n)))).then(o=>Ie.mergeArray(s,o));let i=[...r.data].map((o,n)=>t.type._parseSync(new He(r,o,r.path,n)));return Ie.mergeArray(s,i)}get element(){return this._def.type}min(e,r){return new a({...this._def,minLength:{value:e,message:Q.toString(r)}})}max(e,r){return new a({...this._def,maxLength:{value:e,message:Q.toString(r)}})}length(e,r){return new a({...this._def,exactLength:{value:e,message:Q.toString(r)}})}nonempty(e){return this.min(1,e)}};vt.create=(a,e)=>new vt({type:a,minLength:null,maxLength:null,exactLength:null,typeName:J.ZodArray,...Z(e)});function ir(a){if(a instanceof Ne){let e={};for(let r in a.shape){let s=a.shape[r];e[r]=Ve.create(ir(s))}return new Ne({...a._def,shape:()=>e})}else return a instanceof vt?new vt({...a._def,type:ir(a.element)}):a instanceof Ve?Ve.create(ir(a.unwrap())):a instanceof it?it.create(ir(a.unwrap())):a instanceof st?st.create(a.items.map(e=>ir(e))):a}var Ne=class a extends G{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=X.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==C.object){let l=this._getOrReturnCtx(e);return A(l,{code:R.invalid_type,expected:C.object,received:l.parsedType}),H}let{status:s,ctx:t}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),n=[];if(!(this._def.catchall instanceof We&&this._def.unknownKeys==="strip"))for(let l in t.data)o.includes(l)||n.push(l);let u=[];for(let l of o){let f=i[l],m=t.data[l];u.push({key:{status:"valid",value:l},value:f._parse(new He(t,m,t.path,l)),alwaysSet:l in t.data})}if(this._def.catchall instanceof We){let l=this._def.unknownKeys;if(l==="passthrough")for(let f of n)u.push({key:{status:"valid",value:f},value:{status:"valid",value:t.data[f]}});else if(l==="strict")n.length>0&&(A(t,{code:R.unrecognized_keys,keys:n}),s.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let l=this._def.catchall;for(let f of n){let m=t.data[f];u.push({key:{status:"valid",value:f},value:l._parse(new He(t,m,t.path,f)),alwaysSet:f in t.data})}}return t.common.async?Promise.resolve().then(async()=>{let l=[];for(let f of u){let m=await f.key,_=await f.value;l.push({key:m,value:_,alwaysSet:f.alwaysSet})}return l}).then(l=>Ie.mergeObjectSync(s,l)):Ie.mergeObjectSync(s,u)}get shape(){return this._def.shape()}strict(e){return Q.errToObj,new a({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,s)=>{let t=this._def.errorMap?.(r,s).message??s.defaultError;return r.code==="unrecognized_keys"?{message:Q.errToObj(e).message??t}:{message:t}}}:{}})}strip(){return new a({...this._def,unknownKeys:"strip"})}passthrough(){return new a({...this._def,unknownKeys:"passthrough"})}extend(e){return new a({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new a({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:J.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new a({...this._def,catchall:e})}pick(e){let r={};for(let s of X.objectKeys(e))e[s]&&this.shape[s]&&(r[s]=this.shape[s]);return new a({...this._def,shape:()=>r})}omit(e){let r={};for(let s of X.objectKeys(this.shape))e[s]||(r[s]=this.shape[s]);return new a({...this._def,shape:()=>r})}deepPartial(){return ir(this)}partial(e){let r={};for(let s of X.objectKeys(this.shape)){let t=this.shape[s];e&&!e[s]?r[s]=t:r[s]=t.optional()}return new a({...this._def,shape:()=>r})}required(e){let r={};for(let s of X.objectKeys(this.shape))if(e&&!e[s])r[s]=this.shape[s];else{let i=this.shape[s];for(;i instanceof Ve;)i=i._def.innerType;r[s]=i}return new a({...this._def,shape:()=>r})}keyof(){return Ks(X.objectKeys(this.shape))}};Ne.create=(a,e)=>new Ne({shape:()=>a,unknownKeys:"strip",catchall:We.create(),typeName:J.ZodObject,...Z(e)});Ne.strictCreate=(a,e)=>new Ne({shape:()=>a,unknownKeys:"strict",catchall:We.create(),typeName:J.ZodObject,...Z(e)});Ne.lazycreate=(a,e)=>new Ne({shape:a,unknownKeys:"strip",catchall:We.create(),typeName:J.ZodObject,...Z(e)});var Ft=class extends G{_parse(e){let{ctx:r}=this._processInputParams(e),s=this._def.options;function t(i){for(let n of i)if(n.result.status==="valid")return n.result;for(let n of i)if(n.result.status==="dirty")return r.common.issues.push(...n.ctx.common.issues),n.result;let o=i.map(n=>new Ce(n.ctx.common.issues));return A(r,{code:R.invalid_union,unionErrors:o}),H}if(r.common.async)return Promise.all(s.map(async i=>{let o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(t);{let i,o=[];for(let u of s){let l={...r,common:{...r.common,issues:[]},parent:null},f=u._parseSync({data:r.data,path:r.path,parent:l});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;let n=o.map(u=>new Ce(u));return A(r,{code:R.invalid_union,unionErrors:n}),H}}get options(){return this._def.options}};Ft.create=(a,e)=>new Ft({options:a,typeName:J.ZodUnion,...Z(e)});var ht=a=>a instanceof Mt?ht(a.schema):a instanceof Je?ht(a.innerType()):a instanceof Qt?[a.value]:a instanceof zt?a.options:a instanceof Vt?X.objectValues(a.enum):a instanceof Ht?ht(a._def.innerType):a instanceof qt?[void 0]:a instanceof Ut?[null]:a instanceof Ve?[void 0,...ht(a.unwrap())]:a instanceof it?[null,...ht(a.unwrap())]:a instanceof Er||a instanceof Bt?ht(a.unwrap()):a instanceof Jt?ht(a._def.innerType):[],qr=class a extends G{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==C.object)return A(r,{code:R.invalid_type,expected:C.object,received:r.parsedType}),H;let s=this.discriminator,t=r.data[s],i=this.optionsMap.get(t);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(A(r,{code:R.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),H)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,s){let t=new Map;for(let i of r){let o=ht(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let n of o){if(t.has(n))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);t.set(n,i)}}return new a({typeName:J.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:t,...Z(s)})}};function Ia(a,e){let r=at(a),s=at(e);if(a===e)return{valid:!0,data:a};if(r===C.object&&s===C.object){let t=X.objectKeys(e),i=X.objectKeys(a).filter(n=>t.indexOf(n)!==-1),o={...a,...e};for(let n of i){let u=Ia(a[n],e[n]);if(!u.valid)return{valid:!1};o[n]=u.data}return{valid:!0,data:o}}else if(r===C.array&&s===C.array){if(a.length!==e.length)return{valid:!1};let t=[];for(let i=0;i<a.length;i++){let o=a[i],n=e[i],u=Ia(o,n);if(!u.valid)return{valid:!1};t.push(u.data)}return{valid:!0,data:t}}else return r===C.date&&s===C.date&&+a==+e?{valid:!0,data:a}:{valid:!1}}var Lt=class extends G{_parse(e){let{status:r,ctx:s}=this._processInputParams(e),t=(i,o)=>{if(Cr(i)||Cr(o))return H;let n=Ia(i.value,o.value);return n.valid?((Nr(i)||Nr(o))&&r.dirty(),{status:r.value,value:n.data}):(A(s,{code:R.invalid_intersection_types}),H)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,o])=>t(i,o)):t(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}};Lt.create=(a,e,r)=>new Lt({left:a,right:e,typeName:J.ZodIntersection,...Z(r)});var st=class a extends G{_parse(e){let{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==C.array)return A(s,{code:R.invalid_type,expected:C.array,received:s.parsedType}),H;if(s.data.length<this._def.items.length)return A(s,{code:R.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),H;!this._def.rest&&s.data.length>this._def.items.length&&(A(s,{code:R.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let i=[...s.data].map((o,n)=>{let u=this._def.items[n]||this._def.rest;return u?u._parse(new He(s,o,s.path,n)):null}).filter(o=>!!o);return s.common.async?Promise.all(i).then(o=>Ie.mergeArray(r,o)):Ie.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new a({...this._def,rest:e})}};st.create=(a,e)=>{if(!Array.isArray(a))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new st({items:a,typeName:J.ZodTuple,rest:null,...Z(e)})};var Ur=class a extends G{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==C.object)return A(s,{code:R.invalid_type,expected:C.object,received:s.parsedType}),H;let t=[],i=this._def.keyType,o=this._def.valueType;for(let n in s.data)t.push({key:i._parse(new He(s,n,s.path,n)),value:o._parse(new He(s,s.data[n],s.path,n)),alwaysSet:n in s.data});return s.common.async?Ie.mergeObjectAsync(r,t):Ie.mergeObjectSync(r,t)}get element(){return this._def.valueType}static create(e,r,s){return r instanceof G?new a({keyType:e,valueType:r,typeName:J.ZodRecord,...Z(s)}):new a({keyType:bt.create(),valueType:e,typeName:J.ZodRecord,...Z(r)})}},cr=class extends G{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==C.map)return A(s,{code:R.invalid_type,expected:C.map,received:s.parsedType}),H;let t=this._def.keyType,i=this._def.valueType,o=[...s.data.entries()].map(([n,u],l)=>({key:t._parse(new He(s,n,s.path,[l,"key"])),value:i._parse(new He(s,u,s.path,[l,"value"]))}));if(s.common.async){let n=new Map;return Promise.resolve().then(async()=>{for(let u of o){let l=await u.key,f=await u.value;if(l.status==="aborted"||f.status==="aborted")return H;(l.status==="dirty"||f.status==="dirty")&&r.dirty(),n.set(l.value,f.value)}return{status:r.value,value:n}})}else{let n=new Map;for(let u of o){let l=u.key,f=u.value;if(l.status==="aborted"||f.status==="aborted")return H;(l.status==="dirty"||f.status==="dirty")&&r.dirty(),n.set(l.value,f.value)}return{status:r.value,value:n}}}};cr.create=(a,e,r)=>new cr({valueType:e,keyType:a,typeName:J.ZodMap,...Z(r)});var lr=class a extends G{_parse(e){let{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==C.set)return A(s,{code:R.invalid_type,expected:C.set,received:s.parsedType}),H;let t=this._def;t.minSize!==null&&s.data.size<t.minSize.value&&(A(s,{code:R.too_small,minimum:t.minSize.value,type:"set",inclusive:!0,exact:!1,message:t.minSize.message}),r.dirty()),t.maxSize!==null&&s.data.size>t.maxSize.value&&(A(s,{code:R.too_big,maximum:t.maxSize.value,type:"set",inclusive:!0,exact:!1,message:t.maxSize.message}),r.dirty());let i=this._def.valueType;function o(u){let l=new Set;for(let f of u){if(f.status==="aborted")return H;f.status==="dirty"&&r.dirty(),l.add(f.value)}return{status:r.value,value:l}}let n=[...s.data.values()].map((u,l)=>i._parse(new He(s,u,s.path,l)));return s.common.async?Promise.all(n).then(u=>o(u)):o(n)}min(e,r){return new a({...this._def,minSize:{value:e,message:Q.toString(r)}})}max(e,r){return new a({...this._def,maxSize:{value:e,message:Q.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};lr.create=(a,e)=>new lr({valueType:a,minSize:null,maxSize:null,typeName:J.ZodSet,...Z(e)});var Fr=class a extends G{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==C.function)return A(r,{code:R.invalid_type,expected:C.function,received:r.parsedType}),H;function s(n,u){return br({data:n,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,ar(),ft].filter(l=>!!l),issueData:{code:R.invalid_arguments,argumentsError:u}})}function t(n,u){return br({data:n,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,ar(),ft].filter(l=>!!l),issueData:{code:R.invalid_return_type,returnTypeError:u}})}let i={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof xt){let n=this;return Oe(async function(...u){let l=new Ce([]),f=await n._def.args.parseAsync(u,i).catch(d=>{throw l.addIssue(s(u,d)),l}),m=await Reflect.apply(o,this,f);return await n._def.returns._def.type.parseAsync(m,i).catch(d=>{throw l.addIssue(t(m,d)),l})})}else{let n=this;return Oe(function(...u){let l=n._def.args.safeParse(u,i);if(!l.success)throw new Ce([s(u,l.error)]);let f=Reflect.apply(o,this,l.data),m=n._def.returns.safeParse(f,i);if(!m.success)throw new Ce([t(f,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new a({...this._def,args:st.create(e).rest(mt.create())})}returns(e){return new a({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,s){return new a({args:e||st.create([]).rest(mt.create()),returns:r||mt.create(),typeName:J.ZodFunction,...Z(s)})}},Mt=class extends G{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Mt.create=(a,e)=>new Mt({getter:a,typeName:J.ZodLazy,...Z(e)});var Qt=class extends G{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return A(r,{received:r.data,code:R.invalid_literal,expected:this._def.value}),H}return{status:"valid",value:e.data}}get value(){return this._def.value}};Qt.create=(a,e)=>new Qt({value:a,typeName:J.ZodLiteral,...Z(e)});function Ks(a,e){return new zt({values:a,typeName:J.ZodEnum,...Z(e)})}var zt=class a extends G{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),s=this._def.values;return A(r,{expected:X.joinValues(s),received:r.parsedType,code:R.invalid_type}),H}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let r=this._getOrReturnCtx(e),s=this._def.values;return A(r,{received:r.data,code:R.invalid_enum_value,options:s}),H}return Oe(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return a.create(e,{...this._def,...r})}exclude(e,r=this._def){return a.create(this.options.filter(s=>!e.includes(s)),{...this._def,...r})}};zt.create=Ks;var Vt=class extends G{_parse(e){let r=X.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==C.string&&s.parsedType!==C.number){let t=X.objectValues(r);return A(s,{expected:X.joinValues(t),received:s.parsedType,code:R.invalid_type}),H}if(this._cache||(this._cache=new Set(X.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let t=X.objectValues(r);return A(s,{received:s.data,code:R.invalid_enum_value,options:t}),H}return Oe(e.data)}get enum(){return this._def.values}};Vt.create=(a,e)=>new Vt({values:a,typeName:J.ZodNativeEnum,...Z(e)});var xt=class extends G{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==C.promise&&r.common.async===!1)return A(r,{code:R.invalid_type,expected:C.promise,received:r.parsedType}),H;let s=r.parsedType===C.promise?r.data:Promise.resolve(r.data);return Oe(s.then(t=>this._def.type.parseAsync(t,{path:r.path,errorMap:r.common.contextualErrorMap})))}};xt.create=(a,e)=>new xt({type:a,typeName:J.ZodPromise,...Z(e)});var Je=class extends G{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===J.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:s}=this._processInputParams(e),t=this._def.effect||null,i={addIssue:o=>{A(s,o),o.fatal?r.abort():r.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),t.type==="preprocess"){let o=t.transform(s.data,i);if(s.common.async)return Promise.resolve(o).then(async n=>{if(r.value==="aborted")return H;let u=await this._def.schema._parseAsync({data:n,path:s.path,parent:s});return u.status==="aborted"?H:u.status==="dirty"?jt(u.value):r.value==="dirty"?jt(u.value):u});{if(r.value==="aborted")return H;let n=this._def.schema._parseSync({data:o,path:s.path,parent:s});return n.status==="aborted"?H:n.status==="dirty"?jt(n.value):r.value==="dirty"?jt(n.value):n}}if(t.type==="refinement"){let o=n=>{let u=t.refinement(n,i);if(s.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return n};if(s.common.async===!1){let n=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?H:(n.status==="dirty"&&r.dirty(),o(n.value),{status:r.value,value:n.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(n=>n.status==="aborted"?H:(n.status==="dirty"&&r.dirty(),o(n.value).then(()=>({status:r.value,value:n.value}))))}if(t.type==="transform")if(s.common.async===!1){let o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!_t(o))return H;let n=t.transform(o.value,i);if(n instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:n}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>_t(o)?Promise.resolve(t.transform(o.value,i)).then(n=>({status:r.value,value:n})):H);X.assertNever(t)}};Je.create=(a,e,r)=>new Je({schema:a,typeName:J.ZodEffects,effect:e,...Z(r)});Je.createWithPreprocess=(a,e,r)=>new Je({schema:e,effect:{type:"preprocess",transform:a},typeName:J.ZodEffects,...Z(r)});var Ve=class extends G{_parse(e){return this._getType(e)===C.undefined?Oe(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Ve.create=(a,e)=>new Ve({innerType:a,typeName:J.ZodOptional,...Z(e)});var it=class extends G{_parse(e){return this._getType(e)===C.null?Oe(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};it.create=(a,e)=>new it({innerType:a,typeName:J.ZodNullable,...Z(e)});var Ht=class extends G{_parse(e){let{ctx:r}=this._processInputParams(e),s=r.data;return r.parsedType===C.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Ht.create=(a,e)=>new Ht({innerType:a,typeName:J.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Z(e)});var Jt=class extends G{_parse(e){let{ctx:r}=this._processInputParams(e),s={...r,common:{...r.common,issues:[]}},t=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return sr(t)?t.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ce(s.common.issues)},input:s.data})})):{status:"valid",value:t.status==="valid"?t.value:this._def.catchValue({get error(){return new Ce(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}};Jt.create=(a,e)=>new Jt({innerType:a,typeName:J.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Z(e)});var ur=class extends G{_parse(e){if(this._getType(e)!==C.nan){let s=this._getOrReturnCtx(e);return A(s,{code:R.invalid_type,expected:C.nan,received:s.parsedType}),H}return{status:"valid",value:e.data}}};ur.create=a=>new ur({typeName:J.ZodNaN,...Z(a)});var Bl=Symbol("zod_brand"),Er=class extends G{_parse(e){let{ctx:r}=this._processInputParams(e),s=r.data;return this._def.type._parse({data:s,path:r.path,parent:r})}unwrap(){return this._def.type}},xr=class a extends G{_parse(e){let{status:r,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{let i=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?H:i.status==="dirty"?(r.dirty(),jt(i.value)):this._def.out._parseAsync({data:i.value,path:s.path,parent:s})})();{let t=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return t.status==="aborted"?H:t.status==="dirty"?(r.dirty(),{status:"dirty",value:t.value}):this._def.out._parseSync({data:t.value,path:s.path,parent:s})}}static create(e,r){return new a({in:e,out:r,typeName:J.ZodPipeline})}},Bt=class extends G{_parse(e){let r=this._def.innerType._parse(e),s=t=>(_t(t)&&(t.value=Object.freeze(t.value)),t);return sr(r)?r.then(t=>s(t)):s(r)}unwrap(){return this._def.innerType}};Bt.create=(a,e)=>new Bt({innerType:a,typeName:J.ZodReadonly,...Z(e)});function Hs(a,e){let r=typeof a=="function"?a(e):typeof a=="string"?{message:a}:a;return typeof r=="string"?{message:r}:r}function Gs(a,e={},r){return a?Et.create().superRefine((s,t)=>{let i=a(s);if(i instanceof Promise)return i.then(o=>{if(!o){let n=Hs(e,s),u=n.fatal??r??!0;t.addIssue({code:"custom",...n,fatal:u})}});if(!i){let o=Hs(e,s),n=o.fatal??r??!0;t.addIssue({code:"custom",...o,fatal:n})}}):Et.create()}var Zl={object:Ne.lazycreate},J;(function(a){a.ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly"})(J||(J={}));var Kl=(a,e={message:`Input not instance of ${a.name}`})=>Gs(r=>r instanceof a,e),Ws=bt.create,Ys=kt.create,Gl=ur.create,Wl=At.create,Xs=Ct.create,Yl=Nt.create,Xl=nr.create,eu=qt.create,tu=Ut.create,ru=Et.create,au=mt.create,su=We.create,iu=or.create,nu=vt.create,ou=Ne.create,cu=Ne.strictCreate,lu=Ft.create,uu=qr.create,du=Lt.create,pu=st.create,fu=Ur.create,hu=cr.create,mu=lr.create,vu=Fr.create,gu=Mt.create,yu=Qt.create,_u=zt.create,bu=Vt.create,Eu=xt.create,xu=Je.create,Su=Ve.create,Pu=it.create,Ru=Je.createWithPreprocess,wu=xr.create,Iu=()=>Ws().optional(),Tu=()=>Ys().optional(),Du=()=>Xs().optional(),Ou={string:a=>bt.create({...a,coerce:!0}),number:a=>kt.create({...a,coerce:!0}),boolean:a=>Ct.create({...a,coerce:!0}),bigint:a=>At.create({...a,coerce:!0}),date:a=>Nt.create({...a,coerce:!0})};var $u=H;var Ta="2025-06-18";var ei=[Ta,"2025-03-26","2024-11-05","2024-10-07"],Lr="2.0",ti=c.union([c.string(),c.number().int()]),ri=c.string(),ju=c.object({progressToken:c.optional(ti)}).passthrough(),Be=c.object({_meta:c.optional(ju)}).passthrough(),qe=c.object({method:c.string(),params:c.optional(Be)}),Sr=c.object({_meta:c.optional(c.object({}).passthrough())}).passthrough(),nt=c.object({method:c.string(),params:c.optional(Sr)}),Ze=c.object({_meta:c.optional(c.object({}).passthrough())}).passthrough(),Mr=c.union([c.string(),c.number().int()]),ai=c.object({jsonrpc:c.literal(Lr),id:Mr}).merge(qe).strict(),si=a=>ai.safeParse(a).success,ii=c.object({jsonrpc:c.literal(Lr)}).merge(nt).strict(),ni=a=>ii.safeParse(a).success,oi=c.object({jsonrpc:c.literal(Lr),id:Mr,result:Ze}).strict(),Da=a=>oi.safeParse(a).success,Ye;(function(a){a[a.ConnectionClosed=-32e3]="ConnectionClosed",a[a.RequestTimeout=-32001]="RequestTimeout",a[a.ParseError=-32700]="ParseError",a[a.InvalidRequest=-32600]="InvalidRequest",a[a.MethodNotFound=-32601]="MethodNotFound",a[a.InvalidParams=-32602]="InvalidParams",a[a.InternalError=-32603]="InternalError"})(Ye||(Ye={}));var ci=c.object({jsonrpc:c.literal(Lr),id:Mr,error:c.object({code:c.number().int(),message:c.string(),data:c.optional(c.unknown())})}).strict(),li=a=>ci.safeParse(a).success,ui=c.union([ai,ii,oi,ci]),Qr=Ze.strict(),zr=nt.extend({method:c.literal("notifications/cancelled"),params:Sr.extend({requestId:Mr,reason:c.string().optional()})}),Pr=c.object({name:c.string(),title:c.optional(c.string())}).passthrough(),di=Pr.extend({version:c.string()}),ku=c.object({experimental:c.optional(c.object({}).passthrough()),sampling:c.optional(c.object({}).passthrough()),elicitation:c.optional(c.object({}).passthrough()),roots:c.optional(c.object({listChanged:c.optional(c.boolean())}).passthrough())}).passthrough(),Oa=qe.extend({method:c.literal("initialize"),params:Be.extend({protocolVersion:c.string(),capabilities:ku,clientInfo:di})});var Au=c.object({experimental:c.optional(c.object({}).passthrough()),logging:c.optional(c.object({}).passthrough()),completions:c.optional(c.object({}).passthrough()),prompts:c.optional(c.object({listChanged:c.optional(c.boolean())}).passthrough()),resources:c.optional(c.object({subscribe:c.optional(c.boolean()),listChanged:c.optional(c.boolean())}).passthrough()),tools:c.optional(c.object({listChanged:c.optional(c.boolean())}).passthrough())}).passthrough(),Cu=Ze.extend({protocolVersion:c.string(),capabilities:Au,serverInfo:di,instructions:c.optional(c.string())}),$a=nt.extend({method:c.literal("notifications/initialized")});var Vr=qe.extend({method:c.literal("ping")}),Nu=c.object({progress:c.number(),total:c.optional(c.number()),message:c.optional(c.string())}).passthrough(),Hr=nt.extend({method:c.literal("notifications/progress"),params:Sr.merge(Nu).extend({progressToken:ti})}),Jr=qe.extend({params:Be.extend({cursor:c.optional(ri)}).optional()}),Br=Ze.extend({nextCursor:c.optional(ri)}),pi=c.object({uri:c.string(),mimeType:c.optional(c.string()),_meta:c.optional(c.object({}).passthrough())}).passthrough(),fi=pi.extend({text:c.string()}),ja=c.string().refine(a=>{try{return atob(a),!0}catch{return!1}},{message:"Invalid Base64 string"}),hi=pi.extend({blob:ja}),mi=Pr.extend({uri:c.string(),description:c.optional(c.string()),mimeType:c.optional(c.string()),_meta:c.optional(c.object({}).passthrough())}),qu=Pr.extend({uriTemplate:c.string(),description:c.optional(c.string()),mimeType:c.optional(c.string()),_meta:c.optional(c.object({}).passthrough())}),Uu=Jr.extend({method:c.literal("resources/list")}),Fu=Br.extend({resources:c.array(mi)}),Lu=Jr.extend({method:c.literal("resources/templates/list")}),Mu=Br.extend({resourceTemplates:c.array(qu)}),Qu=qe.extend({method:c.literal("resources/read"),params:Be.extend({uri:c.string()})}),zu=Ze.extend({contents:c.array(c.union([fi,hi]))}),Vu=nt.extend({method:c.literal("notifications/resources/list_changed")}),Hu=qe.extend({method:c.literal("resources/subscribe"),params:Be.extend({uri:c.string()})}),Ju=qe.extend({method:c.literal("resources/unsubscribe"),params:Be.extend({uri:c.string()})}),Bu=nt.extend({method:c.literal("notifications/resources/updated"),params:Sr.extend({uri:c.string()})}),Zu=c.object({name:c.string(),description:c.optional(c.string()),required:c.optional(c.boolean())}).passthrough(),Ku=Pr.extend({description:c.optional(c.string()),arguments:c.optional(c.array(Zu)),_meta:c.optional(c.object({}).passthrough())}),Gu=Jr.extend({method:c.literal("prompts/list")}),Wu=Br.extend({prompts:c.array(Ku)}),Yu=qe.extend({method:c.literal("prompts/get"),params:Be.extend({name:c.string(),arguments:c.optional(c.record(c.string()))})}),ka=c.object({type:c.literal("text"),text:c.string(),_meta:c.optional(c.object({}).passthrough())}).passthrough(),Aa=c.object({type:c.literal("image"),data:ja,mimeType:c.string(),_meta:c.optional(c.object({}).passthrough())}).passthrough(),Ca=c.object({type:c.literal("audio"),data:ja,mimeType:c.string(),_meta:c.optional(c.object({}).passthrough())}).passthrough(),Xu=c.object({type:c.literal("resource"),resource:c.union([fi,hi]),_meta:c.optional(c.object({}).passthrough())}).passthrough(),ed=mi.extend({type:c.literal("resource_link")}),vi=c.union([ka,Aa,Ca,ed,Xu]),td=c.object({role:c.enum(["user","assistant"]),content:vi}).passthrough(),rd=Ze.extend({description:c.optional(c.string()),messages:c.array(td)}),ad=nt.extend({method:c.literal("notifications/prompts/list_changed")}),sd=c.object({title:c.optional(c.string()),readOnlyHint:c.optional(c.boolean()),destructiveHint:c.optional(c.boolean()),idempotentHint:c.optional(c.boolean()),openWorldHint:c.optional(c.boolean())}).passthrough(),id=Pr.extend({description:c.optional(c.string()),inputSchema:c.object({type:c.literal("object"),properties:c.optional(c.object({}).passthrough()),required:c.optional(c.array(c.string()))}).passthrough(),outputSchema:c.optional(c.object({type:c.literal("object"),properties:c.optional(c.object({}).passthrough()),required:c.optional(c.array(c.string()))}).passthrough()),annotations:c.optional(sd),_meta:c.optional(c.object({}).passthrough())}),Na=Jr.extend({method:c.literal("tools/list")}),nd=Br.extend({tools:c.array(id)}),gi=Ze.extend({content:c.array(vi).default([]),structuredContent:c.object({}).passthrough().optional(),isError:c.optional(c.boolean())}),Wf=gi.or(Ze.extend({toolResult:c.unknown()})),qa=qe.extend({method:c.literal("tools/call"),params:Be.extend({name:c.string(),arguments:c.optional(c.record(c.unknown()))})}),od=nt.extend({method:c.literal("notifications/tools/list_changed")}),yi=c.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),cd=qe.extend({method:c.literal("logging/setLevel"),params:Be.extend({level:yi})}),ld=nt.extend({method:c.literal("notifications/message"),params:Sr.extend({level:yi,logger:c.optional(c.string()),data:c.unknown()})}),ud=c.object({name:c.string().optional()}).passthrough(),dd=c.object({hints:c.optional(c.array(ud)),costPriority:c.optional(c.number().min(0).max(1)),speedPriority:c.optional(c.number().min(0).max(1)),intelligencePriority:c.optional(c.number().min(0).max(1))}).passthrough(),pd=c.object({role:c.enum(["user","assistant"]),content:c.union([ka,Aa,Ca])}).passthrough(),fd=qe.extend({method:c.literal("sampling/createMessage"),params:Be.extend({messages:c.array(pd),systemPrompt:c.optional(c.string()),includeContext:c.optional(c.enum(["none","thisServer","allServers"])),temperature:c.optional(c.number()),maxTokens:c.number().int(),stopSequences:c.optional(c.array(c.string())),metadata:c.optional(c.object({}).passthrough()),modelPreferences:c.optional(dd)})}),Ua=Ze.extend({model:c.string(),stopReason:c.optional(c.enum(["endTurn","stopSequence","maxTokens"]).or(c.string())),role:c.enum(["user","assistant"]),content:c.discriminatedUnion("type",[ka,Aa,Ca])}),hd=c.object({type:c.literal("boolean"),title:c.optional(c.string()),description:c.optional(c.string()),default:c.optional(c.boolean())}).passthrough(),md=c.object({type:c.literal("string"),title:c.optional(c.string()),description:c.optional(c.string()),minLength:c.optional(c.number()),maxLength:c.optional(c.number()),format:c.optional(c.enum(["email","uri","date","date-time"]))}).passthrough(),vd=c.object({type:c.enum(["number","integer"]),title:c.optional(c.string()),description:c.optional(c.string()),minimum:c.optional(c.number()),maximum:c.optional(c.number())}).passthrough(),gd=c.object({type:c.literal("string"),title:c.optional(c.string()),description:c.optional(c.string()),enum:c.array(c.string()),enumNames:c.optional(c.array(c.string()))}).passthrough(),yd=c.union([hd,md,vd,gd]),_d=qe.extend({method:c.literal("elicitation/create"),params:Be.extend({message:c.string(),requestedSchema:c.object({type:c.literal("object"),properties:c.record(c.string(),yd),required:c.optional(c.array(c.string()))}).passthrough()})}),Fa=Ze.extend({action:c.enum(["accept","decline","cancel"]),content:c.optional(c.record(c.string(),c.unknown()))}),bd=c.object({type:c.literal("ref/resource"),uri:c.string()}).passthrough();var Ed=c.object({type:c.literal("ref/prompt"),name:c.string()}).passthrough(),xd=qe.extend({method:c.literal("completion/complete"),params:Be.extend({ref:c.union([Ed,bd]),argument:c.object({name:c.string(),value:c.string()}).passthrough(),context:c.optional(c.object({arguments:c.optional(c.record(c.string(),c.string()))}))})}),Sd=Ze.extend({completion:c.object({values:c.array(c.string()).max(100),total:c.optional(c.number().int()),hasMore:c.optional(c.boolean())}).passthrough()}),Pd=c.object({uri:c.string().startsWith("file://"),name:c.optional(c.string()),_meta:c.optional(c.object({}).passthrough())}).passthrough(),Rd=qe.extend({method:c.literal("roots/list")}),La=Ze.extend({roots:c.array(Pd)}),wd=nt.extend({method:c.literal("notifications/roots/list_changed")}),Yf=c.union([Vr,Oa,xd,cd,Yu,Gu,Uu,Lu,Qu,Hu,Ju,qa,Na]),Xf=c.union([zr,Hr,$a,wd]),eh=c.union([Qr,Ua,Fa,La]),th=c.union([Vr,fd,_d,Rd]),rh=c.union([zr,Hr,ld,Bu,Vu,od,ad]),ah=c.union([Qr,Cu,Sd,rd,Wu,Fu,Mu,zu,gi,nd]),Xe=class extends Error{constructor(e,r,s){super(`MCP error ${e}: ${r}`),this.code=e,this.data=s,this.name="McpError"}};var Id=6e4,Zr=class{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(zr,r=>{let s=this._requestHandlerAbortControllers.get(r.params.requestId);s?.abort(r.params.reason)}),this.setNotificationHandler(Hr,r=>{this._onprogress(r)}),this.setRequestHandler(Vr,r=>({}))}_setupTimeout(e,r,s,t,i=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(t,r),startTime:Date.now(),timeout:r,maxTotalTimeout:s,resetTimeoutOnProgress:i,onTimeout:t})}_resetTimeout(e){let r=this._timeoutInfo.get(e);if(!r)return!1;let s=Date.now()-r.startTime;if(r.maxTotalTimeout&&s>=r.maxTotalTimeout)throw this._timeoutInfo.delete(e),new Xe(Ye.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:r.maxTotalTimeout,totalElapsed:s});return clearTimeout(r.timeoutId),r.timeoutId=setTimeout(r.onTimeout,r.timeout),!0}_cleanupTimeout(e){let r=this._timeoutInfo.get(e);r&&(clearTimeout(r.timeoutId),this._timeoutInfo.delete(e))}async connect(e){var r,s,t;this._transport=e;let i=(r=this.transport)===null||r===void 0?void 0:r.onclose;this._transport.onclose=()=>{i?.(),this._onclose()};let o=(s=this.transport)===null||s===void 0?void 0:s.onerror;this._transport.onerror=u=>{o?.(u),this._onerror(u)};let n=(t=this._transport)===null||t===void 0?void 0:t.onmessage;this._transport.onmessage=(u,l)=>{n?.(u,l),Da(u)||li(u)?this._onresponse(u):si(u)?this._onrequest(u,l):ni(u)?this._onnotification(u):this._onerror(new Error(`Unknown message type: ${JSON.stringify(u)}`))},await this._transport.start()}_onclose(){var e;let r=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let s=new Xe(Ye.ConnectionClosed,"Connection closed");for(let t of r.values())t(s)}_onerror(e){var r;(r=this.onerror)===null||r===void 0||r.call(this,e)}_onnotification(e){var r;let s=(r=this._notificationHandlers.get(e.method))!==null&&r!==void 0?r:this.fallbackNotificationHandler;s!==void 0&&Promise.resolve().then(()=>s(e)).catch(t=>this._onerror(new Error(`Uncaught error in notification handler: ${t}`)))}_onrequest(e,r){var s,t;let i=(s=this._requestHandlers.get(e.method))!==null&&s!==void 0?s:this.fallbackRequestHandler,o=this._transport;if(i===void 0){o?.send({jsonrpc:"2.0",id:e.id,error:{code:Ye.MethodNotFound,message:"Method not found"}}).catch(l=>this._onerror(new Error(`Failed to send an error response: ${l}`)));return}let n=new AbortController;this._requestHandlerAbortControllers.set(e.id,n);let u={signal:n.signal,sessionId:o?.sessionId,_meta:(t=e.params)===null||t===void 0?void 0:t._meta,sendNotification:l=>this.notification(l,{relatedRequestId:e.id}),sendRequest:(l,f,m)=>this.request(l,f,{...m,relatedRequestId:e.id}),authInfo:r?.authInfo,requestId:e.id,requestInfo:r?.requestInfo};Promise.resolve().then(()=>i(e,u)).then(l=>{if(!n.signal.aborted)return o?.send({result:l,jsonrpc:"2.0",id:e.id})},l=>{var f;if(!n.signal.aborted)return o?.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(l.code)?l.code:Ye.InternalError,message:(f=l.message)!==null&&f!==void 0?f:"Internal error"}})}).catch(l=>this._onerror(new Error(`Failed to send response: ${l}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:r,...s}=e.params,t=Number(r),i=this._progressHandlers.get(t);if(!i){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let o=this._responseHandlers.get(t),n=this._timeoutInfo.get(t);if(n&&o&&n.resetTimeoutOnProgress)try{this._resetTimeout(t)}catch(u){o(u);return}i(s)}_onresponse(e){let r=Number(e.id),s=this._responseHandlers.get(r);if(s===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(r),this._progressHandlers.delete(r),this._cleanupTimeout(r),Da(e))s(e);else{let t=new Xe(e.error.code,e.error.message,e.error.data);s(t)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,r,s){let{relatedRequestId:t,resumptionToken:i,onresumptiontoken:o}=s??{};return new Promise((n,u)=>{var l,f,m,_,d,y;if(!this._transport){u(new Error("Not connected"));return}((l=this._options)===null||l===void 0?void 0:l.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(f=s?.signal)===null||f===void 0||f.throwIfAborted();let b=this._requestMessageId++,g={...e,jsonrpc:"2.0",id:b};s?.onprogress&&(this._progressHandlers.set(b,s.onprogress),g.params={...e.params,_meta:{...((m=e.params)===null||m===void 0?void 0:m._meta)||{},progressToken:b}});let S=w=>{var D;this._responseHandlers.delete(b),this._progressHandlers.delete(b),this._cleanupTimeout(b),(D=this._transport)===null||D===void 0||D.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:b,reason:String(w)}},{relatedRequestId:t,resumptionToken:i,onresumptiontoken:o}).catch(O=>this._onerror(new Error(`Failed to send cancellation: ${O}`))),u(w)};this._responseHandlers.set(b,w=>{var D;if(!(!((D=s?.signal)===null||D===void 0)&&D.aborted)){if(w instanceof Error)return u(w);try{let O=r.parse(w.result);n(O)}catch(O){u(O)}}}),(_=s?.signal)===null||_===void 0||_.addEventListener("abort",()=>{var w;S((w=s?.signal)===null||w===void 0?void 0:w.reason)});let T=(d=s?.timeout)!==null&&d!==void 0?d:Id,P=()=>S(new Xe(Ye.RequestTimeout,"Request timed out",{timeout:T}));this._setupTimeout(b,T,s?.maxTotalTimeout,P,(y=s?.resetTimeoutOnProgress)!==null&&y!==void 0?y:!1),this._transport.send(g,{relatedRequestId:t,resumptionToken:i,onresumptiontoken:o}).catch(w=>{this._cleanupTimeout(b),u(w)})})}async notification(e,r){var s,t;if(!this._transport)throw new Error("Not connected");if(this.assertNotificationCapability(e.method),((t=(s=this._options)===null||s===void 0?void 0:s.debouncedNotificationMethods)!==null&&t!==void 0?t:[]).includes(e.method)&&!e.params&&!r?.relatedRequestId){if(this._pendingDebouncedNotifications.has(e.method))return;this._pendingDebouncedNotifications.add(e.method),Promise.resolve().then(()=>{var u;if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let l={...e,jsonrpc:"2.0"};(u=this._transport)===null||u===void 0||u.send(l,r).catch(f=>this._onerror(f))});return}let n={...e,jsonrpc:"2.0"};await this._transport.send(n,r)}setRequestHandler(e,r){let s=e.shape.method.value;this.assertRequestHandlerCapability(s),this._requestHandlers.set(s,(t,i)=>Promise.resolve(r(e.parse(t),i)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,r){this._notificationHandlers.set(e.shape.method.value,s=>Promise.resolve(r(e.parse(s))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function _i(a,e){return Object.entries(e).reduce((r,[s,t])=>(t&&typeof t=="object"?r[s]=r[s]?{...r[s],...t}:t:r[s]=t,r),{...a})}var So=El(xo(),1),fa=class extends Zr{constructor(e,r){var s;super(r),this._serverInfo=e,this._capabilities=(s=r?.capabilities)!==null&&s!==void 0?s:{},this._instructions=r?.instructions,this.setRequestHandler(Oa,t=>this._oninitialize(t)),this.setNotificationHandler($a,()=>{var t;return(t=this.oninitialized)===null||t===void 0?void 0:t.call(this)})}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=_i(this._capabilities,e)}assertCapabilityForMethod(e){var r,s,t;switch(e){case"sampling/createMessage":if(!(!((r=this._clientCapabilities)===null||r===void 0)&&r.sampling))throw new Error(`Client does not support sampling (required for ${e})`);break;case"elicitation/create":if(!(!((s=this._clientCapabilities)===null||s===void 0)&&s.elicitation))throw new Error(`Client does not support elicitation (required for ${e})`);break;case"roots/list":if(!(!((t=this._clientCapabilities)===null||t===void 0)&&t.roots))throw new Error(`Client does not support listing roots (required for ${e})`);break;case"ping":break}}assertNotificationCapability(e){switch(e){case"notifications/message":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw new Error(`Server does not support notifying about resources (required for ${e})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw new Error(`Server does not support notifying of tool list changes (required for ${e})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw new Error(`Server does not support notifying of prompt list changes (required for ${e})`);break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Server does not support sampling (required for ${e})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw new Error(`Server does not support resources (required for ${e})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw new Error(`Server does not support tools (required for ${e})`);break;case"ping":case"initialize":break}}async _oninitialize(e){let r=e.params.protocolVersion;return this._clientCapabilities=e.params.capabilities,this._clientVersion=e.params.clientInfo,{protocolVersion:ei.includes(r)?r:Ta,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},Qr)}async createMessage(e,r){return this.request({method:"sampling/createMessage",params:e},Ua,r)}async elicitInput(e,r){let s=await this.request({method:"elicitation/create",params:e},Fa,r);if(s.action==="accept"&&s.content)try{let t=new So.default,i=t.compile(e.requestedSchema);if(!i(s.content))throw new Xe(Ye.InvalidParams,`Elicitation response content does not match requested schema: ${t.errorsText(i.errors)}`)}catch(t){throw t instanceof Xe?t:new Xe(Ye.InternalError,`Error validating elicitation response: ${t}`)}return s}async listRoots(e,r){return this.request({method:"roots/list",params:e},La,r)}async sendLoggingMessage(e){return this.notification({method:"notifications/message",params:e})}async sendResourceUpdated(e){return this.notification({method:"notifications/resources/updated",params:e})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}};import Ro from"node:process";var ha=class{append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let r=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),of(r)}clear(){this._buffer=void 0}};function of(a){return ui.parse(JSON.parse(a))}function Po(a){return JSON.stringify(a)+`
`}var ma=class{constructor(e=Ro.stdin,r=Ro.stdout){this._stdin=e,this._stdout=r,this._readBuffer=new ha,this._started=!1,this._ondata=s=>{this._readBuffer.append(s),this.processReadBuffer()},this._onerror=s=>{var t;(t=this.onerror)===null||t===void 0||t.call(this,s)}}async start(){if(this._started)throw new Error("StdioServerTransport already started! If using Server class, note that connect() calls start() automatically.");this._started=!0,this._stdin.on("data",this._ondata),this._stdin.on("error",this._onerror)}processReadBuffer(){for(var e,r;;)try{let s=this._readBuffer.readMessage();if(s===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,s)}catch(s){(r=this.onerror)===null||r===void 0||r.call(this,s)}}async close(){var e;this._stdin.off("data",this._ondata),this._stdin.off("error",this._onerror),this._stdin.listenerCount("data")===0&&this._stdin.pause(),this._readBuffer.clear(),(e=this.onclose)===null||e===void 0||e.call(this)}send(e){return new Promise(r=>{let s=Po(e);this._stdout.write(s)?r():this._stdout.once("drain",r)})}};var wr=process.env.API_TOKEN,dr=process.env.API_BASE_URL;wr||process.exit(1);dr||process.exit(1);var va={ai_generated:{type:"boolean",description:"Whether the term content was AI-generated (defaults to false on create in API)"},ai_model:{type:"string",description:"AI model identifier (e.g., gpt-4o-mini, gpt-4o). Required if ai_generated=true"},ai_prompt_version:{type:"string",description:"Prompt version used for generation (e.g., v1.0, v2.0)"},ai_generation_date:{type:"string",description:"Generation timestamp (ISO 8601)",format:"date-time"},ai_tokens_used:{type:"integer",description:"Total tokens consumed during generation",minimum:0},ai_quality_score:{type:"number",description:"Quality score between 0.00 and 9.99",minimum:0,maximum:9.99},ai_validation_status:{type:"string",description:"Validation status (defaults to pending on create in API)",enum:["pending","approved","rejected","needs_review"]},ai_source_data:{type:"object",description:'Original source data (JSON), e.g. {"origin":"import","entity_type":"city"}'},ai_metadata:{type:"object",description:'Additional metadata (JSON), e.g. {"purpose":"generate_name"}'},ai_confidence_score:{type:"number",description:"Confidence score between 0.00 and 9.99",minimum:0,maximum:9.99},ai_human_reviewed:{type:"boolean",description:"Whether the term was human reviewed"},ai_human_reviewer:{type:"string",description:"Human reviewer user ID (e.g., test-user)"},ai_review_date:{type:"string",description:"Human review timestamp (ISO 8601)",format:"date-time"},ai_version:{type:"integer",description:"AI content version (auto-increments on update)"},ai_batch_id:{type:"string",description:"Batch identifier for AI generation (e.g., batch-001)"},ai_edit_history:{type:"object",description:"AI edit history (JSON)"},ai_original_data:{type:"object",description:"Original data snapshot (JSON)"},ai_manual_overrides:{type:"object",description:"Manual overrides (JSON)"},ai_market_validated:{type:"boolean",description:"Market validation flag"},ai_validation_errors:{type:"object",description:"Validation errors (JSON)"}},ga=[{if:{properties:{aiMetadata:{properties:{ai_generated:{const:!0}}}}},then:{properties:{aiMetadata:{required:["ai_generated","ai_model"]}}}}],wo=["ai_generated","ai_model","ai_generation_date"],cf={value:{type:"string"},description:{type:"string",description:"Term description (optional)"},language_id:{type:"number",description:"Language ID - REQUIRED. Use get_languages to find language ID. English is recommended as primary language"},term_type_id:{type:"number",description:'Term type ID - REQUIRED. Use get_term_types to find term type ID. "main" is recommended as primary term type'},status_id:{type:"number",description:"Status ID - optional. Use get_statuses to find status ID"},aiMetadata:{type:"object",properties:{...va},required:[...wo]}},lf={value:{type:"string"},description:{type:"string",description:"Term description (optional)"},language_id:{type:"number",description:"Language ID - REQUIRED"},term_type_id:{type:"number",description:"Term type ID - REQUIRED"},status_id:{type:"number",description:"Status ID (optional)"},aiMetadata:{type:"object",properties:{...va},required:[...wo]}};function ue(a={}){return{type:"object",description:a.description||"Main term (REQUIRED)",properties:{...cf,value:{type:"string",description:a.valueDescription||"Term value - REQUIRED"}},allOf:ga,required:["value","language_id","term_type_id","aiMetadata"]}}function de({withId:a=!1,overrides:e={}}={}){let r={...lf};return r.value={type:"string",description:e.valueDescription||"Term value - REQUIRED"},a&&(r.id={type:"number",description:e.idDescription||"Existing term ID (include to update a specific term)"}),{type:"object",properties:r,allOf:ga,required:["value","language_id","term_type_id","aiMetadata"]}}var xe={departments:{type:"object",properties:{mainTerm:ue({description:"Main term for the department (REQUIRED)",valueDescription:"Term value (department name) - REQUIRED"}),terms:{type:"array",items:de({withId:!1})},color:{type:"string"}},required:["mainTerm"]},professions:{type:"object",properties:{mainTerm:ue({description:"Main term for the profession (REQUIRED)",valueDescription:"Term value (profession name) - REQUIRED"}),terms:{type:"array",items:de({withId:!1})},department_id:{type:"number",description:"Department ID - optional. Use list departments to get available department IDs"},tool_ids:{type:"array",items:{type:"number"},description:"Array of Tool IDs - optional. Use list tools to get available tool IDs"}},required:["mainTerm"]},languages:{type:"object",properties:{mainTerm:ue({description:"Main term for the language (REQUIRED)",valueDescription:"Term value (language name) - REQUIRED"}),terms:{type:"array",items:de({withId:!1})},iso2:{type:"string"},iso3:{type:"string"}},required:["mainTerm","iso2","iso3"]},industries:{type:"object",properties:{mainTerm:ue({description:"Main term for the industry (REQUIRED)",valueDescription:"Term value (industry name) - REQUIRED"}),terms:{type:"array",items:de({withId:!1})},subIndustryIds:{type:"array",items:{type:"number"},description:"Array of Sub-Industry IDs - optional. Use list sub-industries to get available sub-industry IDs"}},required:["mainTerm"]},"sub-industries":{type:"object",properties:{industry_id:{type:"number",description:"Industry ID - optional. Use list industries to get available industry IDs"},mainTerm:ue({description:"Main term for the sub-industry (REQUIRED)",valueDescription:"Term value (sub-industry name) - REQUIRED"}),terms:{type:"array",items:de({withId:!1})}},required:["mainTerm"]},"tool-types":{type:"object",properties:{name:{type:"string"}},required:["name"]},countries:{type:"object",properties:{mainTerm:ue({description:"Main term for the country (REQUIRED)",valueDescription:"Term value (country name) - REQUIRED"}),terms:{type:"array",items:de({withId:!1})},iso2:{type:"string"},iso3:{type:"string"},latitude:{type:"string",description:"Latitude coordinate - optional"},longitude:{type:"string",description:"Longitude coordinate - optional"},cityIds:{type:"array",items:{type:"number"},description:"Array of City IDs - optional. Use list cities to get available city IDs"}},required:["mainTerm","iso2","iso3"]},cities:{type:"object",properties:{mainTerm:ue({description:"Main term for the city (REQUIRED)",valueDescription:"Term value (city name) - REQUIRED"}),terms:{type:"array",items:de({withId:!1})},country_id:{type:"number",description:"Country ID - optional. Use list countries to get available country IDs"},latitude:{type:"string",description:"Latitude coordinate - optional"},longitude:{type:"string",description:"Longitude coordinate - optional"}},required:["mainTerm"]},actions:{type:"object",properties:{mainTerm:ue({description:"Main term for the action (REQUIRED)",valueDescription:"Term value (action name) - REQUIRED"}),terms:{type:"array",items:de({withId:!1})}},required:["mainTerm"]},objects:{type:"object",properties:{mainTerm:ue({description:"Main term for the object (REQUIRED)",valueDescription:"Term value (object name) - REQUIRED"}),terms:{type:"array",items:de({withId:!1})},format_ids:{type:"array",items:{type:"number"},description:"Array of Format IDs - optional. Use list formats to get available format IDs"}},required:["mainTerm"]},responsibilities:{type:"object",properties:{action_id:{type:"number",description:"Action ID - REQUIRED. Use list actions to get available action IDs"},object_id:{type:"number",description:"Object ID - REQUIRED. Use list objects to get available object IDs"},mainTerm:ue({description:"Main term for the responsibility (REQUIRED)",valueDescription:"Term value (responsibility name) - REQUIRED"}),terms:{type:"array",items:de({withId:!1})}},required:["action_id","object_id","mainTerm"]},formats:{type:"object",properties:{name:{type:"string"}},required:["name"]},statuses:{type:"object",properties:{name:{type:"string"},color:{type:"string"}},required:["name"]},tools:{type:"object",properties:{name:{type:"string"},link:{type:"string"},description:{type:"string"},toolTypeIds:{type:"array",items:{type:"number"}}},required:["name"]},shifts:{type:"object",properties:{name:{type:"string",description:"Shift name - REQUIRED"},start_time:{type:"string",description:"Start time in HH:MM:SS format - REQUIRED"},end_time:{type:"string",description:"End time in HH:MM:SS format - REQUIRED"}},required:["name","start_time","end_time"]},currencies:{type:"object",properties:{name:{type:"string",description:"Currency name - REQUIRED"},iso3:{type:"string",description:"ISO 3-letter currency code - REQUIRED"},symbol:{type:"string",description:"Currency symbol - REQUIRED"}},required:["name","iso3","symbol"]},rates:{type:"object",properties:{name:{type:"string",description:"Rate name - REQUIRED"},value:{type:"number",description:"Rate value (decimal) - REQUIRED"},hours:{type:"number",description:"Number of hours - REQUIRED"}},required:["name","value","hours"]},levels:{type:"object",properties:{mainTerm:ue({description:"Main term for the level (REQUIRED)",valueDescription:"Term value (level name) - REQUIRED"}),terms:{type:"array",items:de({withId:!1})},short_name:{type:"string",description:"Short name identifier - REQUIRED"}},required:["mainTerm","short_name"]},positions:{type:"object",properties:{mainTerm:ue({description:"Main term for the position (REQUIRED)",valueDescription:"Term value (position name) - REQUIRED"}),terms:{type:"array",items:de({withId:!1})}},required:["mainTerm"]},skills:{type:"object",properties:{mainTerm:ue({description:"Main term for the skill (REQUIRED)",valueDescription:"Term value (skill name) - REQUIRED"}),terms:{type:"array",items:de({withId:!1})},responsibility_id:{type:"number",description:"Responsibility ID - REQUIRED. Use list responsibilities to get available responsibility IDs, or use find_existing_responsibility_terms to find existing responsibility by action_id and object_id. If responsibility doesn't exist, create it first using actions and objects resources."},tool_id:{type:"number",description:"Tool ID - REQUIRED. Use list tools to get available tool IDs. Each skill represents a relationship between a responsibility and a tool"}},required:["mainTerm","responsibility_id","tool_id"]}},Se={departments:{type:"object",properties:{mainTerm:ue({description:"Main term for the department (REQUIRED)",valueDescription:"Term value (department name) - REQUIRED"}),terms:{type:"array",items:de({withId:!0})},color:{type:"string"}},required:["mainTerm","terms"]},professions:{type:"object",properties:{mainTerm:ue({description:"Main term for the profession (REQUIRED)",valueDescription:"Term value (profession name) - REQUIRED"}),terms:{type:"array",items:de({withId:!0})},department_id:{type:"number",description:"Department ID - optional. Use list departments to get available department IDs"},tool_ids:{type:"array",items:{type:"number"},description:"Array of Tool IDs - optional. Use list tools to get available tool IDs"}},required:["mainTerm","terms"]},languages:{type:"object",properties:{mainTerm:ue({description:"Main term for the language (REQUIRED)",valueDescription:"Term value (language name) - REQUIRED"}),terms:{type:"array",items:de({withId:!0})},iso2:{type:"string"},iso3:{type:"string"}},required:["mainTerm","terms","iso2","iso3"]},industries:{type:"object",properties:{mainTerm:ue({description:"Main term for the industry (REQUIRED)",valueDescription:"Term value (industry name) - REQUIRED"}),terms:{type:"array",items:de({withId:!0})},subIndustryIds:{type:"array",items:{type:"number"},description:"Array of Sub-Industry IDs - optional. Use list sub-industries to get available sub-industry IDs"}},required:["mainTerm","terms"]},"sub-industries":{type:"object",properties:{industry_id:{type:"number",description:"Industry ID - optional. Use list industries to get available industry IDs"},mainTerm:ue({description:"Main term for the sub-industry (REQUIRED)",valueDescription:"Term value (sub-industry name) - REQUIRED"}),terms:{type:"array",items:de({withId:!0})}},required:["mainTerm","terms"]},"tool-types":{type:"object",properties:{name:{type:"string"}},required:["name"]},countries:{type:"object",properties:{mainTerm:ue({description:"Main term for the country (REQUIRED)",valueDescription:"Term value (country name) - REQUIRED"}),terms:{type:"array",items:de({withId:!0})},iso2:{type:"string"},iso3:{type:"string"},latitude:{type:"string",description:"Latitude coordinate - optional"},longitude:{type:"string",description:"Longitude coordinate - optional"},cityIds:{type:"array",items:{type:"number"},description:"Array of City IDs - optional. Use list cities to get available city IDs"}},required:["mainTerm","terms","iso2","iso3"]},cities:{type:"object",properties:{mainTerm:ue({description:"Main term for the city (REQUIRED)",valueDescription:"Term value (city name) - REQUIRED"}),terms:{type:"array",items:de({withId:!0})},country_id:{type:"number",description:"Country ID - optional. Use list countries to get available country IDs"},latitude:{type:"string",description:"Latitude coordinate - optional"},longitude:{type:"string",description:"Longitude coordinate - optional"}},required:["mainTerm","terms"]},actions:{type:"object",properties:{mainTerm:ue({description:"Main term for the action (REQUIRED)",valueDescription:"Term value (action name) - REQUIRED"}),terms:{type:"array",items:de({withId:!0})}},required:["mainTerm","terms"]},objects:{type:"object",properties:{mainTerm:ue({description:"Main term for the object (REQUIRED)",valueDescription:"Term value (object name) - REQUIRED"}),terms:{type:"array",items:de({withId:!0})},format_ids:{type:"array",items:{type:"number"},description:"Array of Format IDs - optional. Use list formats to get available format IDs"}},required:["mainTerm","terms"]},responsibilities:{type:"object",properties:{action_id:{type:"number",description:"Action ID - REQUIRED. Use list actions to get available action IDs"},object_id:{type:"number",description:"Object ID - REQUIRED. Use list objects to get available object IDs"},mainTerm:ue({description:"Main term for the responsibility (REQUIRED)",valueDescription:"Term value (responsibility name) - REQUIRED"}),terms:{type:"array",items:de({withId:!0})}},required:["action_id","object_id","mainTerm","terms"]},formats:{type:"object",properties:{name:{type:"string"}},required:["name"]},statuses:{type:"object",properties:{name:{type:"string"},color:{type:"string"}},required:["name"]},tools:{type:"object",properties:{name:{type:"string"},link:{type:"string"},description:{type:"string"},toolTypeIds:{type:"array",items:{type:"number"}}},required:["name"]},shifts:{type:"object",properties:{name:{type:"string",description:"Shift name - REQUIRED"},start_time:{type:"string",description:"Start time in HH:MM:SS format - REQUIRED"},end_time:{type:"string",description:"End time in HH:MM:SS format - REQUIRED"}},required:["name","start_time","end_time"]},currencies:{type:"object",properties:{name:{type:"string",description:"Currency name - REQUIRED"},iso3:{type:"string",description:"ISO 3-letter currency code - REQUIRED"},symbol:{type:"string",description:"Currency symbol - REQUIRED"}},required:["name","iso3","symbol"]},rates:{type:"object",properties:{name:{type:"string",description:"Rate name - REQUIRED"},value:{type:"number",description:"Rate value (decimal) - REQUIRED"},hours:{type:"number",description:"Number of hours - REQUIRED"}},required:["name","value","hours"]},levels:{type:"object",properties:{mainTerm:ue({description:"Main term for the level (REQUIRED)",valueDescription:"Term value (level name) - REQUIRED"}),terms:{type:"array",items:de({withId:!0})},short_name:{type:"string",description:"Short name identifier - REQUIRED"}},required:["mainTerm","short_name"]},positions:{type:"object",properties:{mainTerm:ue({description:"Main term for the position (REQUIRED)",valueDescription:"Term value (position name) - REQUIRED"}),terms:{type:"array",items:de({withId:!0})}},required:["mainTerm"]},skills:{type:"object",properties:{mainTerm:ue({description:"Main term for the skill (REQUIRED)",valueDescription:"Term value (skill name) - REQUIRED"}),terms:{type:"array",items:de({withId:!0})},responsibility_id:{type:"number",description:"Responsibility ID - REQUIRED. Use list responsibilities to get available responsibility IDs, or use find_existing_responsibility_terms to find existing responsibility by action_id and object_id. If responsibility doesn't exist, create it first using actions and objects resources."},tool_id:{type:"number",description:"Tool ID - REQUIRED. Use list tools to get available tool IDs. Each skill represents a relationship between a responsibility and a tool"}},required:["mainTerm","responsibility_id","tool_id"]}},Io=[{name:"list",description:"List entities (supports UA/RU/EN resource names)",inputSchema:{type:"object",properties:{resource:{type:"string",description:"Entity name or synonym (e.g., \u0434\u0435\u043F\u0430\u0440\u0442\u0430\u043C\u0435\u043D\u0442\u0438 | \u043E\u0442\u0434\u0435\u043B\u044B | departments)"},page:{type:"number"},limit:{type:"number"},search:{type:"string"},all:{type:"string",enum:["true","false"]},isShort:{type:"string",enum:["true","false"]}},required:["resource"]}},{name:"get",description:"Get single entity by ID (short form in light mode)",inputSchema:{type:"object",properties:{resource:{type:"string"},id:{type:"string"},isShort:{type:"string",enum:["true","false"]}},required:["resource","id"]}},{name:"create",description:'Create an entity for the given resource. Payload shape depends on resource (e.g., departments, professions, languages, etc.). For entities with terms, provide mainTerm and optional terms with correct IDs/types. IMPORTANT: When creating AI-generated content, ALWAYS include aiMetadata fields with ai_generated=true, ai_model (e.g., "gpt-4o-mini"), and ai_generation_date. Only attach aiMetadata to the specific term(s) you are creating; terms without aiMetadata will not be touched.',inputSchema:{type:"object",properties:{resource:{type:"string"},payload:{type:"object"}},required:["resource","payload"],allOf:[{if:{properties:{resource:{const:"departments"}}},then:{properties:{payload:xe.departments}}},{if:{properties:{resource:{const:"professions"}}},then:{properties:{payload:xe.professions}}},{if:{properties:{resource:{const:"languages"}}},then:{properties:{payload:xe.languages}}},{if:{properties:{resource:{const:"industries"}}},then:{properties:{payload:xe.industries}}},{if:{properties:{resource:{const:"sub-industries"}}},then:{properties:{payload:xe["sub-industries"]}}},{if:{properties:{resource:{const:"tool-types"}}},then:{properties:{payload:xe["tool-types"]}}},{if:{properties:{resource:{const:"countries"}}},then:{properties:{payload:xe.countries}}},{if:{properties:{resource:{const:"cities"}}},then:{properties:{payload:xe.cities}}},{if:{properties:{resource:{const:"actions"}}},then:{properties:{payload:xe.actions}}},{if:{properties:{resource:{const:"objects"}}},then:{properties:{payload:xe.objects}}},{if:{properties:{resource:{const:"responsibilities"}}},then:{properties:{payload:xe.responsibilities}}},{if:{properties:{resource:{const:"formats"}}},then:{properties:{payload:xe.formats}}},{if:{properties:{resource:{const:"statuses"}}},then:{properties:{payload:xe.statuses}}},{if:{properties:{resource:{const:"tools"}}},then:{properties:{payload:xe.tools}}},{if:{properties:{resource:{const:"shifts"}}},then:{properties:{payload:xe.shifts}}},{if:{properties:{resource:{const:"currencies"}}},then:{properties:{payload:xe.currencies}}},{if:{properties:{resource:{const:"rates"}}},then:{properties:{payload:xe.rates}}},{if:{properties:{resource:{const:"levels"}}},then:{properties:{payload:xe.levels}}},{if:{properties:{resource:{const:"positions"}}},then:{properties:{payload:xe.positions}}},{if:{properties:{resource:{const:"skills"}}},then:{properties:{payload:xe.skills}}}]}},{name:"update",description:'Update an entity by ID for the given resource. Payload shape depends on resource. For term-managed entities, send the FULL terms array on update to avoid deletions (include unchanged terms with their IDs). IMPORTANT: Include aiMetadata ONLY for the term(s) you want to update; other terms without aiMetadata in the payload will keep their existing AI metadata. Recommended fields when updating AI-generated content: ai_generated=true, ai_model (e.g., "gpt-4o-mini"), ai_generation_date.',inputSchema:{type:"object",properties:{resource:{type:"string"},id:{type:"string"},payload:{type:"object"}},required:["resource","id","payload"],allOf:[{if:{properties:{resource:{const:"departments"}}},then:{properties:{payload:Se.departments}}},{if:{properties:{resource:{const:"professions"}}},then:{properties:{payload:Se.professions}}},{if:{properties:{resource:{const:"languages"}}},then:{properties:{payload:Se.languages}}},{if:{properties:{resource:{const:"industries"}}},then:{properties:{payload:Se.industries}}},{if:{properties:{resource:{const:"sub-industries"}}},then:{properties:{payload:Se["sub-industries"]}}},{if:{properties:{resource:{const:"tool-types"}}},then:{properties:{payload:Se["tool-types"]}}},{if:{properties:{resource:{const:"countries"}}},then:{properties:{payload:Se.countries}}},{if:{properties:{resource:{const:"cities"}}},then:{properties:{payload:Se.cities}}},{if:{properties:{resource:{const:"actions"}}},then:{properties:{payload:Se.actions}}},{if:{properties:{resource:{const:"objects"}}},then:{properties:{payload:Se.objects}}},{if:{properties:{resource:{const:"responsibilities"}}},then:{properties:{payload:Se.responsibilities}}},{if:{properties:{resource:{const:"formats"}}},then:{properties:{payload:Se.formats}}},{if:{properties:{resource:{const:"statuses"}}},then:{properties:{payload:Se.statuses}}},{if:{properties:{resource:{const:"tools"}}},then:{properties:{payload:Se.tools}}},{if:{properties:{resource:{const:"shifts"}}},then:{properties:{payload:Se.shifts}}},{if:{properties:{resource:{const:"currencies"}}},then:{properties:{payload:Se.currencies}}},{if:{properties:{resource:{const:"rates"}}},then:{properties:{payload:Se.rates}}},{if:{properties:{resource:{const:"levels"}}},then:{properties:{payload:Se.levels}}},{if:{properties:{resource:{const:"positions"}}},then:{properties:{payload:Se.positions}}},{if:{properties:{resource:{const:"skills"}}},then:{properties:{payload:Se.skills}}}]}},{name:"get_term_types",description:"Get all term types",inputSchema:{type:"object",properties:{page:{type:"number",description:"Page number (default: 1)"},limit:{type:"number",description:"Number of term types per page (default: 10)"},search:{type:"string",description:"Search by term type name or description"}}}},{name:"find_existing_responsibility_terms",description:"Find existing Actions and Objects by language to check what terms already exist. Use this BEFORE adding new terms to responsibilities. This tool helps you find existing responsibility combinations or check if a specific action-object pair already has terms.",inputSchema:{type:"object",properties:{language_id:{type:"number",description:"Language ID - REQUIRED. Use get_languages to find language ID."},term_type_id:{type:"number",description:"Term type ID - REQUIRED. Use get_term_types to find term type ID."},action_id:{type:"number",description:"Action ID - REQUIRED. Use get_actions to find action ID."},object_id:{type:"number",description:"Object ID - REQUIRED. Use get_objects to find object ID."},search:{type:"string",description:"Search term (optional). Use to filter specific action-object combinations."}},required:["language_id","term_type_id","action_id","object_id"]}},{name:"find_existing_skill_terms",description:"Find existing Skills by responsibility and tool to check what terms already exist. Use this BEFORE adding new terms to skills. This tool helps you find existing skill combinations or check if a specific responsibility-tool pair already has terms.",inputSchema:{type:"object",properties:{language_id:{type:"number",description:"Language ID - REQUIRED. Use get_languages to find language ID."},term_type_id:{type:"number",description:"Term type ID - REQUIRED. Use get_term_types to find term type ID."},responsibility_id:{type:"number",description:"Responsibility ID - REQUIRED. Use list responsibilities to find responsibility ID."},tool_id:{type:"number",description:"Tool ID - REQUIRED. Use list tools to find tool ID."},search:{type:"string",description:"Search term (optional). Use to filter specific responsibility-tool combinations."}},required:["language_id","term_type_id","responsibility_id","tool_id"]}},{name:"create_term",description:'Create a new individual term using API token authentication. Terms can exist independently and be linked to term groups. IMPORTANT: When creating AI-generated terms, ALWAYS include aiMetadata with ai_generated=true, ai_model (e.g., "gpt-4o-mini"), and ai_generation_date for proper tracking. Only the created term\u2019s AI metadata is affected.',inputSchema:{type:"object",properties:{value:{type:"string",description:"Term value - REQUIRED"},description:{type:"string",description:"Term description (optional)"},language_id:{type:"number",description:"Language ID - REQUIRED. Use get_languages to find language ID"},term_type_id:{type:"number",description:"Term type ID - REQUIRED. Use get_term_types to find term type ID"},status_id:{type:"number",description:"Status ID (optional). Use get_statuses to find status ID"},term_group_id:{type:"number",description:"Term group ID (optional). If provided, term will be linked to this group"},aiMetadata:{type:"object",description:"AI metadata for tracking AI-generated content (optional)",properties:{...va}}},allOf:ga,required:["value","language_id","term_type_id","term_group_id"]}},{name:"update_term",description:"Update an existing individual term using API token authentication. IMPORTANT: Send aiMetadata only when you intend to change AI fields for this term; omitting aiMetadata leaves existing AI fields unchanged. Recommended: include ai_generated=true, ai_model, ai_generation_date. Supports version tracking and term group relation management.",inputSchema:{type:"object",properties:{termId:{type:"string",description:"Term ID (REQUIRED)"},value:{type:"string",description:"Term value (optional)"},description:{type:"string",description:"Term description (optional)"},language_id:{type:"number",description:"Language ID (optional). Use get_languages to find language ID"},term_type_id:{type:"number",description:"Term type ID (optional). Use get_term_types to find term type ID"},status_id:{type:"number",description:"Status ID (optional). Use get_statuses to find status ID"},term_group_id:{type:"number",description:"Term group ID (optional). For creating/updating group relation"},aiMetadata:{type:"object",description:"AI metadata updates (optional)",properties:{...va}}},allOf:ga,required:["termId","term_group_id"]}}];var pr=class extends Error{constructor(e){super(e),this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}toJSON(){return{name:this.name,message:this.message,code:this.code,statusCode:this.statusCode,context:this.context,stack:this.stack}}},Ke=class extends pr{constructor(e,r=500,s){super(e),this.statusCode=r,this.code="API_ERROR",this.context=s}},Ir=class extends pr{constructor(e,r){super(e),this.statusCode=408,this.code="TIMEOUT_ERROR",this.context={timeout:r}}};function Tr(a,e){if(a instanceof pr)return a;if(a&&typeof a=="object"){let r=a.message||String(a);if(r.includes("timeout"))return new Ir(r,e?.timeout??3e4);if(r.includes("status: 404"))return new Ke(r,404,e);if(r.includes("status: 401"))return new Ke("Authentication failed",401,e);if(r.includes("status: 403"))return new Ke("Access forbidden",403,e);let s=r.match(/status:\s*(\d+)/),t=s?parseInt(s[1],10):500;return new Ke(r,t,e)}return new Ke(a?String(a):"Unknown error occurred",500,{originalError:a,...e})}function ds(a){let e=a instanceof pr?a:Tr(a);return{content:[{type:"text",text:JSON.stringify({error:{message:e.message,code:e.code,type:e.name,statusCode:e.statusCode,context:e.context}},null,2)}]}}var ps=class{constructor(e={}){this.cache=new Map,this.ttl=e.ttl||3e5,this.maxSize=e.maxSize||1e3}get(e){let r=this.cache.get(e);return r?Date.now()>r.expiry?(this.cache.delete(e),null):(r.accessed=Date.now(),r.value):null}set(e,r,s){let t=s||this.ttl,i=Date.now()+t;this.cache.size>=this.maxSize&&this.evictOldest(),this.cache.set(e,{value:r,expiry:i,accessed:Date.now()})}clear(){this.cache.clear()}getStats(){return{size:this.cache.size,maxSize:this.maxSize,ttl:this.ttl}}evictOldest(){let e=null,r=Date.now();for(let[s,t]of this.cache.entries())t.accessed<r&&(r=t.accessed,e=s);e&&this.cache.delete(e)}},Dr=new ps({ttl:parseInt(process.env.CACHE_TTL_MS||"300000"),maxSize:parseInt(process.env.CACHE_MAX_SIZE||"1000")});function fs(a,e){let{url:r,headers:s,query:t,extras:i}=e||{},o={url:r||a,headers:uf(s||{}),query:t||{},extras:i||{}};return`${o.url}:${JSON.stringify(o)}`}function uf(a){let e={...a};return e.Authorization&&(e.Authorization="Bearer ***"),e.authorization&&(e.authorization="Bearer ***"),e}function To(a){for(let e of Dr.cache.keys())e.startsWith(a)&&Dr.cache.delete(e)}async function k(a,e={}){let r=`${dr}/api/token/${a}`,s=e.method||"GET",t=e.timeout||3e4,i=100*1024,o=new AbortController,n=setTimeout(()=>o.abort(),t),u={headers:{Authorization:`Bearer ${wr}`,"Content-Type":"application/json",...e.headers},body:e.body,method:s,signal:o.signal};if(u.body&&typeof u.body=="string"&&u.body.length>i)throw new Ke("Request body too large",413,{endpoint:a,method:s,maxBytes:i});try{if(s==="GET"&&e.skipCache!==!0){let m=fs(a,{url:r,headers:u.headers,query:e.query,extras:e.cacheKeyExtras}),_=Dr.get(m);if(_)return clearTimeout(n),_}let l=await fetch(r,u);if(clearTimeout(n),!l.ok){let m=await l.text(),_=`HTTP error! status: ${l.status}`;try{_=JSON.parse(m).message||_}catch{}throw new Ke(_,l.status,{endpoint:a,method:s,responseBody:m})}let f=await l.json();if(s==="GET"&&e.skipCache!==!0){let m=fs(a,{url:r,headers:u.headers,query:e.query,extras:e.cacheKeyExtras});Dr.set(m,f,e.cacheTtl)}else if(s!=="GET"){let m=String(a).split("/")[0];m&&To(`${dr}/api/token/${m}`)}return f}catch(l){throw clearTimeout(n),l.name==="AbortError"?new Ir(`Request timeout after ${t}ms`,t):Tr(l,{endpoint:a,method:s,timeout:t})}}function ot(){return process.env.MODE==="light"}function Pe(a={}){let{page:e=1,limit:r=10,search:s="",...t}=a,i=new URLSearchParams({page:String(e),limit:String(r),...s&&{search:s}});return Object.entries(t).forEach(([o,n])=>{n!=null&&i.set(o,String(n))}),ot()&&(i.has("all")||i.set("all","true"),i.has("isShort")||i.set("isShort","true")),i}async function Do(a={}){let e=Pe(a);return await k(`departments?${e}`)}async function hs(a,e={}){return await k(`departments/${a}`)}async function Oo(a){return await k("departments",{method:"POST",body:JSON.stringify(a)})}async function $o(a,e){let{preserveExistingTerms:r=!0,...s}=e;if(r){let i=(await hs(a)).terms||[];if(e.terms){let o=e.terms,n=[...i];o.forEach(u=>{let l=n.findIndex(f=>f.id===u.id);l>=0?n[l]={...n[l],...u}:n.push(u)}),s.terms=n}else s.terms=i}return await k(`departments/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function jo(a={}){let e=Pe(a);return await k(`professions?${e}`)}async function ms(a,e={}){return await k(`professions/${a}`)}async function ko(a){return await k("professions",{method:"POST",body:JSON.stringify(a)})}async function Ao(a,e){let{preserveExistingTerms:r=!0,...s}=e;if(r){let i=(await ms(a)).terms||[];if(e.terms){let o=e.terms,n=[...i];o.forEach(u=>{let l=n.findIndex(f=>f.id===u.id);l>=0?n[l]={...n[l],...u}:n.push(u)}),s.terms=n}else s.terms=i}return await k(`professions/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function Co(a={}){let e=Pe(a);return await k(`statuses?${e}`)}async function No(a,e={}){return await k(`statuses/${a}`)}async function qo(a){return await k("statuses",{method:"POST",body:JSON.stringify(a)})}async function Uo(a,e){return await k(`statuses/${a}`,{method:"PUT",body:JSON.stringify(e)})}async function Fo(a={}){let e=Pe(a);return await k(`languages?${e}`)}async function vs(a,e={}){return await k(`languages/${a}`)}async function Lo(a){return await k("languages",{method:"POST",body:JSON.stringify(a)})}async function Mo(a,e){let{preserveExistingTerms:r=!0,...s}=e;if(r){let i=(await vs(a)).terms||[];if(e.terms){let o=e.terms,n=[...i];o.forEach(u=>{let l=n.findIndex(f=>f.id===u.id);l>=0?n[l]={...n[l],...u}:n.push(u)}),s.terms=n}else s.terms=i}return await k(`languages/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function ya(a={}){let e=Pe(a);return await k(`term-types?${e}`)}async function Qo(a={}){let e=Pe(a);return await k(`countries?${e}`)}async function gs(a,e={}){let r=await k(`countries/${a}`);return ot()&&e.isShort!==!1?{id:r?.id,name:r?.name}:r}async function zo(a){return await k("countries",{method:"POST",body:JSON.stringify(a)})}async function Vo(a,e){let{preserveExistingTerms:r=!0,...s}=e;if(r){let i=(await gs(a)).terms||[];if(e.terms){let o=e.terms,n=[...i];o.forEach(u=>{let l=n.findIndex(f=>f.id===u.id);l>=0?n[l]={...n[l],...u}:n.push(u)}),s.terms=n}else s.terms=i}return await k(`countries/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function Ho(a={}){let e=Pe(a);return await k(`tool-types?${e}`)}async function Jo(a,e={}){let r=await k(`tool-types/${a}`);return ot()&&e.isShort!==!1?{id:r?.id,name:r?.name}:r}async function Bo(a){return await k("tool-types",{method:"POST",body:JSON.stringify(a)})}async function Zo(a,e){return await k(`tool-types/${a}`,{method:"PUT",body:JSON.stringify(e)})}async function Ko(a={}){let e=Pe(a);return await k(`tools?${e}`)}async function Go(a,e={}){return await k(`tools/${a}`)}async function Wo(a){return await k("tools",{method:"POST",body:JSON.stringify(a)})}async function Yo(a,e){return await k(`tools/${a}`,{method:"PUT",body:JSON.stringify(e)})}async function Xo(a={}){let e=Pe(a);return await k(`actions?${e}`)}async function ys(a,e={}){let r=await k(`actions/${a}`);return ot()&&e.isShort!==!1?{id:r?.id,name:r?.name}:r}async function ec(a){return await k("actions",{method:"POST",body:JSON.stringify(a)})}async function tc(a,e){let{preserveExistingTerms:r=!0,...s}=e;if(r){let i=(await ys(a)).terms||[];if(e.terms){let o=e.terms,n=[...i];o.forEach(u=>{let l=n.findIndex(f=>f.id===u.id);l>=0?n[l]={...n[l],...u}:n.push(u)}),s.terms=n}else s.terms=i}return await k(`actions/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function rc(a={}){let e=Pe(a);return await k(`objects?${e}`)}async function _s(a,e={}){let r=await k(`objects/${a}`);return ot()&&e.isShort!==!1?{id:r?.id,name:r?.name}:r}async function ac(a){return await k("objects",{method:"POST",body:JSON.stringify(a)})}async function sc(a,e){let{preserveExistingTerms:r=!0,...s}=e;if(r){let i=(await _s(a)).terms||[];if(e.terms){let o=e.terms,n=[...i];o.forEach(u=>{let l=n.findIndex(f=>f.id===u.id);l>=0?n[l]={...n[l],...u}:n.push(u)}),s.terms=n}else s.terms=i}return await k(`objects/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function ic(a={}){let e=Pe(a);return await k(`formats?${e}`)}async function nc(a,e={}){let r=await k(`formats/${a}`);return ot()&&e.isShort!==!1?{id:r?.id,name:r?.name}:r}async function oc(a){return await k("formats",{method:"POST",body:JSON.stringify(a)})}async function cc(a,e){return await k(`formats/${a}`,{method:"PUT",body:JSON.stringify(e)})}async function lc(a={}){let{page:e=1,limit:r=10,search:s="",language_ids:t,action_id:i,object_id:o,filters:n,all:u}=a,l=new URLSearchParams({page:e.toString(),limit:r.toString(),...s&&{search:s},...t&&{language_ids:JSON.stringify(t)},...i&&{action_id:i.toString()},...o&&{object_id:o.toString()},...n&&{filters:n},...u&&{all:u}});return await k(`responsibilities?${l}`)}async function uc(a,e={}){let r=await k(`responsibilities/${a}`);return ot()&&e.isShort!==!1?{id:r?.id,name:r?.name}:r}async function dc(a){return await k("responsibilities",{method:"POST",body:JSON.stringify(a)})}async function pc(a,e){return await k(`responsibilities/${a}`,{method:"PUT",body:JSON.stringify(e)})}async function bs(a={}){let{language_id:e,term_type_id:r,action_id:s,object_id:t,search:i=""}=a,o=new URLSearchParams({language_id:e.toString(),term_type_id:r.toString(),action_id:s.toString(),object_id:t.toString(),...i&&{search:i}});return await k(`responsibilities/find-existing-terms?${o}`)}async function fc(a={}){let e=Pe(a);return await k(`cities?${e}`)}async function Es(a,e={}){let r=await k(`cities/${a}`);return ot()&&e.isShort!==!1?{id:r?.id,name:r?.name}:r}async function hc(a){return await k("cities",{method:"POST",body:JSON.stringify(a)})}async function mc(a,e){let{preserveExistingTerms:r=!0,...s}=e;if(r){let i=(await Es(a)).terms||[];if(e.terms){let o=e.terms,n=[...i];o.forEach(u=>{let l=n.findIndex(f=>f.id===u.id);l>=0?n[l]={...n[l],...u}:n.push(u)}),s.terms=n}else s.terms=i}return await k(`cities/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function vc(a={}){let e=Pe(a);return await k(`industries?${e}`)}async function xs(a,e={}){let r=await k(`industries/${a}`);return ot()&&e.isShort!==!1?{id:r?.id,name:r?.name}:r}async function gc(a){return await k("industries",{method:"POST",body:JSON.stringify(a)})}async function yc(a,e){let{preserveExistingTerms:r=!0,...s}=e;if(r){let i=(await xs(a)).terms||[];if(e.terms){let o=e.terms,n=[...i];o.forEach(u=>{let l=n.findIndex(f=>f.id===u.id);l>=0?n[l]={...n[l],...u}:n.push(u)}),s.terms=n}else s.terms=i}return await k(`industries/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function _c(a={}){let e=Pe(a);return await k(`sub-industries?${e}`)}async function Ss(a,e={}){let r=await k(`sub-industries/${a}`);return ot()&&e.isShort!==!1?{id:r?.id,name:r?.name}:r}async function bc(a){return await k("sub-industries",{method:"POST",body:JSON.stringify(a)})}async function Ec(a,e){let{preserveExistingTerms:r=!0,...s}=e;if(r){let i=(await Ss(a)).terms||[];if(e.terms){let o=e.terms,n=[...i];o.forEach(u=>{let l=n.findIndex(f=>f.id===u.id);l>=0?n[l]={...n[l],...u}:n.push(u)}),s.terms=n}else s.terms=i}return await k(`sub-industries/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function xc(a={}){let e=Pe(a);return await k(`shifts?${e}`)}async function Sc(a,e={}){return await k(`shifts/${a}`)}async function Pc(a){return await k("shifts",{method:"POST",body:JSON.stringify(a)})}async function Rc(a,e){return await k(`shifts/${a}`,{method:"PUT",body:JSON.stringify(e)})}async function wc(a={}){let e=Pe(a);return await k(`currencies?${e}`)}async function Ic(a,e={}){return await k(`currencies/${a}`)}async function Tc(a){return await k("currencies",{method:"POST",body:JSON.stringify(a)})}async function Dc(a,e){return await k(`currencies/${a}`,{method:"PUT",body:JSON.stringify(e)})}async function Oc(a={}){let e=Pe(a);return await k(`levels?${e}`)}async function Ps(a,e={}){return await k(`levels/${a}`)}async function $c(a){return await k("levels",{method:"POST",body:JSON.stringify(a)})}async function jc(a,e){let{preserveExistingTerms:r=!0,...s}=e;if(r){let t=await Ps(a),i=t.terms||[],o=t.mainTerm||{},n=[...i];s.terms&&s.terms.forEach(u=>{let l=n.findIndex(f=>f.id===u.id);l>=0?n[l]={...n[l],...u}:n.push(u)}),s.terms=n,!s.mainTerm&&o&&(s.mainTerm=o)}return await k(`levels/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function kc(a={}){let e=Pe(a);return await k(`rates?${e}`)}async function Ac(a,e={}){return await k(`rates/${a}`)}async function Cc(a){return await k("rates",{method:"POST",body:JSON.stringify(a)})}async function Nc(a,e){return await k(`rates/${a}`,{method:"PUT",body:JSON.stringify(e)})}async function qc(a={}){let e=Pe(a);return await k(`positions?${e}`)}async function Rs(a,e={}){return await k(`positions/${a}`)}async function Uc(a){return await k("positions",{method:"POST",body:JSON.stringify(a)})}async function Fc(a,e){let{preserveExistingTerms:r=!0,...s}=e;if(r){let t=await Rs(a),i=t.terms||[],o=t.mainTerm||{},n=[...i];s.terms&&s.terms.forEach(u=>{let l=n.findIndex(f=>f.id===u.id);l>=0?n[l]={...n[l],...u}:n.push(u)}),s.terms=n,!s.mainTerm&&o&&(s.mainTerm=o)}return await k(`positions/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function Lc(a={}){let e=Pe(a);return await k(`skills?${e}`)}async function ws(a,e={}){return await k(`skills/${a}`)}async function Mc(a){return await k("skills",{method:"POST",body:JSON.stringify(a)})}async function Qc(a,e){let{preserveExistingTerms:r=!0,...s}=e;if(r){let t=await ws(a),i=t.terms||[],o=t.mainTerm||{},n=[...i];s.terms&&(s.terms.forEach(u=>{let l=n.findIndex(f=>f.id===u.id);l>=0?n[l]={...n[l],...u}:n.push(u)}),s.terms=n),!s.mainTerm&&o&&(s.mainTerm=o)}return await k(`skills/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function Is(a){return await k("terms",{method:"POST",body:JSON.stringify(a)})}async function Ts(a,e){return await k(`terms/${a}`,{method:"PUT",body:JSON.stringify(e)})}var zc={\u0434\u0435\u043F\u0430\u0440\u0442\u0430\u043C\u0435\u043D\u0442:"departments",\u0434\u0435\u043F\u0430\u0440\u0442\u0430\u043C\u0435\u043D\u0442\u0438:"departments",\u0432\u0456\u0434\u0434\u0456\u043B:"departments",\u0432\u0456\u0434\u0434\u0456\u043B\u0438:"departments",\u043E\u0442\u0434\u0435\u043B:"departments",\u043E\u0442\u0434\u0435\u043B\u044B:"departments",department:"departments",departments:"departments",\u043F\u0440\u043E\u0444\u0435\u0441\u0456\u044F:"professions",\u043F\u0440\u043E\u0444\u0435\u0441\u0456\u0457:"professions",\u043F\u0440\u043E\u0444\u0435\u0441\u0441\u0438\u044F:"professions",\u043F\u0440\u043E\u0444\u0435\u0441\u0441\u0438\u0438:"professions",profession:"professions",professions:"professions",\u043C\u043E\u0432\u0430:"languages",\u043C\u043E\u0432\u0438:"languages",\u044F\u0437\u044B\u043A:"languages",\u044F\u0437\u044B\u043A\u0438:"languages",language:"languages",languages:"languages",\u0441\u0442\u0430\u0442\u0443\u0441:"statuses",\u0441\u0442\u0430\u0442\u0443\u0441\u0438:"statuses",\u0441\u0442\u0430\u0442\u0443\u0441\u044B:"statuses",status:"statuses",statuses:"statuses",\u043A\u0440\u0430\u0457\u043D\u0430:"countries",\u043A\u0440\u0430\u0457\u043D\u0438:"countries",\u0441\u0442\u0440\u0430\u043D\u0430:"countries",\u0441\u0442\u0440\u0430\u043D\u044B:"countries",country:"countries",countries:"countries",\u043C\u0456\u0441\u0442\u043E:"cities",\u043C\u0456\u0441\u0442\u0430:"cities",\u0433\u043E\u0440\u043E\u0434:"cities",\u0433\u043E\u0440\u043E\u0434\u0430:"cities",city:"cities",cities:"cities",\u0456\u043D\u0434\u0443\u0441\u0442\u0440\u0456\u044F:"industries",\u0456\u043D\u0434\u0443\u0441\u0442\u0440\u0456\u0457:"industries",\u0438\u043D\u0434\u0443\u0441\u0442\u0440\u0438\u044F:"industries",\u0438\u043D\u0434\u0443\u0441\u0442\u0440\u0438\u0438:"industries",industry:"industries",industries:"industries",\u0441\u0443\u0431\u0456\u043D\u0434\u0443\u0441\u0442\u0440\u0456\u044F:"sub-industries",\u0441\u0443\u0431\u0456\u043D\u0434\u0443\u0441\u0442\u0440\u0456\u0457:"sub-industries",\u0441\u0443\u0431\u0438\u043D\u0434\u0443\u0441\u0442\u0440\u0438\u044F:"sub-industries",\u0441\u0443\u0431\u0438\u043D\u0434\u0443\u0441\u0442\u0440\u0438\u0438:"sub-industries","sub-industry":"sub-industries","sub-industries":"sub-industries",\u0456\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442:"tools",\u0456\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442\u0438:"tools",\u0438\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442:"tools",\u0438\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442\u044B:"tools",tool:"tools",tools:"tools","\u0442\u0438\u043F \u0456\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442\u0443":"tool-types","\u0442\u0438\u043F\u0438 \u0456\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442\u0456\u0432":"tool-types","\u0442\u0438\u043F \u0438\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442\u0430":"tool-types","\u0442\u0438\u043F\u044B \u0438\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442\u043E\u0432":"tool-types","tool type":"tool-types","tool types":"tool-types","tool-types":"tool-types","\u0442\u0438\u043F \u0442\u0435\u0440\u043C\u0456\u043D\u0443":"term-types","\u0442\u0438\u043F\u0438 \u0442\u0435\u0440\u043C\u0456\u043D\u0456\u0432":"term-types","\u0442\u0438\u043F \u0442\u0435\u0440\u043C\u0438\u043D\u0430":"term-types","\u0442\u0438\u043F\u044B \u0442\u0435\u0440\u043C\u0438\u043D\u043E\u0432":"term-types","term type":"term-types","term types":"term-types","term-types":"term-types",\u0434\u0456\u044F:"actions",\u0434\u0456\u0457:"actions",\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435:"actions",\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F:"actions",action:"actions",actions:"actions",\u043E\u0431\u02BC\u0454\u043A\u0442:"objects",\u043E\u0431\u044A\u0435\u043A\u0442:"objects",\u043E\u0431\u044A\u0435\u043A\u0442\u044B:"objects",objects:"objects",object:"objects",\u043E\u0431\u02BC\u0454\u043A\u0442\u0438:"objects",\u0444\u043E\u0440\u043C\u0430\u0442:"formats",\u0444\u043E\u0440\u043C\u0430\u0442\u0438:"formats",\u0444\u043E\u0440\u043C\u0430\u0442\u044B:"formats",format:"formats",formats:"formats",\u0437\u043C\u0456\u043D\u0430:"shifts",\u0437\u043C\u0456\u043D\u0438:"shifts",\u0441\u043C\u0435\u043D\u0430:"shifts",\u0441\u043C\u0435\u043D\u044B:"shifts",shift:"shifts",shifts:"shifts",\u0432\u0430\u043B\u044E\u0442\u0430:"currencies",\u0432\u0430\u043B\u044E\u0442\u0438:"currencies",\u0432\u0430\u043B\u044E\u0442\u044B:"currencies",currency:"currencies",currencies:"currencies",\u0441\u0442\u0430\u0432\u043A\u0430:"rates",\u0441\u0442\u0430\u0432\u043A\u0438:"rates",\u0442\u0430\u0440\u0438\u0444:"rates",\u0442\u0430\u0440\u0438\u0444\u044B:"rates",rate:"rates",rates:"rates",\u0440\u0456\u0432\u0435\u043D\u044C:"levels",\u0440\u0456\u0432\u043D\u0456:"levels",\u0443\u0440\u043E\u0432\u0435\u043D\u044C:"levels",\u0443\u0440\u043E\u0432\u043D\u0438:"levels",level:"levels",levels:"levels",\u043F\u043E\u0437\u0438\u0446\u0456\u044F:"positions",\u043F\u043E\u0437\u0438\u0446\u0456\u0457:"positions",\u0434\u043E\u043B\u0436\u043D\u043E\u0441\u0442\u044C:"positions",\u0434\u043E\u043B\u0436\u043D\u043E\u0441\u0442\u0438:"positions",position:"positions",positions:"positions",\u043D\u0430\u0432\u0438\u0447\u043A\u0430:"skills",\u043D\u0430\u0432\u0438\u0447\u043A\u0438:"skills",\u043D\u0430\u0432\u044B\u043A:"skills",\u043D\u0430\u0432\u044B\u043A\u0438:"skills",\u0443\u043C\u0435\u043D\u0438\u0435:"skills",\u0443\u043C\u0435\u043D\u0438\u044F:"skills",skill:"skills",skills:"skills"};function _a(a){if(!a)throw new Error("Resource is required");let e=String(a).toLowerCase().trim(),r=zc[e]||null;if(!r){let s=[...new Set(Object.values(zc))].sort();throw new Error(`Unknown resource "${a}". Try one of: ${s.join(", ")}`)}return r}var Or={departments:{list:Do,get:hs,create:Oo,update:$o},professions:{list:jo,get:ms,create:ko,update:Ao},languages:{list:Fo,get:vs,create:Lo,update:Mo},statuses:{list:Co,get:No,create:qo,update:Uo},countries:{list:Qo,get:gs,create:zo,update:Vo},cities:{list:fc,get:Es,create:hc,update:mc},industries:{list:vc,get:xs,create:gc,update:yc},"sub-industries":{list:_c,get:Ss,create:bc,update:Ec},tools:{list:Ko,get:Go,create:Wo,update:Yo},"tool-types":{list:Ho,get:Jo,create:Bo,update:Zo},"term-types":{list:ya},actions:{list:Xo,get:ys,create:ec,update:tc},objects:{list:rc,get:_s,create:ac,update:sc},formats:{list:ic,get:nc,create:oc,update:cc},responsibilities:{list:lc,get:uc,create:dc,update:pc},shifts:{list:xc,get:Sc,create:Pc,update:Rc},currencies:{list:wc,get:Ic,create:Tc,update:Dc},rates:{list:kc,get:Ac,create:Cc,update:Nc},levels:{list:Oc,get:Ps,create:$c,update:jc},positions:{list:qc,get:Rs,create:Uc,update:Fc},skills:{list:Lc,get:ws,create:Mc,update:Qc}};async function Vc({resource:a,...e}){let r=_a(a),s=Or[r]?.list;if(!s)throw new Error(`List not supported for ${r}`);let t=process.env.MODE||"standard",o=(["light","standard"].includes(t)?t:"standard")==="light"?{...e,all:!0,isShort:!0}:e;return await s(o)}async function Hc({resource:a,id:e}){let r=_a(a),s=Or[r]?.get;if(!s)throw new Error(`Get not supported for ${r}`);return await s(e)}async function Jc({resource:a,payload:e}){let r=_a(a),s=Or[r]?.create;if(!s)throw new Error(`Create not supported for ${r}`);return await s(e)}async function Bc({resource:a,id:e,payload:r}){let s=_a(a),t=Or[s]?.update;if(!t)throw new Error(`Update not supported for ${s}`);let i=r;return pf(s)&&(i=await ff(s,e,i),i={preserveExistingTerms:!1,...i}),await t(e,i)}var df=new Set(["departments","professions","languages","countries","cities","industries","sub-industries","actions","objects","responsibilities","levels","positions","skills"]);function pf(a){return df.has(a)}async function ff(a,e,r){let s=Or[a]?.get;if(!s)return r;let t=await s(e),i={...t,...r};if(r&&Object.prototype.hasOwnProperty.call(r,"mainTerm")?i.mainTerm=r.mainTerm||t.mainTerm:t.mainTerm&&(i.mainTerm=t.mainTerm),Array.isArray(r?.terms)){let n=[...Array.isArray(t.terms)?t.terms:[]];for(let u of r.terms){let l=u&&u.id!=null?n.findIndex(f=>f.id===u.id):-1;l>=0?n[l]={...n[l],...u}:n.push(u)}i.terms=n}else Array.isArray(t.terms)&&(i.terms=t.terms);return delete i.id,i}var Ds=class{constructor(e){this.requests=new Map,this.maxRequests=e.maxRequests,this.windowMs=e.windowMs}isAllowed(e){let r=Date.now(),s=this.requests.get(e)||{requests:[],blocked:0};return s.requests=s.requests.filter(t=>r-t<this.windowMs),s.requests.length>=this.maxRequests?(s.blocked++,this.requests.set(e,s),!1):(s.requests.push(r),this.requests.set(e,s),!0)}getStats(e){if(e){let r=this.requests.get(e);return{clientId:e,requests:r?.requests.length||0,blocked:r?.blocked||0}}return{totalClients:this.requests.size,totalBlocked:Array.from(this.requests.values()).reduce((r,s)=>r+s.blocked,0)}}},Zc=new Ds({maxRequests:60,windowMs:6e4});wr||process.exit(1);dr||process.exit(1);var Os=new fa({name:"libs-mcp-service",version:"1.0.0"},{capabilities:{tools:{}}});Os.setRequestHandler(Na,async()=>({tools:Io}));Os.setRequestHandler(qa,async a=>{let{name:e,arguments:r}=a.params,s=a?.params?.$clientId||"default-client";if(!Zc.isAllowed(s)){let t=new Ke("Rate limit exceeded",429,{clientId:s});return ds(t)}try{let t;switch(e){case"list":t=await Vc(r);break;case"get":t=await Hc(r);break;case"create":t=await Jc(r);break;case"update":t=await Bc(r);break;case"get_term_types":t=await ya(r);break;case"find_existing_responsibility_terms":t=await bs(r);break;case"create_term":t=await Is(r);break;case"update_term":t=await Ts(r.termId,r);break;default:throw new Error(`Unhandled tool: ${e}`)}return{content:[{type:"text",text:JSON.stringify(t,null,2)}]}}catch(t){let i=Tr(t,{tool:e,args:r});return ds(i)}});var hf=new ma;await Os.connect(hf);
/*! Bundled license information:

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)
*/
