#!/usr/bin/env node
var Vc=Object.create;var Sa=Object.defineProperty;var Qc=Object.getOwnPropertyDescriptor;var Hc=Object.getOwnPropertyNames;var Bc=Object.getPrototypeOf,Jc=Object.prototype.hasOwnProperty;var J=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),Zc=(a,e)=>{for(var t in e)Sa(a,t,{get:e[t],enumerable:!0})},Kc=(a,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Hc(e))!Jc.call(a,r)&&r!==t&&Sa(a,r,{get:()=>e[r],enumerable:!(s=Qc(e,r))||s.enumerable});return a};var Gc=(a,e,t)=>(t=a!=null?Vc(Bc(a)):{},Kc(e||!a||!a.__esModule?Sa(t,"default",{value:a,enumerable:!0}):t,a));var _n=J((Zt,yn)=>{(function(a,e){typeof Zt=="object"&&typeof yn<"u"?e(Zt):typeof define=="function"&&define.amd?define(["exports"],e):e(a.URI=a.URI||{})})(Zt,function(a){"use strict";function e(){for(var p=arguments.length,d=Array(p),v=0;v<p;v++)d[v]=arguments[v];if(d.length>1){d[0]=d[0].slice(0,-1);for(var E=d.length-1,x=1;x<E;++x)d[x]=d[x].slice(1,-1);return d[E]=d[E].slice(1),d.join("")}else return d[0]}function t(p){return"(?:"+p+")"}function s(p){return p===void 0?"undefined":p===null?"null":Object.prototype.toString.call(p).split(" ").pop().split("]").shift().toLowerCase()}function r(p){return p.toUpperCase()}function n(p){return p!=null?p instanceof Array?p:typeof p.length!="number"||p.split||p.setInterval||p.call?[p]:Array.prototype.slice.call(p):[]}function o(p,d){var v=p;if(d)for(var E in d)v[E]=d[E];return v}function i(p){var d="[A-Za-z]",v="[\\x0D]",E="[0-9]",x="[\\x22]",k=e(E,"[A-Fa-f]"),K="[\\x0A]",te="[\\x20]",ie=t(t("%[EFef]"+k+"%"+k+k+"%"+k+k)+"|"+t("%[89A-Fa-f]"+k+"%"+k+k)+"|"+t("%"+k+k)),ye="[\\:\\/\\?\\#\\[\\]\\@]",re="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",de=e(ye,re),_e=p?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",le=p?"[\\uE000-\\uF8FF]":"[]",se=e(d,E,"[\\-\\.\\_\\~]",_e),fe=t(d+e(d,E,"[\\+\\-\\.]")+"*"),ce=t(t(ie+"|"+e(se,re,"[\\:]"))+"*"),Or=t(t("25[0-5]")+"|"+t("2[0-4]"+E)+"|"+t("1"+E+E)+"|"+t("[1-9]"+E)+"|"+E),Fe=t(t("25[0-5]")+"|"+t("2[0-4]"+E)+"|"+t("1"+E+E)+"|"+t("0?[1-9]"+E)+"|0?0?"+E),Me=t(Fe+"\\."+Fe+"\\."+Fe+"\\."+Fe),ue=t(k+"{1,4}"),Le=t(t(ue+"\\:"+ue)+"|"+Me),ze=t(t(ue+"\\:")+"{6}"+Le),ar=t("\\:\\:"+t(ue+"\\:")+"{5}"+Le),$r=t(t(ue)+"?\\:\\:"+t(ue+"\\:")+"{4}"+Le),lr=t(t(t(ue+"\\:")+"{0,1}"+ue)+"?\\:\\:"+t(ue+"\\:")+"{3}"+Le),mt=t(t(t(ue+"\\:")+"{0,2}"+ue)+"?\\:\\:"+t(ue+"\\:")+"{2}"+Le),Dt=t(t(t(ue+"\\:")+"{0,3}"+ue)+"?\\:\\:"+ue+"\\:"+Le),At=t(t(t(ue+"\\:")+"{0,4}"+ue)+"?\\:\\:"+Le),Wr=t(t(t(ue+"\\:")+"{0,5}"+ue)+"?\\:\\:"+ue),Yr=t(t(t(ue+"\\:")+"{0,6}"+ue)+"?\\:\\:"),dr=t([ze,ar,$r,lr,mt,Dt,At,Wr,Yr].join("|")),Xr=t(t(se+"|"+ie)+"+"),xa=t(dr+"\\%25"+Xr),Dr=t(dr+t("\\%25|\\%(?!"+k+"{2})")+Xr),Nc=t("[vV]"+k+"+\\."+e(se,re,"[\\:]")+"+"),qc=t("\\["+t(Dr+"|"+dr+"|"+Nc)+"\\]"),Ns=t(t(ie+"|"+e(se,re))+"*"),vt=t(qc+"|"+Me+"(?!"+Ns+")|"+Ns),gt=t(E+"*"),qs=t(t(ce+"@")+"?"+vt+t("\\:"+gt)+"?"),yt=t(ie+"|"+e(se,re,"[\\:\\@]")),Fc=t(yt+"*"),Fs=t(yt+"+"),Lc=t(t(ie+"|"+e(se,re,"[\\@]"))+"+"),fr=t(t("\\/"+Fc)+"*"),et=t("\\/"+t(Fs+fr)+"?"),Pa=t(Lc+fr),jt=t(Fs+fr),rt="(?!"+yt+")",Mf=t(fr+"|"+et+"|"+Pa+"|"+jt+"|"+rt),tt=t(t(yt+"|"+e("[\\/\\?]",le))+"*"),_t=t(t(yt+"|[\\/\\?]")+"*"),Ls=t(t("\\/\\/"+qs+fr)+"|"+et+"|"+jt+"|"+rt),Uc=t(fe+"\\:"+Ls+t("\\?"+tt)+"?"+t("\\#"+_t)+"?"),Mc=t(t("\\/\\/"+qs+fr)+"|"+et+"|"+Pa+"|"+rt),zc=t(Mc+t("\\?"+tt)+"?"+t("\\#"+_t)+"?"),zf=t(Uc+"|"+zc),Vf=t(fe+"\\:"+Ls+t("\\?"+tt)+"?"),Qf="^("+fe+")\\:"+t(t("\\/\\/("+t("("+ce+")@")+"?("+vt+")"+t("\\:("+gt+")")+"?)")+"?("+fr+"|"+et+"|"+jt+"|"+rt+")")+t("\\?("+tt+")")+"?"+t("\\#("+_t+")")+"?$",Hf="^(){0}"+t(t("\\/\\/("+t("("+ce+")@")+"?("+vt+")"+t("\\:("+gt+")")+"?)")+"?("+fr+"|"+et+"|"+Pa+"|"+rt+")")+t("\\?("+tt+")")+"?"+t("\\#("+_t+")")+"?$",Bf="^("+fe+")\\:"+t(t("\\/\\/("+t("("+ce+")@")+"?("+vt+")"+t("\\:("+gt+")")+"?)")+"?("+fr+"|"+et+"|"+jt+"|"+rt+")")+t("\\?("+tt+")")+"?$",Jf="^"+t("\\#("+_t+")")+"?$",Zf="^"+t("("+ce+")@")+"?("+vt+")"+t("\\:("+gt+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",d,E,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",se,re),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",se,re),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",se,re),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",se,re),"g"),NOT_QUERY:new RegExp(e("[^\\%]",se,re,"[\\:\\@\\/\\?]",le),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",se,re,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",se,re),"g"),UNRESERVED:new RegExp(se,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",se,de),"g"),PCT_ENCODED:new RegExp(ie,"g"),IPV4ADDRESS:new RegExp("^("+Me+")$"),IPV6ADDRESS:new RegExp("^\\[?("+dr+")"+t(t("\\%25|\\%(?!"+k+"{2})")+"("+Xr+")")+"?\\]?$")}}var f=i(!1),u=i(!0),h=function(){function p(d,v){var E=[],x=!0,k=!1,K=void 0;try{for(var te=d[Symbol.iterator](),ie;!(x=(ie=te.next()).done)&&(E.push(ie.value),!(v&&E.length===v));x=!0);}catch(ye){k=!0,K=ye}finally{try{!x&&te.return&&te.return()}finally{if(k)throw K}}return E}return function(d,v){if(Array.isArray(d))return d;if(Symbol.iterator in Object(d))return p(d,v);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=function(p){if(Array.isArray(p)){for(var d=0,v=Array(p.length);d<p.length;d++)v[d]=p[d];return v}else return Array.from(p)},_=2147483647,l=36,y=1,b=26,g=38,P=700,I=72,S=128,R="-",O=/^xn--/,$=/[^\0-\x7E]/,V=/[\x2E\u3002\uFF0E\uFF61]/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=l-y,U=Math.floor,F=String.fromCharCode;function N(p){throw new RangeError(L[p])}function T(p,d){for(var v=[],E=p.length;E--;)v[E]=d(p[E]);return v}function A(p,d){var v=p.split("@"),E="";v.length>1&&(E=v[0]+"@",p=v[1]),p=p.replace(V,".");var x=p.split("."),k=T(x,d).join(".");return E+k}function q(p){for(var d=[],v=0,E=p.length;v<E;){var x=p.charCodeAt(v++);if(x>=55296&&x<=56319&&v<E){var k=p.charCodeAt(v++);(k&64512)==56320?d.push(((x&1023)<<10)+(k&1023)+65536):(d.push(x),v--)}else d.push(x)}return d}var oe=function(d){return String.fromCodePoint.apply(String,m(d))},Y=function(d){return d-48<10?d-22:d-65<26?d-65:d-97<26?d-97:l},ee=function(d,v){return d+22+75*(d<26)-((v!=0)<<5)},W=function(d,v,E){var x=0;for(d=E?U(d/P):d>>1,d+=U(d/v);d>D*b>>1;x+=l)d=U(d/D);return U(x+(D+1)*d/(d+g))},Q=function(d){var v=[],E=d.length,x=0,k=S,K=I,te=d.lastIndexOf(R);te<0&&(te=0);for(var ie=0;ie<te;++ie)d.charCodeAt(ie)>=128&&N("not-basic"),v.push(d.charCodeAt(ie));for(var ye=te>0?te+1:0;ye<E;){for(var re=x,de=1,_e=l;;_e+=l){ye>=E&&N("invalid-input");var le=Y(d.charCodeAt(ye++));(le>=l||le>U((_-x)/de))&&N("overflow"),x+=le*de;var se=_e<=K?y:_e>=K+b?b:_e-K;if(le<se)break;var fe=l-se;de>U(_/fe)&&N("overflow"),de*=fe}var ce=v.length+1;K=W(x-re,ce,re==0),U(x/ce)>_-k&&N("overflow"),k+=U(x/ce),x%=ce,v.splice(x++,0,k)}return String.fromCodePoint.apply(String,v)},he=function(d){var v=[];d=q(d);var E=d.length,x=S,k=0,K=I,te=!0,ie=!1,ye=void 0;try{for(var re=d[Symbol.iterator](),de;!(te=(de=re.next()).done);te=!0){var _e=de.value;_e<128&&v.push(F(_e))}}catch(Dr){ie=!0,ye=Dr}finally{try{!te&&re.return&&re.return()}finally{if(ie)throw ye}}var le=v.length,se=le;for(le&&v.push(R);se<E;){var fe=_,ce=!0,Or=!1,Fe=void 0;try{for(var Me=d[Symbol.iterator](),ue;!(ce=(ue=Me.next()).done);ce=!0){var Le=ue.value;Le>=x&&Le<fe&&(fe=Le)}}catch(Dr){Or=!0,Fe=Dr}finally{try{!ce&&Me.return&&Me.return()}finally{if(Or)throw Fe}}var ze=se+1;fe-x>U((_-k)/ze)&&N("overflow"),k+=(fe-x)*ze,x=fe;var ar=!0,$r=!1,lr=void 0;try{for(var mt=d[Symbol.iterator](),Dt;!(ar=(Dt=mt.next()).done);ar=!0){var At=Dt.value;if(At<x&&++k>_&&N("overflow"),At==x){for(var Wr=k,Yr=l;;Yr+=l){var dr=Yr<=K?y:Yr>=K+b?b:Yr-K;if(Wr<dr)break;var Xr=Wr-dr,xa=l-dr;v.push(F(ee(dr+Xr%xa,0))),Wr=U(Xr/xa)}v.push(F(ee(Wr,0))),K=W(k,ze,se==le),k=0,++se}}}catch(Dr){$r=!0,lr=Dr}finally{try{!ar&&mt.return&&mt.return()}finally{if($r)throw lr}}++k,++x}return v.join("")},we=function(d){return A(d,function(v){return O.test(v)?Q(v.slice(4).toLowerCase()):v})},Ie=function(d){return A(d,function(v){return $.test(v)?"xn--"+he(v):v})},ae={version:"2.1.0",ucs2:{decode:q,encode:oe},decode:Q,encode:he,toASCII:Ie,toUnicode:we},ve={};function xe(p){var d=p.charCodeAt(0),v=void 0;return d<16?v="%0"+d.toString(16).toUpperCase():d<128?v="%"+d.toString(16).toUpperCase():d<2048?v="%"+(d>>6|192).toString(16).toUpperCase()+"%"+(d&63|128).toString(16).toUpperCase():v="%"+(d>>12|224).toString(16).toUpperCase()+"%"+(d>>6&63|128).toString(16).toUpperCase()+"%"+(d&63|128).toString(16).toUpperCase(),v}function Oe(p){for(var d="",v=0,E=p.length;v<E;){var x=parseInt(p.substr(v+1,2),16);if(x<128)d+=String.fromCharCode(x),v+=3;else if(x>=194&&x<224){if(E-v>=6){var k=parseInt(p.substr(v+4,2),16);d+=String.fromCharCode((x&31)<<6|k&63)}else d+=p.substr(v,6);v+=6}else if(x>=224){if(E-v>=9){var K=parseInt(p.substr(v+4,2),16),te=parseInt(p.substr(v+7,2),16);d+=String.fromCharCode((x&15)<<12|(K&63)<<6|te&63)}else d+=p.substr(v,9);v+=9}else d+=p.substr(v,3),v+=3}return d}function gr(p,d){function v(E){var x=Oe(E);return x.match(d.UNRESERVED)?x:E}return p.scheme&&(p.scheme=String(p.scheme).replace(d.PCT_ENCODED,v).toLowerCase().replace(d.NOT_SCHEME,"")),p.userinfo!==void 0&&(p.userinfo=String(p.userinfo).replace(d.PCT_ENCODED,v).replace(d.NOT_USERINFO,xe).replace(d.PCT_ENCODED,r)),p.host!==void 0&&(p.host=String(p.host).replace(d.PCT_ENCODED,v).toLowerCase().replace(d.NOT_HOST,xe).replace(d.PCT_ENCODED,r)),p.path!==void 0&&(p.path=String(p.path).replace(d.PCT_ENCODED,v).replace(p.scheme?d.NOT_PATH:d.NOT_PATH_NOSCHEME,xe).replace(d.PCT_ENCODED,r)),p.query!==void 0&&(p.query=String(p.query).replace(d.PCT_ENCODED,v).replace(d.NOT_QUERY,xe).replace(d.PCT_ENCODED,r)),p.fragment!==void 0&&(p.fragment=String(p.fragment).replace(d.PCT_ENCODED,v).replace(d.NOT_FRAGMENT,xe).replace(d.PCT_ENCODED,r)),p}function cr(p){return p.replace(/^0*(.*)/,"$1")||"0"}function ge(p,d){var v=p.match(d.IPV4ADDRESS)||[],E=h(v,2),x=E[1];return x?x.split(".").map(cr).join("."):p}function pe(p,d){var v=p.match(d.IPV6ADDRESS)||[],E=h(v,3),x=E[1],k=E[2];if(x){for(var K=x.toLowerCase().split("::").reverse(),te=h(K,2),ie=te[0],ye=te[1],re=ye?ye.split(":").map(cr):[],de=ie.split(":").map(cr),_e=d.IPV4ADDRESS.test(de[de.length-1]),le=_e?7:8,se=de.length-le,fe=Array(le),ce=0;ce<le;++ce)fe[ce]=re[ce]||de[se+ce]||"";_e&&(fe[le-1]=ge(fe[le-1],d));var Or=fe.reduce(function(ze,ar,$r){if(!ar||ar==="0"){var lr=ze[ze.length-1];lr&&lr.index+lr.length===$r?lr.length++:ze.push({index:$r,length:1})}return ze},[]),Fe=Or.sort(function(ze,ar){return ar.length-ze.length})[0],Me=void 0;if(Fe&&Fe.length>1){var ue=fe.slice(0,Fe.index),Le=fe.slice(Fe.index+Fe.length);Me=ue.join(":")+"::"+Le.join(":")}else Me=fe.join(":");return k&&(Me+="%"+k),Me}else return p}var Rr=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Re="".match(/(){0}/)[1]===void 0;function ne(p){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v={},E=d.iri!==!1?u:f;d.reference==="suffix"&&(p=(d.scheme?d.scheme+":":"")+"//"+p);var x=p.match(Rr);if(x){Re?(v.scheme=x[1],v.userinfo=x[3],v.host=x[4],v.port=parseInt(x[5],10),v.path=x[6]||"",v.query=x[7],v.fragment=x[8],isNaN(v.port)&&(v.port=x[5])):(v.scheme=x[1]||void 0,v.userinfo=p.indexOf("@")!==-1?x[3]:void 0,v.host=p.indexOf("//")!==-1?x[4]:void 0,v.port=parseInt(x[5],10),v.path=x[6]||"",v.query=p.indexOf("?")!==-1?x[7]:void 0,v.fragment=p.indexOf("#")!==-1?x[8]:void 0,isNaN(v.port)&&(v.port=p.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?x[4]:void 0)),v.host&&(v.host=pe(ge(v.host,E),E)),v.scheme===void 0&&v.userinfo===void 0&&v.host===void 0&&v.port===void 0&&!v.path&&v.query===void 0?v.reference="same-document":v.scheme===void 0?v.reference="relative":v.fragment===void 0?v.reference="absolute":v.reference="uri",d.reference&&d.reference!=="suffix"&&d.reference!==v.reference&&(v.error=v.error||"URI is not a "+d.reference+" reference.");var k=ve[(d.scheme||v.scheme||"").toLowerCase()];if(!d.unicodeSupport&&(!k||!k.unicodeSupport)){if(v.host&&(d.domainHost||k&&k.domainHost))try{v.host=ae.toASCII(v.host.replace(E.PCT_ENCODED,Oe).toLowerCase())}catch(K){v.error=v.error||"Host's domain name can not be converted to ASCII via punycode: "+K}gr(v,f)}else gr(v,E);k&&k.parse&&k.parse(v,d)}else v.error=v.error||"URI can not be parsed.";return v}function yr(p,d){var v=d.iri!==!1?u:f,E=[];return p.userinfo!==void 0&&(E.push(p.userinfo),E.push("@")),p.host!==void 0&&E.push(pe(ge(String(p.host),v),v).replace(v.IPV6ADDRESS,function(x,k,K){return"["+k+(K?"%25"+K:"")+"]"})),(typeof p.port=="number"||typeof p.port=="string")&&(E.push(":"),E.push(String(p.port))),E.length?E.join(""):void 0}var ur=/^\.\.?\//,Tr=/^\/\.(\/|$)/,Ir=/^\/\.\.(\/|$)/,Pe=/^\/?(?:.|\n)*?(?=\/|$)/;function Ue(p){for(var d=[];p.length;)if(p.match(ur))p=p.replace(ur,"");else if(p.match(Tr))p=p.replace(Tr,"/");else if(p.match(Ir))p=p.replace(Ir,"/"),d.pop();else if(p==="."||p==="..")p="";else{var v=p.match(Pe);if(v){var E=v[0];p=p.slice(E.length),d.push(E)}else throw new Error("Unexpected dot segment condition")}return d.join("")}function Ae(p){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=d.iri?u:f,E=[],x=ve[(d.scheme||p.scheme||"").toLowerCase()];if(x&&x.serialize&&x.serialize(p,d),p.host&&!v.IPV6ADDRESS.test(p.host)){if(d.domainHost||x&&x.domainHost)try{p.host=d.iri?ae.toUnicode(p.host):ae.toASCII(p.host.replace(v.PCT_ENCODED,Oe).toLowerCase())}catch(te){p.error=p.error||"Host's domain name can not be converted to "+(d.iri?"Unicode":"ASCII")+" via punycode: "+te}}gr(p,v),d.reference!=="suffix"&&p.scheme&&(E.push(p.scheme),E.push(":"));var k=yr(p,d);if(k!==void 0&&(d.reference!=="suffix"&&E.push("//"),E.push(k),p.path&&p.path.charAt(0)!=="/"&&E.push("/")),p.path!==void 0){var K=p.path;!d.absolutePath&&(!x||!x.absolutePath)&&(K=Ue(K)),k===void 0&&(K=K.replace(/^\/\//,"/%2F")),E.push(K)}return p.query!==void 0&&(E.push("?"),E.push(p.query)),p.fragment!==void 0&&(E.push("#"),E.push(p.fragment)),E.join("")}function $e(p,d){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},E=arguments[3],x={};return E||(p=ne(Ae(p,v),v),d=ne(Ae(d,v),v)),v=v||{},!v.tolerant&&d.scheme?(x.scheme=d.scheme,x.userinfo=d.userinfo,x.host=d.host,x.port=d.port,x.path=Ue(d.path||""),x.query=d.query):(d.userinfo!==void 0||d.host!==void 0||d.port!==void 0?(x.userinfo=d.userinfo,x.host=d.host,x.port=d.port,x.path=Ue(d.path||""),x.query=d.query):(d.path?(d.path.charAt(0)==="/"?x.path=Ue(d.path):((p.userinfo!==void 0||p.host!==void 0||p.port!==void 0)&&!p.path?x.path="/"+d.path:p.path?x.path=p.path.slice(0,p.path.lastIndexOf("/")+1)+d.path:x.path=d.path,x.path=Ue(x.path)),x.query=d.query):(x.path=p.path,d.query!==void 0?x.query=d.query:x.query=p.query),x.userinfo=p.userinfo,x.host=p.host,x.port=p.port),x.scheme=p.scheme),x.fragment=d.fragment,x}function rr(p,d,v){var E=o({scheme:"null"},v);return Ae($e(ne(p,E),ne(d,E),E,!0),E)}function qe(p,d){return typeof p=="string"?p=Ae(ne(p,d),d):s(p)==="object"&&(p=ne(Ae(p,d),d)),p}function $t(p,d,v){return typeof p=="string"?p=Ae(ne(p,v),v):s(p)==="object"&&(p=Ae(p,v)),typeof d=="string"?d=Ae(ne(d,v),v):s(d)==="object"&&(d=Ae(d,v)),p===d}function ba(p,d){return p&&p.toString().replace(!d||!d.iri?f.ESCAPE:u.ESCAPE,xe)}function Ke(p,d){return p&&p.toString().replace(!d||!d.iri?f.PCT_ENCODED:u.PCT_ENCODED,Oe)}var ht={scheme:"http",domainHost:!0,parse:function(d,v){return d.host||(d.error=d.error||"HTTP URIs must have a host."),d},serialize:function(d,v){var E=String(d.scheme).toLowerCase()==="https";return(d.port===(E?443:80)||d.port==="")&&(d.port=void 0),d.path||(d.path="/"),d}},Is={scheme:"https",domainHost:ht.domainHost,parse:ht.parse,serialize:ht.serialize};function Os(p){return typeof p.secure=="boolean"?p.secure:String(p.scheme).toLowerCase()==="wss"}var pt={scheme:"ws",domainHost:!0,parse:function(d,v){var E=d;return E.secure=Os(E),E.resourceName=(E.path||"/")+(E.query?"?"+E.query:""),E.path=void 0,E.query=void 0,E},serialize:function(d,v){if((d.port===(Os(d)?443:80)||d.port==="")&&(d.port=void 0),typeof d.secure=="boolean"&&(d.scheme=d.secure?"wss":"ws",d.secure=void 0),d.resourceName){var E=d.resourceName.split("?"),x=h(E,2),k=x[0],K=x[1];d.path=k&&k!=="/"?k:void 0,d.query=K,d.resourceName=void 0}return d.fragment=void 0,d}},$s={scheme:"wss",domainHost:pt.domainHost,parse:pt.parse,serialize:pt.serialize},Sc={},wc=!0,Ds="[A-Za-z0-9\\-\\.\\_\\~"+(wc?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",tr="[0-9A-Fa-f]",Rc=t(t("%[EFef]"+tr+"%"+tr+tr+"%"+tr+tr)+"|"+t("%[89A-Fa-f]"+tr+"%"+tr+tr)+"|"+t("%"+tr+tr)),Tc="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Ic="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Oc=e(Ic,'[\\"\\\\]'),$c="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Dc=new RegExp(Ds,"g"),Gr=new RegExp(Rc,"g"),Ac=new RegExp(e("[^]",Tc,"[\\.]",'[\\"]',Oc),"g"),As=new RegExp(e("[^]",Ds,$c),"g"),jc=As;function Ea(p){var d=Oe(p);return d.match(Dc)?d:p}var js={scheme:"mailto",parse:function(d,v){var E=d,x=E.to=E.path?E.path.split(","):[];if(E.path=void 0,E.query){for(var k=!1,K={},te=E.query.split("&"),ie=0,ye=te.length;ie<ye;++ie){var re=te[ie].split("=");switch(re[0]){case"to":for(var de=re[1].split(","),_e=0,le=de.length;_e<le;++_e)x.push(de[_e]);break;case"subject":E.subject=Ke(re[1],v);break;case"body":E.body=Ke(re[1],v);break;default:k=!0,K[Ke(re[0],v)]=Ke(re[1],v);break}}k&&(E.headers=K)}E.query=void 0;for(var se=0,fe=x.length;se<fe;++se){var ce=x[se].split("@");if(ce[0]=Ke(ce[0]),v.unicodeSupport)ce[1]=Ke(ce[1],v).toLowerCase();else try{ce[1]=ae.toASCII(Ke(ce[1],v).toLowerCase())}catch(Or){E.error=E.error||"Email address's domain name can not be converted to ASCII via punycode: "+Or}x[se]=ce.join("@")}return E},serialize:function(d,v){var E=d,x=n(d.to);if(x){for(var k=0,K=x.length;k<K;++k){var te=String(x[k]),ie=te.lastIndexOf("@"),ye=te.slice(0,ie).replace(Gr,Ea).replace(Gr,r).replace(Ac,xe),re=te.slice(ie+1);try{re=v.iri?ae.toUnicode(re):ae.toASCII(Ke(re,v).toLowerCase())}catch(se){E.error=E.error||"Email address's domain name can not be converted to "+(v.iri?"Unicode":"ASCII")+" via punycode: "+se}x[k]=ye+"@"+re}E.path=x.join(",")}var de=d.headers=d.headers||{};d.subject&&(de.subject=d.subject),d.body&&(de.body=d.body);var _e=[];for(var le in de)de[le]!==Sc[le]&&_e.push(le.replace(Gr,Ea).replace(Gr,r).replace(As,xe)+"="+de[le].replace(Gr,Ea).replace(Gr,r).replace(jc,xe));return _e.length&&(E.query=_e.join("&")),E}},Cc=/^([^\:]+)\:(.*)/,Cs={scheme:"urn",parse:function(d,v){var E=d.path&&d.path.match(Cc),x=d;if(E){var k=v.scheme||x.scheme||"urn",K=E[1].toLowerCase(),te=E[2],ie=k+":"+(v.nid||K),ye=ve[ie];x.nid=K,x.nss=te,x.path=void 0,ye&&(x=ye.parse(x,v))}else x.error=x.error||"URN can not be parsed.";return x},serialize:function(d,v){var E=v.scheme||d.scheme||"urn",x=d.nid,k=E+":"+(v.nid||x),K=ve[k];K&&(d=K.serialize(d,v));var te=d,ie=d.nss;return te.path=(x||v.nid)+":"+ie,te}},kc=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ks={scheme:"urn:uuid",parse:function(d,v){var E=d;return E.uuid=E.nss,E.nss=void 0,!v.tolerant&&(!E.uuid||!E.uuid.match(kc))&&(E.error=E.error||"UUID is not valid."),E},serialize:function(d,v){var E=d;return E.nss=(d.uuid||"").toLowerCase(),E}};ve[ht.scheme]=ht,ve[Is.scheme]=Is,ve[pt.scheme]=pt,ve[$s.scheme]=$s,ve[js.scheme]=js,ve[Cs.scheme]=Cs,ve[ks.scheme]=ks,a.SCHEMES=ve,a.pctEncChar=xe,a.pctDecChars=Oe,a.parse=ne,a.removeDotSegments=Ue,a.serialize=Ae,a.resolveComponents=$e,a.resolve=rr,a.normalize=qe,a.equal=$t,a.escapeComponent=ba,a.unescapeComponent=Ke,Object.defineProperty(a,"__esModule",{value:!0})})});var Kt=J((jh,bn)=>{"use strict";bn.exports=function a(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var s,r,n;if(Array.isArray(e)){if(s=e.length,s!=t.length)return!1;for(r=s;r--!==0;)if(!a(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(n=Object.keys(e),s=n.length,s!==Object.keys(t).length)return!1;for(r=s;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,n[r]))return!1;for(r=s;r--!==0;){var o=n[r];if(!a(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}});var xn=J((Ch,En)=>{"use strict";En.exports=function(e){for(var t=0,s=e.length,r=0,n;r<s;)t++,n=e.charCodeAt(r++),n>=55296&&n<=56319&&r<s&&(n=e.charCodeAt(r),(n&64512)==56320&&r++);return t}});var Zr=J((kh,wn)=>{"use strict";wn.exports={copy:ad,checkDataType:Ma,checkDataTypes:sd,coerceToTypes:nd,toHash:Va,getProperty:Qa,escapeQuotes:Ha,equal:Kt(),ucs2length:xn(),varOccurences:cd,varReplace:ud,schemaHasRules:ld,schemaHasRulesExcept:dd,schemaUnknownRules:fd,toQuotedString:za,getPathExpr:hd,getPath:pd,getData:gd,unescapeFragment:yd,unescapeJsonPointer:Ja,escapeFragment:_d,escapeJsonPointer:Ba};function ad(a,e){e=e||{};for(var t in a)e[t]=a[t];return e}function Ma(a,e,t,s){var r=s?" !== ":" === ",n=s?" || ":" && ",o=s?"!":"",i=s?"":"!";switch(a){case"null":return e+r+"null";case"array":return o+"Array.isArray("+e+")";case"object":return"("+o+e+n+"typeof "+e+r+'"object"'+n+i+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+r+'"number"'+n+i+"("+e+" % 1)"+n+e+r+e+(t?n+o+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+r+'"'+a+'"'+(t?n+o+"isFinite("+e+")":"")+")";default:return"typeof "+e+r+'"'+a+'"'}}function sd(a,e,t){switch(a.length){case 1:return Ma(a[0],e,t,!0);default:var s="",r=Va(a);r.array&&r.object&&(s=r.null?"(":"(!"+e+" || ",s+="typeof "+e+' !== "object")',delete r.null,delete r.array,delete r.object),r.number&&delete r.integer;for(var n in r)s+=(s?" && ":"")+Ma(n,e,t,!0);return s}}var Pn=Va(["string","number","integer","boolean","null"]);function nd(a,e){if(Array.isArray(e)){for(var t=[],s=0;s<e.length;s++){var r=e[s];(Pn[r]||a==="array"&&r==="array")&&(t[t.length]=r)}if(t.length)return t}else{if(Pn[e])return[e];if(a==="array"&&e==="array")return["array"]}}function Va(a){for(var e={},t=0;t<a.length;t++)e[a[t]]=!0;return e}var id=/^[a-z$_][a-z$_0-9]*$/i,od=/'|\\/g;function Qa(a){return typeof a=="number"?"["+a+"]":id.test(a)?"."+a:"['"+Ha(a)+"']"}function Ha(a){return a.replace(od,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function cd(a,e){e+="[^0-9]";var t=a.match(new RegExp(e,"g"));return t?t.length:0}function ud(a,e,t){return e+="([^0-9])",t=t.replace(/\$/g,"$$$$"),a.replace(new RegExp(e,"g"),t+"$1")}function ld(a,e){if(typeof a=="boolean")return!a;for(var t in a)if(e[t])return!0}function dd(a,e,t){if(typeof a=="boolean")return!a&&t!="not";for(var s in a)if(s!=t&&e[s])return!0}function fd(a,e){if(typeof a!="boolean"){for(var t in a)if(!e[t])return t}}function za(a){return"'"+Ha(a)+"'"}function hd(a,e,t,s){var r=t?"'/' + "+e+(s?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):s?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return Sn(a,r)}function pd(a,e,t){var s=za(t?"/"+Ba(e):Qa(e));return Sn(a,s)}var md=/^\/(?:[^~]|~0|~1)*$/,vd=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function gd(a,e,t){var s,r,n,o;if(a==="")return"rootData";if(a[0]=="/"){if(!md.test(a))throw new Error("Invalid JSON-pointer: "+a);r=a,n="rootData"}else{if(o=a.match(vd),!o)throw new Error("Invalid JSON-pointer: "+a);if(s=+o[1],r=o[2],r=="#"){if(s>=e)throw new Error("Cannot access property/index "+s+" levels up, current level is "+e);return t[e-s]}if(s>e)throw new Error("Cannot access data "+s+" levels up, current level is "+e);if(n="data"+(e-s||""),!r)return n}for(var i=n,f=r.split("/"),u=0;u<f.length;u++){var h=f[u];h&&(n+=Qa(Ja(h)),i+=" && "+n)}return i}function Sn(a,e){return a=='""'?e:(a+" + "+e).replace(/([^\\])' \+ '/g,"$1")}function yd(a){return Ja(decodeURIComponent(a))}function _d(a){return encodeURIComponent(Ba(a))}function Ba(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}function Ja(a){return a.replace(/~1/g,"/").replace(/~0/g,"~")}});var Za=J((Nh,Rn)=>{"use strict";var bd=Zr();Rn.exports=Ed;function Ed(a){bd.copy(a,this)}});var In=J((qh,Tn)=>{"use strict";var Pr=Tn.exports=function(a,e,t){typeof e=="function"&&(t=e,e={}),t=e.cb||t;var s=typeof t=="function"?t:t.pre||function(){},r=t.post||function(){};Gt(e,s,r,a,"",a)};Pr.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};Pr.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Pr.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Pr.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Gt(a,e,t,s,r,n,o,i,f,u){if(s&&typeof s=="object"&&!Array.isArray(s)){e(s,r,n,o,i,f,u);for(var h in s){var m=s[h];if(Array.isArray(m)){if(h in Pr.arrayKeywords)for(var _=0;_<m.length;_++)Gt(a,e,t,m[_],r+"/"+h+"/"+_,n,r,h,s,_)}else if(h in Pr.propsKeywords){if(m&&typeof m=="object")for(var l in m)Gt(a,e,t,m[l],r+"/"+h+"/"+xd(l),n,r,h,s,l)}else(h in Pr.keywords||a.allKeys&&!(h in Pr.skipKeywords))&&Gt(a,e,t,m,r+"/"+h,n,r,h,s)}t(s,r,n,o,i,f,u)}}function xd(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}});var ta=J((Fh,An)=>{"use strict";var wt=_n(),On=Kt(),ea=Zr(),Wt=Za(),Pd=In();An.exports=wr;wr.normalizeId=Sr;wr.fullPath=Yt;wr.url=Xt;wr.ids=Id;wr.inlineRef=Ka;wr.schema=ra;function wr(a,e,t){var s=this._refs[t];if(typeof s=="string")if(this._refs[s])s=this._refs[s];else return wr.call(this,a,e,s);if(s=s||this._schemas[t],s instanceof Wt)return Ka(s.schema,this._opts.inlineRefs)?s.schema:s.validate||this._compile(s);var r=ra.call(this,e,t),n,o,i;return r&&(n=r.schema,e=r.root,i=r.baseId),n instanceof Wt?o=n.validate||a.call(this,n.schema,e,void 0,i):n!==void 0&&(o=Ka(n,this._opts.inlineRefs)?n:a.call(this,n,e,void 0,i)),o}function ra(a,e){var t=wt.parse(e),s=Dn(t),r=Yt(this._getId(a.schema));if(Object.keys(a.schema).length===0||s!==r){var n=Sr(s),o=this._refs[n];if(typeof o=="string")return Sd.call(this,a,o,t);if(o instanceof Wt)o.validate||this._compile(o),a=o;else if(o=this._schemas[n],o instanceof Wt){if(o.validate||this._compile(o),n==Sr(e))return{schema:o,root:a,baseId:r};a=o}else return;if(!a.schema)return;r=Yt(this._getId(a.schema))}return $n.call(this,t,r,a.schema,a)}function Sd(a,e,t){var s=ra.call(this,a,e);if(s){var r=s.schema,n=s.baseId;a=s.root;var o=this._getId(r);return o&&(n=Xt(n,o)),$n.call(this,t,n,r,a)}}var wd=ea.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function $n(a,e,t,s){if(a.fragment=a.fragment||"",a.fragment.slice(0,1)=="/"){for(var r=a.fragment.split("/"),n=1;n<r.length;n++){var o=r[n];if(o){if(o=ea.unescapeFragment(o),t=t[o],t===void 0)break;var i;if(!wd[o]&&(i=this._getId(t),i&&(e=Xt(e,i)),t.$ref)){var f=Xt(e,t.$ref),u=ra.call(this,s,f);u&&(t=u.schema,s=u.root,e=u.baseId)}}}if(t!==void 0&&t!==s.schema)return{schema:t,root:s,baseId:e}}}var Rd=ea.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function Ka(a,e){if(e===!1)return!1;if(e===void 0||e===!0)return Ga(a);if(e)return Wa(a)<=e}function Ga(a){var e;if(Array.isArray(a)){for(var t=0;t<a.length;t++)if(e=a[t],typeof e=="object"&&!Ga(e))return!1}else for(var s in a)if(s=="$ref"||(e=a[s],typeof e=="object"&&!Ga(e)))return!1;return!0}function Wa(a){var e=0,t;if(Array.isArray(a)){for(var s=0;s<a.length;s++)if(t=a[s],typeof t=="object"&&(e+=Wa(t)),e==1/0)return 1/0}else for(var r in a){if(r=="$ref")return 1/0;if(Rd[r])e++;else if(t=a[r],typeof t=="object"&&(e+=Wa(t)+1),e==1/0)return 1/0}return e}function Yt(a,e){e!==!1&&(a=Sr(a));var t=wt.parse(a);return Dn(t)}function Dn(a){return wt.serialize(a).split("#")[0]+"#"}var Td=/#\/?$/;function Sr(a){return a?a.replace(Td,""):""}function Xt(a,e){return e=Sr(e),wt.resolve(a,e)}function Id(a){var e=Sr(this._getId(a)),t={"":e},s={"":Yt(e,!1)},r={},n=this;return Pd(a,{allKeys:!0},function(o,i,f,u,h,m,_){if(i!==""){var l=n._getId(o),y=t[u],b=s[u]+"/"+h;if(_!==void 0&&(b+="/"+(typeof _=="number"?_:ea.escapeFragment(_))),typeof l=="string"){l=y=Sr(y?wt.resolve(y,l):l);var g=n._refs[l];if(typeof g=="string"&&(g=n._refs[g]),g&&g.schema){if(!On(o,g.schema))throw new Error('id "'+l+'" resolves to more than one schema')}else if(l!=Sr(b))if(l[0]=="#"){if(r[l]&&!On(o,r[l]))throw new Error('id "'+l+'" resolves to more than one schema');r[l]=o}else n._refs[l]=b}t[i]=y,s[i]=b}}),r}});var aa=J((Lh,Cn)=>{"use strict";var Ya=ta();Cn.exports={Validation:jn(Od),MissingRef:jn(Xa)};function Od(a){this.message="validation failed",this.errors=a,this.ajv=this.validation=!0}Xa.message=function(a,e){return"can't resolve reference "+e+" from id "+a};function Xa(a,e,t){this.message=t||Xa.message(a,e),this.missingRef=Ya.url(a,e),this.missingSchema=Ya.normalizeId(Ya.fullPath(this.missingRef))}function jn(a){return a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a}});var es=J((Uh,kn)=>{"use strict";kn.exports=function(a,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var t=typeof e.cycles=="boolean"?e.cycles:!1,s=e.cmp&&function(n){return function(o){return function(i,f){var u={key:i,value:o[i]},h={key:f,value:o[f]};return n(u,h)}}}(e.cmp),r=[];return function n(o){if(o&&o.toJSON&&typeof o.toJSON=="function"&&(o=o.toJSON()),o!==void 0){if(typeof o=="number")return isFinite(o)?""+o:"null";if(typeof o!="object")return JSON.stringify(o);var i,f;if(Array.isArray(o)){for(f="[",i=0;i<o.length;i++)i&&(f+=","),f+=n(o[i])||"null";return f+"]"}if(o===null)return"null";if(r.indexOf(o)!==-1){if(t)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=r.push(o)-1,h=Object.keys(o).sort(s&&s(o));for(f="",i=0;i<h.length;i++){var m=h[i],_=n(o[m]);_&&(f&&(f+=","),f+=JSON.stringify(m)+":"+_)}return r.splice(u,1),"{"+f+"}"}}(a)}});var rs=J((Mh,Nn)=>{"use strict";Nn.exports=function(e,t,s){var r="",n=e.schema.$async===!0,o=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),i=e.self._getId(e.schema);if(e.opts.strictKeywords){var f=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(f){var u="unknown keyword: "+f;if(e.opts.strictKeywords==="log")e.logger.warn(u);else throw new Error(u)}}if(e.isTop&&(r+=" var validate = ",n&&(e.async=!0,r+="async "),r+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",i&&(e.opts.sourceCode||e.opts.processCode)&&(r+=" "+("/*# sourceURL="+i+" */")+" ")),typeof e.schema=="boolean"||!(o||e.schema.$ref)){var t="false schema",h=e.level,m=e.dataLevel,_=e.schema[t],l=e.schemaPath+e.util.getProperty(t),y=e.errSchemaPath+"/"+t,O=!e.opts.allErrors,L,b="data"+(m||""),R="valid"+h;if(e.schema===!1){e.isTop?O=!0:r+=" var "+R+" = false; ";var g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(L||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'boolean schema is false' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+b+" "),r+=" } "):r+=" {} ";var P=r;r=g.pop(),!e.compositeRule&&O?e.async?r+=" throw new ValidationError(["+P+"]); ":r+=" validate.errors = ["+P+"]; return false; ":r+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?n?r+=" return data; ":r+=" validate.errors = null; return true; ":r+=" var "+R+" = true; ";return e.isTop&&(r+=" }; return validate; "),r}if(e.isTop){var I=e.isTop,h=e.level=0,m=e.dataLevel=0,b="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var S="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(S);else throw new Error(S)}r+=" var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data; "}else{var h=e.level,m=e.dataLevel,b="data"+(m||"");if(i&&(e.baseId=e.resolve.url(e.baseId,i)),n&&!e.async)throw new Error("async schema in sync schema");r+=" var errs_"+h+" = errors;"}var R="valid"+h,O=!e.opts.allErrors,$="",V="",L,D=e.schema.type,U=Array.isArray(D);if(D&&e.opts.nullable&&e.schema.nullable===!0&&(U?D.indexOf("null")==-1&&(D=D.concat("null")):D!="null"&&(D=[D,"null"],U=!0)),U&&D.length==1&&(D=D[0],U=!1),e.schema.$ref&&o){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(o=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(r+=" "+e.RULES.all.$comment.code(e,"$comment")),D){if(e.opts.coerceTypes)var F=e.util.coerceToTypes(e.opts.coerceTypes,D);var N=e.RULES.types[D];if(F||U||N===!0||N&&!Pe(N)){var l=e.schemaPath+".type",y=e.errSchemaPath+"/type",l=e.schemaPath+".type",y=e.errSchemaPath+"/type",T=U?"checkDataTypes":"checkDataType";if(r+=" if ("+e.util[T](D,b,e.opts.strictNumbers,!0)+") { ",F){var A="dataType"+h,q="coerced"+h;r+=" var "+A+" = typeof "+b+"; var "+q+" = undefined; ",e.opts.coerceTypes=="array"&&(r+=" if ("+A+" == 'object' && Array.isArray("+b+") && "+b+".length == 1) { "+b+" = "+b+"[0]; "+A+" = typeof "+b+"; if ("+e.util.checkDataType(e.schema.type,b,e.opts.strictNumbers)+") "+q+" = "+b+"; } "),r+=" if ("+q+" !== undefined) ; ";var oe=F;if(oe)for(var Y,ee=-1,W=oe.length-1;ee<W;)Y=oe[ee+=1],Y=="string"?r+=" else if ("+A+" == 'number' || "+A+" == 'boolean') "+q+" = '' + "+b+"; else if ("+b+" === null) "+q+" = ''; ":Y=="number"||Y=="integer"?(r+=" else if ("+A+" == 'boolean' || "+b+" === null || ("+A+" == 'string' && "+b+" && "+b+" == +"+b+" ",Y=="integer"&&(r+=" && !("+b+" % 1)"),r+=")) "+q+" = +"+b+"; "):Y=="boolean"?r+=" else if ("+b+" === 'false' || "+b+" === 0 || "+b+" === null) "+q+" = false; else if ("+b+" === 'true' || "+b+" === 1) "+q+" = true; ":Y=="null"?r+=" else if ("+b+" === '' || "+b+" === 0 || "+b+" === false) "+q+" = null; ":e.opts.coerceTypes=="array"&&Y=="array"&&(r+=" else if ("+A+" == 'string' || "+A+" == 'number' || "+A+" == 'boolean' || "+b+" == null) "+q+" = ["+b+"]; ");r+=" else {   ";var g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(L||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",U?r+=""+D.join(","):r+=""+D,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",U?r+=""+D.join(","):r+=""+D,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+b+" "),r+=" } "):r+=" {} ";var P=r;r=g.pop(),!e.compositeRule&&O?e.async?r+=" throw new ValidationError(["+P+"]); ":r+=" validate.errors = ["+P+"]; return false; ":r+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } if ("+q+" !== undefined) {  ";var Q=m?"data"+(m-1||""):"parentData",he=m?e.dataPathArr[m]:"parentDataProperty";r+=" "+b+" = "+q+"; ",m||(r+="if ("+Q+" !== undefined)"),r+=" "+Q+"["+he+"] = "+q+"; } "}else{var g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(L||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",U?r+=""+D.join(","):r+=""+D,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",U?r+=""+D.join(","):r+=""+D,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+b+" "),r+=" } "):r+=" {} ";var P=r;r=g.pop(),!e.compositeRule&&O?e.async?r+=" throw new ValidationError(["+P+"]); ":r+=" validate.errors = ["+P+"]; return false; ":r+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" } "}}if(e.schema.$ref&&!o)r+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",O&&(r+=" } if (errors === ",I?r+="0":r+="errs_"+h,r+=") { ",V+="}");else{var we=e.RULES;if(we){for(var N,Ie=-1,ae=we.length-1;Ie<ae;)if(N=we[Ie+=1],Pe(N)){if(N.type&&(r+=" if ("+e.util.checkDataType(N.type,b,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(N.type=="object"&&e.schema.properties){var _=e.schema.properties,ve=Object.keys(_),xe=ve;if(xe)for(var Oe,gr=-1,cr=xe.length-1;gr<cr;){Oe=xe[gr+=1];var ge=_[Oe];if(ge.default!==void 0){var pe=b+e.util.getProperty(Oe);if(e.compositeRule){if(e.opts.strictDefaults){var S="default is ignored for: "+pe;if(e.opts.strictDefaults==="log")e.logger.warn(S);else throw new Error(S)}}else r+=" if ("+pe+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+pe+" === null || "+pe+" === '' "),r+=" ) "+pe+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(ge.default)+" ":r+=" "+JSON.stringify(ge.default)+" ",r+="; "}}}else if(N.type=="array"&&Array.isArray(e.schema.items)){var Rr=e.schema.items;if(Rr){for(var ge,ee=-1,Re=Rr.length-1;ee<Re;)if(ge=Rr[ee+=1],ge.default!==void 0){var pe=b+"["+ee+"]";if(e.compositeRule){if(e.opts.strictDefaults){var S="default is ignored for: "+pe;if(e.opts.strictDefaults==="log")e.logger.warn(S);else throw new Error(S)}}else r+=" if ("+pe+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+pe+" === null || "+pe+" === '' "),r+=" ) "+pe+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(ge.default)+" ":r+=" "+JSON.stringify(ge.default)+" ",r+="; "}}}}var ne=N.rules;if(ne){for(var yr,ur=-1,Tr=ne.length-1;ur<Tr;)if(yr=ne[ur+=1],Ue(yr)){var Ir=yr.code(e,yr.keyword,N.type);Ir&&(r+=" "+Ir+" ",O&&($+="}"))}}if(O&&(r+=" "+$+" ",$=""),N.type&&(r+=" } ",D&&D===N.type&&!F)){r+=" else { ";var l=e.schemaPath+".type",y=e.errSchemaPath+"/type",g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(L||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",U?r+=""+D.join(","):r+=""+D,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",U?r+=""+D.join(","):r+=""+D,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+b+" "),r+=" } "):r+=" {} ";var P=r;r=g.pop(),!e.compositeRule&&O?e.async?r+=" throw new ValidationError(["+P+"]); ":r+=" validate.errors = ["+P+"]; return false; ":r+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}O&&(r+=" if (errors === ",I?r+="0":r+="errs_"+h,r+=") { ",V+="}")}}}O&&(r+=" "+V+" "),I?(n?(r+=" if (errors === 0) return data;           ",r+=" else throw new ValidationError(vErrors); "):(r+=" validate.errors = vErrors; ",r+=" return errors === 0;       "),r+=" }; return validate;"):r+=" var "+R+" = errors === errs_"+h+";";function Pe($e){for(var rr=$e.rules,qe=0;qe<rr.length;qe++)if(Ue(rr[qe]))return!0}function Ue($e){return e.schema[$e.keyword]!==void 0||$e.implements&&Ae($e)}function Ae($e){for(var rr=$e.implements,qe=0;qe<rr.length;qe++)if(e.schema[rr[qe]]!==void 0)return!0}return r}});var Mn=J((zh,Un)=>{"use strict";var sa=ta(),ia=Zr(),Fn=aa(),$d=es(),qn=rs(),Dd=ia.ucs2length,Ad=Kt(),jd=Fn.Validation;Un.exports=ts;function ts(a,e,t,s){var r=this,n=this._opts,o=[void 0],i={},f=[],u={},h=[],m={},_=[];e=e||{schema:a,refVal:o,refs:i};var l=Cd.call(this,a,e,s),y=this._compilations[l.index];if(l.compiling)return y.callValidate=S;var b=this._formats,g=this.RULES;try{var P=R(a,e,t,s);y.validate=P;var I=y.callValidate;return I&&(I.schema=P.schema,I.errors=null,I.refs=P.refs,I.refVal=P.refVal,I.root=P.root,I.$async=P.$async,n.sourceCode&&(I.source=P.source)),P}finally{kd.call(this,a,e,s)}function S(){var T=y.validate,A=T.apply(this,arguments);return S.errors=T.errors,A}function R(T,A,q,oe){var Y=!A||A&&A.schema==T;if(A.schema!=e.schema)return ts.call(r,T,A,q,oe);var ee=T.$async===!0,W=qn({isTop:!0,schema:T,isRoot:Y,baseId:oe,root:A,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:Fn.MissingRef,RULES:g,validate:qn,util:ia,resolve:sa,resolveRef:O,usePattern:U,useDefault:F,useCustomRule:N,opts:n,formats:b,logger:r.logger,self:r});W=na(o,Fd)+na(f,Nd)+na(h,qd)+na(_,Ld)+W,n.processCode&&(W=n.processCode(W,T));var Q;try{var he=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",W);Q=he(r,g,b,e,o,h,_,Ad,Dd,jd),o[0]=Q}catch(we){throw r.logger.error("Error compiling schema, function code:",W),we}return Q.schema=T,Q.errors=null,Q.refs=i,Q.refVal=o,Q.root=Y?Q:A,ee&&(Q.$async=!0),n.sourceCode===!0&&(Q.source={code:W,patterns:f,defaults:h}),Q}function O(T,A,q){A=sa.url(T,A);var oe=i[A],Y,ee;if(oe!==void 0)return Y=o[oe],ee="refVal["+oe+"]",D(Y,ee);if(!q&&e.refs){var W=e.refs[A];if(W!==void 0)return Y=e.refVal[W],ee=$(A,Y),D(Y,ee)}ee=$(A);var Q=sa.call(r,R,e,A);if(Q===void 0){var he=t&&t[A];he&&(Q=sa.inlineRef(he,n.inlineRefs)?he:ts.call(r,he,e,t,T))}if(Q===void 0)V(A);else return L(A,Q),D(Q,ee)}function $(T,A){var q=o.length;return o[q]=A,i[T]=q,"refVal"+q}function V(T){delete i[T]}function L(T,A){var q=i[T];o[q]=A}function D(T,A){return typeof T=="object"||typeof T=="boolean"?{code:A,schema:T,inline:!0}:{code:A,$async:T&&!!T.$async}}function U(T){var A=u[T];return A===void 0&&(A=u[T]=f.length,f[A]=T),"pattern"+A}function F(T){switch(typeof T){case"boolean":case"number":return""+T;case"string":return ia.toQuotedString(T);case"object":if(T===null)return"null";var A=$d(T),q=m[A];return q===void 0&&(q=m[A]=h.length,h[q]=T),"default"+q}}function N(T,A,q,oe){if(r._opts.validateSchema!==!1){var Y=T.definition.dependencies;if(Y&&!Y.every(function(xe){return Object.prototype.hasOwnProperty.call(q,xe)}))throw new Error("parent schema must have all required keywords: "+Y.join(","));var ee=T.definition.validateSchema;if(ee){var W=ee(A);if(!W){var Q="keyword schema is invalid: "+r.errorsText(ee.errors);if(r._opts.validateSchema=="log")r.logger.error(Q);else throw new Error(Q)}}}var he=T.definition.compile,we=T.definition.inline,Ie=T.definition.macro,ae;if(he)ae=he.call(r,A,q,oe);else if(Ie)ae=Ie.call(r,A,q,oe),n.validateSchema!==!1&&r.validateSchema(ae,!0);else if(we)ae=we.call(r,oe,T.keyword,A,q);else if(ae=T.definition.validate,!ae)return;if(ae===void 0)throw new Error('custom keyword "'+T.keyword+'"failed to compile');var ve=_.length;return _[ve]=ae,{code:"customRule"+ve,validate:ae}}}function Cd(a,e,t){var s=Ln.call(this,a,e,t);return s>=0?{index:s,compiling:!0}:(s=this._compilations.length,this._compilations[s]={schema:a,root:e,baseId:t},{index:s,compiling:!1})}function kd(a,e,t){var s=Ln.call(this,a,e,t);s>=0&&this._compilations.splice(s,1)}function Ln(a,e,t){for(var s=0;s<this._compilations.length;s++){var r=this._compilations[s];if(r.schema==a&&r.root==e&&r.baseId==t)return s}return-1}function Nd(a,e){return"var pattern"+a+" = new RegExp("+ia.toQuotedString(e[a])+");"}function qd(a){return"var default"+a+" = defaults["+a+"];"}function Fd(a,e){return e[a]===void 0?"":"var refVal"+a+" = refVal["+a+"];"}function Ld(a){return"var customRule"+a+" = customRules["+a+"];"}function na(a,e){if(!a.length)return"";for(var t="",s=0;s<a.length;s++)t+=e(s,a);return t}});var Vn=J((Vh,zn)=>{"use strict";var oa=zn.exports=function(){this._cache={}};oa.prototype.put=function(e,t){this._cache[e]=t};oa.prototype.get=function(e){return this._cache[e]};oa.prototype.del=function(e){delete this._cache[e]};oa.prototype.clear=function(){this._cache={}}});var ri=J((Qh,ei)=>{"use strict";var Ud=Zr(),Md=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,zd=[0,31,28,31,30,31,30,31,31,30,31,30,31],Vd=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,Qn=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,Qd=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Hd=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Hn=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Bn=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,Jn=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,Zn=/^(?:\/(?:[^~/]|~0|~1)*)*$/,Kn=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,Gn=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;ei.exports=ca;function ca(a){return a=a=="full"?"full":"fast",Ud.copy(ca[a])}ca.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":Hn,url:Bn,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:Qn,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Xn,uuid:Jn,"json-pointer":Zn,"json-pointer-uri-fragment":Kn,"relative-json-pointer":Gn};ca.full={date:Wn,time:Yn,"date-time":Zd,uri:Gd,"uri-reference":Hd,"uri-template":Hn,url:Bn,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:Qn,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Xn,uuid:Jn,"json-pointer":Zn,"json-pointer-uri-fragment":Kn,"relative-json-pointer":Gn};function Bd(a){return a%4===0&&(a%100!==0||a%400===0)}function Wn(a){var e=a.match(Md);if(!e)return!1;var t=+e[1],s=+e[2],r=+e[3];return s>=1&&s<=12&&r>=1&&r<=(s==2&&Bd(t)?29:zd[s])}function Yn(a,e){var t=a.match(Vd);if(!t)return!1;var s=t[1],r=t[2],n=t[3],o=t[5];return(s<=23&&r<=59&&n<=59||s==23&&r==59&&n==60)&&(!e||o)}var Jd=/t|\s/i;function Zd(a){var e=a.split(Jd);return e.length==2&&Wn(e[0])&&Yn(e[1],!0)}var Kd=/\/|:/;function Gd(a){return Kd.test(a)&&Qd.test(a)}var Wd=/[^\\]\\Z/;function Xn(a){if(Wd.test(a))return!1;try{return new RegExp(a),!0}catch{return!1}}});var ai=J((Hh,ti)=>{"use strict";ti.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],f=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(o||""),m="valid"+n,_,l;if(i=="#"||i=="#/")e.isRoot?(_=e.async,l="validate"):(_=e.root.schema.$async===!0,l="root.refVal[0]");else{var y=e.resolveRef(e.baseId,i,e.isRoot);if(y===void 0){var b=e.MissingRefError.message(e.baseId,i);if(e.opts.missingRefs=="fail"){e.logger.error(b);var g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { ref: '"+e.util.escapeQuotes(i)+"' } ",e.opts.messages!==!1&&(r+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(i)+"' "),e.opts.verbose&&(r+=" , schema: "+e.util.toQuotedString(i)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var P=r;r=g.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+P+"]); ":r+=" validate.errors = ["+P+"]; return false; ":r+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(r+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(b),u&&(r+=" if (true) { ");else throw new e.MissingRefError(e.baseId,i,b)}else if(y.inline){var I=e.util.copy(e);I.level++;var S="valid"+I.level;I.schema=y.schema,I.schemaPath="",I.errSchemaPath=i;var R=e.validate(I).replace(/validate\.schema/g,y.code);r+=" "+R+" ",u&&(r+=" if ("+S+") { ")}else _=y.$async===!0||e.async&&y.$async!==!1,l=y.code}if(l){var g=g||[];g.push(r),r="",e.opts.passContext?r+=" "+l+".call(this, ":r+=" "+l+"( ",r+=" "+h+", (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var O=o?"data"+(o-1||""):"parentData",$=o?e.dataPathArr[o]:"parentDataProperty";r+=" , "+O+" , "+$+", rootData)  ";var V=r;if(r=g.pop(),_){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(r+=" var "+m+"; "),r+=" try { await "+V+"; ",u&&(r+=" "+m+" = true; "),r+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(r+=" "+m+" = false; "),r+=" } ",u&&(r+=" if ("+m+") { ")}else r+=" if (!"+V+") { if (vErrors === null) vErrors = "+l+".errors; else vErrors = vErrors.concat("+l+".errors); errors = vErrors.length; } ",u&&(r+=" else { ")}return r}});var ni=J((Bh,si)=>{"use strict";si.exports=function(e,t,s){var r=" ",n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),i=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,u=e.util.copy(e),h="";u.level++;var m="valid"+u.level,_=u.baseId,l=!0,y=n;if(y)for(var b,g=-1,P=y.length-1;g<P;)b=y[g+=1],(e.opts.strictKeywords?typeof b=="object"&&Object.keys(b).length>0||b===!1:e.util.schemaHasRules(b,e.RULES.all))&&(l=!1,u.schema=b,u.schemaPath=o+"["+g+"]",u.errSchemaPath=i+"/"+g,r+="  "+e.validate(u)+" ",u.baseId=_,f&&(r+=" if ("+m+") { ",h+="}"));return f&&(l?r+=" if (true) { ":r+=" "+h.slice(0,-1)+" "),r}});var oi=J((Jh,ii)=>{"use strict";ii.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],f=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),_="valid"+n,l="errs__"+n,y=e.util.copy(e),b="";y.level++;var g="valid"+y.level,P=i.every(function(L){return e.opts.strictKeywords?typeof L=="object"&&Object.keys(L).length>0||L===!1:e.util.schemaHasRules(L,e.RULES.all)});if(P){var I=y.baseId;r+=" var "+l+" = errors; var "+_+" = false;  ";var S=e.compositeRule;e.compositeRule=y.compositeRule=!0;var R=i;if(R)for(var O,$=-1,V=R.length-1;$<V;)O=R[$+=1],y.schema=O,y.schemaPath=f+"["+$+"]",y.errSchemaPath=u+"/"+$,r+="  "+e.validate(y)+" ",y.baseId=I,r+=" "+_+" = "+_+" || "+g+"; if (!"+_+") { ",b+="}";e.compositeRule=y.compositeRule=S,r+=" "+b+" if (!"+_+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" } else {  errors = "+l+"; if (vErrors !== null) { if ("+l+") vErrors.length = "+l+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else h&&(r+=" if (true) { ");return r}});var ui=J((Zh,ci)=>{"use strict";ci.exports=function(e,t,s){var r=" ",n=e.schema[t],o=e.errSchemaPath+"/"+t,i=!e.opts.allErrors,f=e.util.toQuotedString(n);return e.opts.$comment===!0?r+=" console.log("+f+");":typeof e.opts.$comment=="function"&&(r+=" self._opts.$comment("+f+", "+e.util.toQuotedString(o)+", validate.root.schema);"),r}});var di=J((Kh,li)=>{"use strict";li.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],f=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),_="valid"+n,l=e.opts.$data&&i&&i.$data,y;l?(r+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",y="schema"+n):y=i,l||(r+=" var schema"+n+" = validate.schema"+f+";"),r+="var "+_+" = equal("+m+", schema"+n+"); if (!"+_+") {   ";var b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValue: schema"+n+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to constant' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var g=r;return r=b.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",h&&(r+=" else { "),r}});var hi=J((Gh,fi)=>{"use strict";fi.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],f=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),_="valid"+n,l="errs__"+n,y=e.util.copy(e),b="";y.level++;var g="valid"+y.level,P="i"+n,I=y.dataLevel=e.dataLevel+1,S="data"+I,R=e.baseId,O=e.opts.strictKeywords?typeof i=="object"&&Object.keys(i).length>0||i===!1:e.util.schemaHasRules(i,e.RULES.all);if(r+="var "+l+" = errors;var "+_+";",O){var $=e.compositeRule;e.compositeRule=y.compositeRule=!0,y.schema=i,y.schemaPath=f,y.errSchemaPath=u,r+=" var "+g+" = false; for (var "+P+" = 0; "+P+" < "+m+".length; "+P+"++) { ",y.errorPath=e.util.getPathExpr(e.errorPath,P,e.opts.jsonPointers,!0);var V=m+"["+P+"]";y.dataPathArr[I]=P;var L=e.validate(y);y.baseId=R,e.util.varOccurences(L,S)<2?r+=" "+e.util.varReplace(L,S,V)+" ":r+=" var "+S+" = "+V+"; "+L+" ",r+=" if ("+g+") break; }  ",e.compositeRule=y.compositeRule=$,r+=" "+b+" if (!"+g+") {"}else r+=" if ("+m+".length == 0) {";var D=D||[];D.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should contain a valid item' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var U=r;return r=D.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+U+"]); ":r+=" validate.errors = ["+U+"]; return false; ":r+=" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { ",O&&(r+="  errors = "+l+"; if (vErrors !== null) { if ("+l+") vErrors.length = "+l+"; else vErrors = null; } "),e.opts.allErrors&&(r+=" } "),r}});var mi=J((Wh,pi)=>{"use strict";pi.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],f=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),_="errs__"+n,l=e.util.copy(e),y="";l.level++;var b="valid"+l.level,g={},P={},I=e.opts.ownProperties;for($ in i)if($!="__proto__"){var S=i[$],R=Array.isArray(S)?P:g;R[$]=S}r+="var "+_+" = errors;";var O=e.errorPath;r+="var missing"+n+";";for(var $ in P)if(R=P[$],R.length){if(r+=" if ( "+m+e.util.getProperty($)+" !== undefined ",I&&(r+=" && Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes($)+"') "),h){r+=" && ( ";var V=R;if(V)for(var L,D=-1,U=V.length-1;D<U;){L=V[D+=1],D&&(r+=" || ");var F=e.util.getProperty(L),N=m+F;r+=" ( ( "+N+" === undefined ",I&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(L)+"') "),r+=") && (missing"+n+" = "+e.util.toQuotedString(e.opts.jsonPointers?L:F)+") ) "}r+=")) {  ";var T="missing"+n,A="' + "+T+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(O,T,!0):O+" + "+T);var q=q||[];q.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes($)+"', missingProperty: '"+A+"', depsCount: "+R.length+", deps: '"+e.util.escapeQuotes(R.length==1?R[0]:R.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",R.length==1?r+="property "+e.util.escapeQuotes(R[0]):r+="properties "+e.util.escapeQuotes(R.join(", ")),r+=" when property "+e.util.escapeQuotes($)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var oe=r;r=q.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+oe+"]); ":r+=" validate.errors = ["+oe+"]; return false; ":r+=" var err = "+oe+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var Y=R;if(Y)for(var L,ee=-1,W=Y.length-1;ee<W;){L=Y[ee+=1];var F=e.util.getProperty(L),A=e.util.escapeQuotes(L),N=m+F;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(O,L,e.opts.jsonPointers)),r+=" if ( "+N+" === undefined ",I&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(L)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes($)+"', missingProperty: '"+A+"', depsCount: "+R.length+", deps: '"+e.util.escapeQuotes(R.length==1?R[0]:R.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",R.length==1?r+="property "+e.util.escapeQuotes(R[0]):r+="properties "+e.util.escapeQuotes(R.join(", ")),r+=" when property "+e.util.escapeQuotes($)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r+=" }   ",h&&(y+="}",r+=" else { ")}e.errorPath=O;var Q=l.baseId;for(var $ in g){var S=g[$];(e.opts.strictKeywords?typeof S=="object"&&Object.keys(S).length>0||S===!1:e.util.schemaHasRules(S,e.RULES.all))&&(r+=" "+b+" = true; if ( "+m+e.util.getProperty($)+" !== undefined ",I&&(r+=" && Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes($)+"') "),r+=") { ",l.schema=S,l.schemaPath=f+e.util.getProperty($),l.errSchemaPath=u+"/"+e.util.escapeFragment($),r+="  "+e.validate(l)+" ",l.baseId=Q,r+=" }  ",h&&(r+=" if ("+b+") { ",y+="}"))}return h&&(r+="   "+y+" if ("+_+" == errors) {"),r}});var gi=J((Yh,vi)=>{"use strict";vi.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],f=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),_="valid"+n,l=e.opts.$data&&i&&i.$data,y;l?(r+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",y="schema"+n):y=i;var b="i"+n,g="schema"+n;l||(r+=" var "+g+" = validate.schema"+f+";"),r+="var "+_+";",l&&(r+=" if (schema"+n+" === undefined) "+_+" = true; else if (!Array.isArray(schema"+n+")) "+_+" = false; else {"),r+=""+_+" = false;for (var "+b+"=0; "+b+"<"+g+".length; "+b+"++) if (equal("+m+", "+g+"["+b+"])) { "+_+" = true; break; }",l&&(r+="  }  "),r+=" if (!"+_+") {   ";var P=P||[];P.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValues: schema"+n+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var I=r;return r=P.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+I+"]); ":r+=" validate.errors = ["+I+"]; return false; ":r+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",h&&(r+=" else { "),r}});var _i=J((Xh,yi)=>{"use strict";yi.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],f=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||"");if(e.opts.format===!1)return h&&(r+=" if (true) { "),r;var _=e.opts.$data&&i&&i.$data,l;_?(r+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",l="schema"+n):l=i;var y=e.opts.unknownFormats,b=Array.isArray(y);if(_){var g="format"+n,P="isObject"+n,I="formatType"+n;r+=" var "+g+" = formats["+l+"]; var "+P+" = typeof "+g+" == 'object' && !("+g+" instanceof RegExp) && "+g+".validate; var "+I+" = "+P+" && "+g+".type || 'string'; if ("+P+") { ",e.async&&(r+=" var async"+n+" = "+g+".async; "),r+=" "+g+" = "+g+".validate; } if (  ",_&&(r+=" ("+l+" !== undefined && typeof "+l+" != 'string') || "),r+=" (",y!="ignore"&&(r+=" ("+l+" && !"+g+" ",b&&(r+=" && self._opts.unknownFormats.indexOf("+l+") == -1 "),r+=") || "),r+=" ("+g+" && "+I+" == '"+s+"' && !(typeof "+g+" == 'function' ? ",e.async?r+=" (async"+n+" ? await "+g+"("+m+") : "+g+"("+m+")) ":r+=" "+g+"("+m+") ",r+=" : "+g+".test("+m+"))))) {"}else{var g=e.formats[i];if(!g){if(y=="ignore")return e.logger.warn('unknown format "'+i+'" ignored in schema at path "'+e.errSchemaPath+'"'),h&&(r+=" if (true) { "),r;if(b&&y.indexOf(i)>=0)return h&&(r+=" if (true) { "),r;throw new Error('unknown format "'+i+'" is used in schema at path "'+e.errSchemaPath+'"')}var P=typeof g=="object"&&!(g instanceof RegExp)&&g.validate,I=P&&g.type||"string";if(P){var S=g.async===!0;g=g.validate}if(I!=s)return h&&(r+=" if (true) { "),r;if(S){if(!e.async)throw new Error("async format in sync schema");var R="formats"+e.util.getProperty(i)+".validate";r+=" if (!(await "+R+"("+m+"))) { "}else{r+=" if (! ";var R="formats"+e.util.getProperty(i);P&&(R+=".validate"),typeof g=="function"?r+=" "+R+"("+m+") ":r+=" "+R+".test("+m+") ",r+=") { "}}var O=O||[];O.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { format:  ",_?r+=""+l:r+=""+e.util.toQuotedString(i),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match format "`,_?r+="' + "+l+" + '":r+=""+e.util.escapeQuotes(i),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",_?r+="validate.schema"+f:r+=""+e.util.toQuotedString(i),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var $=r;return r=O.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+$+"]); ":r+=" validate.errors = ["+$+"]; return false; ":r+=" var err = "+$+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",h&&(r+=" else { "),r}});var Ei=J((ep,bi)=>{"use strict";bi.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],f=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),_="valid"+n,l="errs__"+n,y=e.util.copy(e);y.level++;var b="valid"+y.level,g=e.schema.then,P=e.schema.else,I=g!==void 0&&(e.opts.strictKeywords?typeof g=="object"&&Object.keys(g).length>0||g===!1:e.util.schemaHasRules(g,e.RULES.all)),S=P!==void 0&&(e.opts.strictKeywords?typeof P=="object"&&Object.keys(P).length>0||P===!1:e.util.schemaHasRules(P,e.RULES.all)),R=y.baseId;if(I||S){var O;y.createErrors=!1,y.schema=i,y.schemaPath=f,y.errSchemaPath=u,r+=" var "+l+" = errors; var "+_+" = true;  ";var $=e.compositeRule;e.compositeRule=y.compositeRule=!0,r+="  "+e.validate(y)+" ",y.baseId=R,y.createErrors=!0,r+="  errors = "+l+"; if (vErrors !== null) { if ("+l+") vErrors.length = "+l+"; else vErrors = null; }  ",e.compositeRule=y.compositeRule=$,I?(r+=" if ("+b+") {  ",y.schema=e.schema.then,y.schemaPath=e.schemaPath+".then",y.errSchemaPath=e.errSchemaPath+"/then",r+="  "+e.validate(y)+" ",y.baseId=R,r+=" "+_+" = "+b+"; ",I&&S?(O="ifClause"+n,r+=" var "+O+" = 'then'; "):O="'then'",r+=" } ",S&&(r+=" else { ")):r+=" if (!"+b+") { ",S&&(y.schema=e.schema.else,y.schemaPath=e.schemaPath+".else",y.errSchemaPath=e.errSchemaPath+"/else",r+="  "+e.validate(y)+" ",y.baseId=R,r+=" "+_+" = "+b+"; ",I&&S?(O="ifClause"+n,r+=" var "+O+" = 'else'; "):O="'else'",r+=" } "),r+=" if (!"+_+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { failingKeyword: "+O+" } ",e.opts.messages!==!1&&(r+=` , message: 'should match "' + `+O+` + '" schema' `),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" }   ",h&&(r+=" else { ")}else h&&(r+=" if (true) { ");return r}});var Pi=J((rp,xi)=>{"use strict";xi.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],f=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),_="valid"+n,l="errs__"+n,y=e.util.copy(e),b="";y.level++;var g="valid"+y.level,P="i"+n,I=y.dataLevel=e.dataLevel+1,S="data"+I,R=e.baseId;if(r+="var "+l+" = errors;var "+_+";",Array.isArray(i)){var O=e.schema.additionalItems;if(O===!1){r+=" "+_+" = "+m+".length <= "+i.length+"; ";var $=u;u=e.errSchemaPath+"/additionalItems",r+="  if (!"+_+") {   ";var V=V||[];V.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+i.length+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have more than "+i.length+" items' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var L=r;r=V.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+L+"]); ":r+=" validate.errors = ["+L+"]; return false; ":r+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",u=$,h&&(b+="}",r+=" else { ")}var D=i;if(D){for(var U,F=-1,N=D.length-1;F<N;)if(U=D[F+=1],e.opts.strictKeywords?typeof U=="object"&&Object.keys(U).length>0||U===!1:e.util.schemaHasRules(U,e.RULES.all)){r+=" "+g+" = true; if ("+m+".length > "+F+") { ";var T=m+"["+F+"]";y.schema=U,y.schemaPath=f+"["+F+"]",y.errSchemaPath=u+"/"+F,y.errorPath=e.util.getPathExpr(e.errorPath,F,e.opts.jsonPointers,!0),y.dataPathArr[I]=F;var A=e.validate(y);y.baseId=R,e.util.varOccurences(A,S)<2?r+=" "+e.util.varReplace(A,S,T)+" ":r+=" var "+S+" = "+T+"; "+A+" ",r+=" }  ",h&&(r+=" if ("+g+") { ",b+="}")}}if(typeof O=="object"&&(e.opts.strictKeywords?typeof O=="object"&&Object.keys(O).length>0||O===!1:e.util.schemaHasRules(O,e.RULES.all))){y.schema=O,y.schemaPath=e.schemaPath+".additionalItems",y.errSchemaPath=e.errSchemaPath+"/additionalItems",r+=" "+g+" = true; if ("+m+".length > "+i.length+") {  for (var "+P+" = "+i.length+"; "+P+" < "+m+".length; "+P+"++) { ",y.errorPath=e.util.getPathExpr(e.errorPath,P,e.opts.jsonPointers,!0);var T=m+"["+P+"]";y.dataPathArr[I]=P;var A=e.validate(y);y.baseId=R,e.util.varOccurences(A,S)<2?r+=" "+e.util.varReplace(A,S,T)+" ":r+=" var "+S+" = "+T+"; "+A+" ",h&&(r+=" if (!"+g+") break; "),r+=" } }  ",h&&(r+=" if ("+g+") { ",b+="}")}}else if(e.opts.strictKeywords?typeof i=="object"&&Object.keys(i).length>0||i===!1:e.util.schemaHasRules(i,e.RULES.all)){y.schema=i,y.schemaPath=f,y.errSchemaPath=u,r+="  for (var "+P+" = 0; "+P+" < "+m+".length; "+P+"++) { ",y.errorPath=e.util.getPathExpr(e.errorPath,P,e.opts.jsonPointers,!0);var T=m+"["+P+"]";y.dataPathArr[I]=P;var A=e.validate(y);y.baseId=R,e.util.varOccurences(A,S)<2?r+=" "+e.util.varReplace(A,S,T)+" ":r+=" var "+S+" = "+T+"; "+A+" ",h&&(r+=" if (!"+g+") break; "),r+=" }"}return h&&(r+=" "+b+" if ("+l+" == errors) {"),r}});var as=J((tp,Si)=>{"use strict";Si.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],f=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,R,m="data"+(o||""),_=e.opts.$data&&i&&i.$data,l;_?(r+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",l="schema"+n):l=i;var y=t=="maximum",b=y?"exclusiveMaximum":"exclusiveMinimum",g=e.schema[b],P=e.opts.$data&&g&&g.$data,I=y?"<":">",S=y?">":"<",R=void 0;if(!(_||typeof i=="number"||i===void 0))throw new Error(t+" must be number");if(!(P||g===void 0||typeof g=="number"||typeof g=="boolean"))throw new Error(b+" must be number or boolean");if(P){var O=e.util.getData(g.$data,o,e.dataPathArr),$="exclusive"+n,V="exclType"+n,L="exclIsNumber"+n,D="op"+n,U="' + "+D+" + '";r+=" var schemaExcl"+n+" = "+O+"; ",O="schemaExcl"+n,r+=" var "+$+"; var "+V+" = typeof "+O+"; if ("+V+" != 'boolean' && "+V+" != 'undefined' && "+V+" != 'number') { ";var R=b,F=F||[];F.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(R||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: '"+b+" should be boolean' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var N=r;r=F.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+N+"]); ":r+=" validate.errors = ["+N+"]; return false; ":r+=" var err = "+N+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else if ( ",_&&(r+=" ("+l+" !== undefined && typeof "+l+" != 'number') || "),r+=" "+V+" == 'number' ? ( ("+$+" = "+l+" === undefined || "+O+" "+I+"= "+l+") ? "+m+" "+S+"= "+O+" : "+m+" "+S+" "+l+" ) : ( ("+$+" = "+O+" === true) ? "+m+" "+S+"= "+l+" : "+m+" "+S+" "+l+" ) || "+m+" !== "+m+") { var op"+n+" = "+$+" ? '"+I+"' : '"+I+"='; ",i===void 0&&(R=b,u=e.errSchemaPath+"/"+b,l=O,_=P)}else{var L=typeof g=="number",U=I;if(L&&_){var D="'"+U+"'";r+=" if ( ",_&&(r+=" ("+l+" !== undefined && typeof "+l+" != 'number') || "),r+=" ( "+l+" === undefined || "+g+" "+I+"= "+l+" ? "+m+" "+S+"= "+g+" : "+m+" "+S+" "+l+" ) || "+m+" !== "+m+") { "}else{L&&i===void 0?($=!0,R=b,u=e.errSchemaPath+"/"+b,l=g,S+="="):(L&&(l=Math[y?"min":"max"](g,i)),g===(L?l:!0)?($=!0,R=b,u=e.errSchemaPath+"/"+b,S+="="):($=!1,U+="="));var D="'"+U+"'";r+=" if ( ",_&&(r+=" ("+l+" !== undefined && typeof "+l+" != 'number') || "),r+=" "+m+" "+S+" "+l+" || "+m+" !== "+m+") { "}}R=R||t;var F=F||[];F.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(R||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { comparison: "+D+", limit: "+l+", exclusive: "+$+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be "+U+" ",_?r+="' + "+l:r+=""+l+"'"),e.opts.verbose&&(r+=" , schema:  ",_?r+="validate.schema"+f:r+=""+i,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var N=r;return r=F.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+N+"]); ":r+=" validate.errors = ["+N+"]; return false; ":r+=" var err = "+N+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",h&&(r+=" else { "),r}});var ss=J((ap,wi)=>{"use strict";wi.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],f=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,b,m="data"+(o||""),_=e.opts.$data&&i&&i.$data,l;if(_?(r+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",l="schema"+n):l=i,!(_||typeof i=="number"))throw new Error(t+" must be number");var y=t=="maxItems"?">":"<";r+="if ( ",_&&(r+=" ("+l+" !== undefined && typeof "+l+" != 'number') || "),r+=" "+m+".length "+y+" "+l+") { ";var b=t,g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(b||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+l+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",t=="maxItems"?r+="more":r+="fewer",r+=" than ",_?r+="' + "+l+" + '":r+=""+i,r+=" items' "),e.opts.verbose&&(r+=" , schema:  ",_?r+="validate.schema"+f:r+=""+i,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var P=r;return r=g.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+P+"]); ":r+=" validate.errors = ["+P+"]; return false; ":r+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r}});var ns=J((sp,Ri)=>{"use strict";Ri.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],f=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,b,m="data"+(o||""),_=e.opts.$data&&i&&i.$data,l;if(_?(r+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",l="schema"+n):l=i,!(_||typeof i=="number"))throw new Error(t+" must be number");var y=t=="maxLength"?">":"<";r+="if ( ",_&&(r+=" ("+l+" !== undefined && typeof "+l+" != 'number') || "),e.opts.unicode===!1?r+=" "+m+".length ":r+=" ucs2length("+m+") ",r+=" "+y+" "+l+") { ";var b=t,g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(b||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+l+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be ",t=="maxLength"?r+="longer":r+="shorter",r+=" than ",_?r+="' + "+l+" + '":r+=""+i,r+=" characters' "),e.opts.verbose&&(r+=" , schema:  ",_?r+="validate.schema"+f:r+=""+i,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var P=r;return r=g.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+P+"]); ":r+=" validate.errors = ["+P+"]; return false; ":r+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r}});var is=J((np,Ti)=>{"use strict";Ti.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],f=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,b,m="data"+(o||""),_=e.opts.$data&&i&&i.$data,l;if(_?(r+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",l="schema"+n):l=i,!(_||typeof i=="number"))throw new Error(t+" must be number");var y=t=="maxProperties"?">":"<";r+="if ( ",_&&(r+=" ("+l+" !== undefined && typeof "+l+" != 'number') || "),r+=" Object.keys("+m+").length "+y+" "+l+") { ";var b=t,g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(b||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+l+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",t=="maxProperties"?r+="more":r+="fewer",r+=" than ",_?r+="' + "+l+" + '":r+=""+i,r+=" properties' "),e.opts.verbose&&(r+=" , schema:  ",_?r+="validate.schema"+f:r+=""+i,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var P=r;return r=g.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+P+"]); ":r+=" validate.errors = ["+P+"]; return false; ":r+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r}});var Oi=J((ip,Ii)=>{"use strict";Ii.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],f=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),_=e.opts.$data&&i&&i.$data,l;if(_?(r+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",l="schema"+n):l=i,!(_||typeof i=="number"))throw new Error(t+" must be number");r+="var division"+n+";if (",_&&(r+=" "+l+" !== undefined && ( typeof "+l+" != 'number' || "),r+=" (division"+n+" = "+m+" / "+l+", ",e.opts.multipleOfPrecision?r+=" Math.abs(Math.round(division"+n+") - division"+n+") > 1e-"+e.opts.multipleOfPrecision+" ":r+=" division"+n+" !== parseInt(division"+n+") ",r+=" ) ",_&&(r+="  )  "),r+=" ) {   ";var y=y||[];y.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { multipleOf: "+l+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be multiple of ",_?r+="' + "+l:r+=""+l+"'"),e.opts.verbose&&(r+=" , schema:  ",_?r+="validate.schema"+f:r+=""+i,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var b=r;return r=y.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r}});var Di=J((op,$i)=>{"use strict";$i.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],f=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),_="errs__"+n,l=e.util.copy(e);l.level++;var y="valid"+l.level;if(e.opts.strictKeywords?typeof i=="object"&&Object.keys(i).length>0||i===!1:e.util.schemaHasRules(i,e.RULES.all)){l.schema=i,l.schemaPath=f,l.errSchemaPath=u,r+=" var "+_+" = errors;  ";var b=e.compositeRule;e.compositeRule=l.compositeRule=!0,l.createErrors=!1;var g;l.opts.allErrors&&(g=l.opts.allErrors,l.opts.allErrors=!1),r+=" "+e.validate(l)+" ",l.createErrors=!0,g&&(l.opts.allErrors=g),e.compositeRule=l.compositeRule=b,r+=" if ("+y+") {   ";var P=P||[];P.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var I=r;r=P.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+I+"]); ":r+=" validate.errors = ["+I+"]; return false; ":r+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  errors = "+_+"; if (vErrors !== null) { if ("+_+") vErrors.length = "+_+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else r+="  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h&&(r+=" if (false) { ");return r}});var ji=J((cp,Ai)=>{"use strict";Ai.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],f=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),_="valid"+n,l="errs__"+n,y=e.util.copy(e),b="";y.level++;var g="valid"+y.level,P=y.baseId,I="prevValid"+n,S="passingSchemas"+n;r+="var "+l+" = errors , "+I+" = false , "+_+" = false , "+S+" = null; ";var R=e.compositeRule;e.compositeRule=y.compositeRule=!0;var O=i;if(O)for(var $,V=-1,L=O.length-1;V<L;)$=O[V+=1],(e.opts.strictKeywords?typeof $=="object"&&Object.keys($).length>0||$===!1:e.util.schemaHasRules($,e.RULES.all))?(y.schema=$,y.schemaPath=f+"["+V+"]",y.errSchemaPath=u+"/"+V,r+="  "+e.validate(y)+" ",y.baseId=P):r+=" var "+g+" = true; ",V&&(r+=" if ("+g+" && "+I+") { "+_+" = false; "+S+" = ["+S+", "+V+"]; } else { ",b+="}"),r+=" if ("+g+") { "+_+" = "+I+" = true; "+S+" = "+V+"; }";return e.compositeRule=y.compositeRule=R,r+=""+b+"if (!"+_+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { passingSchemas: "+S+" } ",e.opts.messages!==!1&&(r+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+="} else {  errors = "+l+"; if (vErrors !== null) { if ("+l+") vErrors.length = "+l+"; else vErrors = null; }",e.opts.allErrors&&(r+=" } "),r}});var ki=J((up,Ci)=>{"use strict";Ci.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],f=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),_=e.opts.$data&&i&&i.$data,l;_?(r+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",l="schema"+n):l=i;var y=_?"(new RegExp("+l+"))":e.usePattern(i);r+="if ( ",_&&(r+=" ("+l+" !== undefined && typeof "+l+" != 'string') || "),r+=" !"+y+".test("+m+") ) {   ";var b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { pattern:  ",_?r+=""+l:r+=""+e.util.toQuotedString(i),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match pattern "`,_?r+="' + "+l+" + '":r+=""+e.util.escapeQuotes(i),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",_?r+="validate.schema"+f:r+=""+e.util.toQuotedString(i),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var g=r;return r=b.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r}});var qi=J((lp,Ni)=>{"use strict";Ni.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],f=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),_="errs__"+n,l=e.util.copy(e),y="";l.level++;var b="valid"+l.level,g="key"+n,P="idx"+n,I=l.dataLevel=e.dataLevel+1,S="data"+I,R="dataProperties"+n,O=Object.keys(i||{}).filter(ee),$=e.schema.patternProperties||{},V=Object.keys($).filter(ee),L=e.schema.additionalProperties,D=O.length||V.length,U=L===!1,F=typeof L=="object"&&Object.keys(L).length,N=e.opts.removeAdditional,T=U||F||N,A=e.opts.ownProperties,q=e.baseId,oe=e.schema.required;if(oe&&!(e.opts.$data&&oe.$data)&&oe.length<e.opts.loopRequired)var Y=e.util.toHash(oe);function ee(Ke){return Ke!=="__proto__"}if(r+="var "+_+" = errors;var "+b+" = true;",A&&(r+=" var "+R+" = undefined;"),T){if(A?r+=" "+R+" = "+R+" || Object.keys("+m+"); for (var "+P+"=0; "+P+"<"+R+".length; "+P+"++) { var "+g+" = "+R+"["+P+"]; ":r+=" for (var "+g+" in "+m+") { ",D){if(r+=" var isAdditional"+n+" = !(false ",O.length)if(O.length>8)r+=" || validate.schema"+f+".hasOwnProperty("+g+") ";else{var W=O;if(W)for(var Q,he=-1,we=W.length-1;he<we;)Q=W[he+=1],r+=" || "+g+" == "+e.util.toQuotedString(Q)+" "}if(V.length){var Ie=V;if(Ie)for(var ae,ve=-1,xe=Ie.length-1;ve<xe;)ae=Ie[ve+=1],r+=" || "+e.usePattern(ae)+".test("+g+") "}r+=" ); if (isAdditional"+n+") { "}if(N=="all")r+=" delete "+m+"["+g+"]; ";else{var Oe=e.errorPath,gr="' + "+g+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers)),U)if(N)r+=" delete "+m+"["+g+"]; ";else{r+=" "+b+" = false; ";var cr=u;u=e.errSchemaPath+"/additionalProperties";var ge=ge||[];ge.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { additionalProperty: '"+gr+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is an invalid additional property":r+="should NOT have additional properties",r+="' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var pe=r;r=ge.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+pe+"]); ":r+=" validate.errors = ["+pe+"]; return false; ":r+=" var err = "+pe+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=cr,h&&(r+=" break; ")}else if(F)if(N=="failing"){r+=" var "+_+" = errors;  ";var Rr=e.compositeRule;e.compositeRule=l.compositeRule=!0,l.schema=L,l.schemaPath=e.schemaPath+".additionalProperties",l.errSchemaPath=e.errSchemaPath+"/additionalProperties",l.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var Re=m+"["+g+"]";l.dataPathArr[I]=g;var ne=e.validate(l);l.baseId=q,e.util.varOccurences(ne,S)<2?r+=" "+e.util.varReplace(ne,S,Re)+" ":r+=" var "+S+" = "+Re+"; "+ne+" ",r+=" if (!"+b+") { errors = "+_+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+m+"["+g+"]; }  ",e.compositeRule=l.compositeRule=Rr}else{l.schema=L,l.schemaPath=e.schemaPath+".additionalProperties",l.errSchemaPath=e.errSchemaPath+"/additionalProperties",l.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var Re=m+"["+g+"]";l.dataPathArr[I]=g;var ne=e.validate(l);l.baseId=q,e.util.varOccurences(ne,S)<2?r+=" "+e.util.varReplace(ne,S,Re)+" ":r+=" var "+S+" = "+Re+"; "+ne+" ",h&&(r+=" if (!"+b+") break; ")}e.errorPath=Oe}D&&(r+=" } "),r+=" }  ",h&&(r+=" if ("+b+") { ",y+="}")}var yr=e.opts.useDefaults&&!e.compositeRule;if(O.length){var ur=O;if(ur)for(var Q,Tr=-1,Ir=ur.length-1;Tr<Ir;){Q=ur[Tr+=1];var Pe=i[Q];if(e.opts.strictKeywords?typeof Pe=="object"&&Object.keys(Pe).length>0||Pe===!1:e.util.schemaHasRules(Pe,e.RULES.all)){var Ue=e.util.getProperty(Q),Re=m+Ue,Ae=yr&&Pe.default!==void 0;l.schema=Pe,l.schemaPath=f+Ue,l.errSchemaPath=u+"/"+e.util.escapeFragment(Q),l.errorPath=e.util.getPath(e.errorPath,Q,e.opts.jsonPointers),l.dataPathArr[I]=e.util.toQuotedString(Q);var ne=e.validate(l);if(l.baseId=q,e.util.varOccurences(ne,S)<2){ne=e.util.varReplace(ne,S,Re);var $e=Re}else{var $e=S;r+=" var "+S+" = "+Re+"; "}if(Ae)r+=" "+ne+" ";else{if(Y&&Y[Q]){r+=" if ( "+$e+" === undefined ",A&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(Q)+"') "),r+=") { "+b+" = false; ";var Oe=e.errorPath,cr=u,rr=e.util.escapeQuotes(Q);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(Oe,Q,e.opts.jsonPointers)),u=e.errSchemaPath+"/required";var ge=ge||[];ge.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+rr+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+rr+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var pe=r;r=ge.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+pe+"]); ":r+=" validate.errors = ["+pe+"]; return false; ":r+=" var err = "+pe+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=cr,e.errorPath=Oe,r+=" } else { "}else h?(r+=" if ( "+$e+" === undefined ",A&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(Q)+"') "),r+=") { "+b+" = true; } else { "):(r+=" if ("+$e+" !== undefined ",A&&(r+=" &&   Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(Q)+"') "),r+=" ) { ");r+=" "+ne+" } "}}h&&(r+=" if ("+b+") { ",y+="}")}}if(V.length){var qe=V;if(qe)for(var ae,$t=-1,ba=qe.length-1;$t<ba;){ae=qe[$t+=1];var Pe=$[ae];if(e.opts.strictKeywords?typeof Pe=="object"&&Object.keys(Pe).length>0||Pe===!1:e.util.schemaHasRules(Pe,e.RULES.all)){l.schema=Pe,l.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ae),l.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ae),A?r+=" "+R+" = "+R+" || Object.keys("+m+"); for (var "+P+"=0; "+P+"<"+R+".length; "+P+"++) { var "+g+" = "+R+"["+P+"]; ":r+=" for (var "+g+" in "+m+") { ",r+=" if ("+e.usePattern(ae)+".test("+g+")) { ",l.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var Re=m+"["+g+"]";l.dataPathArr[I]=g;var ne=e.validate(l);l.baseId=q,e.util.varOccurences(ne,S)<2?r+=" "+e.util.varReplace(ne,S,Re)+" ":r+=" var "+S+" = "+Re+"; "+ne+" ",h&&(r+=" if (!"+b+") break; "),r+=" } ",h&&(r+=" else "+b+" = true; "),r+=" }  ",h&&(r+=" if ("+b+") { ",y+="}")}}}return h&&(r+=" "+y+" if ("+_+" == errors) {"),r}});var Li=J((dp,Fi)=>{"use strict";Fi.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],f=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),_="errs__"+n,l=e.util.copy(e),y="";l.level++;var b="valid"+l.level;if(r+="var "+_+" = errors;",e.opts.strictKeywords?typeof i=="object"&&Object.keys(i).length>0||i===!1:e.util.schemaHasRules(i,e.RULES.all)){l.schema=i,l.schemaPath=f,l.errSchemaPath=u;var g="key"+n,P="idx"+n,I="i"+n,S="' + "+g+" + '",R=l.dataLevel=e.dataLevel+1,O="data"+R,$="dataProperties"+n,V=e.opts.ownProperties,L=e.baseId;V&&(r+=" var "+$+" = undefined; "),V?r+=" "+$+" = "+$+" || Object.keys("+m+"); for (var "+P+"=0; "+P+"<"+$+".length; "+P+"++) { var "+g+" = "+$+"["+P+"]; ":r+=" for (var "+g+" in "+m+") { ",r+=" var startErrs"+n+" = errors; ";var D=g,U=e.compositeRule;e.compositeRule=l.compositeRule=!0;var F=e.validate(l);l.baseId=L,e.util.varOccurences(F,O)<2?r+=" "+e.util.varReplace(F,O,D)+" ":r+=" var "+O+" = "+D+"; "+F+" ",e.compositeRule=l.compositeRule=U,r+=" if (!"+b+") { for (var "+I+"=startErrs"+n+"; "+I+"<errors; "+I+"++) { vErrors["+I+"].propertyName = "+g+"; }   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { propertyName: '"+S+"' } ",e.opts.messages!==!1&&(r+=" , message: 'property name \\'"+S+"\\' is invalid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),h&&(r+=" break; "),r+=" } }"}return h&&(r+=" "+y+" if ("+_+" == errors) {"),r}});var Mi=J((fp,Ui)=>{"use strict";Ui.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],f=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),_="valid"+n,l=e.opts.$data&&i&&i.$data,y;l?(r+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",y="schema"+n):y=i;var b="schema"+n;if(!l)if(i.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var g=[],P=i;if(P)for(var I,S=-1,R=P.length-1;S<R;){I=P[S+=1];var O=e.schema.properties[I];O&&(e.opts.strictKeywords?typeof O=="object"&&Object.keys(O).length>0||O===!1:e.util.schemaHasRules(O,e.RULES.all))||(g[g.length]=I)}}else var g=i;if(l||g.length){var $=e.errorPath,V=l||g.length>=e.opts.loopRequired,L=e.opts.ownProperties;if(h)if(r+=" var missing"+n+"; ",V){l||(r+=" var "+b+" = validate.schema"+f+"; ");var D="i"+n,U="schema"+n+"["+D+"]",F="' + "+U+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr($,U,e.opts.jsonPointers)),r+=" var "+_+" = true; ",l&&(r+=" if (schema"+n+" === undefined) "+_+" = true; else if (!Array.isArray(schema"+n+")) "+_+" = false; else {"),r+=" for (var "+D+" = 0; "+D+" < "+b+".length; "+D+"++) { "+_+" = "+m+"["+b+"["+D+"]] !== undefined ",L&&(r+=" &&   Object.prototype.hasOwnProperty.call("+m+", "+b+"["+D+"]) "),r+="; if (!"+_+") break; } ",l&&(r+="  }  "),r+="  if (!"+_+") {   ";var N=N||[];N.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+F+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+F+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var T=r;r=N.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+T+"]); ":r+=" validate.errors = ["+T+"]; return false; ":r+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else{r+=" if ( ";var A=g;if(A)for(var q,D=-1,oe=A.length-1;D<oe;){q=A[D+=1],D&&(r+=" || ");var Y=e.util.getProperty(q),ee=m+Y;r+=" ( ( "+ee+" === undefined ",L&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(q)+"') "),r+=") && (missing"+n+" = "+e.util.toQuotedString(e.opts.jsonPointers?q:Y)+") ) "}r+=") {  ";var U="missing"+n,F="' + "+U+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr($,U,!0):$+" + "+U);var N=N||[];N.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+F+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+F+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var T=r;r=N.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+T+"]); ":r+=" validate.errors = ["+T+"]; return false; ":r+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else if(V){l||(r+=" var "+b+" = validate.schema"+f+"; ");var D="i"+n,U="schema"+n+"["+D+"]",F="' + "+U+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr($,U,e.opts.jsonPointers)),l&&(r+=" if ("+b+" && !Array.isArray("+b+")) {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+F+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+F+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+b+" !== undefined) { "),r+=" for (var "+D+" = 0; "+D+" < "+b+".length; "+D+"++) { if ("+m+"["+b+"["+D+"]] === undefined ",L&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", "+b+"["+D+"]) "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+F+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+F+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",l&&(r+="  }  ")}else{var W=g;if(W)for(var q,Q=-1,he=W.length-1;Q<he;){q=W[Q+=1];var Y=e.util.getProperty(q),F=e.util.escapeQuotes(q),ee=m+Y;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath($,q,e.opts.jsonPointers)),r+=" if ( "+ee+" === undefined ",L&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(q)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+F+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+F+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=$}else h&&(r+=" if (true) {");return r}});var Vi=J((hp,zi)=>{"use strict";zi.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],f=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),_="valid"+n,l=e.opts.$data&&i&&i.$data,y;if(l?(r+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",y="schema"+n):y=i,(i||l)&&e.opts.uniqueItems!==!1){l&&(r+=" var "+_+"; if ("+y+" === false || "+y+" === undefined) "+_+" = true; else if (typeof "+y+" != 'boolean') "+_+" = false; else { "),r+=" var i = "+m+".length , "+_+" = true , j; if (i > 1) { ";var b=e.schema.items&&e.schema.items.type,g=Array.isArray(b);if(!b||b=="object"||b=="array"||g&&(b.indexOf("object")>=0||b.indexOf("array")>=0))r+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+m+"[i], "+m+"[j])) { "+_+" = false; break outer; } } } ";else{r+=" var itemIndices = {}, item; for (;i--;) { var item = "+m+"[i]; ";var P="checkDataType"+(g?"s":"");r+=" if ("+e.util[P](b,"item",e.opts.strictNumbers,!0)+") continue; ",g&&(r+=` if (typeof item == 'string') item = '"' + item; `),r+=" if (typeof itemIndices[item] == 'number') { "+_+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}r+=" } ",l&&(r+="  }  "),r+=" if (!"+_+") {   ";var I=I||[];I.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(r+=" , schema:  ",l?r+="validate.schema"+f:r+=""+i,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var S=r;r=I.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+S+"]); ":r+=" validate.errors = ["+S+"]; return false; ":r+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",h&&(r+=" else { ")}else h&&(r+=" if (true) { ");return r}});var Hi=J((pp,Qi)=>{"use strict";Qi.exports={$ref:ai(),allOf:ni(),anyOf:oi(),$comment:ui(),const:di(),contains:hi(),dependencies:mi(),enum:gi(),format:_i(),if:Ei(),items:Pi(),maximum:as(),minimum:as(),maxItems:ss(),minItems:ss(),maxLength:ns(),minLength:ns(),maxProperties:is(),minProperties:is(),multipleOf:Oi(),not:Di(),oneOf:ji(),pattern:ki(),properties:qi(),propertyNames:Li(),required:Mi(),uniqueItems:Vi(),validate:rs()}});var Zi=J((mp,Ji)=>{"use strict";var Bi=Hi(),os=Zr().toHash;Ji.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"],s=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],r=["number","integer","string","array","object","boolean","null"];return e.all=os(t),e.types=os(r),e.forEach(function(n){n.rules=n.rules.map(function(o){var i;if(typeof o=="object"){var f=Object.keys(o)[0];i=o[f],o=f,i.forEach(function(h){t.push(h),e.all[h]=!0})}t.push(o);var u=e.all[o]={keyword:o,code:Bi[o],implements:i};return u}),e.all.$comment={keyword:"$comment",code:Bi.$comment},n.type&&(e.types[n.type]=n)}),e.keywords=os(t.concat(s)),e.custom={},e}});var Wi=J((vp,Gi)=>{"use strict";var Ki=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];Gi.exports=function(a,e){for(var t=0;t<e.length;t++){a=JSON.parse(JSON.stringify(a));var s=e[t].split("/"),r=a,n;for(n=1;n<s.length;n++)r=r[s[n]];for(n=0;n<Ki.length;n++){var o=Ki[n],i=r[o];i&&(r[o]={anyOf:[i,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return a}});var eo=J((gp,Xi)=>{"use strict";var Yd=aa().MissingRef;Xi.exports=Yi;function Yi(a,e,t){var s=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(t=e,e=void 0);var r=n(a).then(function(){var i=s._addSchema(a,void 0,e);return i.validate||o(i)});return t&&r.then(function(i){t(null,i)},t),r;function n(i){var f=i.$schema;return f&&!s.getSchema(f)?Yi.call(s,{$ref:f},!0):Promise.resolve()}function o(i){try{return s._compile(i)}catch(u){if(u instanceof Yd)return f(u);throw u}function f(u){var h=u.missingSchema;if(l(h))throw new Error("Schema "+h+" is loaded but "+u.missingRef+" cannot be resolved");var m=s._loadingSchemas[h];return m||(m=s._loadingSchemas[h]=s._opts.loadSchema(h),m.then(_,_)),m.then(function(y){if(!l(h))return n(y).then(function(){l(h)||s.addSchema(y,h,void 0,e)})}).then(function(){return o(i)});function _(){delete s._loadingSchemas[h]}function l(y){return s._refs[y]||s._schemas[y]}}}}});var to=J((yp,ro)=>{"use strict";ro.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],f=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m,_="data"+(o||""),l="valid"+n,y="errs__"+n,b=e.opts.$data&&i&&i.$data,g;b?(r+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",g="schema"+n):g=i;var P=this,I="definition"+n,S=P.definition,R="",O,$,V,L,D;if(b&&S.$data){D="keywordValidate"+n;var U=S.validateSchema;r+=" var "+I+" = RULES.custom['"+t+"'].definition; var "+D+" = "+I+".validate;"}else{if(L=e.useCustomRule(P,i,e.schema,e),!L)return;g="validate.schema"+f,D=L.code,O=S.compile,$=S.inline,V=S.macro}var F=D+".errors",N="i"+n,T="ruleErr"+n,A=S.async;if(A&&!e.async)throw new Error("async keyword in sync schema");if($||V||(r+=""+F+" = null;"),r+="var "+y+" = errors;var "+l+";",b&&S.$data&&(R+="}",r+=" if ("+g+" === undefined) { "+l+" = true; } else { ",U&&(R+="}",r+=" "+l+" = "+I+".validateSchema("+g+"); if ("+l+") { ")),$)S.statements?r+=" "+L.validate+" ":r+=" "+l+" = "+L.validate+"; ";else if(V){var q=e.util.copy(e),R="";q.level++;var oe="valid"+q.level;q.schema=L.validate,q.schemaPath="";var Y=e.compositeRule;e.compositeRule=q.compositeRule=!0;var ee=e.validate(q).replace(/validate\.schema/g,D);e.compositeRule=q.compositeRule=Y,r+=" "+ee}else{var W=W||[];W.push(r),r="",r+="  "+D+".call( ",e.opts.passContext?r+="this":r+="self",O||S.schema===!1?r+=" , "+_+" ":r+=" , "+g+" , "+_+" , validate.schema"+e.schemaPath+" ",r+=" , (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var Q=o?"data"+(o-1||""):"parentData",he=o?e.dataPathArr[o]:"parentDataProperty";r+=" , "+Q+" , "+he+" , rootData )  ";var we=r;r=W.pop(),S.errors===!1?(r+=" "+l+" = ",A&&(r+="await "),r+=""+we+"; "):A?(F="customErrors"+n,r+=" var "+F+" = null; try { "+l+" = await "+we+"; } catch (e) { "+l+" = false; if (e instanceof ValidationError) "+F+" = e.errors; else throw e; } "):r+=" "+F+" = null; "+l+" = "+we+"; "}if(S.modifying&&(r+=" if ("+Q+") "+_+" = "+Q+"["+he+"];"),r+=""+R,S.valid)h&&(r+=" if (true) { ");else{r+=" if ( ",S.valid===void 0?(r+=" !",V?r+=""+oe:r+=""+l):r+=" "+!S.valid+" ",r+=") { ",m=P.keyword;var W=W||[];W.push(r),r="";var W=W||[];W.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(m||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+P.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+P.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),r+=" } "):r+=" {} ";var Ie=r;r=W.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+Ie+"]); ":r+=" validate.errors = ["+Ie+"]; return false; ":r+=" var err = "+Ie+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var ae=r;r=W.pop(),$?S.errors?S.errors!="full"&&(r+="  for (var "+N+"="+y+"; "+N+"<errors; "+N+"++) { var "+T+" = vErrors["+N+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+T+".schemaPath === undefined) { "+T+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(r+=" "+T+".schema = "+g+"; "+T+".data = "+_+"; "),r+=" } "):S.errors===!1?r+=" "+ae+" ":(r+=" if ("+y+" == errors) { "+ae+" } else {  for (var "+N+"="+y+"; "+N+"<errors; "+N+"++) { var "+T+" = vErrors["+N+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+T+".schemaPath === undefined) { "+T+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(r+=" "+T+".schema = "+g+"; "+T+".data = "+_+"; "),r+=" } } "):V?(r+="   var err =   ",e.createErrors!==!1?(r+=" { keyword: '"+(m||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+P.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+P.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; ")):S.errors===!1?r+=" "+ae+" ":(r+=" if (Array.isArray("+F+")) { if (vErrors === null) vErrors = "+F+"; else vErrors = vErrors.concat("+F+"); errors = vErrors.length;  for (var "+N+"="+y+"; "+N+"<errors; "+N+"++) { var "+T+" = vErrors["+N+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+e.errorPath+";  "+T+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(r+=" "+T+".schema = "+g+"; "+T+".data = "+_+"; "),r+=" } } else { "+ae+" } "),r+=" } ",h&&(r+=" else { ")}return r}});var cs=J((_p,Xd)=>{Xd.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var no=J((bp,so)=>{"use strict";var ao=cs();so.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:ao.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:ao.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}});var oo=J((Ep,io)=>{"use strict";var ef=/^[a-z_$][a-z0-9_$-]*$/i,rf=to(),tf=no();io.exports={add:af,get:sf,remove:nf,validate:us};function af(a,e){var t=this.RULES;if(t.keywords[a])throw new Error("Keyword "+a+" is already defined");if(!ef.test(a))throw new Error("Keyword "+a+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var s=e.type;if(Array.isArray(s))for(var r=0;r<s.length;r++)o(a,s[r],e);else o(a,s,e);var n=e.metaSchema;n&&(e.$data&&this._opts.$data&&(n={anyOf:[n,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(n,!0))}t.keywords[a]=t.all[a]=!0;function o(i,f,u){for(var h,m=0;m<t.length;m++){var _=t[m];if(_.type==f){h=_;break}}h||(h={type:f,rules:[]},t.push(h));var l={keyword:i,definition:u,custom:!0,code:rf,implements:u.implements};h.rules.push(l),t.custom[i]=l}return this}function sf(a){var e=this.RULES.custom[a];return e?e.definition:this.RULES.keywords[a]||!1}function nf(a){var e=this.RULES;delete e.keywords[a],delete e.all[a],delete e.custom[a];for(var t=0;t<e.length;t++)for(var s=e[t].rules,r=0;r<s.length;r++)if(s[r].keyword==a){s.splice(r,1);break}return this}function us(a,e){us.errors=null;var t=this._validateKeyword=this._validateKeyword||this.compile(tf,!0);if(t(a))return!0;if(us.errors=t.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(t.errors));return!1}});var co=J((xp,of)=>{of.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var _o=J((Pp,yo)=>{"use strict";var lo=Mn(),Kr=ta(),cf=Vn(),fo=Za(),uf=es(),lf=ri(),df=Zi(),ho=Wi(),po=Zr();yo.exports=me;me.prototype.validate=hf;me.prototype.compile=pf;me.prototype.addSchema=mf;me.prototype.addMetaSchema=vf;me.prototype.validateSchema=gf;me.prototype.getSchema=_f;me.prototype.removeSchema=Ef;me.prototype.addFormat=Of;me.prototype.errorsText=If;me.prototype._addSchema=xf;me.prototype._compile=Pf;me.prototype.compileAsync=eo();var da=oo();me.prototype.addKeyword=da.add;me.prototype.getKeyword=da.get;me.prototype.removeKeyword=da.remove;me.prototype.validateKeyword=da.validate;var mo=aa();me.ValidationError=mo.Validation;me.MissingRefError=mo.MissingRef;me.$dataMetaSchema=ho;var la="http://json-schema.org/draft-07/schema",uo=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],ff=["/properties"];function me(a){if(!(this instanceof me))return new me(a);a=this._opts=po.copy(a)||{},kf(this),this._schemas={},this._refs={},this._fragments={},this._formats=lf(a.format),this._cache=a.cache||new cf,this._loadingSchemas={},this._compilations=[],this.RULES=df(),this._getId=Sf(a),a.loopRequired=a.loopRequired||1/0,a.errorDataPath=="property"&&(a._errorDataPathProperty=!0),a.serialize===void 0&&(a.serialize=uf),this._metaOpts=Cf(this),a.formats&&Af(this),a.keywords&&jf(this),$f(this),typeof a.meta=="object"&&this.addMetaSchema(a.meta),a.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),Df(this)}function hf(a,e){var t;if(typeof a=="string"){if(t=this.getSchema(a),!t)throw new Error('no schema with key or ref "'+a+'"')}else{var s=this._addSchema(a);t=s.validate||this._compile(s)}var r=t(e);return t.$async!==!0&&(this.errors=t.errors),r}function pf(a,e){var t=this._addSchema(a,void 0,e);return t.validate||this._compile(t)}function mf(a,e,t,s){if(Array.isArray(a)){for(var r=0;r<a.length;r++)this.addSchema(a[r],void 0,t,s);return this}var n=this._getId(a);if(n!==void 0&&typeof n!="string")throw new Error("schema id must be string");return e=Kr.normalizeId(e||n),go(this,e),this._schemas[e]=this._addSchema(a,t,s,!0),this}function vf(a,e,t){return this.addSchema(a,e,t,!0),this}function gf(a,e){var t=a.$schema;if(t!==void 0&&typeof t!="string")throw new Error("$schema must be a string");if(t=t||this._opts.defaultMeta||yf(this),!t)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var s=this.validate(t,a);if(!s&&e){var r="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(r);else throw new Error(r)}return s}function yf(a){var e=a._opts.meta;return a._opts.defaultMeta=typeof e=="object"?a._getId(e)||e:a.getSchema(la)?la:void 0,a._opts.defaultMeta}function _f(a){var e=vo(this,a);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return bf(this,a)}}function bf(a,e){var t=Kr.schema.call(a,{schema:{}},e);if(t){var s=t.schema,r=t.root,n=t.baseId,o=lo.call(a,s,r,void 0,n);return a._fragments[e]=new fo({ref:e,fragment:!0,schema:s,root:r,baseId:n,validate:o}),o}}function vo(a,e){return e=Kr.normalizeId(e),a._schemas[e]||a._refs[e]||a._fragments[e]}function Ef(a){if(a instanceof RegExp)return ua(this,this._schemas,a),ua(this,this._refs,a),this;switch(typeof a){case"undefined":return ua(this,this._schemas),ua(this,this._refs),this._cache.clear(),this;case"string":var e=vo(this,a);return e&&this._cache.del(e.cacheKey),delete this._schemas[a],delete this._refs[a],this;case"object":var t=this._opts.serialize,s=t?t(a):a;this._cache.del(s);var r=this._getId(a);r&&(r=Kr.normalizeId(r),delete this._schemas[r],delete this._refs[r])}return this}function ua(a,e,t){for(var s in e){var r=e[s];!r.meta&&(!t||t.test(s))&&(a._cache.del(r.cacheKey),delete e[s])}}function xf(a,e,t,s){if(typeof a!="object"&&typeof a!="boolean")throw new Error("schema should be object or boolean");var r=this._opts.serialize,n=r?r(a):a,o=this._cache.get(n);if(o)return o;s=s||this._opts.addUsedSchema!==!1;var i=Kr.normalizeId(this._getId(a));i&&s&&go(this,i);var f=this._opts.validateSchema!==!1&&!e,u;f&&!(u=i&&i==Kr.normalizeId(a.$schema))&&this.validateSchema(a,!0);var h=Kr.ids.call(this,a),m=new fo({id:i,schema:a,localRefs:h,cacheKey:n,meta:t});return i[0]!="#"&&s&&(this._refs[i]=m),this._cache.put(n,m),f&&u&&this.validateSchema(a,!0),m}function Pf(a,e){if(a.compiling)return a.validate=r,r.schema=a.schema,r.errors=null,r.root=e||r,a.schema.$async===!0&&(r.$async=!0),r;a.compiling=!0;var t;a.meta&&(t=this._opts,this._opts=this._metaOpts);var s;try{s=lo.call(this,a.schema,e,a.localRefs)}catch(n){throw delete a.validate,n}finally{a.compiling=!1,a.meta&&(this._opts=t)}return a.validate=s,a.refs=s.refs,a.refVal=s.refVal,a.root=s.root,s;function r(){var n=a.validate,o=n.apply(this,arguments);return r.errors=n.errors,o}}function Sf(a){switch(a.schemaId){case"auto":return Tf;case"id":return wf;default:return Rf}}function wf(a){return a.$id&&this.logger.warn("schema $id ignored",a.$id),a.id}function Rf(a){return a.id&&this.logger.warn("schema id ignored",a.id),a.$id}function Tf(a){if(a.$id&&a.id&&a.$id!=a.id)throw new Error("schema $id is different from id");return a.$id||a.id}function If(a,e){if(a=a||this.errors,!a)return"No errors";e=e||{};for(var t=e.separator===void 0?", ":e.separator,s=e.dataVar===void 0?"data":e.dataVar,r="",n=0;n<a.length;n++){var o=a[n];o&&(r+=s+o.dataPath+" "+o.message+t)}return r.slice(0,-t.length)}function Of(a,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[a]=e,this}function $f(a){var e;if(a._opts.$data&&(e=co(),a.addMetaSchema(e,e.$id,!0)),a._opts.meta!==!1){var t=cs();a._opts.$data&&(t=ho(t,ff)),a.addMetaSchema(t,la,!0),a._refs["http://json-schema.org/schema"]=la}}function Df(a){var e=a._opts.schemas;if(e)if(Array.isArray(e))a.addSchema(e);else for(var t in e)a.addSchema(e[t],t)}function Af(a){for(var e in a._opts.formats){var t=a._opts.formats[e];a.addFormat(e,t)}}function jf(a){for(var e in a._opts.keywords){var t=a._opts.keywords[e];a.addKeyword(e,t)}}function go(a,e){if(a._schemas[e]||a._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function Cf(a){for(var e=po.copy(a._opts),t=0;t<uo.length;t++)delete e[uo[t]];return e}function kf(a){var e=a._opts.logger;if(e===!1)a.logger={log:ls,warn:ls,error:ls};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");a.logger=e}}function ls(){}});var c={};Zc(c,{BRAND:()=>xu,DIRTY:()=>Ar,EMPTY_PATH:()=>eu,INVALID:()=>H,NEVER:()=>il,OK:()=>Te,ParseStatus:()=>Se,Schema:()=>G,ZodAny:()=>Er,ZodArray:()=>vr,ZodBigInt:()=>Cr,ZodBoolean:()=>kr,ZodBranded:()=>Et,ZodCatch:()=>Br,ZodDate:()=>Nr,ZodDefault:()=>Hr,ZodDiscriminatedUnion:()=>Nt,ZodEffects:()=>He,ZodEnum:()=>Vr,ZodError:()=>je,ZodFirstPartyTypeKind:()=>B,ZodFunction:()=>Ft,ZodIntersection:()=>Ur,ZodIssueCode:()=>w,ZodLazy:()=>Mr,ZodLiteral:()=>zr,ZodMap:()=>ct,ZodNaN:()=>lt,ZodNativeEnum:()=>Qr,ZodNever:()=>Ge,ZodNull:()=>Fr,ZodNullable:()=>ir,ZodNumber:()=>jr,ZodObject:()=>Ce,ZodOptional:()=>Ve,ZodParsedType:()=>C,ZodPipeline:()=>xt,ZodPromise:()=>xr,ZodReadonly:()=>Jr,ZodRecord:()=>qt,ZodSchema:()=>G,ZodSet:()=>ut,ZodString:()=>br,ZodSymbol:()=>it,ZodTransformer:()=>He,ZodTuple:()=>nr,ZodType:()=>G,ZodUndefined:()=>qr,ZodUnion:()=>Lr,ZodUnknown:()=>mr,ZodVoid:()=>ot,addIssueToContext:()=>j,any:()=>Du,array:()=>ku,bigint:()=>Ru,boolean:()=>Gs,coerce:()=>nl,custom:()=>Js,date:()=>Tu,datetimeRegex:()=>Hs,defaultErrorMap:()=>hr,discriminatedUnion:()=>Lu,effect:()=>Wu,enum:()=>Zu,function:()=>Hu,getErrorMap:()=>at,getParsedType:()=>sr,instanceof:()=>Su,intersection:()=>Uu,isAborted:()=>Ct,isAsync:()=>st,isDirty:()=>kt,isValid:()=>_r,late:()=>Pu,lazy:()=>Bu,literal:()=>Ju,makeIssue:()=>bt,map:()=>Vu,nan:()=>wu,nativeEnum:()=>Ku,never:()=>ju,null:()=>$u,nullable:()=>Xu,number:()=>Ks,object:()=>Nu,objectUtil:()=>wa,oboolean:()=>sl,onumber:()=>al,optional:()=>Yu,ostring:()=>tl,pipeline:()=>rl,preprocess:()=>el,promise:()=>Gu,quotelessJson:()=>Wc,record:()=>zu,set:()=>Qu,setErrorMap:()=>Xc,strictObject:()=>qu,string:()=>Zs,symbol:()=>Iu,transformer:()=>Wu,tuple:()=>Mu,undefined:()=>Ou,union:()=>Fu,unknown:()=>Au,util:()=>X,void:()=>Cu});var X;(function(a){a.assertEqual=r=>{};function e(r){}a.assertIs=e;function t(r){throw new Error}a.assertNever=t,a.arrayToEnum=r=>{let n={};for(let o of r)n[o]=o;return n},a.getValidEnumValues=r=>{let n=a.objectKeys(r).filter(i=>typeof r[r[i]]!="number"),o={};for(let i of n)o[i]=r[i];return a.objectValues(o)},a.objectValues=r=>a.objectKeys(r).map(function(n){return r[n]}),a.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{let n=[];for(let o in r)Object.prototype.hasOwnProperty.call(r,o)&&n.push(o);return n},a.find=(r,n)=>{for(let o of r)if(n(o))return o},a.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function s(r,n=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(n)}a.joinValues=s,a.jsonStringifyReplacer=(r,n)=>typeof n=="bigint"?n.toString():n})(X||(X={}));var wa;(function(a){a.mergeShapes=(e,t)=>({...e,...t})})(wa||(wa={}));var C=X.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),sr=a=>{switch(typeof a){case"undefined":return C.undefined;case"string":return C.string;case"number":return Number.isNaN(a)?C.nan:C.number;case"boolean":return C.boolean;case"function":return C.function;case"bigint":return C.bigint;case"symbol":return C.symbol;case"object":return Array.isArray(a)?C.array:a===null?C.null:a.then&&typeof a.then=="function"&&a.catch&&typeof a.catch=="function"?C.promise:typeof Map<"u"&&a instanceof Map?C.map:typeof Set<"u"&&a instanceof Set?C.set:typeof Date<"u"&&a instanceof Date?C.date:C.object;default:return C.unknown}};var w=X.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Wc=a=>JSON.stringify(a,null,2).replace(/"([^"]+)":/g,"$1:"),je=class a extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(n){return n.message},s={_errors:[]},r=n=>{for(let o of n.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)s._errors.push(t(o));else{let i=s,f=0;for(;f<o.path.length;){let u=o.path[f];f===o.path.length-1?(i[u]=i[u]||{_errors:[]},i[u]._errors.push(t(o))):i[u]=i[u]||{_errors:[]},i=i[u],f++}}};return r(this),s}static assert(e){if(!(e instanceof a))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,X.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){let t={},s=[];for(let r of this.issues)if(r.path.length>0){let n=r.path[0];t[n]=t[n]||[],t[n].push(e(r))}else s.push(e(r));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}};je.create=a=>new je(a);var Yc=(a,e)=>{let t;switch(a.code){case w.invalid_type:a.received===C.undefined?t="Required":t=`Expected ${a.expected}, received ${a.received}`;break;case w.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(a.expected,X.jsonStringifyReplacer)}`;break;case w.unrecognized_keys:t=`Unrecognized key(s) in object: ${X.joinValues(a.keys,", ")}`;break;case w.invalid_union:t="Invalid input";break;case w.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${X.joinValues(a.options)}`;break;case w.invalid_enum_value:t=`Invalid enum value. Expected ${X.joinValues(a.options)}, received '${a.received}'`;break;case w.invalid_arguments:t="Invalid function arguments";break;case w.invalid_return_type:t="Invalid function return type";break;case w.invalid_date:t="Invalid date";break;case w.invalid_string:typeof a.validation=="object"?"includes"in a.validation?(t=`Invalid input: must include "${a.validation.includes}"`,typeof a.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${a.validation.position}`)):"startsWith"in a.validation?t=`Invalid input: must start with "${a.validation.startsWith}"`:"endsWith"in a.validation?t=`Invalid input: must end with "${a.validation.endsWith}"`:X.assertNever(a.validation):a.validation!=="regex"?t=`Invalid ${a.validation}`:t="Invalid";break;case w.too_small:a.type==="array"?t=`Array must contain ${a.exact?"exactly":a.inclusive?"at least":"more than"} ${a.minimum} element(s)`:a.type==="string"?t=`String must contain ${a.exact?"exactly":a.inclusive?"at least":"over"} ${a.minimum} character(s)`:a.type==="number"?t=`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:a.type==="bigint"?t=`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:a.type==="date"?t=`Date must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(a.minimum))}`:t="Invalid input";break;case w.too_big:a.type==="array"?t=`Array must contain ${a.exact?"exactly":a.inclusive?"at most":"less than"} ${a.maximum} element(s)`:a.type==="string"?t=`String must contain ${a.exact?"exactly":a.inclusive?"at most":"under"} ${a.maximum} character(s)`:a.type==="number"?t=`Number must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="bigint"?t=`BigInt must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="date"?t=`Date must be ${a.exact?"exactly":a.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(a.maximum))}`:t="Invalid input";break;case w.custom:t="Invalid input";break;case w.invalid_intersection_types:t="Intersection results could not be merged";break;case w.not_multiple_of:t=`Number must be a multiple of ${a.multipleOf}`;break;case w.not_finite:t="Number must be finite";break;default:t=e.defaultError,X.assertNever(a)}return{message:t}},hr=Yc;var Us=hr;function Xc(a){Us=a}function at(){return Us}var bt=a=>{let{data:e,path:t,errorMaps:s,issueData:r}=a,n=[...t,...r.path||[]],o={...r,path:n};if(r.message!==void 0)return{...r,path:n,message:r.message};let i="",f=s.filter(u=>!!u).slice().reverse();for(let u of f)i=u(o,{data:e,defaultError:i}).message;return{...r,path:n,message:i}},eu=[];function j(a,e){let t=at(),s=bt({issueData:e,data:a.data,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,t,t===hr?void 0:hr].filter(r=>!!r)});a.common.issues.push(s)}var Se=class a{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){let s=[];for(let r of t){if(r.status==="aborted")return H;r.status==="dirty"&&e.dirty(),s.push(r.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){let s=[];for(let r of t){let n=await r.key,o=await r.value;s.push({key:n,value:o})}return a.mergeObjectSync(e,s)}static mergeObjectSync(e,t){let s={};for(let r of t){let{key:n,value:o}=r;if(n.status==="aborted"||o.status==="aborted")return H;n.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),n.value!=="__proto__"&&(typeof o.value<"u"||r.alwaysSet)&&(s[n.value]=o.value)}return{status:e.value,value:s}}},H=Object.freeze({status:"aborted"}),Ar=a=>({status:"dirty",value:a}),Te=a=>({status:"valid",value:a}),Ct=a=>a.status==="aborted",kt=a=>a.status==="dirty",_r=a=>a.status==="valid",st=a=>typeof Promise<"u"&&a instanceof Promise;var M;(function(a){a.errToObj=e=>typeof e=="string"?{message:e}:e||{},a.toString=e=>typeof e=="string"?e:e?.message})(M||(M={}));var Qe=class{constructor(e,t,s,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Ms=(a,e)=>{if(_r(e))return{success:!0,data:e.value};if(!a.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new je(a.common.issues);return this._error=t,this._error}}};function Z(a){if(!a)return{};let{errorMap:e,invalid_type_error:t,required_error:s,description:r}=a;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,i)=>{let{message:f}=a;return o.code==="invalid_enum_value"?{message:f??i.defaultError}:typeof i.data>"u"?{message:f??s??i.defaultError}:o.code!=="invalid_type"?{message:i.defaultError}:{message:f??t??i.defaultError}},description:r}}var G=class{get description(){return this._def.description}_getType(e){return sr(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:sr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Se,ctx:{common:e.parent.common,data:e.data,parsedType:sr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(st(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){let s={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:sr(e)},r=this._parseSync({data:e,path:s.path,parent:s});return Ms(s,r)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:sr(e)};if(!this["~standard"].async)try{let s=this._parseSync({data:e,path:[],parent:t});return _r(s)?{value:s.value}:{issues:t.common.issues}}catch(s){s?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(s=>_r(s)?{value:s.value}:{issues:t.common.issues})}async parseAsync(e,t){let s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){let s={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:sr(e)},r=this._parse({data:e,path:s.path,parent:s}),n=await(st(r)?r:Promise.resolve(r));return Ms(s,n)}refine(e,t){let s=r=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(r):t;return this._refinement((r,n)=>{let o=e(r),i=()=>n.addIssue({code:w.custom,...s(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(f=>f?!0:(i(),!1)):o?!0:(i(),!1)})}refinement(e,t){return this._refinement((s,r)=>e(s)?!0:(r.addIssue(typeof t=="function"?t(s,r):t),!1))}_refinement(e){return new He({schema:this,typeName:B.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Ve.create(this,this._def)}nullable(){return ir.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return vr.create(this)}promise(){return xr.create(this,this._def)}or(e){return Lr.create([this,e],this._def)}and(e){return Ur.create(this,e,this._def)}transform(e){return new He({...Z(this._def),schema:this,typeName:B.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t=typeof e=="function"?e:()=>e;return new Hr({...Z(this._def),innerType:this,defaultValue:t,typeName:B.ZodDefault})}brand(){return new Et({typeName:B.ZodBranded,type:this,...Z(this._def)})}catch(e){let t=typeof e=="function"?e:()=>e;return new Br({...Z(this._def),innerType:this,catchValue:t,typeName:B.ZodCatch})}describe(e){let t=this.constructor;return new t({...this._def,description:e})}pipe(e){return xt.create(this,e)}readonly(){return Jr.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},ru=/^c[^\s-]{8,}$/i,tu=/^[0-9a-z]+$/,au=/^[0-9A-HJKMNP-TV-Z]{26}$/i,su=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nu=/^[a-z0-9_-]{21}$/i,iu=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ou=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,cu=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,uu="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Ra,lu=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,du=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,fu=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,hu=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,pu=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,mu=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Vs="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",vu=new RegExp(`^${Vs}$`);function Qs(a){let e="[0-5]\\d";a.precision?e=`${e}\\.\\d{${a.precision}}`:a.precision==null&&(e=`${e}(\\.\\d+)?`);let t=a.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function gu(a){return new RegExp(`^${Qs(a)}$`)}function Hs(a){let e=`${Vs}T${Qs(a)}`,t=[];return t.push(a.local?"Z?":"Z"),a.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function yu(a,e){return!!((e==="v4"||!e)&&lu.test(a)||(e==="v6"||!e)&&fu.test(a))}function _u(a,e){if(!iu.test(a))return!1;try{let[t]=a.split(".");if(!t)return!1;let s=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),r=JSON.parse(atob(s));return!(typeof r!="object"||r===null||"typ"in r&&r?.typ!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function bu(a,e){return!!((e==="v4"||!e)&&du.test(a)||(e==="v6"||!e)&&hu.test(a))}var br=class a extends G{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==C.string){let n=this._getOrReturnCtx(e);return j(n,{code:w.invalid_type,expected:C.string,received:n.parsedType}),H}let s=new Se,r;for(let n of this._def.checks)if(n.kind==="min")e.data.length<n.value&&(r=this._getOrReturnCtx(e,r),j(r,{code:w.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),s.dirty());else if(n.kind==="max")e.data.length>n.value&&(r=this._getOrReturnCtx(e,r),j(r,{code:w.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),s.dirty());else if(n.kind==="length"){let o=e.data.length>n.value,i=e.data.length<n.value;(o||i)&&(r=this._getOrReturnCtx(e,r),o?j(r,{code:w.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):i&&j(r,{code:w.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),s.dirty())}else if(n.kind==="email")cu.test(e.data)||(r=this._getOrReturnCtx(e,r),j(r,{validation:"email",code:w.invalid_string,message:n.message}),s.dirty());else if(n.kind==="emoji")Ra||(Ra=new RegExp(uu,"u")),Ra.test(e.data)||(r=this._getOrReturnCtx(e,r),j(r,{validation:"emoji",code:w.invalid_string,message:n.message}),s.dirty());else if(n.kind==="uuid")su.test(e.data)||(r=this._getOrReturnCtx(e,r),j(r,{validation:"uuid",code:w.invalid_string,message:n.message}),s.dirty());else if(n.kind==="nanoid")nu.test(e.data)||(r=this._getOrReturnCtx(e,r),j(r,{validation:"nanoid",code:w.invalid_string,message:n.message}),s.dirty());else if(n.kind==="cuid")ru.test(e.data)||(r=this._getOrReturnCtx(e,r),j(r,{validation:"cuid",code:w.invalid_string,message:n.message}),s.dirty());else if(n.kind==="cuid2")tu.test(e.data)||(r=this._getOrReturnCtx(e,r),j(r,{validation:"cuid2",code:w.invalid_string,message:n.message}),s.dirty());else if(n.kind==="ulid")au.test(e.data)||(r=this._getOrReturnCtx(e,r),j(r,{validation:"ulid",code:w.invalid_string,message:n.message}),s.dirty());else if(n.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),j(r,{validation:"url",code:w.invalid_string,message:n.message}),s.dirty()}else n.kind==="regex"?(n.regex.lastIndex=0,n.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),j(r,{validation:"regex",code:w.invalid_string,message:n.message}),s.dirty())):n.kind==="trim"?e.data=e.data.trim():n.kind==="includes"?e.data.includes(n.value,n.position)||(r=this._getOrReturnCtx(e,r),j(r,{code:w.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),s.dirty()):n.kind==="toLowerCase"?e.data=e.data.toLowerCase():n.kind==="toUpperCase"?e.data=e.data.toUpperCase():n.kind==="startsWith"?e.data.startsWith(n.value)||(r=this._getOrReturnCtx(e,r),j(r,{code:w.invalid_string,validation:{startsWith:n.value},message:n.message}),s.dirty()):n.kind==="endsWith"?e.data.endsWith(n.value)||(r=this._getOrReturnCtx(e,r),j(r,{code:w.invalid_string,validation:{endsWith:n.value},message:n.message}),s.dirty()):n.kind==="datetime"?Hs(n).test(e.data)||(r=this._getOrReturnCtx(e,r),j(r,{code:w.invalid_string,validation:"datetime",message:n.message}),s.dirty()):n.kind==="date"?vu.test(e.data)||(r=this._getOrReturnCtx(e,r),j(r,{code:w.invalid_string,validation:"date",message:n.message}),s.dirty()):n.kind==="time"?gu(n).test(e.data)||(r=this._getOrReturnCtx(e,r),j(r,{code:w.invalid_string,validation:"time",message:n.message}),s.dirty()):n.kind==="duration"?ou.test(e.data)||(r=this._getOrReturnCtx(e,r),j(r,{validation:"duration",code:w.invalid_string,message:n.message}),s.dirty()):n.kind==="ip"?yu(e.data,n.version)||(r=this._getOrReturnCtx(e,r),j(r,{validation:"ip",code:w.invalid_string,message:n.message}),s.dirty()):n.kind==="jwt"?_u(e.data,n.alg)||(r=this._getOrReturnCtx(e,r),j(r,{validation:"jwt",code:w.invalid_string,message:n.message}),s.dirty()):n.kind==="cidr"?bu(e.data,n.version)||(r=this._getOrReturnCtx(e,r),j(r,{validation:"cidr",code:w.invalid_string,message:n.message}),s.dirty()):n.kind==="base64"?pu.test(e.data)||(r=this._getOrReturnCtx(e,r),j(r,{validation:"base64",code:w.invalid_string,message:n.message}),s.dirty()):n.kind==="base64url"?mu.test(e.data)||(r=this._getOrReturnCtx(e,r),j(r,{validation:"base64url",code:w.invalid_string,message:n.message}),s.dirty()):X.assertNever(n);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(r=>e.test(r),{validation:t,code:w.invalid_string,...M.errToObj(s)})}_addCheck(e){return new a({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...M.errToObj(e)})}url(e){return this._addCheck({kind:"url",...M.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...M.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...M.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...M.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...M.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...M.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...M.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...M.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...M.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...M.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...M.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...M.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...M.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...M.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...M.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...M.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...M.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...M.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...M.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...M.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...M.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...M.errToObj(t)})}nonempty(e){return this.min(1,M.errToObj(e))}trim(){return new a({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new a({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new a({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};br.create=a=>new br({checks:[],typeName:B.ZodString,coerce:a?.coerce??!1,...Z(a)});function Eu(a,e){let t=(a.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,r=t>s?t:s,n=Number.parseInt(a.toFixed(r).replace(".","")),o=Number.parseInt(e.toFixed(r).replace(".",""));return n%o/10**r}var jr=class a extends G{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==C.number){let n=this._getOrReturnCtx(e);return j(n,{code:w.invalid_type,expected:C.number,received:n.parsedType}),H}let s,r=new Se;for(let n of this._def.checks)n.kind==="int"?X.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),j(s,{code:w.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(s=this._getOrReturnCtx(e,s),j(s,{code:w.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(s=this._getOrReturnCtx(e,s),j(s,{code:w.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):n.kind==="multipleOf"?Eu(e.data,n.value)!==0&&(s=this._getOrReturnCtx(e,s),j(s,{code:w.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):n.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),j(s,{code:w.not_finite,message:n.message}),r.dirty()):X.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,M.toString(t))}gt(e,t){return this.setLimit("min",e,!1,M.toString(t))}lte(e,t){return this.setLimit("max",e,!0,M.toString(t))}lt(e,t){return this.setLimit("max",e,!1,M.toString(t))}setLimit(e,t,s,r){return new a({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:M.toString(r)}]})}_addCheck(e){return new a({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:M.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:M.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:M.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:M.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:M.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:M.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:M.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:M.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:M.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&X.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}};jr.create=a=>new jr({checks:[],typeName:B.ZodNumber,coerce:a?.coerce||!1,...Z(a)});var Cr=class a extends G{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==C.bigint)return this._getInvalidInput(e);let s,r=new Se;for(let n of this._def.checks)n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(s=this._getOrReturnCtx(e,s),j(s,{code:w.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(s=this._getOrReturnCtx(e,s),j(s,{code:w.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):n.kind==="multipleOf"?e.data%n.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),j(s,{code:w.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):X.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return j(t,{code:w.invalid_type,expected:C.bigint,received:t.parsedType}),H}gte(e,t){return this.setLimit("min",e,!0,M.toString(t))}gt(e,t){return this.setLimit("min",e,!1,M.toString(t))}lte(e,t){return this.setLimit("max",e,!0,M.toString(t))}lt(e,t){return this.setLimit("max",e,!1,M.toString(t))}setLimit(e,t,s,r){return new a({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:M.toString(r)}]})}_addCheck(e){return new a({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:M.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:M.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:M.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:M.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:M.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};Cr.create=a=>new Cr({checks:[],typeName:B.ZodBigInt,coerce:a?.coerce??!1,...Z(a)});var kr=class extends G{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==C.boolean){let s=this._getOrReturnCtx(e);return j(s,{code:w.invalid_type,expected:C.boolean,received:s.parsedType}),H}return Te(e.data)}};kr.create=a=>new kr({typeName:B.ZodBoolean,coerce:a?.coerce||!1,...Z(a)});var Nr=class a extends G{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==C.date){let n=this._getOrReturnCtx(e);return j(n,{code:w.invalid_type,expected:C.date,received:n.parsedType}),H}if(Number.isNaN(e.data.getTime())){let n=this._getOrReturnCtx(e);return j(n,{code:w.invalid_date}),H}let s=new Se,r;for(let n of this._def.checks)n.kind==="min"?e.data.getTime()<n.value&&(r=this._getOrReturnCtx(e,r),j(r,{code:w.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),s.dirty()):n.kind==="max"?e.data.getTime()>n.value&&(r=this._getOrReturnCtx(e,r),j(r,{code:w.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),s.dirty()):X.assertNever(n);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new a({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:M.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:M.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}};Nr.create=a=>new Nr({checks:[],coerce:a?.coerce||!1,typeName:B.ZodDate,...Z(a)});var it=class extends G{_parse(e){if(this._getType(e)!==C.symbol){let s=this._getOrReturnCtx(e);return j(s,{code:w.invalid_type,expected:C.symbol,received:s.parsedType}),H}return Te(e.data)}};it.create=a=>new it({typeName:B.ZodSymbol,...Z(a)});var qr=class extends G{_parse(e){if(this._getType(e)!==C.undefined){let s=this._getOrReturnCtx(e);return j(s,{code:w.invalid_type,expected:C.undefined,received:s.parsedType}),H}return Te(e.data)}};qr.create=a=>new qr({typeName:B.ZodUndefined,...Z(a)});var Fr=class extends G{_parse(e){if(this._getType(e)!==C.null){let s=this._getOrReturnCtx(e);return j(s,{code:w.invalid_type,expected:C.null,received:s.parsedType}),H}return Te(e.data)}};Fr.create=a=>new Fr({typeName:B.ZodNull,...Z(a)});var Er=class extends G{constructor(){super(...arguments),this._any=!0}_parse(e){return Te(e.data)}};Er.create=a=>new Er({typeName:B.ZodAny,...Z(a)});var mr=class extends G{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Te(e.data)}};mr.create=a=>new mr({typeName:B.ZodUnknown,...Z(a)});var Ge=class extends G{_parse(e){let t=this._getOrReturnCtx(e);return j(t,{code:w.invalid_type,expected:C.never,received:t.parsedType}),H}};Ge.create=a=>new Ge({typeName:B.ZodNever,...Z(a)});var ot=class extends G{_parse(e){if(this._getType(e)!==C.undefined){let s=this._getOrReturnCtx(e);return j(s,{code:w.invalid_type,expected:C.void,received:s.parsedType}),H}return Te(e.data)}};ot.create=a=>new ot({typeName:B.ZodVoid,...Z(a)});var vr=class a extends G{_parse(e){let{ctx:t,status:s}=this._processInputParams(e),r=this._def;if(t.parsedType!==C.array)return j(t,{code:w.invalid_type,expected:C.array,received:t.parsedType}),H;if(r.exactLength!==null){let o=t.data.length>r.exactLength.value,i=t.data.length<r.exactLength.value;(o||i)&&(j(t,{code:o?w.too_big:w.too_small,minimum:i?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),s.dirty())}if(r.minLength!==null&&t.data.length<r.minLength.value&&(j(t,{code:w.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),s.dirty()),r.maxLength!==null&&t.data.length>r.maxLength.value&&(j(t,{code:w.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((o,i)=>r.type._parseAsync(new Qe(t,o,t.path,i)))).then(o=>Se.mergeArray(s,o));let n=[...t.data].map((o,i)=>r.type._parseSync(new Qe(t,o,t.path,i)));return Se.mergeArray(s,n)}get element(){return this._def.type}min(e,t){return new a({...this._def,minLength:{value:e,message:M.toString(t)}})}max(e,t){return new a({...this._def,maxLength:{value:e,message:M.toString(t)}})}length(e,t){return new a({...this._def,exactLength:{value:e,message:M.toString(t)}})}nonempty(e){return this.min(1,e)}};vr.create=(a,e)=>new vr({type:a,minLength:null,maxLength:null,exactLength:null,typeName:B.ZodArray,...Z(e)});function nt(a){if(a instanceof Ce){let e={};for(let t in a.shape){let s=a.shape[t];e[t]=Ve.create(nt(s))}return new Ce({...a._def,shape:()=>e})}else return a instanceof vr?new vr({...a._def,type:nt(a.element)}):a instanceof Ve?Ve.create(nt(a.unwrap())):a instanceof ir?ir.create(nt(a.unwrap())):a instanceof nr?nr.create(a.items.map(e=>nt(e))):a}var Ce=class a extends G{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),t=X.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==C.object){let u=this._getOrReturnCtx(e);return j(u,{code:w.invalid_type,expected:C.object,received:u.parsedType}),H}let{status:s,ctx:r}=this._processInputParams(e),{shape:n,keys:o}=this._getCached(),i=[];if(!(this._def.catchall instanceof Ge&&this._def.unknownKeys==="strip"))for(let u in r.data)o.includes(u)||i.push(u);let f=[];for(let u of o){let h=n[u],m=r.data[u];f.push({key:{status:"valid",value:u},value:h._parse(new Qe(r,m,r.path,u)),alwaysSet:u in r.data})}if(this._def.catchall instanceof Ge){let u=this._def.unknownKeys;if(u==="passthrough")for(let h of i)f.push({key:{status:"valid",value:h},value:{status:"valid",value:r.data[h]}});else if(u==="strict")i.length>0&&(j(r,{code:w.unrecognized_keys,keys:i}),s.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let h of i){let m=r.data[h];f.push({key:{status:"valid",value:h},value:u._parse(new Qe(r,m,r.path,h)),alwaysSet:h in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let u=[];for(let h of f){let m=await h.key,_=await h.value;u.push({key:m,value:_,alwaysSet:h.alwaysSet})}return u}).then(u=>Se.mergeObjectSync(s,u)):Se.mergeObjectSync(s,f)}get shape(){return this._def.shape()}strict(e){return M.errToObj,new a({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{let r=this._def.errorMap?.(t,s).message??s.defaultError;return t.code==="unrecognized_keys"?{message:M.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new a({...this._def,unknownKeys:"strip"})}passthrough(){return new a({...this._def,unknownKeys:"passthrough"})}extend(e){return new a({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new a({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:B.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new a({...this._def,catchall:e})}pick(e){let t={};for(let s of X.objectKeys(e))e[s]&&this.shape[s]&&(t[s]=this.shape[s]);return new a({...this._def,shape:()=>t})}omit(e){let t={};for(let s of X.objectKeys(this.shape))e[s]||(t[s]=this.shape[s]);return new a({...this._def,shape:()=>t})}deepPartial(){return nt(this)}partial(e){let t={};for(let s of X.objectKeys(this.shape)){let r=this.shape[s];e&&!e[s]?t[s]=r:t[s]=r.optional()}return new a({...this._def,shape:()=>t})}required(e){let t={};for(let s of X.objectKeys(this.shape))if(e&&!e[s])t[s]=this.shape[s];else{let n=this.shape[s];for(;n instanceof Ve;)n=n._def.innerType;t[s]=n}return new a({...this._def,shape:()=>t})}keyof(){return Bs(X.objectKeys(this.shape))}};Ce.create=(a,e)=>new Ce({shape:()=>a,unknownKeys:"strip",catchall:Ge.create(),typeName:B.ZodObject,...Z(e)});Ce.strictCreate=(a,e)=>new Ce({shape:()=>a,unknownKeys:"strict",catchall:Ge.create(),typeName:B.ZodObject,...Z(e)});Ce.lazycreate=(a,e)=>new Ce({shape:a,unknownKeys:"strip",catchall:Ge.create(),typeName:B.ZodObject,...Z(e)});var Lr=class extends G{_parse(e){let{ctx:t}=this._processInputParams(e),s=this._def.options;function r(n){for(let i of n)if(i.result.status==="valid")return i.result;for(let i of n)if(i.result.status==="dirty")return t.common.issues.push(...i.ctx.common.issues),i.result;let o=n.map(i=>new je(i.ctx.common.issues));return j(t,{code:w.invalid_union,unionErrors:o}),H}if(t.common.async)return Promise.all(s.map(async n=>{let o={...t,common:{...t.common,issues:[]},parent:null};return{result:await n._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(r);{let n,o=[];for(let f of s){let u={...t,common:{...t.common,issues:[]},parent:null},h=f._parseSync({data:t.data,path:t.path,parent:u});if(h.status==="valid")return h;h.status==="dirty"&&!n&&(n={result:h,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(n)return t.common.issues.push(...n.ctx.common.issues),n.result;let i=o.map(f=>new je(f));return j(t,{code:w.invalid_union,unionErrors:i}),H}}get options(){return this._def.options}};Lr.create=(a,e)=>new Lr({options:a,typeName:B.ZodUnion,...Z(e)});var pr=a=>a instanceof Mr?pr(a.schema):a instanceof He?pr(a.innerType()):a instanceof zr?[a.value]:a instanceof Vr?a.options:a instanceof Qr?X.objectValues(a.enum):a instanceof Hr?pr(a._def.innerType):a instanceof qr?[void 0]:a instanceof Fr?[null]:a instanceof Ve?[void 0,...pr(a.unwrap())]:a instanceof ir?[null,...pr(a.unwrap())]:a instanceof Et||a instanceof Jr?pr(a.unwrap()):a instanceof Br?pr(a._def.innerType):[],Nt=class a extends G{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==C.object)return j(t,{code:w.invalid_type,expected:C.object,received:t.parsedType}),H;let s=this.discriminator,r=t.data[s],n=this.optionsMap.get(r);return n?t.common.async?n._parseAsync({data:t.data,path:t.path,parent:t}):n._parseSync({data:t.data,path:t.path,parent:t}):(j(t,{code:w.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),H)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){let r=new Map;for(let n of t){let o=pr(n.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let i of o){if(r.has(i))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);r.set(i,n)}}return new a({typeName:B.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...Z(s)})}};function Ta(a,e){let t=sr(a),s=sr(e);if(a===e)return{valid:!0,data:a};if(t===C.object&&s===C.object){let r=X.objectKeys(e),n=X.objectKeys(a).filter(i=>r.indexOf(i)!==-1),o={...a,...e};for(let i of n){let f=Ta(a[i],e[i]);if(!f.valid)return{valid:!1};o[i]=f.data}return{valid:!0,data:o}}else if(t===C.array&&s===C.array){if(a.length!==e.length)return{valid:!1};let r=[];for(let n=0;n<a.length;n++){let o=a[n],i=e[n],f=Ta(o,i);if(!f.valid)return{valid:!1};r.push(f.data)}return{valid:!0,data:r}}else return t===C.date&&s===C.date&&+a==+e?{valid:!0,data:a}:{valid:!1}}var Ur=class extends G{_parse(e){let{status:t,ctx:s}=this._processInputParams(e),r=(n,o)=>{if(Ct(n)||Ct(o))return H;let i=Ta(n.value,o.value);return i.valid?((kt(n)||kt(o))&&t.dirty(),{status:t.value,value:i.data}):(j(s,{code:w.invalid_intersection_types}),H)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([n,o])=>r(n,o)):r(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}};Ur.create=(a,e,t)=>new Ur({left:a,right:e,typeName:B.ZodIntersection,...Z(t)});var nr=class a extends G{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==C.array)return j(s,{code:w.invalid_type,expected:C.array,received:s.parsedType}),H;if(s.data.length<this._def.items.length)return j(s,{code:w.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),H;!this._def.rest&&s.data.length>this._def.items.length&&(j(s,{code:w.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...s.data].map((o,i)=>{let f=this._def.items[i]||this._def.rest;return f?f._parse(new Qe(s,o,s.path,i)):null}).filter(o=>!!o);return s.common.async?Promise.all(n).then(o=>Se.mergeArray(t,o)):Se.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new a({...this._def,rest:e})}};nr.create=(a,e)=>{if(!Array.isArray(a))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new nr({items:a,typeName:B.ZodTuple,rest:null,...Z(e)})};var qt=class a extends G{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==C.object)return j(s,{code:w.invalid_type,expected:C.object,received:s.parsedType}),H;let r=[],n=this._def.keyType,o=this._def.valueType;for(let i in s.data)r.push({key:n._parse(new Qe(s,i,s.path,i)),value:o._parse(new Qe(s,s.data[i],s.path,i)),alwaysSet:i in s.data});return s.common.async?Se.mergeObjectAsync(t,r):Se.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof G?new a({keyType:e,valueType:t,typeName:B.ZodRecord,...Z(s)}):new a({keyType:br.create(),valueType:e,typeName:B.ZodRecord,...Z(t)})}},ct=class extends G{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==C.map)return j(s,{code:w.invalid_type,expected:C.map,received:s.parsedType}),H;let r=this._def.keyType,n=this._def.valueType,o=[...s.data.entries()].map(([i,f],u)=>({key:r._parse(new Qe(s,i,s.path,[u,"key"])),value:n._parse(new Qe(s,f,s.path,[u,"value"]))}));if(s.common.async){let i=new Map;return Promise.resolve().then(async()=>{for(let f of o){let u=await f.key,h=await f.value;if(u.status==="aborted"||h.status==="aborted")return H;(u.status==="dirty"||h.status==="dirty")&&t.dirty(),i.set(u.value,h.value)}return{status:t.value,value:i}})}else{let i=new Map;for(let f of o){let u=f.key,h=f.value;if(u.status==="aborted"||h.status==="aborted")return H;(u.status==="dirty"||h.status==="dirty")&&t.dirty(),i.set(u.value,h.value)}return{status:t.value,value:i}}}};ct.create=(a,e,t)=>new ct({valueType:e,keyType:a,typeName:B.ZodMap,...Z(t)});var ut=class a extends G{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==C.set)return j(s,{code:w.invalid_type,expected:C.set,received:s.parsedType}),H;let r=this._def;r.minSize!==null&&s.data.size<r.minSize.value&&(j(s,{code:w.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),r.maxSize!==null&&s.data.size>r.maxSize.value&&(j(s,{code:w.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());let n=this._def.valueType;function o(f){let u=new Set;for(let h of f){if(h.status==="aborted")return H;h.status==="dirty"&&t.dirty(),u.add(h.value)}return{status:t.value,value:u}}let i=[...s.data.values()].map((f,u)=>n._parse(new Qe(s,f,s.path,u)));return s.common.async?Promise.all(i).then(f=>o(f)):o(i)}min(e,t){return new a({...this._def,minSize:{value:e,message:M.toString(t)}})}max(e,t){return new a({...this._def,maxSize:{value:e,message:M.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};ut.create=(a,e)=>new ut({valueType:a,minSize:null,maxSize:null,typeName:B.ZodSet,...Z(e)});var Ft=class a extends G{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==C.function)return j(t,{code:w.invalid_type,expected:C.function,received:t.parsedType}),H;function s(i,f){return bt({data:i,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,at(),hr].filter(u=>!!u),issueData:{code:w.invalid_arguments,argumentsError:f}})}function r(i,f){return bt({data:i,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,at(),hr].filter(u=>!!u),issueData:{code:w.invalid_return_type,returnTypeError:f}})}let n={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof xr){let i=this;return Te(async function(...f){let u=new je([]),h=await i._def.args.parseAsync(f,n).catch(l=>{throw u.addIssue(s(f,l)),u}),m=await Reflect.apply(o,this,h);return await i._def.returns._def.type.parseAsync(m,n).catch(l=>{throw u.addIssue(r(m,l)),u})})}else{let i=this;return Te(function(...f){let u=i._def.args.safeParse(f,n);if(!u.success)throw new je([s(f,u.error)]);let h=Reflect.apply(o,this,u.data),m=i._def.returns.safeParse(h,n);if(!m.success)throw new je([r(h,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new a({...this._def,args:nr.create(e).rest(mr.create())})}returns(e){return new a({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new a({args:e||nr.create([]).rest(mr.create()),returns:t||mr.create(),typeName:B.ZodFunction,...Z(s)})}},Mr=class extends G{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};Mr.create=(a,e)=>new Mr({getter:a,typeName:B.ZodLazy,...Z(e)});var zr=class extends G{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return j(t,{received:t.data,code:w.invalid_literal,expected:this._def.value}),H}return{status:"valid",value:e.data}}get value(){return this._def.value}};zr.create=(a,e)=>new zr({value:a,typeName:B.ZodLiteral,...Z(e)});function Bs(a,e){return new Vr({values:a,typeName:B.ZodEnum,...Z(e)})}var Vr=class a extends G{_parse(e){if(typeof e.data!="string"){let t=this._getOrReturnCtx(e),s=this._def.values;return j(t,{expected:X.joinValues(s),received:t.parsedType,code:w.invalid_type}),H}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),s=this._def.values;return j(t,{received:t.data,code:w.invalid_enum_value,options:s}),H}return Te(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return a.create(e,{...this._def,...t})}exclude(e,t=this._def){return a.create(this.options.filter(s=>!e.includes(s)),{...this._def,...t})}};Vr.create=Bs;var Qr=class extends G{_parse(e){let t=X.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==C.string&&s.parsedType!==C.number){let r=X.objectValues(t);return j(s,{expected:X.joinValues(r),received:s.parsedType,code:w.invalid_type}),H}if(this._cache||(this._cache=new Set(X.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let r=X.objectValues(t);return j(s,{received:s.data,code:w.invalid_enum_value,options:r}),H}return Te(e.data)}get enum(){return this._def.values}};Qr.create=(a,e)=>new Qr({values:a,typeName:B.ZodNativeEnum,...Z(e)});var xr=class extends G{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==C.promise&&t.common.async===!1)return j(t,{code:w.invalid_type,expected:C.promise,received:t.parsedType}),H;let s=t.parsedType===C.promise?t.data:Promise.resolve(t.data);return Te(s.then(r=>this._def.type.parseAsync(r,{path:t.path,errorMap:t.common.contextualErrorMap})))}};xr.create=(a,e)=>new xr({type:a,typeName:B.ZodPromise,...Z(e)});var He=class extends G{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===B.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:s}=this._processInputParams(e),r=this._def.effect||null,n={addIssue:o=>{j(s,o),o.fatal?t.abort():t.dirty()},get path(){return s.path}};if(n.addIssue=n.addIssue.bind(n),r.type==="preprocess"){let o=r.transform(s.data,n);if(s.common.async)return Promise.resolve(o).then(async i=>{if(t.value==="aborted")return H;let f=await this._def.schema._parseAsync({data:i,path:s.path,parent:s});return f.status==="aborted"?H:f.status==="dirty"?Ar(f.value):t.value==="dirty"?Ar(f.value):f});{if(t.value==="aborted")return H;let i=this._def.schema._parseSync({data:o,path:s.path,parent:s});return i.status==="aborted"?H:i.status==="dirty"?Ar(i.value):t.value==="dirty"?Ar(i.value):i}}if(r.type==="refinement"){let o=i=>{let f=r.refinement(i,n);if(s.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return i};if(s.common.async===!1){let i=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?H:(i.status==="dirty"&&t.dirty(),o(i.value),{status:t.value,value:i.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(i=>i.status==="aborted"?H:(i.status==="dirty"&&t.dirty(),o(i.value).then(()=>({status:t.value,value:i.value}))))}if(r.type==="transform")if(s.common.async===!1){let o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!_r(o))return H;let i=r.transform(o.value,n);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>_r(o)?Promise.resolve(r.transform(o.value,n)).then(i=>({status:t.value,value:i})):H);X.assertNever(r)}};He.create=(a,e,t)=>new He({schema:a,typeName:B.ZodEffects,effect:e,...Z(t)});He.createWithPreprocess=(a,e,t)=>new He({schema:e,effect:{type:"preprocess",transform:a},typeName:B.ZodEffects,...Z(t)});var Ve=class extends G{_parse(e){return this._getType(e)===C.undefined?Te(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Ve.create=(a,e)=>new Ve({innerType:a,typeName:B.ZodOptional,...Z(e)});var ir=class extends G{_parse(e){return this._getType(e)===C.null?Te(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ir.create=(a,e)=>new ir({innerType:a,typeName:B.ZodNullable,...Z(e)});var Hr=class extends G{_parse(e){let{ctx:t}=this._processInputParams(e),s=t.data;return t.parsedType===C.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};Hr.create=(a,e)=>new Hr({innerType:a,typeName:B.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Z(e)});var Br=class extends G{_parse(e){let{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return st(r)?r.then(n=>({status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new je(s.common.issues)},input:s.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new je(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}};Br.create=(a,e)=>new Br({innerType:a,typeName:B.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Z(e)});var lt=class extends G{_parse(e){if(this._getType(e)!==C.nan){let s=this._getOrReturnCtx(e);return j(s,{code:w.invalid_type,expected:C.nan,received:s.parsedType}),H}return{status:"valid",value:e.data}}};lt.create=a=>new lt({typeName:B.ZodNaN,...Z(a)});var xu=Symbol("zod_brand"),Et=class extends G{_parse(e){let{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}},xt=class a extends G{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{let n=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?H:n.status==="dirty"?(t.dirty(),Ar(n.value)):this._def.out._parseAsync({data:n.value,path:s.path,parent:s})})();{let r=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?H:r.status==="dirty"?(t.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:s.path,parent:s})}}static create(e,t){return new a({in:e,out:t,typeName:B.ZodPipeline})}},Jr=class extends G{_parse(e){let t=this._def.innerType._parse(e),s=r=>(_r(r)&&(r.value=Object.freeze(r.value)),r);return st(t)?t.then(r=>s(r)):s(t)}unwrap(){return this._def.innerType}};Jr.create=(a,e)=>new Jr({innerType:a,typeName:B.ZodReadonly,...Z(e)});function zs(a,e){let t=typeof a=="function"?a(e):typeof a=="string"?{message:a}:a;return typeof t=="string"?{message:t}:t}function Js(a,e={},t){return a?Er.create().superRefine((s,r)=>{let n=a(s);if(n instanceof Promise)return n.then(o=>{if(!o){let i=zs(e,s),f=i.fatal??t??!0;r.addIssue({code:"custom",...i,fatal:f})}});if(!n){let o=zs(e,s),i=o.fatal??t??!0;r.addIssue({code:"custom",...o,fatal:i})}}):Er.create()}var Pu={object:Ce.lazycreate},B;(function(a){a.ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly"})(B||(B={}));var Su=(a,e={message:`Input not instance of ${a.name}`})=>Js(t=>t instanceof a,e),Zs=br.create,Ks=jr.create,wu=lt.create,Ru=Cr.create,Gs=kr.create,Tu=Nr.create,Iu=it.create,Ou=qr.create,$u=Fr.create,Du=Er.create,Au=mr.create,ju=Ge.create,Cu=ot.create,ku=vr.create,Nu=Ce.create,qu=Ce.strictCreate,Fu=Lr.create,Lu=Nt.create,Uu=Ur.create,Mu=nr.create,zu=qt.create,Vu=ct.create,Qu=ut.create,Hu=Ft.create,Bu=Mr.create,Ju=zr.create,Zu=Vr.create,Ku=Qr.create,Gu=xr.create,Wu=He.create,Yu=Ve.create,Xu=ir.create,el=He.createWithPreprocess,rl=xt.create,tl=()=>Zs().optional(),al=()=>Ks().optional(),sl=()=>Gs().optional(),nl={string:a=>br.create({...a,coerce:!0}),number:a=>jr.create({...a,coerce:!0}),boolean:a=>kr.create({...a,coerce:!0}),bigint:a=>Cr.create({...a,coerce:!0}),date:a=>Nr.create({...a,coerce:!0})};var il=H;var Ia="2025-06-18";var Ws=[Ia,"2025-03-26","2024-11-05","2024-10-07"],Lt="2.0",Ys=c.union([c.string(),c.number().int()]),Xs=c.string(),ol=c.object({progressToken:c.optional(Ys)}).passthrough(),Be=c.object({_meta:c.optional(ol)}).passthrough(),ke=c.object({method:c.string(),params:c.optional(Be)}),Pt=c.object({_meta:c.optional(c.object({}).passthrough())}).passthrough(),or=c.object({method:c.string(),params:c.optional(Pt)}),Je=c.object({_meta:c.optional(c.object({}).passthrough())}).passthrough(),Ut=c.union([c.string(),c.number().int()]),en=c.object({jsonrpc:c.literal(Lt),id:Ut}).merge(ke).strict(),rn=a=>en.safeParse(a).success,tn=c.object({jsonrpc:c.literal(Lt)}).merge(or).strict(),an=a=>tn.safeParse(a).success,sn=c.object({jsonrpc:c.literal(Lt),id:Ut,result:Je}).strict(),Oa=a=>sn.safeParse(a).success,We;(function(a){a[a.ConnectionClosed=-32e3]="ConnectionClosed",a[a.RequestTimeout=-32001]="RequestTimeout",a[a.ParseError=-32700]="ParseError",a[a.InvalidRequest=-32600]="InvalidRequest",a[a.MethodNotFound=-32601]="MethodNotFound",a[a.InvalidParams=-32602]="InvalidParams",a[a.InternalError=-32603]="InternalError"})(We||(We={}));var nn=c.object({jsonrpc:c.literal(Lt),id:Ut,error:c.object({code:c.number().int(),message:c.string(),data:c.optional(c.unknown())})}).strict(),on=a=>nn.safeParse(a).success,cn=c.union([en,tn,sn,nn]),Mt=Je.strict(),zt=or.extend({method:c.literal("notifications/cancelled"),params:Pt.extend({requestId:Ut,reason:c.string().optional()})}),St=c.object({name:c.string(),title:c.optional(c.string())}).passthrough(),un=St.extend({version:c.string()}),cl=c.object({experimental:c.optional(c.object({}).passthrough()),sampling:c.optional(c.object({}).passthrough()),elicitation:c.optional(c.object({}).passthrough()),roots:c.optional(c.object({listChanged:c.optional(c.boolean())}).passthrough())}).passthrough(),$a=ke.extend({method:c.literal("initialize"),params:Be.extend({protocolVersion:c.string(),capabilities:cl,clientInfo:un})});var ul=c.object({experimental:c.optional(c.object({}).passthrough()),logging:c.optional(c.object({}).passthrough()),completions:c.optional(c.object({}).passthrough()),prompts:c.optional(c.object({listChanged:c.optional(c.boolean())}).passthrough()),resources:c.optional(c.object({subscribe:c.optional(c.boolean()),listChanged:c.optional(c.boolean())}).passthrough()),tools:c.optional(c.object({listChanged:c.optional(c.boolean())}).passthrough())}).passthrough(),ll=Je.extend({protocolVersion:c.string(),capabilities:ul,serverInfo:un,instructions:c.optional(c.string())}),Da=or.extend({method:c.literal("notifications/initialized")});var Vt=ke.extend({method:c.literal("ping")}),dl=c.object({progress:c.number(),total:c.optional(c.number()),message:c.optional(c.string())}).passthrough(),Qt=or.extend({method:c.literal("notifications/progress"),params:Pt.merge(dl).extend({progressToken:Ys})}),Ht=ke.extend({params:Be.extend({cursor:c.optional(Xs)}).optional()}),Bt=Je.extend({nextCursor:c.optional(Xs)}),ln=c.object({uri:c.string(),mimeType:c.optional(c.string()),_meta:c.optional(c.object({}).passthrough())}).passthrough(),dn=ln.extend({text:c.string()}),Aa=c.string().refine(a=>{try{return atob(a),!0}catch{return!1}},{message:"Invalid Base64 string"}),fn=ln.extend({blob:Aa}),hn=St.extend({uri:c.string(),description:c.optional(c.string()),mimeType:c.optional(c.string()),_meta:c.optional(c.object({}).passthrough())}),fl=St.extend({uriTemplate:c.string(),description:c.optional(c.string()),mimeType:c.optional(c.string()),_meta:c.optional(c.object({}).passthrough())}),hl=Ht.extend({method:c.literal("resources/list")}),pl=Bt.extend({resources:c.array(hn)}),ml=Ht.extend({method:c.literal("resources/templates/list")}),vl=Bt.extend({resourceTemplates:c.array(fl)}),gl=ke.extend({method:c.literal("resources/read"),params:Be.extend({uri:c.string()})}),yl=Je.extend({contents:c.array(c.union([dn,fn]))}),_l=or.extend({method:c.literal("notifications/resources/list_changed")}),bl=ke.extend({method:c.literal("resources/subscribe"),params:Be.extend({uri:c.string()})}),El=ke.extend({method:c.literal("resources/unsubscribe"),params:Be.extend({uri:c.string()})}),xl=or.extend({method:c.literal("notifications/resources/updated"),params:Pt.extend({uri:c.string()})}),Pl=c.object({name:c.string(),description:c.optional(c.string()),required:c.optional(c.boolean())}).passthrough(),Sl=St.extend({description:c.optional(c.string()),arguments:c.optional(c.array(Pl)),_meta:c.optional(c.object({}).passthrough())}),wl=Ht.extend({method:c.literal("prompts/list")}),Rl=Bt.extend({prompts:c.array(Sl)}),Tl=ke.extend({method:c.literal("prompts/get"),params:Be.extend({name:c.string(),arguments:c.optional(c.record(c.string()))})}),ja=c.object({type:c.literal("text"),text:c.string(),_meta:c.optional(c.object({}).passthrough())}).passthrough(),Ca=c.object({type:c.literal("image"),data:Aa,mimeType:c.string(),_meta:c.optional(c.object({}).passthrough())}).passthrough(),ka=c.object({type:c.literal("audio"),data:Aa,mimeType:c.string(),_meta:c.optional(c.object({}).passthrough())}).passthrough(),Il=c.object({type:c.literal("resource"),resource:c.union([dn,fn]),_meta:c.optional(c.object({}).passthrough())}).passthrough(),Ol=hn.extend({type:c.literal("resource_link")}),pn=c.union([ja,Ca,ka,Ol,Il]),$l=c.object({role:c.enum(["user","assistant"]),content:pn}).passthrough(),Dl=Je.extend({description:c.optional(c.string()),messages:c.array($l)}),Al=or.extend({method:c.literal("notifications/prompts/list_changed")}),jl=c.object({title:c.optional(c.string()),readOnlyHint:c.optional(c.boolean()),destructiveHint:c.optional(c.boolean()),idempotentHint:c.optional(c.boolean()),openWorldHint:c.optional(c.boolean())}).passthrough(),Cl=St.extend({description:c.optional(c.string()),inputSchema:c.object({type:c.literal("object"),properties:c.optional(c.object({}).passthrough()),required:c.optional(c.array(c.string()))}).passthrough(),outputSchema:c.optional(c.object({type:c.literal("object"),properties:c.optional(c.object({}).passthrough()),required:c.optional(c.array(c.string()))}).passthrough()),annotations:c.optional(jl),_meta:c.optional(c.object({}).passthrough())}),Na=Ht.extend({method:c.literal("tools/list")}),kl=Bt.extend({tools:c.array(Cl)}),mn=Je.extend({content:c.array(pn).default([]),structuredContent:c.object({}).passthrough().optional(),isError:c.optional(c.boolean())}),Ph=mn.or(Je.extend({toolResult:c.unknown()})),qa=ke.extend({method:c.literal("tools/call"),params:Be.extend({name:c.string(),arguments:c.optional(c.record(c.unknown()))})}),Nl=or.extend({method:c.literal("notifications/tools/list_changed")}),vn=c.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),ql=ke.extend({method:c.literal("logging/setLevel"),params:Be.extend({level:vn})}),Fl=or.extend({method:c.literal("notifications/message"),params:Pt.extend({level:vn,logger:c.optional(c.string()),data:c.unknown()})}),Ll=c.object({name:c.string().optional()}).passthrough(),Ul=c.object({hints:c.optional(c.array(Ll)),costPriority:c.optional(c.number().min(0).max(1)),speedPriority:c.optional(c.number().min(0).max(1)),intelligencePriority:c.optional(c.number().min(0).max(1))}).passthrough(),Ml=c.object({role:c.enum(["user","assistant"]),content:c.union([ja,Ca,ka])}).passthrough(),zl=ke.extend({method:c.literal("sampling/createMessage"),params:Be.extend({messages:c.array(Ml),systemPrompt:c.optional(c.string()),includeContext:c.optional(c.enum(["none","thisServer","allServers"])),temperature:c.optional(c.number()),maxTokens:c.number().int(),stopSequences:c.optional(c.array(c.string())),metadata:c.optional(c.object({}).passthrough()),modelPreferences:c.optional(Ul)})}),Fa=Je.extend({model:c.string(),stopReason:c.optional(c.enum(["endTurn","stopSequence","maxTokens"]).or(c.string())),role:c.enum(["user","assistant"]),content:c.discriminatedUnion("type",[ja,Ca,ka])}),Vl=c.object({type:c.literal("boolean"),title:c.optional(c.string()),description:c.optional(c.string()),default:c.optional(c.boolean())}).passthrough(),Ql=c.object({type:c.literal("string"),title:c.optional(c.string()),description:c.optional(c.string()),minLength:c.optional(c.number()),maxLength:c.optional(c.number()),format:c.optional(c.enum(["email","uri","date","date-time"]))}).passthrough(),Hl=c.object({type:c.enum(["number","integer"]),title:c.optional(c.string()),description:c.optional(c.string()),minimum:c.optional(c.number()),maximum:c.optional(c.number())}).passthrough(),Bl=c.object({type:c.literal("string"),title:c.optional(c.string()),description:c.optional(c.string()),enum:c.array(c.string()),enumNames:c.optional(c.array(c.string()))}).passthrough(),Jl=c.union([Vl,Ql,Hl,Bl]),Zl=ke.extend({method:c.literal("elicitation/create"),params:Be.extend({message:c.string(),requestedSchema:c.object({type:c.literal("object"),properties:c.record(c.string(),Jl),required:c.optional(c.array(c.string()))}).passthrough()})}),La=Je.extend({action:c.enum(["accept","decline","cancel"]),content:c.optional(c.record(c.string(),c.unknown()))}),Kl=c.object({type:c.literal("ref/resource"),uri:c.string()}).passthrough();var Gl=c.object({type:c.literal("ref/prompt"),name:c.string()}).passthrough(),Wl=ke.extend({method:c.literal("completion/complete"),params:Be.extend({ref:c.union([Gl,Kl]),argument:c.object({name:c.string(),value:c.string()}).passthrough(),context:c.optional(c.object({arguments:c.optional(c.record(c.string(),c.string()))}))})}),Yl=Je.extend({completion:c.object({values:c.array(c.string()).max(100),total:c.optional(c.number().int()),hasMore:c.optional(c.boolean())}).passthrough()}),Xl=c.object({uri:c.string().startsWith("file://"),name:c.optional(c.string()),_meta:c.optional(c.object({}).passthrough())}).passthrough(),ed=ke.extend({method:c.literal("roots/list")}),Ua=Je.extend({roots:c.array(Xl)}),rd=or.extend({method:c.literal("notifications/roots/list_changed")}),Sh=c.union([Vt,$a,Wl,ql,Tl,wl,hl,ml,gl,bl,El,qa,Na]),wh=c.union([zt,Qt,Da,rd]),Rh=c.union([Mt,Fa,La,Ua]),Th=c.union([Vt,zl,Zl,ed]),Ih=c.union([zt,Qt,Fl,xl,_l,Nl,Al]),Oh=c.union([Mt,ll,Yl,Dl,Rl,pl,vl,yl,mn,kl]),Ye=class extends Error{constructor(e,t,s){super(`MCP error ${e}: ${t}`),this.code=e,this.data=s,this.name="McpError"}};var td=6e4,Jt=class{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(zt,t=>{let s=this._requestHandlerAbortControllers.get(t.params.requestId);s?.abort(t.params.reason)}),this.setNotificationHandler(Qt,t=>{this._onprogress(t)}),this.setRequestHandler(Vt,t=>({}))}_setupTimeout(e,t,s,r,n=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(r,t),startTime:Date.now(),timeout:t,maxTotalTimeout:s,resetTimeoutOnProgress:n,onTimeout:r})}_resetTimeout(e){let t=this._timeoutInfo.get(e);if(!t)return!1;let s=Date.now()-t.startTime;if(t.maxTotalTimeout&&s>=t.maxTotalTimeout)throw this._timeoutInfo.delete(e),new Ye(We.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:t.maxTotalTimeout,totalElapsed:s});return clearTimeout(t.timeoutId),t.timeoutId=setTimeout(t.onTimeout,t.timeout),!0}_cleanupTimeout(e){let t=this._timeoutInfo.get(e);t&&(clearTimeout(t.timeoutId),this._timeoutInfo.delete(e))}async connect(e){var t,s,r;this._transport=e;let n=(t=this.transport)===null||t===void 0?void 0:t.onclose;this._transport.onclose=()=>{n?.(),this._onclose()};let o=(s=this.transport)===null||s===void 0?void 0:s.onerror;this._transport.onerror=f=>{o?.(f),this._onerror(f)};let i=(r=this._transport)===null||r===void 0?void 0:r.onmessage;this._transport.onmessage=(f,u)=>{i?.(f,u),Oa(f)||on(f)?this._onresponse(f):rn(f)?this._onrequest(f,u):an(f)?this._onnotification(f):this._onerror(new Error(`Unknown message type: ${JSON.stringify(f)}`))},await this._transport.start()}_onclose(){var e;let t=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let s=new Ye(We.ConnectionClosed,"Connection closed");for(let r of t.values())r(s)}_onerror(e){var t;(t=this.onerror)===null||t===void 0||t.call(this,e)}_onnotification(e){var t;let s=(t=this._notificationHandlers.get(e.method))!==null&&t!==void 0?t:this.fallbackNotificationHandler;s!==void 0&&Promise.resolve().then(()=>s(e)).catch(r=>this._onerror(new Error(`Uncaught error in notification handler: ${r}`)))}_onrequest(e,t){var s,r;let n=(s=this._requestHandlers.get(e.method))!==null&&s!==void 0?s:this.fallbackRequestHandler,o=this._transport;if(n===void 0){o?.send({jsonrpc:"2.0",id:e.id,error:{code:We.MethodNotFound,message:"Method not found"}}).catch(u=>this._onerror(new Error(`Failed to send an error response: ${u}`)));return}let i=new AbortController;this._requestHandlerAbortControllers.set(e.id,i);let f={signal:i.signal,sessionId:o?.sessionId,_meta:(r=e.params)===null||r===void 0?void 0:r._meta,sendNotification:u=>this.notification(u,{relatedRequestId:e.id}),sendRequest:(u,h,m)=>this.request(u,h,{...m,relatedRequestId:e.id}),authInfo:t?.authInfo,requestId:e.id,requestInfo:t?.requestInfo};Promise.resolve().then(()=>n(e,f)).then(u=>{if(!i.signal.aborted)return o?.send({result:u,jsonrpc:"2.0",id:e.id})},u=>{var h;if(!i.signal.aborted)return o?.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(u.code)?u.code:We.InternalError,message:(h=u.message)!==null&&h!==void 0?h:"Internal error"}})}).catch(u=>this._onerror(new Error(`Failed to send response: ${u}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:t,...s}=e.params,r=Number(t),n=this._progressHandlers.get(r);if(!n){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let o=this._responseHandlers.get(r),i=this._timeoutInfo.get(r);if(i&&o&&i.resetTimeoutOnProgress)try{this._resetTimeout(r)}catch(f){o(f);return}n(s)}_onresponse(e){let t=Number(e.id),s=this._responseHandlers.get(t);if(s===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(t),this._progressHandlers.delete(t),this._cleanupTimeout(t),Oa(e))s(e);else{let r=new Ye(e.error.code,e.error.message,e.error.data);s(r)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,t,s){let{relatedRequestId:r,resumptionToken:n,onresumptiontoken:o}=s??{};return new Promise((i,f)=>{var u,h,m,_,l,y;if(!this._transport){f(new Error("Not connected"));return}((u=this._options)===null||u===void 0?void 0:u.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(h=s?.signal)===null||h===void 0||h.throwIfAborted();let b=this._requestMessageId++,g={...e,jsonrpc:"2.0",id:b};s?.onprogress&&(this._progressHandlers.set(b,s.onprogress),g.params={...e.params,_meta:{...((m=e.params)===null||m===void 0?void 0:m._meta)||{},progressToken:b}});let P=R=>{var O;this._responseHandlers.delete(b),this._progressHandlers.delete(b),this._cleanupTimeout(b),(O=this._transport)===null||O===void 0||O.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:b,reason:String(R)}},{relatedRequestId:r,resumptionToken:n,onresumptiontoken:o}).catch($=>this._onerror(new Error(`Failed to send cancellation: ${$}`))),f(R)};this._responseHandlers.set(b,R=>{var O;if(!(!((O=s?.signal)===null||O===void 0)&&O.aborted)){if(R instanceof Error)return f(R);try{let $=t.parse(R.result);i($)}catch($){f($)}}}),(_=s?.signal)===null||_===void 0||_.addEventListener("abort",()=>{var R;P((R=s?.signal)===null||R===void 0?void 0:R.reason)});let I=(l=s?.timeout)!==null&&l!==void 0?l:td,S=()=>P(new Ye(We.RequestTimeout,"Request timed out",{timeout:I}));this._setupTimeout(b,I,s?.maxTotalTimeout,S,(y=s?.resetTimeoutOnProgress)!==null&&y!==void 0?y:!1),this._transport.send(g,{relatedRequestId:r,resumptionToken:n,onresumptiontoken:o}).catch(R=>{this._cleanupTimeout(b),f(R)})})}async notification(e,t){var s,r;if(!this._transport)throw new Error("Not connected");if(this.assertNotificationCapability(e.method),((r=(s=this._options)===null||s===void 0?void 0:s.debouncedNotificationMethods)!==null&&r!==void 0?r:[]).includes(e.method)&&!e.params&&!t?.relatedRequestId){if(this._pendingDebouncedNotifications.has(e.method))return;this._pendingDebouncedNotifications.add(e.method),Promise.resolve().then(()=>{var f;if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let u={...e,jsonrpc:"2.0"};(f=this._transport)===null||f===void 0||f.send(u,t).catch(h=>this._onerror(h))});return}let i={...e,jsonrpc:"2.0"};await this._transport.send(i,t)}setRequestHandler(e,t){let s=e.shape.method.value;this.assertRequestHandlerCapability(s),this._requestHandlers.set(s,(r,n)=>Promise.resolve(t(e.parse(r),n)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,t){this._notificationHandlers.set(e.shape.method.value,s=>Promise.resolve(t(e.parse(s))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function gn(a,e){return Object.entries(e).reduce((t,[s,r])=>(r&&typeof r=="object"?t[s]=t[s]?{...t[s],...r}:r:t[s]=r,t),{...a})}var bo=Gc(_o(),1),fa=class extends Jt{constructor(e,t){var s;super(t),this._serverInfo=e,this._capabilities=(s=t?.capabilities)!==null&&s!==void 0?s:{},this._instructions=t?.instructions,this.setRequestHandler($a,r=>this._oninitialize(r)),this.setNotificationHandler(Da,()=>{var r;return(r=this.oninitialized)===null||r===void 0?void 0:r.call(this)})}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=gn(this._capabilities,e)}assertCapabilityForMethod(e){var t,s,r;switch(e){case"sampling/createMessage":if(!(!((t=this._clientCapabilities)===null||t===void 0)&&t.sampling))throw new Error(`Client does not support sampling (required for ${e})`);break;case"elicitation/create":if(!(!((s=this._clientCapabilities)===null||s===void 0)&&s.elicitation))throw new Error(`Client does not support elicitation (required for ${e})`);break;case"roots/list":if(!(!((r=this._clientCapabilities)===null||r===void 0)&&r.roots))throw new Error(`Client does not support listing roots (required for ${e})`);break;case"ping":break}}assertNotificationCapability(e){switch(e){case"notifications/message":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw new Error(`Server does not support notifying about resources (required for ${e})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw new Error(`Server does not support notifying of tool list changes (required for ${e})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw new Error(`Server does not support notifying of prompt list changes (required for ${e})`);break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Server does not support sampling (required for ${e})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw new Error(`Server does not support resources (required for ${e})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw new Error(`Server does not support tools (required for ${e})`);break;case"ping":case"initialize":break}}async _oninitialize(e){let t=e.params.protocolVersion;return this._clientCapabilities=e.params.capabilities,this._clientVersion=e.params.clientInfo,{protocolVersion:Ws.includes(t)?t:Ia,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},Mt)}async createMessage(e,t){return this.request({method:"sampling/createMessage",params:e},Fa,t)}async elicitInput(e,t){let s=await this.request({method:"elicitation/create",params:e},La,t);if(s.action==="accept"&&s.content)try{let r=new bo.default,n=r.compile(e.requestedSchema);if(!n(s.content))throw new Ye(We.InvalidParams,`Elicitation response content does not match requested schema: ${r.errorsText(n.errors)}`)}catch(r){throw r instanceof Ye?r:new Ye(We.InternalError,`Error validating elicitation response: ${r}`)}return s}async listRoots(e,t){return this.request({method:"roots/list",params:e},Ua,t)}async sendLoggingMessage(e){return this.notification({method:"notifications/message",params:e})}async sendResourceUpdated(e){return this.notification({method:"notifications/resources/updated",params:e})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}};import xo from"node:process";var ha=class{append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let t=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),Nf(t)}clear(){this._buffer=void 0}};function Nf(a){return cn.parse(JSON.parse(a))}function Eo(a){return JSON.stringify(a)+`
`}var pa=class{constructor(e=xo.stdin,t=xo.stdout){this._stdin=e,this._stdout=t,this._readBuffer=new ha,this._started=!1,this._ondata=s=>{this._readBuffer.append(s),this.processReadBuffer()},this._onerror=s=>{var r;(r=this.onerror)===null||r===void 0||r.call(this,s)}}async start(){if(this._started)throw new Error("StdioServerTransport already started! If using Server class, note that connect() calls start() automatically.");this._started=!0,this._stdin.on("data",this._ondata),this._stdin.on("error",this._onerror)}processReadBuffer(){for(var e,t;;)try{let s=this._readBuffer.readMessage();if(s===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,s)}catch(s){(t=this.onerror)===null||t===void 0||t.call(this,s)}}async close(){var e;this._stdin.off("data",this._ondata),this._stdin.off("error",this._onerror),this._stdin.listenerCount("data")===0&&this._stdin.pause(),this._readBuffer.clear(),(e=this.onclose)===null||e===void 0||e.call(this)}send(e){return new Promise(t=>{let s=Eo(e);this._stdout.write(s)?t():this._stdout.once("drain",t)})}};var Rt=process.env.API_TOKEN,dt=process.env.API_BASE_URL;Rt||process.exit(1);dt||process.exit(1);var ma={ai_generated:{type:"boolean",description:"Whether the term content was AI-generated (defaults to false on create in API)"},ai_model:{type:"string",description:"AI model identifier (e.g., gpt-4o-mini, gpt-4o). Required if ai_generated=true"},ai_prompt_version:{type:"string",description:"Prompt version used for generation (e.g., v1.0, v2.0)"},ai_generation_date:{type:"string",description:"Generation timestamp (ISO 8601)",format:"date-time"},ai_tokens_used:{type:"integer",description:"Total tokens consumed during generation",minimum:0},ai_quality_score:{type:"number",description:"Quality score between 0.00 and 9.99",minimum:0,maximum:9.99},ai_validation_status:{type:"string",description:"Validation status (defaults to pending on create in API)",enum:["pending","approved","rejected","needs_review"]},ai_source_data:{type:"object",description:'Original source data (JSON), e.g. {"origin":"import","entity_type":"city"}'},ai_metadata:{type:"object",description:'Additional metadata (JSON), e.g. {"purpose":"generate_name"}'},ai_confidence_score:{type:"number",description:"Confidence score between 0.00 and 9.99",minimum:0,maximum:9.99},ai_human_reviewed:{type:"boolean",description:"Whether the term was human reviewed"},ai_human_reviewer:{type:"string",description:"Human reviewer user ID (e.g., test-user)"},ai_review_date:{type:"string",description:"Human review timestamp (ISO 8601)",format:"date-time"},ai_version:{type:"integer",description:"AI content version (auto-increments on update)"},ai_batch_id:{type:"string",description:"Batch identifier for AI generation (e.g., batch-001)"},ai_edit_history:{type:"object",description:"AI edit history (JSON)"},ai_original_data:{type:"object",description:"Original data snapshot (JSON)"},ai_manual_overrides:{type:"object",description:"Manual overrides (JSON)"},ai_market_validated:{type:"boolean",description:"Market validation flag"},ai_validation_errors:{type:"object",description:"Validation errors (JSON)"}},va=[{if:{properties:{aiMetadata:{properties:{ai_generated:{const:!0}}}}},then:{properties:{aiMetadata:{required:["ai_generated","ai_model"]}}}}],qf={value:{type:"string"},description:{type:"string",description:"Term description (optional)"},language_id:{type:"number",description:"Language ID - REQUIRED. Use get_languages to find language ID. English is recommended as primary language"},term_type_id:{type:"number",description:'Term type ID - REQUIRED. Use get_term_types to find term type ID. "main" is recommended as primary term type'},status_id:{type:"number",description:"Status ID - optional. Use get_statuses to find status ID"},aiMetadata:{type:"object",properties:{...ma}}},Ff={value:{type:"string"},description:{type:"string",description:"Term description (optional)"},language_id:{type:"number",description:"Language ID - REQUIRED"},term_type_id:{type:"number",description:"Term type ID - REQUIRED"},status_id:{type:"number",description:"Status ID (optional)"},aiMetadata:{type:"object",properties:{...ma}}};function be(a={}){return{type:"object",description:a.description||"Main term (REQUIRED)",properties:{...qf,value:{type:"string",description:a.valueDescription||"Term value - REQUIRED"}},allOf:va,required:["value","language_id","term_type_id"]}}function Ee({withId:a=!1,overrides:e={}}={}){let t={...Ff};return t.value={type:"string",description:e.valueDescription||"Term value - REQUIRED"},a&&(t.id={type:"number",description:e.idDescription||"Existing term ID (include to update a specific term)"}),{type:"object",properties:t,allOf:va,required:["value","language_id","term_type_id"]}}var Xe={departments:{type:"object",properties:{mainTerm:be({description:"Main term for the department (REQUIRED)",valueDescription:"Term value (department name) - REQUIRED"}),terms:{type:"array",items:Ee({withId:!1})},color:{type:"string"}},required:["mainTerm"]},professions:{type:"object",properties:{mainTerm:be({description:"Main term for the profession (REQUIRED)",valueDescription:"Term value (profession name) - REQUIRED"}),terms:{type:"array",items:Ee({withId:!1})},department_id:{type:"number"},tool_ids:{type:"array",items:{type:"number"}}},required:["mainTerm"]},languages:{type:"object",properties:{mainTerm:be({description:"Main term for the language (REQUIRED)",valueDescription:"Term value (language name) - REQUIRED"}),terms:{type:"array",items:Ee({withId:!1})},iso2:{type:"string"},iso3:{type:"string"}},required:["mainTerm","iso2","iso3"]},industries:{type:"object",properties:{mainTerm:be({description:"Main term for the industry (REQUIRED)",valueDescription:"Term value (industry name) - REQUIRED"}),terms:{type:"array",items:Ee({withId:!1})},description:{type:"string"},icon:{type:"string"},subIndustryIds:{type:"array",items:{type:"number"}}},required:["mainTerm"]},sub_industries:{type:"object",properties:{industry_id:{type:"number"},mainTerm:be({description:"Main term for the sub-industry (REQUIRED)",valueDescription:"Term value (sub-industry name) - REQUIRED"}),terms:{type:"array",items:Ee({withId:!1})},description:{type:"string"}},required:["mainTerm"]},countries:{type:"object",properties:{mainTerm:be({description:"Main term for the country (REQUIRED)",valueDescription:"Term value (country name) - REQUIRED"}),terms:{type:"array",items:Ee({withId:!1})},iso2:{type:"string"},iso3:{type:"string"},latitude:{type:"string"},longitude:{type:"string"}},required:["mainTerm"]},cities:{type:"object",properties:{mainTerm:be({description:"Main term for the city (REQUIRED)",valueDescription:"Term value (city name) - REQUIRED"}),terms:{type:"array",items:Ee({withId:!1})},country_id:{type:"number"},latitude:{type:"string"},longitude:{type:"string"}},required:["mainTerm"]},actions:{type:"object",properties:{mainTerm:be({description:"Main term for the action (REQUIRED)",valueDescription:"Term value (action name) - REQUIRED"}),terms:{type:"array",items:Ee({withId:!1})}},required:["mainTerm"]},objects:{type:"object",properties:{mainTerm:be({description:"Main term for the object (REQUIRED)",valueDescription:"Term value (object name) - REQUIRED"}),terms:{type:"array",items:Ee({withId:!1})},format_ids:{type:"array",items:{type:"number"}}},required:["mainTerm"]},responsibilities:{type:"object",properties:{action_id:{type:"number"},object_id:{type:"number"},mainTerm:be({description:"Main term for the responsibility (REQUIRED)",valueDescription:"Term value (responsibility name) - REQUIRED"}),terms:{type:"array",items:Ee({withId:!1})}},required:["action_id","object_id","mainTerm"]},formats:{type:"object",properties:{name:{type:"string"}},required:["name"]}},er={departments:{type:"object",properties:{mainTerm:be({description:"Main term for the department (REQUIRED)",valueDescription:"Term value (department name) - REQUIRED"}),terms:{type:"array",items:Ee({withId:!0})},color:{type:"string"}},required:["mainTerm","terms"]},professions:{type:"object",properties:{mainTerm:be({description:"Main term for the profession (REQUIRED)",valueDescription:"Term value (profession name) - REQUIRED"}),terms:{type:"array",items:Ee({withId:!0})},department_id:{type:"number"},tool_ids:{type:"array",items:{type:"number"}}},required:["mainTerm","terms"]},languages:{type:"object",properties:{mainTerm:be({description:"Main term for the language (REQUIRED)",valueDescription:"Term value (language name) - REQUIRED"}),terms:{type:"array",items:Ee({withId:!0})},iso2:{type:"string"},iso3:{type:"string"}},required:["mainTerm","terms","iso2","iso3"]},industries:{type:"object",properties:{mainTerm:be({description:"Main term for the industry (REQUIRED)",valueDescription:"Term value (industry name) - REQUIRED"}),terms:{type:"array",items:Ee({withId:!0})},description:{type:"string"},icon:{type:"string"},subIndustryIds:{type:"array",items:{type:"number"}}},required:["mainTerm","terms"]},sub_industries:{type:"object",properties:{industry_id:{type:"number"},mainTerm:be({description:"Main term for the sub-industry (REQUIRED)",valueDescription:"Term value (sub-industry name) - REQUIRED"}),terms:{type:"array",items:Ee({withId:!0})},description:{type:"string"}},required:["mainTerm","terms"]},countries:{type:"object",properties:{mainTerm:be({description:"Main term for the country (REQUIRED)",valueDescription:"Term value (country name) - REQUIRED"}),terms:{type:"array",items:Ee({withId:!0})},iso2:{type:"string"},iso3:{type:"string"},latitude:{type:"string"},longitude:{type:"string"}},required:["mainTerm","terms"]},cities:{type:"object",properties:{mainTerm:be({description:"Main term for the city (REQUIRED)",valueDescription:"Term value (city name) - REQUIRED"}),terms:{type:"array",items:Ee({withId:!0})},country_id:{type:"number"},latitude:{type:"string"},longitude:{type:"string"}},required:["mainTerm","terms"]},actions:{type:"object",properties:{mainTerm:be({description:"Main term for the action (REQUIRED)",valueDescription:"Term value (action name) - REQUIRED"}),terms:{type:"array",items:Ee({withId:!0})}},required:["mainTerm","terms"]},objects:{type:"object",properties:{mainTerm:be({description:"Main term for the object (REQUIRED)",valueDescription:"Term value (object name) - REQUIRED"}),terms:{type:"array",items:Ee({withId:!0})},format_ids:{type:"array",items:{type:"number"}}},required:["mainTerm","terms"]},responsibilities:{type:"object",properties:{action_id:{type:"number"},object_id:{type:"number"},mainTerm:be({description:"Main term for the responsibility (REQUIRED)",valueDescription:"Term value (responsibility name) - REQUIRED"}),terms:{type:"array",items:Ee({withId:!0})}},required:["mainTerm","terms"]},formats:{type:"object",properties:{name:{type:"string"}},required:["name"]}},Po=[{name:"list",description:"List entities (supports UA/RU/EN resource names)",inputSchema:{type:"object",properties:{resource:{type:"string",description:"Entity name or synonym (e.g., \u0434\u0435\u043F\u0430\u0440\u0442\u0430\u043C\u0435\u043D\u0442\u0438 | \u043E\u0442\u0434\u0435\u043B\u044B | departments)"},page:{type:"number"},limit:{type:"number"},search:{type:"string"},all:{type:"string",enum:["true","false"]},iShort:{type:"string",enum:["true","false"]}},required:["resource"]}},{name:"get",description:"Get single entity by ID (short form in light mode)",inputSchema:{type:"object",properties:{resource:{type:"string"},id:{type:"string"},iShort:{type:"string",enum:["true","false"]}},required:["resource","id"]}},{name:"create",description:'Create an entity for the given resource. Payload shape depends on resource (e.g., departments, professions, languages, etc.). For entities with terms, provide mainTerm and optional terms with correct IDs/types. IMPORTANT: When creating AI-generated content, ALWAYS include aiMetadata fields with ai_generated=true, ai_model (e.g., "gpt-4o-mini"), and ai_generation_date. This ensures proper tracking of AI-generated content.',inputSchema:{type:"object",properties:{resource:{type:"string"},payload:{type:"object"}},required:["resource","payload"],allOf:[{if:{properties:{resource:{const:"departments"}}},then:{properties:{payload:Xe.departments}}},{if:{properties:{resource:{const:"professions"}}},then:{properties:{payload:Xe.professions}}},{if:{properties:{resource:{const:"languages"}}},then:{properties:{payload:Xe.languages}}},{if:{properties:{resource:{const:"industries"}}},then:{properties:{payload:Xe.industries}}},{if:{properties:{resource:{const:"sub_industries"}}},then:{properties:{payload:Xe.sub_industries}}},{if:{properties:{resource:{const:"countries"}}},then:{properties:{payload:Xe.countries}}},{if:{properties:{resource:{const:"cities"}}},then:{properties:{payload:Xe.cities}}},{if:{properties:{resource:{const:"actions"}}},then:{properties:{payload:Xe.actions}}},{if:{properties:{resource:{const:"objects"}}},then:{properties:{payload:Xe.objects}}},{if:{properties:{resource:{const:"responsibilities"}}},then:{properties:{payload:Xe.responsibilities}}},{if:{properties:{resource:{const:"formats"}}},then:{properties:{payload:Xe.formats}}}]}},{name:"update",description:'Update an entity by ID for the given resource. Payload shape depends on resource. For term-managed entities, send the FULL terms array on update to avoid deletions (include unchanged terms with their IDs). IMPORTANT: When updating AI-generated content, ALWAYS include aiMetadata fields with ai_generated=true, ai_model (e.g., "gpt-4o-mini"), and ai_generation_date. This ensures proper tracking of AI-generated content updates.',inputSchema:{type:"object",properties:{resource:{type:"string"},id:{type:"string"},payload:{type:"object"}},required:["resource","id","payload"],allOf:[{if:{properties:{resource:{const:"departments"}}},then:{properties:{payload:er.departments}}},{if:{properties:{resource:{const:"professions"}}},then:{properties:{payload:er.professions}}},{if:{properties:{resource:{const:"languages"}}},then:{properties:{payload:er.languages}}},{if:{properties:{resource:{const:"industries"}}},then:{properties:{payload:er.industries}}},{if:{properties:{resource:{const:"sub_industries"}}},then:{properties:{payload:er.sub_industries}}},{if:{properties:{resource:{const:"countries"}}},then:{properties:{payload:er.countries}}},{if:{properties:{resource:{const:"cities"}}},then:{properties:{payload:er.cities}}},{if:{properties:{resource:{const:"actions"}}},then:{properties:{payload:er.actions}}},{if:{properties:{resource:{const:"objects"}}},then:{properties:{payload:er.objects}}},{if:{properties:{resource:{const:"responsibilities"}}},then:{properties:{payload:er.responsibilities}}},{if:{properties:{resource:{const:"formats"}}},then:{properties:{payload:er.formats}}}]}},{name:"get_term_types",description:"Get all term types",inputSchema:{type:"object",properties:{page:{type:"number",description:"Page number (default: 1)"},limit:{type:"number",description:"Number of term types per page (default: 10)"},search:{type:"string",description:"Search by term type name or description"}}}},{name:"find_existing_responsibility_terms",description:"Find existing Actions and Objects by language to check what terms already exist. Use this BEFORE adding new terms to responsibilities.",inputSchema:{type:"object",properties:{language_id:{type:"number",description:"Language ID - REQUIRED. Use get_languages to find language ID."},term_type_id:{type:"number",description:"Term type ID - REQUIRED. Use get_term_types to find term type ID."},action_id:{type:"number",description:"Action ID - REQUIRED. Use get_actions to find action ID."},object_id:{type:"number",description:"Object ID - REQUIRED. Use get_objects to find object ID."},search:{type:"string",description:"Search term (optional). Use to filter specific action-object combinations."}},required:["language_id","term_type_id","action_id","object_id"]}},{name:"create_term",description:'Create a new individual term using API token authentication. Terms can exist independently and be linked to term groups. IMPORTANT: When creating AI-generated terms, ALWAYS include aiMetadata with ai_generated=true, ai_model (e.g., "gpt-4o-mini"), and ai_generation_date for proper tracking.',inputSchema:{type:"object",properties:{value:{type:"string",description:"Term value - REQUIRED"},description:{type:"string",description:"Term description (optional)"},language_id:{type:"number",description:"Language ID - REQUIRED. Use get_languages to find language ID"},term_type_id:{type:"number",description:"Term type ID - REQUIRED. Use get_term_types to find term type ID"},status_id:{type:"number",description:"Status ID (optional). Use get_statuses to find status ID"},term_group_id:{type:"number",description:"Term group ID (optional). If provided, term will be linked to this group"},aiMetadata:{type:"object",description:"AI metadata for tracking AI-generated content (optional)",properties:{...ma}}},allOf:va,required:["value","language_id","term_type_id"]}},{name:"update_term",description:'Update an existing individual term using API token authentication. IMPORTANT: When updating AI-generated terms, ALWAYS include aiMetadata with ai_generated=true, ai_model (e.g., "gpt-4o-mini"), and ai_generation_date for proper tracking. Supports AI metadata updates, version tracking, and term group relation management.',inputSchema:{type:"object",properties:{termId:{type:"string",description:"Term ID (REQUIRED)"},value:{type:"string",description:"Term value (optional)"},description:{type:"string",description:"Term description (optional)"},language_id:{type:"number",description:"Language ID (optional). Use get_languages to find language ID"},term_type_id:{type:"number",description:"Term type ID (optional). Use get_term_types to find term type ID"},status_id:{type:"number",description:"Status ID (optional). Use get_statuses to find status ID"},term_group_id:{type:"number",description:"Term group ID (optional). For creating/updating group relation"},aiMetadata:{type:"object",description:"AI metadata updates (optional)",properties:{...ma}}},allOf:va,required:["termId"]}}];var ft=class extends Error{constructor(e){super(e),this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}toJSON(){return{name:this.name,message:this.message,code:this.code,statusCode:this.statusCode,context:this.context,stack:this.stack}}},Ze=class extends ft{constructor(e,t=500,s){super(e),this.statusCode=t,this.code="API_ERROR",this.context=s}},Tt=class extends ft{constructor(e,t){super(e),this.statusCode=408,this.code="TIMEOUT_ERROR",this.context={timeout:t}}};function It(a,e){if(a instanceof ft)return a;if(a&&typeof a=="object"){let t=a.message||String(a);if(t.includes("timeout"))return new Tt(t,e?.timeout??3e4);if(t.includes("status: 404"))return new Ze(t,404,e);if(t.includes("status: 401"))return new Ze("Authentication failed",401,e);if(t.includes("status: 403"))return new Ze("Access forbidden",403,e);let s=t.match(/status:\s*(\d+)/),r=s?parseInt(s[1],10):500;return new Ze(t,r,e)}return new Ze(a?String(a):"Unknown error occurred",500,{originalError:a,...e})}function ds(a){let e=a instanceof ft?a:It(a);return{content:[{type:"text",text:JSON.stringify({error:{message:e.message,code:e.code,type:e.name,statusCode:e.statusCode,context:e.context}},null,2)}]}}var fs=class{constructor(e={}){this.cache=new Map,this.ttl=e.ttl||3e5,this.maxSize=e.maxSize||1e3}get(e){let t=this.cache.get(e);return t?Date.now()>t.expiry?(this.cache.delete(e),null):(t.accessed=Date.now(),t.value):null}set(e,t,s){let r=s||this.ttl,n=Date.now()+r;this.cache.size>=this.maxSize&&this.evictOldest(),this.cache.set(e,{value:t,expiry:n,accessed:Date.now()})}clear(){this.cache.clear()}getStats(){return{size:this.cache.size,maxSize:this.maxSize,ttl:this.ttl}}evictOldest(){let e=null,t=Date.now();for(let[s,r]of this.cache.entries())r.accessed<t&&(t=r.accessed,e=s);e&&this.cache.delete(e)}},Ot=new fs({ttl:parseInt(process.env.CACHE_TTL_MS||"300000"),maxSize:parseInt(process.env.CACHE_MAX_SIZE||"1000")});function hs(a,e){let{url:t,headers:s,query:r,extras:n}=e||{},o={url:t||a,headers:Lf(s||{}),query:r||{},extras:n||{}};return`${o.url}:${JSON.stringify(o)}`}function Lf(a){let e={...a};return e.Authorization&&(e.Authorization="Bearer ***"),e.authorization&&(e.authorization="Bearer ***"),e}function So(a){for(let e of Ot.cache.keys())e.startsWith(a)&&Ot.cache.delete(e)}async function z(a,e={}){let t=`${dt}/api/token/${a}`,s=e.method||"GET",r=e.timeout||3e4,n=100*1024,o=new AbortController,i=setTimeout(()=>o.abort(),r),f={headers:{Authorization:`Bearer ${Rt}`,"Content-Type":"application/json",...e.headers},body:e.body,method:s,signal:o.signal};if(f.body&&typeof f.body=="string"&&f.body.length>n)throw new Ze("Request body too large",413,{endpoint:a,method:s,maxBytes:n});try{if(s==="GET"&&e.skipCache!==!0){let m=hs(a,{url:t,headers:f.headers,query:e.query,extras:e.cacheKeyExtras}),_=Ot.get(m);if(_)return clearTimeout(i),_}let u=await fetch(t,f);if(clearTimeout(i),!u.ok){let m=await u.text(),_=`HTTP error! status: ${u.status}`;try{_=JSON.parse(m).message||_}catch{}throw new Ze(_,u.status,{endpoint:a,method:s,responseBody:m})}let h=await u.json();if(s==="GET"&&e.skipCache!==!0){let m=hs(a,{url:t,headers:f.headers,query:e.query,extras:e.cacheKeyExtras});Ot.set(m,h,e.cacheTtl)}else if(s!=="GET"){let m=String(a).split("/")[0];m&&So(`${dt}/api/token/${m}`)}return h}catch(u){throw clearTimeout(i),u.name==="AbortError"?new Tt(`Request timeout after ${r}ms`,r):It(u,{endpoint:a,method:s,timeout:r})}}function De(){return process.env.MODE==="light"}function Ne(a={}){let{page:e=1,limit:t=10,search:s="",...r}=a,n=new URLSearchParams({page:String(e),limit:String(t),...s&&{search:s}});return Object.entries(r).forEach(([o,i])=>{i!=null&&n.set(o,String(i))}),De()&&(n.has("all")||n.set("all","true"),n.has("iShort")||n.set("iShort","true")),n}async function wo(a={}){let e=Ne(a);return await z(`departments?${e}`)}async function ps(a,e={}){let t=await z(`departments/${a}`);return De()&&e.iShort!==!1?{id:t?.id,name:t?.name}:t}async function Ro(a){return await z("departments",{method:"POST",body:JSON.stringify(a)})}async function To(a,e){let{preserveExistingTerms:t=!0,...s}=e;if(t){let n=(await ps(a)).terms||[];if(e.terms){let o=e.terms,i=[...n];o.forEach(f=>{let u=i.findIndex(h=>h.id===f.id);u>=0?i[u]={...i[u],...f}:i.push(f)}),s.terms=i}else s.terms=n}return await z(`departments/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function Io(a={}){let e=Ne(a);return await z(`professions?${e}`)}async function ms(a,e={}){let t=await z(`professions/${a}`);return De()&&e.iShort!==!1?{id:t?.id,name:t?.name}:t}async function Oo(a){return await z("professions",{method:"POST",body:JSON.stringify(a)})}async function $o(a,e){let{preserveExistingTerms:t=!0,...s}=e;if(t){let n=(await ms(a)).terms||[];if(e.terms){let o=e.terms,i=[...n];o.forEach(f=>{let u=i.findIndex(h=>h.id===f.id);u>=0?i[u]={...i[u],...f}:i.push(f)}),s.terms=i}else s.terms=n}return await z(`professions/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function Do(a={}){let e=Ne(a);return await z(`statuses?${e}`)}async function Ao(a,e={}){let t=await z(`statuses/${a}`);return De()&&e.iShort!==!1?{id:t?.id,name:t?.name}:t}async function jo(a){return await z("statuses",{method:"POST",body:JSON.stringify(a)})}async function Co(a,e){return await z(`statuses/${a}`,{method:"PUT",body:JSON.stringify(e)})}async function ko(a={}){let e=Ne(a);return await z(`languages?${e}`)}async function vs(a,e={}){let t=await z(`languages/${a}`);return De()&&e.iShort!==!1?{id:t?.id,name:t?.name}:t}async function No(a){return await z("languages",{method:"POST",body:JSON.stringify(a)})}async function qo(a,e){let{preserveExistingTerms:t=!0,...s}=e;if(t){let n=(await vs(a)).terms||[];if(e.terms){let o=e.terms,i=[...n];o.forEach(f=>{let u=i.findIndex(h=>h.id===f.id);u>=0?i[u]={...i[u],...f}:i.push(f)}),s.terms=i}else s.terms=n}return await z(`languages/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function ga(a={}){let e=Ne(a);return await z(`term-types?${e}`)}async function Fo(a={}){let e=Ne(a);return await z(`countries?${e}`)}async function gs(a,e={}){let t=await z(`countries/${a}`);return De()&&e.iShort!==!1?{id:t?.id,name:t?.name}:t}async function Lo(a){return await z("countries",{method:"POST",body:JSON.stringify(a)})}async function Uo(a,e){let{preserveExistingTerms:t=!0,...s}=e;if(t){let n=(await gs(a)).terms||[];if(e.terms){let o=e.terms,i=[...n];o.forEach(f=>{let u=i.findIndex(h=>h.id===f.id);u>=0?i[u]={...i[u],...f}:i.push(f)}),s.terms=i}else s.terms=n}return await z(`countries/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function Mo(a={}){let e=Ne(a);return await z(`tool-types?${e}`)}async function zo(a,e={}){let t=await z(`tool-types/${a}`);return De()&&e.iShort!==!1?{id:t?.id,name:t?.name}:t}async function Vo(a){return await z("tool-types",{method:"POST",body:JSON.stringify(a)})}async function Qo(a,e){return await z(`tool-types/${a}`,{method:"PUT",body:JSON.stringify(e)})}async function Ho(a={}){let e=Ne(a);return await z(`tools?${e}`)}async function Bo(a,e={}){let t=await z(`tools/${a}`);return De()&&e.iShort!==!1?{id:t?.id,name:t?.name}:t}async function Jo(a){return await z("tools",{method:"POST",body:JSON.stringify(a)})}async function Zo(a,e){return await z(`tools/${a}`,{method:"PUT",body:JSON.stringify(e)})}async function Ko(a={}){let e=Ne(a);return await z(`actions?${e}`)}async function ys(a,e={}){let t=await z(`actions/${a}`);return De()&&e.iShort!==!1?{id:t?.id,name:t?.name}:t}async function Go(a){return await z("actions",{method:"POST",body:JSON.stringify(a)})}async function Wo(a,e){let{preserveExistingTerms:t=!0,...s}=e;if(t){let n=(await ys(a)).terms||[];if(e.terms){let o=e.terms,i=[...n];o.forEach(f=>{let u=i.findIndex(h=>h.id===f.id);u>=0?i[u]={...i[u],...f}:i.push(f)}),s.terms=i}else s.terms=n}return await z(`actions/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function Yo(a={}){let e=Ne(a);return await z(`objects?${e}`)}async function _s(a,e={}){let t=await z(`objects/${a}`);return De()&&e.iShort!==!1?{id:t?.id,name:t?.name}:t}async function Xo(a){return await z("objects",{method:"POST",body:JSON.stringify(a)})}async function ec(a,e){let{preserveExistingTerms:t=!0,...s}=e;if(t){let n=(await _s(a)).terms||[];if(e.terms){let o=e.terms,i=[...n];o.forEach(f=>{let u=i.findIndex(h=>h.id===f.id);u>=0?i[u]={...i[u],...f}:i.push(f)}),s.terms=i}else s.terms=n}return await z(`objects/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function rc(a={}){let e=Ne(a);return await z(`formats?${e}`)}async function tc(a,e={}){let t=await z(`formats/${a}`);return De()&&e.iShort!==!1?{id:t?.id,name:t?.name}:t}async function ac(a){return await z("formats",{method:"POST",body:JSON.stringify(a)})}async function sc(a,e){return await z(`formats/${a}`,{method:"PUT",body:JSON.stringify(e)})}async function nc(a={}){let{page:e=1,limit:t=10,search:s="",language_ids:r,action_id:n,object_id:o,filters:i,all:f}=a,u=new URLSearchParams({page:e.toString(),limit:t.toString(),...s&&{search:s},...r&&{language_ids:JSON.stringify(r)},...n&&{action_id:n.toString()},...o&&{object_id:o.toString()},...i&&{filters:i},...f&&{all:f}});return await z(`responsibilities?${u}`)}async function ic(a,e={}){let t=await z(`responsibilities/${a}`);return De()&&e.iShort!==!1?{id:t?.id,name:t?.name}:t}async function oc(a){return await z("responsibilities",{method:"POST",body:JSON.stringify(a)})}async function cc(a,e){return await z(`responsibilities/${a}`,{method:"PUT",body:JSON.stringify(e)})}async function bs(a={}){let{language_id:e,term_type_id:t,action_id:s,object_id:r,search:n=""}=a,o=new URLSearchParams({language_id:e.toString(),term_type_id:t.toString(),action_id:s.toString(),object_id:r.toString(),...n&&{search:n}});return await z(`responsibilities/find-existing-terms?${o}`)}async function uc(a={}){let e=Ne(a);return await z(`cities?${e}`)}async function Es(a,e={}){let t=await z(`cities/${a}`);return De()&&e.iShort!==!1?{id:t?.id,name:t?.name}:t}async function lc(a){return await z("cities",{method:"POST",body:JSON.stringify(a)})}async function dc(a,e){let{preserveExistingTerms:t=!0,...s}=e;if(t){let n=(await Es(a)).terms||[];if(e.terms){let o=e.terms,i=[...n];o.forEach(f=>{let u=i.findIndex(h=>h.id===f.id);u>=0?i[u]={...i[u],...f}:i.push(f)}),s.terms=i}else s.terms=n}return await z(`cities/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function fc(a={}){let e=Ne(a);return await z(`industries?${e}`)}async function xs(a,e={}){let t=await z(`industries/${a}`);return De()&&e.iShort!==!1?{id:t?.id,name:t?.name}:t}async function hc(a){return await z("industries",{method:"POST",body:JSON.stringify(a)})}async function pc(a,e){let{preserveExistingTerms:t=!0,...s}=e;if(t){let n=(await xs(a)).terms||[];if(e.terms){let o=e.terms,i=[...n];o.forEach(f=>{let u=i.findIndex(h=>h.id===f.id);u>=0?i[u]={...i[u],...f}:i.push(f)}),s.terms=i}else s.terms=n}return await z(`industries/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function mc(a={}){let e=Ne(a);return await z(`sub_industries?${e}`)}async function Ps(a,e={}){let t=await z(`sub_industries/${a}`);return De()&&e.iShort!==!1?{id:t?.id,name:t?.name}:t}async function vc(a){return await z("sub_industries",{method:"POST",body:JSON.stringify(a)})}async function gc(a,e){let{preserveExistingTerms:t=!0,...s}=e;if(t){let n=(await Ps(a)).terms||[];if(e.terms){let o=e.terms,i=[...n];o.forEach(f=>{let u=i.findIndex(h=>h.id===f.id);u>=0?i[u]={...i[u],...f}:i.push(f)}),s.terms=i}else s.terms=n}return await z(`sub_industries/${a}`,{method:"PUT",body:JSON.stringify(s)})}async function Ss(a){return await z("terms",{method:"POST",body:JSON.stringify(a)})}async function ws(a,e){return await z(`terms/${a}`,{method:"PUT",body:JSON.stringify(e)})}var yc={\u0434\u0435\u043F\u0430\u0440\u0442\u0430\u043C\u0435\u043D\u0442:"departments",\u0434\u0435\u043F\u0430\u0440\u0442\u0430\u043C\u0435\u043D\u0442\u0438:"departments",\u0432\u0456\u0434\u0434\u0456\u043B:"departments",\u0432\u0456\u0434\u0434\u0456\u043B\u0438:"departments",\u043E\u0442\u0434\u0435\u043B:"departments",\u043E\u0442\u0434\u0435\u043B\u044B:"departments",department:"departments",departments:"departments",\u043F\u0440\u043E\u0444\u0435\u0441\u0456\u044F:"professions",\u043F\u0440\u043E\u0444\u0435\u0441\u0456\u0457:"professions",\u043F\u0440\u043E\u0444\u0435\u0441\u0441\u0438\u044F:"professions",\u043F\u0440\u043E\u0444\u0435\u0441\u0441\u0438\u0438:"professions",profession:"professions",professions:"professions",\u043C\u043E\u0432\u0430:"languages",\u043C\u043E\u0432\u0438:"languages",\u044F\u0437\u044B\u043A:"languages",\u044F\u0437\u044B\u043A\u0438:"languages",language:"languages",languages:"languages",\u0441\u0442\u0430\u0442\u0443\u0441:"statuses",\u0441\u0442\u0430\u0442\u0443\u0441\u0438:"statuses",\u0441\u0442\u0430\u0442\u0443\u0441\u044B:"statuses",status:"statuses",statuses:"statuses",\u043A\u0440\u0430\u0457\u043D\u0430:"countries",\u043A\u0440\u0430\u0457\u043D\u0438:"countries",\u0441\u0442\u0440\u0430\u043D\u0430:"countries",\u0441\u0442\u0440\u0430\u043D\u044B:"countries",country:"countries",countries:"countries",\u043C\u0456\u0441\u0442\u043E:"cities",\u043C\u0456\u0441\u0442\u0430:"cities",\u0433\u043E\u0440\u043E\u0434:"cities",\u0433\u043E\u0440\u043E\u0434\u0430:"cities",city:"cities",cities:"cities",\u0456\u043D\u0434\u0443\u0441\u0442\u0440\u0456\u044F:"industries",\u0456\u043D\u0434\u0443\u0441\u0442\u0440\u0456\u0457:"industries",\u0438\u043D\u0434\u0443\u0441\u0442\u0440\u0438\u044F:"industries",\u0438\u043D\u0434\u0443\u0441\u0442\u0440\u0438\u0438:"industries",industry:"industries",industries:"industries",\u0441\u0443\u0431\u0456\u043D\u0434\u0443\u0441\u0442\u0440\u0456\u044F:"sub_industries",\u0441\u0443\u0431\u0456\u043D\u0434\u0443\u0441\u0442\u0440\u0456\u0457:"sub_industries",\u0441\u0443\u0431\u0438\u043D\u0434\u0443\u0441\u0442\u0440\u0438\u044F:"sub_industries",\u0441\u0443\u0431\u0438\u043D\u0434\u0443\u0441\u0442\u0440\u0438\u0438:"sub_industries","sub-industry":"sub_industries","sub-industries":"sub_industries",\u0456\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442:"tools",\u0456\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442\u0438:"tools",\u0438\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442:"tools",\u0438\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442\u044B:"tools",tool:"tools",tools:"tools","\u0442\u0438\u043F \u0456\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442\u0443":"tool-types","\u0442\u0438\u043F\u0438 \u0456\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442\u0456\u0432":"tool-types","\u0442\u0438\u043F \u0438\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442\u0430":"tool-types","\u0442\u0438\u043F\u044B \u0438\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442\u043E\u0432":"tool-types","tool type":"tool-types","tool types":"tool-types","\u0442\u0438\u043F \u0442\u0435\u0440\u043C\u0456\u043D\u0443":"term-types","\u0442\u0438\u043F\u0438 \u0442\u0435\u0440\u043C\u0456\u043D\u0456\u0432":"term-types","\u0442\u0438\u043F \u0442\u0435\u0440\u043C\u0438\u043D\u0430":"term-types","\u0442\u0438\u043F\u044B \u0442\u0435\u0440\u043C\u0438\u043D\u043E\u0432":"term-types","term type":"term-types","term types":"term-types",\u0434\u0456\u044F:"actions",\u0434\u0456\u0457:"actions",\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435:"actions",\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F:"actions",action:"actions",actions:"actions",\u043E\u0431\u02BC\u0454\u043A\u0442:"objects",\u043E\u0431\u044A\u0435\u043A\u0442:"objects",\u043E\u0431\u044A\u0435\u043A\u0442\u044B:"objects",objects:"objects",object:"objects",\u043E\u0431\u02BC\u0454\u043A\u0442\u0438:"objects",\u0444\u043E\u0440\u043C\u0430\u0442:"formats",\u0444\u043E\u0440\u043C\u0430\u0442\u0438:"formats",\u0444\u043E\u0440\u043C\u0430\u0442\u044B:"formats",format:"formats",formats:"formats"};function ya(a){if(!a)throw new Error("Resource is required");let e=String(a).toLowerCase().trim(),t=yc[e]||null;if(!t){let s=[...new Set(Object.values(yc))].sort();throw new Error(`Unknown resource "${a}". Try one of: ${s.join(", ")}`)}return t}var _a={departments:{list:wo,get:ps,create:Ro,update:To},professions:{list:Io,get:ms,create:Oo,update:$o},languages:{list:ko,get:vs,create:No,update:qo},statuses:{list:Do,get:Ao,create:jo,update:Co},countries:{list:Fo,get:gs,create:Lo,update:Uo},cities:{list:uc,get:Es,create:lc,update:dc},industries:{list:fc,get:xs,create:hc,update:pc},sub_industries:{list:mc,get:Ps,create:vc,update:gc},tools:{list:Ho,get:Bo,create:Jo,update:Zo},"tool-types":{list:Mo,get:zo,create:Vo,update:Qo},"term-types":{list:ga},actions:{list:Ko,get:ys,create:Go,update:Wo},objects:{list:Yo,get:_s,create:Xo,update:ec},formats:{list:rc,get:tc,create:ac,update:sc},responsibilities:{list:nc,get:ic,create:oc,update:cc}};async function _c({resource:a,...e}){let t=ya(a),s=_a[t]?.list;if(!s)throw new Error(`List not supported for ${t}`);return await s(e)}async function bc({resource:a,id:e,iShort:t}){let s=ya(a),r=_a[s]?.get;if(!r)throw new Error(`Get not supported for ${s}`);return await r(e,{iShort:t})}async function Ec({resource:a,payload:e}){let t=ya(a),s=_a[t]?.create;if(!s)throw new Error(`Create not supported for ${t}`);return await s(e)}async function xc({resource:a,id:e,payload:t}){let s=ya(a),r=_a[s]?.update;if(!r)throw new Error(`Update not supported for ${s}`);return await r(e,t)}var Rs=class{constructor(e){this.requests=new Map,this.maxRequests=e.maxRequests,this.windowMs=e.windowMs}isAllowed(e){let t=Date.now(),s=this.requests.get(e)||{requests:[],blocked:0};return s.requests=s.requests.filter(r=>t-r<this.windowMs),s.requests.length>=this.maxRequests?(s.blocked++,this.requests.set(e,s),!1):(s.requests.push(t),this.requests.set(e,s),!0)}getStats(e){if(e){let t=this.requests.get(e);return{clientId:e,requests:t?.requests.length||0,blocked:t?.blocked||0}}return{totalClients:this.requests.size,totalBlocked:Array.from(this.requests.values()).reduce((t,s)=>t+s.blocked,0)}}},Pc=new Rs({maxRequests:60,windowMs:6e4});Rt||process.exit(1);dt||process.exit(1);var Ts=new fa({name:"libs-mcp-service",version:"1.0.0"},{capabilities:{tools:{}}});Ts.setRequestHandler(Na,async()=>{let a=process.env.MODE||"standard",e=["light","standard"],t=e.includes(a)?a:"standard";e.includes(a);let s=Po;return{tools:t==="light"?s.filter(n=>["list","get","create","update"].includes(n.name)):s}});Ts.setRequestHandler(qa,async a=>{let{name:e,arguments:t}=a.params,s=a?.params?.$clientId||"default-client";if(!Pc.isAllowed(s)){let r=new Ze("Rate limit exceeded",429,{clientId:s});return ds(r)}try{let r;switch(e){case"list":r=await _c(t);break;case"get":r=await bc(t);break;case"create":r=await Ec(t);break;case"update":r=await xc(t);break;case"get_term_types":r=await ga(t);break;case"find_existing_responsibility_terms":r=await bs(t);break;case"create_term":r=await Ss(t);break;case"update_term":r=await ws(t.termId,t);break;default:throw new Error(`Unhandled tool: ${e}`)}return{content:[{type:"text",text:JSON.stringify(r,null,2)}]}}catch(r){let n=It(r,{tool:e,args:t});return ds(n)}});var Uf=new pa;await Ts.connect(Uf);
/*! Bundled license information:

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)
*/
